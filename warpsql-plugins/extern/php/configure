#! /bin/sh































































































































































































































































# libtool.m4 - Configure libtool for the host system. -*-Autoconf-*-
## Copyright 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005, 2006, 2007,
## 2008  Free Software Foundation, Inc.
## Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996
##
## This file is free software; the Free Software Foundation gives
## unlimited permission to copy and/or distribute it, with or without
## modifications, as long as this notice is preserved.

# serial 52 AC_PROG_LIBTOOL


# autoconf 2.13 compatibility
# Set PATH_SEPARATOR variable
# ---------------------------------
# Find the correct PATH separator.  Usually this is :', but
# DJGPP uses ;' like DOS.
if test "X${PATH_SEPARATOR+set}" != Xset; then
  UNAME=${UNAME-`uname 2>/dev/null`}
  case X$UNAME in
    *-DOS) lt_cv_sys_path_separator=';' ;;
    *)     lt_cv_sys_path_separator=':' ;;
  esac
  PATH_SEPARATOR=$lt_cv_sys_path_separator
fi


# AC_PROVIDE_IFELSE(MACRO-NAME, IF-PROVIDED, IF-NOT-PROVIDED)
# -----------------------------------------------------------
# If this macro is not defined by Autoconf, define it here.


# AC_PROG_LIBTOOL
# ---------------
# AC_PROG_LIBTOOL


# _AC_PROG_LIBTOOL
# ----------------
# _AC_PROG_LIBTOOL


# AC_LIBTOOL_SETUP
# ----------------
# AC_LIBTOOL_SETUP


# _LT_AC_SYS_COMPILER
# -------------------
# _LT_AC_SYS_COMPILER


# _LT_CC_BASENAME(CC)
# -------------------
# Calculate cc_basename.  Skip known compiler wrappers and cross-prefix.



# _LT_COMPILER_BOILERPLATE
# ------------------------
# Check for compiler boilerplate output or warnings with
# the simple compiler test code.
# _LT_COMPILER_BOILERPLATE


# _LT_LINKER_BOILERPLATE
# ----------------------
# Check for linker boilerplate output or warnings with
# the simple link test code.
# _LT_LINKER_BOILERPLATE




# _LT_REQUIRED_DARWIN_CHECKS
# --------------------------
# Check for some things on darwin


# _LT_AC_SYS_LIBPATH_AIX
# ----------------------
# Links a minimal program and checks the executable
# for the system default hardcoded library path. In most cases,
# this is /usr/lib:/lib, but when the MPI compilers are used
# the location of the communication and MPI libs are included too.
# If we don't find anything, use the default library path according
# to the aix ld manual.
# _LT_AC_SYS_LIBPATH_AIX


# _LT_AC_SHELL_INIT(ARG)
# ----------------------
# _LT_AC_SHELL_INIT


# _LT_AC_PROG_ECHO_BACKSLASH
# --------------------------
# Add some code to the start of the generated configure script which
# will find an echo command which doesn't interpret backslashes.
# _LT_AC_PROG_ECHO_BACKSLASH


# _LT_AC_LOCK
# -----------
# _LT_AC_LOCK


# AC_LIBTOOL_COMPILER_OPTION(MESSAGE, VARIABLE-NAME, FLAGS,
#		[OUTPUT-FILE], [ACTION-SUCCESS], [ACTION-FAILURE])
# ----------------------------------------------------------------
# Check whether the given compiler option works
# AC_LIBTOOL_COMPILER_OPTION


# AC_LIBTOOL_LINKER_OPTION(MESSAGE, VARIABLE-NAME, FLAGS,
#                          [ACTION-SUCCESS], [ACTION-FAILURE])
# ------------------------------------------------------------
# Check whether the given compiler option works
# AC_LIBTOOL_LINKER_OPTION


# AC_LIBTOOL_SYS_MAX_CMD_LEN
# --------------------------
# AC_LIBTOOL_SYS_MAX_CMD_LEN


# _LT_AC_CHECK_DLFCN
# ------------------
# _LT_AC_CHECK_DLFCN


# _LT_AC_TRY_DLOPEN_SELF (ACTION-IF-TRUE, ACTION-IF-TRUE-W-USCORE,
#                           ACTION-IF-FALSE, ACTION-IF-CROSS-COMPILING)
# ---------------------------------------------------------------------
# _LT_AC_TRY_DLOPEN_SELF


# AC_LIBTOOL_DLOPEN_SELF
# ----------------------
# AC_LIBTOOL_DLOPEN_SELF


# AC_LIBTOOL_PROG_CC_C_O([TAGNAME])
# ---------------------------------
# Check to see if options -c and -o are simultaneously supported by compiler
# AC_LIBTOOL_PROG_CC_C_O


# AC_LIBTOOL_SYS_HARD_LINK_LOCKS([TAGNAME])
# -----------------------------------------
# Check to see if we can do hard links to lock some files if needed
# AC_LIBTOOL_SYS_HARD_LINK_LOCKS


# AC_LIBTOOL_OBJDIR
# -----------------
# AC_LIBTOOL_OBJDIR


# AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH([TAGNAME])
# ----------------------------------------------
# Check hardcoding attributes.
# AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH


# AC_LIBTOOL_SYS_LIB_STRIP
# ------------------------
# AC_LIBTOOL_SYS_LIB_STRIP


# AC_LIBTOOL_SYS_DYNAMIC_LINKER
# -----------------------------
# PORTME Fill in your ld.so characteristics
# AC_LIBTOOL_SYS_DYNAMIC_LINKER


# _LT_AC_TAGCONFIG
# ----------------
# _LT_AC_TAGCONFIG


# AC_LIBTOOL_DLOPEN
# -----------------
# enable checks for dlopen support
# AC_LIBTOOL_DLOPEN


# AC_LIBTOOL_WIN32_DLL
# --------------------
# declare package support for building win32 DLLs
# AC_LIBTOOL_WIN32_DLL


# AC_ENABLE_SHARED([DEFAULT])
# ---------------------------
# implement the --enable-shared flag
# DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
# AC_ENABLE_SHARED


# AC_DISABLE_SHARED
# -----------------
# set the default shared flag to --disable-shared
# AC_DISABLE_SHARED


# AC_ENABLE_STATIC([DEFAULT])
# ---------------------------
# implement the --enable-static flag
# DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
# AC_ENABLE_STATIC


# AC_DISABLE_STATIC
# -----------------
# set the default static flag to --disable-static
# AC_DISABLE_STATIC


# AC_ENABLE_FAST_INSTALL([DEFAULT])
# ---------------------------------
# implement the --enable-fast-install flag
# DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
# AC_ENABLE_FAST_INSTALL


# AC_DISABLE_FAST_INSTALL
# -----------------------
# set the default to --disable-fast-install
# AC_DISABLE_FAST_INSTALL


# AC_LIBTOOL_PICMODE([MODE])
# --------------------------
# implement the --with-pic flag
# MODE is either `yes' or `no'.  If omitted, it defaults to `both'.
# AC_LIBTOOL_PICMODE


# AC_PROG_EGREP
# -------------



# AC_PATH_TOOL_PREFIX
# -------------------
# find a file program which can recognize shared library
# AC_PATH_TOOL_PREFIX


# AC_PATH_MAGIC
# -------------
# find a file program which can recognize a shared library
# AC_PATH_MAGIC


# AC_PROG_LD
# ----------
# find the pathname to the GNU or non-GNU linker
# AC_PROG_LD


# AC_PROG_LD_GNU
# --------------
# AC_PROG_LD_GNU


# AC_PROG_LD_RELOAD_FLAG
# ----------------------
# find reload flag for linker
#   -- PORTME Some linkers may need a different reload flag.
# AC_PROG_LD_RELOAD_FLAG


# AC_DEPLIBS_CHECK_METHOD
# -----------------------
# how to check for library dependencies
#  -- PORTME fill in with the dynamic library characteristics
# AC_DEPLIBS_CHECK_METHOD


# AC_PROG_NM
# ----------
# find the pathname to a BSD-compatible name lister
# AC_PROG_NM


# AC_CHECK_LIBM
# -------------
# check for math library
# AC_CHECK_LIBM


# AC_LIBLTDL_CONVENIENCE([DIRECTORY])
# -----------------------------------
# sets LIBLTDL to the link flags for the libltdl convenience library and
# LTDLINCL to the include flags for the libltdl header and adds
# --enable-ltdl-convenience to the configure arguments.  Note that
# AC_CONFIG_SUBDIRS is not called here.  If DIRECTORY is not provided,
# it is assumed to be `libltdl'.  LIBLTDL will be prefixed with
# '${top_builddir}/' and LTDLINCL will be prefixed with '${top_srcdir}/'
# (note the single quotes!).  If your package is not flat and you're not
# using automake, define top_builddir and top_srcdir appropriately in
# the Makefiles.
# AC_LIBLTDL_CONVENIENCE


# AC_LIBLTDL_INSTALLABLE([DIRECTORY])
# -----------------------------------
# sets LIBLTDL to the link flags for the libltdl installable library and
# LTDLINCL to the include flags for the libltdl header and adds
# --enable-ltdl-install to the configure arguments.  Note that
# AC_CONFIG_SUBDIRS is not called here.  If DIRECTORY is not provided,
# and an installed libltdl is not found, it is assumed to be `libltdl'.
# LIBLTDL will be prefixed with '${top_builddir}/'# and LTDLINCL with
# '${top_srcdir}/' (note the single quotes!).  If your package is not
# flat and you're not using automake, define top_builddir and top_srcdir
# appropriately in the Makefiles.
# In the future, this macro may have to be called after AC_PROG_LIBTOOL.
# AC_LIBLTDL_INSTALLABLE


# AC_LIBTOOL_CXX
# --------------
# enable support for C++ libraries
# AC_LIBTOOL_CXX


# _LT_AC_LANG_CXX
# ---------------
# _LT_AC_LANG_CXX

# _LT_AC_PROG_CXXCPP
# ------------------
# _LT_AC_PROG_CXXCPP

# AC_LIBTOOL_LANG_C_CONFIG
# ------------------------
# Ensure that the configuration vars for the C compiler are
# suitably defined.  Those variables are subsequently used by
# AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.

# AC_LIBTOOL_LANG_C_CONFIG


# AC_LIBTOOL_LANG_CXX_CONFIG
# --------------------------
# Ensure that the configuration vars for the C compiler are
# suitably defined.  Those variables are subsequently used by
# AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.

# AC_LIBTOOL_LANG_CXX_CONFIG

# AC_LIBTOOL_POSTDEP_PREDEP([TAGNAME])
# ------------------------------------
# Figure out "hidden" library dependencies from verbose
# compiler output when linking a shared library.
# Parse the compiler output and extract the necessary
# objects, libraries and library flags.
# AC_LIBTOOL_POSTDEP_PREDEP

# AC_LIBTOOL_CONFIG([TAGNAME])
# ----------------------------
# If TAGNAME is not passed, then create an initial libtool script
# with a default configuration from the untagged config vars.  Otherwise
# add code to config.status for appending the configuration named by
# TAGNAME from the matching tagged config vars.
# AC_LIBTOOL_CONFIG


# AC_LIBTOOL_PROG_COMPILER_NO_RTTI([TAGNAME])
# -------------------------------------------
# AC_LIBTOOL_PROG_COMPILER_NO_RTTI


# AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE
# ---------------------------------
 # AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE


# AC_LIBTOOL_PROG_COMPILER_PIC([TAGNAME])
# ---------------------------------------



# AC_LIBTOOL_PROG_LD_SHLIBS([TAGNAME])
# ------------------------------------
# See if the linker supports building shared libraries.
# AC_LIBTOOL_PROG_LD_SHLIBS


# _LT_AC_FILE_LTDLL_C
# -------------------
# Be careful that the start marker always follows a newline.
# _LT_AC_FILE_LTDLL_C


# _LT_AC_TAGVAR(VARNAME, [TAGNAME])
# ---------------------------------



# old names








# This is just to silence aclocal about the macro not being used


############################################################
# NOTE: This macro has been submitted for inclusion into   #
#  GNU Autoconf as AC_PROG_SED.  When it is available in   #
#  a released version of Autoconf we should remove this    #
#  macro and use it instead.                               #
############################################################
# LT_AC_PROG_SED
# --------------
# Check for a fully-functional sed program, that truncates
# as few characters as possible.  Prefer GNU sed if found.

# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.13 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_help="$ac_help
  --with-libdir=NAME      Look for libraries in .../NAME rather than .../lib"
ac_help="$ac_help
  --disable-rpath         Disable passing additional runtime library
                          search paths"
ac_help="$ac_help
  --enable-re2c-cgoto     Enable -g flag to re2c to use computed goto gcc extension"
ac_help="$ac_help

SAPI modules:
"
ac_help="$ac_help
  --with-aolserver=DIR    Specify path to the installed AOLserver"
ac_help="$ac_help
  --with-apxs[=FILE]      Build shared Apache 1.x module. FILE is the optional
                          pathname to the Apache apxs tool [apxs]"
ac_help="$ac_help
  --with-apache[=DIR]     Build Apache 1.x module. DIR is the top-level Apache
                          build directory [/usr/local/apache]"
ac_help="$ac_help
  --enable-mod-charset      APACHE: Enable transfer tables for mod_charset (Rus Apache)"
ac_help="$ac_help
  --with-apxs2filter[=FILE]   
                          EXPERIMENTAL: Build shared Apache 2.0 Filter module. FILE is the optional
                          pathname to the Apache apxs tool [apxs]"
ac_help="$ac_help
  --with-apxs2[=FILE]     Build shared Apache 2.0 Handler module. FILE is the optional
                          pathname to the Apache apxs tool [apxs]"
ac_help="$ac_help
  --with-apache-hooks[=FILE]      
                          EXPERIMENTAL: Build shared Apache 1.x module. FILE is the optional
                          pathname to the Apache apxs tool [apxs]"
ac_help="$ac_help
  --with-apache-hooks-static[=DIR]
                          EXPERIMENTAL: Build Apache 1.x module. DIR is the top-level Apache
                          build directory [/usr/local/apache]"
ac_help="$ac_help
  --enable-mod-charset      APACHE (hooks): Enable transfer tables for mod_charset (Rus Apache)"
ac_help="$ac_help
  --with-caudium[=DIR]    Build PHP as a Pike module for use with Caudium.
                          DIR is the Caudium server dir [/usr/local/caudium/server]"
ac_help="$ac_help
  --disable-cli           Disable building CLI version of PHP
                          (this forces --without-pear)"
ac_help="$ac_help
  --with-continuity=DIR   Build PHP as Continuity Server module. 
                          DIR is path to the installed Continuity Server root"
ac_help="$ac_help
  --enable-embed[=TYPE]   EXPERIMENTAL: Enable building of embedded SAPI library
                          TYPE is either 'shared' or 'static'. [TYPE=shared]"
ac_help="$ac_help
  --enable-fpm              EXPERIMENTAL: Enable building of the fpm SAPI executable"
ac_help="$ac_help
  --with-fpm-user[=USER]  Set the user for php-fpm to run as. (default: nobody)"
ac_help="$ac_help
  --with-fpm-group[=GRP]  Set the group for php-fpm to run as. For a system user, this 
                  should usually be set to match the fpm username (default: nobody)"
ac_help="$ac_help
  --with-isapi[=DIR]      Build PHP as an ISAPI module for use with Zeus"
ac_help="$ac_help
  --with-litespeed        Build PHP as litespeed module"
ac_help="$ac_help
  --with-milter[=DIR]     Build PHP as Milter application"
ac_help="$ac_help
  --with-nsapi=DIR        Build PHP as NSAPI module for Netscape/iPlanet/Sun Webserver"
ac_help="$ac_help
  --with-phttpd=DIR       Build PHP as phttpd module"
ac_help="$ac_help
  --with-pi3web[=DIR]     Build PHP as Pi3Web module"
ac_help="$ac_help
  --with-roxen=DIR        Build PHP as a Pike module. DIR is the base Roxen
                          directory, normally /usr/local/roxen/server"
ac_help="$ac_help
  --enable-roxen-zts        ROXEN: Build the Roxen module using Zend Thread Safety"
ac_help="$ac_help
  --with-thttpd=SRCDIR    Build PHP as thttpd module"
ac_help="$ac_help
  --with-tux=MODULEDIR    Build PHP as a TUX module (Linux only)"
ac_help="$ac_help
  --with-webjames=SRCDIR  Build PHP as a WebJames module (RISC OS only)"
ac_help="$ac_help
  --disable-cgi           Disable building CGI version of PHP"
ac_help="$ac_help

General settings:
"
ac_help="$ac_help
  --enable-gcov           Enable GCOV code coverage (requires LTP) - FOR DEVELOPERS ONLY!!"
ac_help="$ac_help
  --enable-debug          Compile with debugging symbols"
ac_help="$ac_help
  --with-layout=TYPE      Set how installed files will be laid out.  Type can
                          be either PHP or GNU [PHP]"
ac_help="$ac_help
  --with-config-file-path=PATH
                          Set the path in which to look for php.ini [PREFIX/lib]"
ac_help="$ac_help
  --with-config-file-scan-dir=PATH
                          Set the path where to scan for configuration files"
ac_help="$ac_help
  --enable-safe-mode      Enable safe mode by default"
ac_help="$ac_help
  --with-exec-dir[=DIR]   Only allow executables in DIR under safe-mode
                          [/usr/local/php/bin]"
ac_help="$ac_help
  --enable-sigchild       Enable PHP's own SIGCHLD handler"
ac_help="$ac_help
  --enable-magic-quotes   Enable magic quotes by default."
ac_help="$ac_help
  --enable-libgcc         Enable explicitly linking against libgcc"
ac_help="$ac_help
  --disable-short-tags    Disable the short-form <? start tag by default"
ac_help="$ac_help
  --enable-dmalloc        Enable dmalloc"
ac_help="$ac_help
  --disable-ipv6          Disable IPv6 support"
ac_help="$ac_help
  --enable-fd-setsize     Set size of descriptor sets"
ac_help="$ac_help

Extensions:

  --with-EXTENSION=[shared[,PATH]]
  
    NOTE: Not all extensions can be build as 'shared'.

    Example: --with-foobar=shared,/usr/local/foobar/

      o Builds the foobar extension as shared extension.
      o foobar package install prefix is /usr/local/foobar/

"
ac_help="$ac_help
 --disable-all   Disable all extensions which are enabled by default
"
ac_help="$ac_help
  --with-regex=TYPE       regex library type: system, php. [TYPE=php]
                          WARNING: Do NOT use unless you know what you are doing!"
ac_help="$ac_help
  --disable-libxml        Disable LIBXML support"
ac_help="$ac_help
  --with-libxml-dir[=DIR]   LIBXML: libxml2 install prefix"
ac_help="$ac_help
  --with-openssl[=DIR]    Include OpenSSL support (requires OpenSSL >= 0.9.6)"
ac_help="$ac_help
  --with-kerberos[=DIR]     OPENSSL: Include Kerberos support"
ac_help="$ac_help
  --with-pcre-regex=DIR   Include Perl Compatible Regular Expressions support.
                          DIR is the PCRE install prefix [BUNDLED]"
ac_help="$ac_help
  --without-sqlite3[=DIR] Do not include SQLite3 support. DIR is the prefix to
                          SQLite3 installation directory."
ac_help="$ac_help
  --with-zlib[=DIR]       Include ZLIB support (requires zlib >= 1.0.9)"
ac_help="$ac_help
  --with-zlib-dir=<DIR>   Define the location of zlib install directory"
ac_help="$ac_help
  --enable-bcmath         Enable bc style precision math functions"
ac_help="$ac_help
  --with-bz2[=DIR]        Include BZip2 support"
ac_help="$ac_help
  --enable-calendar       Enable support for calendar conversion"
ac_help="$ac_help
  --disable-ctype         Disable ctype functions"
ac_help="$ac_help
  --with-curl[=DIR]       Include cURL support"
ac_help="$ac_help
  --with-curlwrappers     EXPERIMENTAL: Use cURL for url streams"
ac_help="$ac_help
  --enable-dba            Build DBA with bundled modules. To build shared DBA
                          extension use --enable-dba=shared"
ac_help="$ac_help
  --with-qdbm[=DIR]         DBA: QDBM support"
ac_help="$ac_help
  --with-gdbm[=DIR]         DBA: GDBM support"
ac_help="$ac_help
  --with-ndbm[=DIR]         DBA: NDBM support"
ac_help="$ac_help
  --with-db4[=DIR]          DBA: Oracle Berkeley DB 4.x or 5.x support"
ac_help="$ac_help
  --with-db3[=DIR]          DBA: Oracle Berkeley DB 3.x support"
ac_help="$ac_help
  --with-db2[=DIR]          DBA: Oracle Berkeley DB 2.x support"
ac_help="$ac_help
  --with-db1[=DIR]          DBA: Oracle Berkeley DB 1.x support/emulation"
ac_help="$ac_help
  --with-dbm[=DIR]          DBA: DBM support"
ac_help="$ac_help
  --without-cdb[=DIR]       DBA: CDB support (bundled)"
ac_help="$ac_help
  --disable-inifile         DBA: INI support (bundled)"
ac_help="$ac_help
  --disable-flatfile        DBA: FlatFile support (bundled)"
ac_help="$ac_help
  --disable-dom           Disable DOM support"
ac_help="$ac_help
  --with-libxml-dir[=DIR]   DOM: libxml2 install prefix"
ac_help="$ac_help
  --with-enchant[=DIR]     Include enchant support.
                          GNU Aspell version 1.1.3 or higher required."
ac_help="$ac_help
  --enable-exif           Enable EXIF (metadata from images) support"
ac_help="$ac_help
  --disable-fileinfo      Disable fileinfo support"
ac_help="$ac_help
  --disable-filter        Disable input filter support"
ac_help="$ac_help
  --with-pcre-dir           FILTER: pcre install prefix"
ac_help="$ac_help
  --enable-ftp            Enable FTP support"
ac_help="$ac_help
  --with-openssl-dir[=DIR]  FTP: openssl install prefix"
ac_help="$ac_help
  --with-gd[=DIR]         Include GD support.  DIR is the GD library base
                          install directory [BUNDLED]"
ac_help="$ac_help
  --with-jpeg-dir[=DIR]     GD: Set the path to libjpeg install prefix"
ac_help="$ac_help
  --with-png-dir[=DIR]      GD: Set the path to libpng install prefix"
ac_help="$ac_help
  --with-zlib-dir[=DIR]     GD: Set the path to libz install prefix"
ac_help="$ac_help
  --with-xpm-dir[=DIR]      GD: Set the path to libXpm install prefix"
ac_help="$ac_help
  --with-freetype-dir[=DIR] GD: Set the path to FreeType 2 install prefix"
ac_help="$ac_help
  --with-t1lib[=DIR]        GD: Include T1lib support. T1lib version >= 5.0.0 required"
ac_help="$ac_help
  --enable-gd-native-ttf    GD: Enable TrueType string function"
ac_help="$ac_help
  --enable-gd-jis-conv      GD: Enable JIS-mapped Japanese font support"
ac_help="$ac_help
  --with-gettext[=DIR]    Include GNU gettext support"
ac_help="$ac_help
  --with-gmp[=DIR]        Include GNU MP support"
ac_help="$ac_help
  --with-mhash[=DIR]      Include mhash support"
ac_help="$ac_help
  --disable-hash          Disable hash support"
ac_help="$ac_help
  --without-iconv[=DIR]   Exclude iconv support"
ac_help="$ac_help
  --with-imap[=DIR]       Include IMAP support. DIR is the c-client install prefix"
ac_help="$ac_help
  --with-kerberos[=DIR]     IMAP: Include Kerberos support. DIR is the Kerberos install prefix"
ac_help="$ac_help
  --with-imap-ssl[=DIR]     IMAP: Include SSL support. DIR is the OpenSSL install prefix"
ac_help="$ac_help
  --with-interbase[=DIR]  Include InterBase support.  DIR is the InterBase base
                          install directory [/usr/interbase]"
ac_help="$ac_help
  --enable-intl           Enable internationalization support"
ac_help="$ac_help
  --with-icu-dir=DIR      Specify where ICU libraries and headers can be found"
ac_help="$ac_help
  --disable-json          Disable JavaScript Object Serialization support"
ac_help="$ac_help
  --with-ldap[=DIR]       Include LDAP support"
ac_help="$ac_help
  --with-ldap-sasl[=DIR]    LDAP: Include Cyrus SASL support"
ac_help="$ac_help
  --enable-mbstring       Enable multibyte string support"
ac_help="$ac_help
  --disable-mbregex         MBSTRING: Disable multibyte regex support"
ac_help="$ac_help
  --disable-mbregex-backtrack
                            MBSTRING: Disable multibyte regex backtrack check"
ac_help="$ac_help
  --with-libmbfl[=DIR]      MBSTRING: Use external libmbfl.  DIR is the libmbfl base
                            install directory [BUNDLED]"
ac_help="$ac_help
  --with-onig[=DIR]         MBSTRING: Use external oniguruma. DIR is the oniguruma install prefix.
                            If DIR is not set, the bundled oniguruma will be used"
ac_help="$ac_help
  --with-mcrypt[=DIR]     Include mcrypt support"
ac_help="$ac_help
  --with-mssql[=DIR]      Include MSSQL-DB support.  DIR is the FreeTDS home
                          directory [/usr/local/freetds]"
ac_help="$ac_help
  --with-mysql[=DIR]      Include MySQL support.  DIR is the MySQL base
                          directory.  If mysqlnd is passed as DIR, 
                          the MySQL native driver will be used [/usr/local]"
ac_help="$ac_help
  --with-mysql-sock[=DIR]   MySQL/MySQLi/PDO_MYSQL: Location of the MySQL unix socket pointer.
                            If unspecified, the default locations are searched"
ac_help="$ac_help
  --with-zlib-dir[=DIR]     MySQL: Set the path to libz install prefix"
ac_help="$ac_help
  --with-mysqli[=FILE]    Include MySQLi support.  FILE is the path
                          to mysql_config.  If mysqlnd is passed as FILE,
                          the MySQL native driver will be used [mysql_config]"
ac_help="$ac_help
  --enable-embedded-mysqli  MYSQLi: Enable embedded support
                            Note: Does not work with MySQL native driver!"
ac_help="$ac_help
  --with-oci8[=DIR]       Include Oracle Database OCI8 support. DIR defaults to \$ORACLE_HOME.
                          Use --with-oci8=instantclient,/path/to/instant/client/lib 
                          to use an Oracle Instant Client installation"
ac_help="$ac_help
  --with-adabas[=DIR]     Include Adabas D support [/usr/local]"
ac_help="$ac_help
  --with-sapdb[=DIR]      Include SAP DB support [/usr/local]"
ac_help="$ac_help
  --with-solid[=DIR]      Include Solid support [/usr/local/solid]"
ac_help="$ac_help
  --with-ibm-db2[=DIR]    Include IBM DB2 support [/home/db2inst1/sqllib]"
ac_help="$ac_help
  --with-ODBCRouter[=DIR] Include ODBCRouter.com support [/usr]"
ac_help="$ac_help
  --with-empress[=DIR]    Include Empress support [\$EMPRESSPATH]
                          (Empress Version >= 8.60 required)"
ac_help="$ac_help
  --with-empress-bcs[=DIR]
                          Include Empress Local Access support [\$EMPRESSPATH]
                          (Empress Version >= 8.60 required)"
ac_help="$ac_help
  --with-birdstep[=DIR]   Include Birdstep support [/usr/local/birdstep]"
ac_help="$ac_help
  --with-custom-odbc[=DIR]
                          Include user defined ODBC support. DIR is ODBC install base
                          directory [/usr/local]. Make sure to define CUSTOM_ODBC_LIBS and
                          have some odbc.h in your include dirs. f.e. you should define 
                          following for Sybase SQL Anywhere 5.5.00 on QNX, prior to
                          running this configure script:
                              CPPFLAGS=\"-DODBC_QNX -DSQLANY_BUG\"
                              LDFLAGS=-lunix
                              CUSTOM_ODBC_LIBS=\"-ldblib -lodbc\""
ac_help="$ac_help
  --with-iodbc[=DIR]      Include iODBC support [/usr/local]"
ac_help="$ac_help
  --with-esoob[=DIR]      Include Easysoft OOB support [/usr/local/easysoft/oob/client]"
ac_help="$ac_help
  --with-unixODBC[=DIR]   Include unixODBC support [/usr/local]"
ac_help="$ac_help
  --with-dbmaker[=DIR]    Include DBMaker support"
ac_help="$ac_help
  --enable-pcntl          Enable pcntl support (CLI/CGI only)"
ac_help="$ac_help
  --disable-pdo           Disable PHP Data Objects support"
ac_help="$ac_help
  --with-pdo-dblib[=DIR]    PDO: DBLIB-DB support.  DIR is the FreeTDS home directory"
ac_help="$ac_help
  --with-pdo-firebird[=DIR] PDO: Firebird support.  DIR is the Firebird base
                            install directory [/opt/firebird]"
ac_help="$ac_help
  --with-pdo-mysql[=DIR]    PDO: MySQL support. DIR is the MySQL base directory
                                 If mysqlnd is passed as DIR, the MySQL native
                                 native driver will be used [/usr/local]"
ac_help="$ac_help
  --with-zlib-dir[=DIR]       PDO_MySQL: Set the path to libz install prefix"
ac_help="$ac_help
  --with-pdo-oci[=DIR]      PDO: Oracle OCI support. DIR defaults to \$ORACLE_HOME.
                            Use --with-pdo-oci=instantclient,prefix,version 
                            for an Oracle Instant Client SDK. 
                            For example on Linux with 11.2 RPMs use:
                            --with-pdo-oci=instantclient,/usr,11.2
                            With 10.2 RPMs use:
                            --with-pdo-oci=instantclient,/usr,10.2.0.4"
ac_help="$ac_help
  --with-pdo-odbc=flavour,dir
                            PDO: Support for 'flavour' ODBC driver.
                            include and lib dirs are looked for under 'dir'.
                            
                            'flavour' can be one of:  ibm-db2, iODBC, unixODBC, generic
                            If ',dir' part is omitted, default for the flavour 
                            you have selected will used. e.g.:
                            
                              --with-pdo-odbc=unixODBC
                              
                            will check for unixODBC under /usr/local. You may attempt 
                            to use an otherwise unsupported driver using the \"generic\" 
                            flavour.  The syntax for generic ODBC support is:
                            
                              --with-pdo-odbc=generic,dir,libname,ldflags,cflags

                            When build as shared the extension filename is always pdo_odbc.so"
ac_help="$ac_help
  --with-pdo-pgsql[=DIR]    PDO: PostgreSQL support.  DIR is the PostgreSQL base
                            install directory or the path to pg_config"
ac_help="$ac_help
  --without-pdo-sqlite[=DIR]
                            PDO: sqlite 3 support.  DIR is the sqlite base
                            install directory [BUNDLED]"
ac_help="$ac_help
  --with-pgsql[=DIR]      Include PostgreSQL support.  DIR is the PostgreSQL
                          base install directory or the path to pg_config"
ac_help="$ac_help
  --disable-phar          Disable phar support"
ac_help="$ac_help
  --disable-posix         Disable POSIX-like functions"
ac_help="$ac_help
  --with-pspell[=DIR]     Include PSPELL support.
                          GNU Aspell version 0.50.0 or higher required"
ac_help="$ac_help
  --with-libedit[=DIR]    Include libedit readline replacement (CLI/CGI only)"
ac_help="$ac_help
  --with-readline[=DIR]   Include readline support (CLI/CGI only)"
ac_help="$ac_help
  --with-recode[=DIR]     Include recode support"
ac_help="$ac_help
  --disable-session       Disable session support"
ac_help="$ac_help
  --with-mm[=DIR]           SESSION: Include mm support for session storage"
ac_help="$ac_help
  --enable-shmop          Enable shmop support"
ac_help="$ac_help
  --disable-simplexml     Disable SimpleXML support"
ac_help="$ac_help
  --with-libxml-dir=DIR     SimpleXML: libxml2 install prefix"
ac_help="$ac_help
  --with-snmp[=DIR]       Include SNMP support"
ac_help="$ac_help
  --with-openssl-dir[=DIR]  SNMP: openssl install prefix"
ac_help="$ac_help
  --enable-ucd-snmp-hack    SNMP: Enable UCD SNMP hack"
ac_help="$ac_help
  --enable-soap           Enable SOAP support"
ac_help="$ac_help
  --with-libxml-dir=DIR     SOAP: libxml2 install prefix"
ac_help="$ac_help
  --enable-sockets        Enable sockets support"
ac_help="$ac_help
  --without-sqlite=DIR    Do not include sqlite support.  DIR is the sqlite base
                          install directory [BUNDLED]"
ac_help="$ac_help
  --enable-sqlite-utf8      SQLite: Enable UTF-8 support for SQLite"
ac_help="$ac_help
  --with-sybase-ct[=DIR]  Include Sybase-CT support.  DIR is the Sybase home
                          directory [/home/sybase]"
ac_help="$ac_help
  --enable-sysvmsg        Enable sysvmsg support"
ac_help="$ac_help
  --enable-sysvsem        Enable System V semaphore support"
ac_help="$ac_help
  --enable-sysvshm        Enable the System V shared memory support"
ac_help="$ac_help
  --with-tidy[=DIR]       Include TIDY support"
ac_help="$ac_help
  --disable-tokenizer     Disable tokenizer support"
ac_help="$ac_help
  --enable-wddx           Enable WDDX support"
ac_help="$ac_help
  --with-libxml-dir=DIR     WDDX: libxml2 install prefix"
ac_help="$ac_help
  --with-libexpat-dir=DIR   WDDX: libexpat dir for XMLRPC-EPI (deprecated)"
ac_help="$ac_help
  --disable-xml           Disable XML support"
ac_help="$ac_help
  --with-libxml-dir=DIR     XML: libxml2 install prefix"
ac_help="$ac_help
  --with-libexpat-dir=DIR   XML: libexpat install prefix (deprecated)"
ac_help="$ac_help
  --disable-xmlreader     Disable XMLReader support"
ac_help="$ac_help
  --with-libxml-dir=DIR     XMLReader: libxml2 install prefix"
ac_help="$ac_help
  --with-xmlrpc[=DIR]     Include XMLRPC-EPI support"
ac_help="$ac_help
  --with-libxml-dir=DIR     XMLRPC-EPI: libxml2 install prefix"
ac_help="$ac_help
  --with-libexpat-dir=DIR   XMLRPC-EPI: libexpat dir for XMLRPC-EPI (deprecated)"
ac_help="$ac_help
  --with-iconv-dir=DIR      XMLRPC-EPI: iconv dir for XMLRPC-EPI"
ac_help="$ac_help
  --disable-xmlwriter     Disable XMLWriter support"
ac_help="$ac_help
  --with-libxml-dir=DIR     XMLWriter: libxml2 install prefix"
ac_help="$ac_help
  --with-xsl[=DIR]        Include XSL support.  DIR is the libxslt base
                          install directory (libxslt >= 1.1.0 required)"
ac_help="$ac_help
  --enable-zip            Include Zip read/write support"
ac_help="$ac_help
  --with-zlib-dir[=DIR]     ZIP: Set the path to libz install prefix"
ac_help="$ac_help
  --with-pcre-dir           ZIP: pcre install prefix"
ac_help="$ac_help
  --enable-mysqlnd        Enable mysqlnd explicitly, will be done implicitly
                          when required by other extensions"
ac_help="$ac_help
  --disable-mysqlnd-compression-support
                            Disable support for the MySQL compressed protocol in mysqlnd"
ac_help="$ac_help
  --with-zlib-dir[=DIR]       mysqlnd: Set the path to libz install prefix"
ac_help="$ac_help

PEAR:
"
ac_help="$ac_help
  --with-pear=DIR         Install PEAR in DIR [PREFIX/lib/php]
  --without-pear          Do not install PEAR"
ac_help="$ac_help

Zend:
"
ac_help="$ac_help
  --with-zend-vm=TYPE     Set virtual machine dispatch method. Type is
                          one of "CALL", "SWITCH" or "GOTO" [TYPE=CALL]"
ac_help="$ac_help
  --enable-maintainer-zts Enable thread safety - for code maintainers only!!"
ac_help="$ac_help
  --disable-inline-optimization 
                          If building zend_execute.lo fails, try this switch"
ac_help="$ac_help
  --enable-zend-multibyte Compile with zend multibyte support"
ac_help="$ac_help

TSRM:
"
ac_help="$ac_help
  --with-tsrm-pth[=pth-config]
                          Use GNU Pth"
ac_help="$ac_help
  --with-tsrm-st          Use SGI's State Threads"
ac_help="$ac_help
  --with-tsrm-pthreads    Use POSIX threads (default)"
ac_help="$ac_help

Libtool:
"
ac_help="$ac_help
  --enable-shared[=PKGS]  build shared libraries [default=yes]"
ac_help="$ac_help
  --enable-static[=PKGS]  build static libraries [default=yes]"
ac_help="$ac_help
  --enable-fast-install[=PKGS]  optimize for fast installation [default=yes]"
ac_help="$ac_help
  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]"


# Check that we are running under the correct shell.
SHELL=${CONFIG_SHELL-/bin/sh}

case X$ECHO in
X*--fallback-echo)
  # Remove one level of quotation (which was required for Make).
  ECHO=`echo "$ECHO" | sed 's,\\\\\$\\$0,'$0','`
  ;;
esac

echo=${ECHO-echo}
if test "X$1" = X--no-reexec; then
  # Discard the --no-reexec flag, and continue.
  shift
elif test "X$1" = X--fallback-echo; then
  # Avoid inline document here, it may be left over
  :
elif test "X`($echo '\t') 2>/dev/null`" = 'X\t' ; then
  # Yippee, $echo works!
  :
else
  # Restart under the correct shell.
  exec $SHELL "$0" --no-reexec ${1+"$@"}
fi

if test "X$1" = X--fallback-echo; then
  # used as fallback echo
  shift
  cat <<EOF
$*
EOF
  exit 0
fi

# The HP-UX ksh and POSIX shell print the target directory to stdout
# if CDPATH is set.
(unset CDPATH) >/dev/null 2>&1 && unset CDPATH

if test -z "$ECHO"; then
if test "X${echo_test_string+set}" != Xset; then
# find a string as large as possible, as long as the shell can cope with it
  for cmd in 'sed 50q "$0"' 'sed 20q "$0"' 'sed 10q "$0"' 'sed 2q "$0"' 'echo test'; do
    # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
    if (echo_test_string=`eval $cmd`) 2>/dev/null &&
       echo_test_string=`eval $cmd` &&
       (test "X$echo_test_string" = "X$echo_test_string") 2>/dev/null
    then
      break
    fi
  done
fi

if test "X`($echo '\t') 2>/dev/null`" = 'X\t' &&
   echo_testing_string=`($echo "$echo_test_string") 2>/dev/null` &&
   test "X$echo_testing_string" = "X$echo_test_string"; then
  :
else
  # The Solaris, AIX, and Digital Unix default echo programs unquote
  # backslashes.  This makes it impossible to quote backslashes using
  #   echo "$something" | sed 's/\\/\\\\/g'
  #
  # So, first we look for a working echo in the user's PATH.

  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for dir in $PATH /usr/ucb; do
    IFS="$lt_save_ifs"
    if (test -f $dir/echo || test -f $dir/echo$ac_exeext) &&
       test "X`($dir/echo '\t') 2>/dev/null`" = 'X\t' &&
       echo_testing_string=`($dir/echo "$echo_test_string") 2>/dev/null` &&
       test "X$echo_testing_string" = "X$echo_test_string"; then
      echo="$dir/echo"
      break
    fi
  done
  IFS="$lt_save_ifs"

  if test "X$echo" = Xecho; then
    # We didn't find a better echo, so look for alternatives.
    if test "X`(print -r '\t') 2>/dev/null`" = 'X\t' &&
       echo_testing_string=`(print -r "$echo_test_string") 2>/dev/null` &&
       test "X$echo_testing_string" = "X$echo_test_string"; then
      # This shell has a builtin print -r that does the trick.
      echo='print -r'
    elif (test -f /bin/ksh || test -f /bin/ksh$ac_exeext) &&
	 test "X$CONFIG_SHELL" != X/bin/ksh; then
      # If we have ksh, try running configure again with it.
      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
      export ORIGINAL_CONFIG_SHELL
      CONFIG_SHELL=/bin/ksh
      export CONFIG_SHELL
      exec $CONFIG_SHELL "$0" --no-reexec ${1+"$@"}
    else
      # Try using printf.
      echo='printf %s\n'
      if test "X`($echo '\t') 2>/dev/null`" = 'X\t' &&
	 echo_testing_string=`($echo "$echo_test_string") 2>/dev/null` &&
	 test "X$echo_testing_string" = "X$echo_test_string"; then
	# Cool, printf works
	:
      elif echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
	   test "X$echo_testing_string" = 'X\t' &&
	   echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
	   test "X$echo_testing_string" = "X$echo_test_string"; then
	CONFIG_SHELL=$ORIGINAL_CONFIG_SHELL
	export CONFIG_SHELL
	SHELL="$CONFIG_SHELL"
	export SHELL
	echo="$CONFIG_SHELL $0 --fallback-echo"
      elif echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
	   test "X$echo_testing_string" = 'X\t' &&
	   echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
	   test "X$echo_testing_string" = "X$echo_test_string"; then
	echo="$CONFIG_SHELL $0 --fallback-echo"
      else
	# maybe with a smaller string...
	prev=:

	for cmd in 'echo test' 'sed 2q "$0"' 'sed 10q "$0"' 'sed 20q "$0"' 'sed 50q "$0"'; do
	  if (test "X$echo_test_string" = "X`eval $cmd`") 2>/dev/null
	  then
	    break
	  fi
	  prev="$cmd"
	done

	if test "$prev" != 'sed 50q "$0"'; then
	  echo_test_string=`eval $prev`
	  export echo_test_string
	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "$0" ${1+"$@"}
	else
	  # Oops.  We lost completely, so just stick with echo.
	  echo=echo
	fi
      fi
    fi
  fi
fi
fi

# Copy echo and quote the copy suitably for passing to libtool from
# the Makefile, instead of quoting the original, which is used later.
ECHO=$echo
if test "X$ECHO" = "X$CONFIG_SHELL $0 --fallback-echo"; then
   ECHO="$CONFIG_SHELL \\\$\$0 --fallback-echo"
fi



ac_help="$ac_help
  --disable-libtool-lock  avoid locking (might break parallel builds)"
ac_help="$ac_help
  --with-pic              try to use only PIC/non-PIC objects [default=use both]"
ac_help="$ac_help
  --with-tags[=TAGS]      include additional configurations [automatic]
"
ac_help="$ac_help
  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]"

tagnames=${tagnames+${tagnames},}CXX

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=
SHELL=${CONFIG_SHELL-/bin/sh}
# Maximum number of lines to put in a shell here document.
ac_max_here_lines=12

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF
    if test -n "$ac_help"; then
      echo "--enable and --with options recognized:$ac_help"
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.13"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
fi

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=README.GIT-RULES

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

ac_exeext=
ac_objext=o
if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi





echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
echo "configure:1897: checking for Cygwin environment" >&5
if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 1902 "configure"
#include "confdefs.h"

int main() {

#ifndef __CYGWIN__
#define __CYGWIN__ __CYGWIN32__
#endif
return __CYGWIN__;
; return 0; }
EOF
if { (eval echo configure:1913: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cygwin=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cygwin=no
fi
rm -f conftest*
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cygwin" 1>&6
CYGWIN=
test "$ac_cv_cygwin" = yes && CYGWIN=yes
echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
echo "configure:1930: checking for mingw32 environment" >&5
if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 1935 "configure"
#include "confdefs.h"

int main() {
return __MINGW32__;
; return 0; }
EOF
if { (eval echo configure:1942: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_mingw32=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_mingw32=no
fi
rm -f conftest*
rm -f conftest*
fi

echo "$ac_t""$ac_cv_mingw32" 1>&6
MINGW32=
test "$ac_cv_mingw32" = yes && MINGW32=yes


echo $ac_n "checking for egrep""... $ac_c" 1>&6
echo "configure:1961: checking for egrep" >&5
if eval "test \"`echo '$''{'ac_cv_prog_egrep'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if echo a | (grep -E '(a|b)') >/dev/null 2>&1
    then ac_cv_prog_egrep='grep -E'
    else ac_cv_prog_egrep='egrep'
    fi
fi

echo "$ac_t""$ac_cv_prog_egrep" 1>&6
 EGREP=$ac_cv_prog_egrep
 

echo $ac_n "checking for a sed that does not truncate output""... $ac_c" 1>&6
echo "configure:1976: checking for a sed that does not truncate output" >&5
if eval "test \"`echo '$''{'lt_cv_path_SED'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # Loop through the user's path and test for sed and gsed.
# Then use that list of sed's as ones to test for truncation.
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
  for lt_ac_prog in sed gsed; do
    for ac_exec_ext in '' $ac_executable_extensions; do
      if test -f "$as_dir/$lt_ac_prog$ac_exec_ext"; then
        lt_ac_sed_list="$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext"
      fi
    done
  done
done
lt_ac_max=0
lt_ac_count=0
# Add /usr/xpg4/bin/sed as it is typically found on Solaris
# along with /bin/sed that truncates output.
for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
  test ! -f $lt_ac_sed && continue
  cat /dev/null > conftest.in
  lt_ac_count=0
  echo $ECHO_N "0123456789$ECHO_C" >conftest.in
  # Check for GNU sed and select it if it is found.
  if "$lt_ac_sed" --version 2>&1 < /dev/null | grep 'GNU' > /dev/null; then
    lt_cv_path_SED=$lt_ac_sed
    break
  fi
  while true; do
    cat conftest.in conftest.in >conftest.tmp
    mv conftest.tmp conftest.in
    cp conftest.in conftest.nl
    echo >>conftest.nl
    $lt_ac_sed -e 's/a$//' < conftest.nl >conftest.out || break
    cmp -s conftest.out conftest.nl || break
    # 10000 chars as input seems more than enough
    test $lt_ac_count -gt 10 && break
    lt_ac_count=`expr $lt_ac_count + 1`
    if test $lt_ac_count -gt $lt_ac_max; then
      lt_ac_max=$lt_ac_count
      lt_cv_path_SED=$lt_ac_sed
    fi
  done
done

fi

SED=$lt_cv_path_SED
echo "$ac_t""$SED" 1>&6


  
  
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EGREP"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SED"

  

  test -f config.nice && mv config.nice config.nice.old
  rm -f config.nice.old
  cat >config.nice<<EOF
#! /bin/sh
#
# Created by configure

EOF

  for var in CFLAGS CXXFLAGS CPPFLAGS LDFLAGS EXTRA_LDFLAGS_PROGRAM LIBS CC CXX; do
    eval val=\$$var
    if test -n "$val"; then
      echo "$var='$val' \\" >> config.nice
    fi
  done

  echo "'$0' \\" >> config.nice
  if test `expr -- $0 : "'.*"` = 0; then
    CONFIGURE_COMMAND="$CONFIGURE_COMMAND '$0'"
  else 
    CONFIGURE_COMMAND="$CONFIGURE_COMMAND $0"
  fi
  for arg in $ac_configure_args; do
     if test `expr -- $arg : "'.*"` = 0; then
        if test `expr -- $arg : "--.*"` = 0; then
          break;
        fi
        echo "'$arg' \\" >> config.nice
        CONFIGURE_OPTIONS="$CONFIGURE_OPTIONS '$arg'"
     else
        if test `expr -- $arg : "'--.*"` = 0; then
          break;
        fi
        echo "$arg \\" >> config.nice
        CONFIGURE_OPTIONS="$CONFIGURE_OPTIONS $arg"
     fi
  done
  echo '"$@"' >> config.nice
  chmod +x config.nice
  CONFIGURE_COMMAND="$CONFIGURE_COMMAND $CONFIGURE_OPTIONS"
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST CONFIGURE_COMMAND"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST CONFIGURE_OPTIONS"

  



ac_aux_dir=
for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.


# Make sure we can run config.sub.
if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6
echo "configure:2126: checking host system type" >&5

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$host" 1>&6

echo $ac_n "checking target system type""... $ac_c" 1>&6
echo "configure:2147: checking target system type" >&5

target_alias=$target
case "$target_alias" in
NONE)
  case $nonopt in
  NONE) target_alias=$host_alias ;;
  *) target_alias=$nonopt ;;
  esac ;;
esac

target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`
target_cpu=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
target_vendor=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
target_os=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$target" 1>&6


        if test -z "$host_alias" && test -n "$host"; then
    host_alias=$host
  fi
  if test -z "$host_alias"; then
    { echo "configure: error: host_alias is not set!" 1>&2; exit 1; }
  fi




PHP_MAJOR_VERSION=5
PHP_MINOR_VERSION=3
PHP_RELEASE_VERSION=29
PHP_EXTRA_VERSION=""
PHP_VERSION="$PHP_MAJOR_VERSION.$PHP_MINOR_VERSION.$PHP_RELEASE_VERSION$PHP_EXTRA_VERSION"
PHP_VERSION_ID=`expr $PHP_MAJOR_VERSION \* 10000 + $PHP_MINOR_VERSION \* 100 + $PHP_RELEASE_VERSION`


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MAJOR_VERSION"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MINOR_VERSION"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_RELEASE_VERSION"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_EXTRA_VERSION"




echo "/* automatically generated by configure */" > php_version.h.new
echo "/* edit configure.in to change version number */" >> php_version.h.new
echo "#define PHP_MAJOR_VERSION $PHP_MAJOR_VERSION" >> php_version.h.new
echo "#define PHP_MINOR_VERSION $PHP_MINOR_VERSION" >> php_version.h.new
echo "#define PHP_RELEASE_VERSION $PHP_RELEASE_VERSION" >> php_version.h.new
echo "#define PHP_EXTRA_VERSION \"$PHP_EXTRA_VERSION\"" >> php_version.h.new
echo "#define PHP_VERSION \"$PHP_VERSION\"" >> php_version.h.new
echo "#define PHP_VERSION_ID $PHP_VERSION_ID" >> php_version.h.new
cmp php_version.h.new $srcdir/main/php_version.h >/dev/null 2>&1
if test $? -ne 0 ; then
  rm -f $srcdir/main/php_version.h && mv php_version.h.new $srcdir/main/php_version.h && \
  echo 'Updated main/php_version.h'
else
  rm -f php_version.h.new
fi



if test "$with_shared_apache" != "no" && test -n "$with_shared_apache" ; then
  { echo "configure: error: --with-shared-apache is not supported. Please refer to the documentation for using APXS" 1>&2; exit 1; }
fi

if test -n "$with_apache" && test -n "$with_apxs"; then
  { echo "configure: error: --with-apache and --with-apxs cannot be used together" 1>&2; exit 1; }
fi

if test -n "$with_apxs2filter" && test -n "$with_apxs2"; then
  { echo "configure: error: --with-apxs2filter and --with-apxs2 cannot be used together" 1>&2; exit 1; }
fi

  

cwd=`pwd`

php_shtool=$srcdir/build/shtool
T_MD=`$php_shtool echo -n -e %B`
T_ME=`$php_shtool echo -n -e %b`


test -d include || $php_shtool mkdir include
> Makefile.objects
> Makefile.fragments
pattern=define
$EGREP $pattern'.*include/php' $srcdir/configure|$SED 's/.*>//'|xargs touch 2>/dev/null


test -z "$CFLAGS" && auto_cflags=1

abs_srcdir=`(cd $srcdir; pwd)`
abs_builddir=`pwd`

php_abs_top_srcdir=$abs_srcdir
php_abs_top_builddir=$abs_builddir


$php_shtool mkdir -p libs
rm -f libs/*


# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2259: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2289: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2340: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2372: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 2383 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:2388: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2414: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:2419: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2428: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:2447: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:2479: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 2494 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2500: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 2511 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2517: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 2528 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2534: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6


  ICC="no"
  echo $ac_n "checking for icc""... $ac_c" 1>&6
echo "configure:2561: checking for icc" >&5
  cat > conftest.$ac_ext <<EOF
#line 2563 "configure"
#include "confdefs.h"
__INTEL_COMPILER
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "^__INTEL_COMPILER" >/dev/null 2>&1; then
  rm -rf conftest*
  ICC="no"
    echo "$ac_t""no" 1>&6
else
  rm -rf conftest*
  ICC="yes"
    GCC="no"
    echo "$ac_t""yes" 1>&6
  
fi
rm -f conftest*



  SUNCC="no"
  echo $ac_n "checking for suncc""... $ac_c" 1>&6
echo "configure:2585: checking for suncc" >&5
  cat > conftest.$ac_ext <<EOF
#line 2587 "configure"
#include "confdefs.h"
__SUNPRO_C
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "^__SUNPRO_C" >/dev/null 2>&1; then
  rm -rf conftest*
  SUNCC="no"
    echo "$ac_t""no" 1>&6
else
  rm -rf conftest*
  SUNCC="yes"
    GCC="no"
    test -n "$auto_cflags" && CFLAGS="-O -xs -xstrconst -zlazyload"
    GCC=""
    echo "$ac_t""yes" 1>&6
  
fi
rm -f conftest*


if test "x$CC" != xcc; then
  echo $ac_n "checking whether $CC and cc understand -c and -o together""... $ac_c" 1>&6
echo "configure:2610: checking whether $CC and cc understand -c and -o together" >&5
else
  echo $ac_n "checking whether cc understands -c and -o together""... $ac_c" 1>&6
echo "configure:2613: checking whether cc understands -c and -o together" >&5
fi
set dummy $CC; ac_cc="`echo $2 |
		       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`"
if eval "test \"`echo '$''{'ac_cv_prog_cc_${ac_cc}_c_o'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'foo(){}' > conftest.c
# Make sure it works both with $CC and with simple cc.
# We do the test twice because some compilers refuse to overwrite an
# existing .o file with -o, though they will create one.
ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'
if { (eval echo configure:2625: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
   test -f conftest.o && { (eval echo configure:2626: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
then
  eval ac_cv_prog_cc_${ac_cc}_c_o=yes
  if test "x$CC" != xcc; then
    # Test first that cc exists at all.
    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:2631: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
      ac_try='cc -c conftest.c -o conftest.o 1>&5'
      if { (eval echo configure:2633: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
	 test -f conftest.o && { (eval echo configure:2634: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
      then
        # cc works too.
        :
      else
        # cc exists but doesn't like -o.
        eval ac_cv_prog_cc_${ac_cc}_c_o=no
      fi
    fi
  fi
else
  eval ac_cv_prog_cc_${ac_cc}_c_o=no
fi
rm -f conftest*

fi
if eval "test \"`echo '$ac_cv_prog_cc_'${ac_cc}_c_o`\" = yes"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
  cat >> confdefs.h <<\EOF
#define NO_MINUS_C_MINUS_O 1
EOF

fi

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:2661: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 2676 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2682: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 2693 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2699: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 2710 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2716: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6

echo $ac_n "checking for AIX""... $ac_c" 1>&6
echo "configure:2741: checking for AIX" >&5
cat > conftest.$ac_ext <<EOF
#line 2743 "configure"
#include "confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; cat >> confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:2765: checking whether ln -s works" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi



php_with_libdir=lib

echo $ac_n "checking for system library directory""... $ac_c" 1>&6
echo "configure:2790: checking for system library directory" >&5
# Check whether --with-libdir or --without-libdir was given.
if test "${with_libdir+set}" = set; then
  withval="$with_libdir"
  PHP_LIBDIR=$withval
else
  
  PHP_LIBDIR=lib
  

fi


ext_output=$PHP_LIBDIR
echo "$ac_t""$ext_output" 1>&6





php_enable_rpath=yes

echo $ac_n "checking whether to enable runpaths""... $ac_c" 1>&6
echo "configure:2813: checking whether to enable runpaths" >&5
# Check whether --enable-rpath or --disable-rpath was given.
if test "${enable_rpath+set}" = set; then
  enableval="$enable_rpath"
  PHP_RPATH=$enableval
else
  
  PHP_RPATH=yes
  

fi


ext_output=$PHP_RPATH
echo "$ac_t""$ext_output" 1>&6





echo $ac_n "checking if compiler supports -R""... $ac_c" 1>&6
echo "configure:2834: checking if compiler supports -R" >&5
if eval "test \"`echo '$''{'php_cv_cc_dashr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  SAVE_LIBS=$LIBS
  LIBS="-R /usr/$PHP_LIBDIR $LIBS"
  cat > conftest.$ac_ext <<EOF
#line 2842 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:2849: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  php_cv_cc_dashr=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  php_cv_cc_dashr=no
fi
rm -f conftest*
  LIBS=$SAVE_LIBS
fi

echo "$ac_t""$php_cv_cc_dashr" 1>&6
if test $php_cv_cc_dashr = "yes"; then
  ld_runpath_switch=-R
else
  echo $ac_n "checking if compiler supports -Wl,-rpath,""... $ac_c" 1>&6
echo "configure:2867: checking if compiler supports -Wl,-rpath," >&5
  if eval "test \"`echo '$''{'php_cv_cc_rpath'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    SAVE_LIBS=$LIBS
    LIBS="-Wl,-rpath,/usr/$PHP_LIBDIR $LIBS"
    cat > conftest.$ac_ext <<EOF
#line 2875 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:2882: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  php_cv_cc_rpath=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  php_cv_cc_rpath=no
fi
rm -f conftest*
    LIBS=$SAVE_LIBS
fi

  echo "$ac_t""$php_cv_cc_rpath" 1>&6
  if test $php_cv_cc_rpath = "yes"; then
    ld_runpath_switch=-Wl,-rpath,
  else
        ld_runpath_switch=-L
  fi
fi
if test "$PHP_RPATH" = "no"; then
  ld_runpath_switch=
fi



  for ac_prog in gawk nawk awk mawk
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2913: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AWK"; then
  ac_cv_prog_AWK="$AWK" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="/usr/xpg4/bin/:$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AWK="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AWK="$ac_cv_prog_AWK"
if test -n "$AWK"; then
  echo "$ac_t""$AWK" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AWK" && break
done
test -n "$AWK" || AWK="bork"

  case "$AWK" in
    *mawk)
      echo "configure: warning: mawk is known to have problems on some systems. You should install GNU awk" 1>&2
      ;;
    *gawk)  
      ;;
    bork)   
      { echo "configure: error: Could not find awk; Install GNU awk" 1>&2; exit 1; }
      ;;
    *)
      echo $ac_n "checking if $AWK is broken""... $ac_c" 1>&6
echo "configure:2954: checking if $AWK is broken" >&5
      if ! $AWK 'function foo() {}' >/dev/null 2>&1 ; then
        echo "$ac_t""yes" 1>&6
        { echo "configure: error: You should install GNU awk" 1>&2; exit 1; }
      else
        echo "$ac_t""no" 1>&6
      fi
      ;;
  esac
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST AWK"



  for ac_prog in 'bison -y' byacc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2973: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
YACC="$ac_cv_prog_YACC"
if test -n "$YACC"; then
  echo "$ac_t""$YACC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"

  
  # we only support certain bison versions
  bison_version_list="1.28 1.35 1.75 1.875 2.0 2.1 2.2 2.3 2.4 2.4.1 2.4.2 2.4.3 2.5 2.5.1 2.6 2.6.1 2.6.2 2.6.4"

  # for standalone build of Zend Engine
  test -z "$SED" && SED=sed

  bison_version=none
  if test "$YACC"; then
    echo $ac_n "checking for bison version""... $ac_c" 1>&6
echo "configure:3013: checking for bison version" >&5
if eval "test \"`echo '$''{'php_cv_bison_version'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
      bison_version_vars=`bison --version 2> /dev/null | grep 'GNU Bison' | cut -d ' ' -f 4 | $SED -e 's/\./ /' | tr -d a-z`
      php_cv_bison_version=invalid
      if test -n "$bison_version_vars"; then
        set $bison_version_vars
        bison_version="${1}.${2}"
        for bison_check_version in $bison_version_list; do
          if test "$bison_version" = "$bison_check_version"; then
            php_cv_bison_version="$bison_check_version (ok)"
            break
          fi
        done
      fi
    
fi

echo "$ac_t""$php_cv_bison_version" 1>&6
  fi
  case $php_cv_bison_version in
    ""|invalid)
      bison_msg="bison versions supported for regeneration of the Zend/PHP parsers: $bison_version_list (found: $bison_version)."
      echo "configure: warning: $bison_msg" 1>&2
      YACC="exit 0;"
      ;;
  esac

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST YACC"



  # Extract the first word of "re2c", so it can be a program name with args.
set dummy re2c; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3051: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RE2C'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RE2C"; then
  ac_cv_prog_RE2C="$RE2C" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RE2C="re2c"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
RE2C="$ac_cv_prog_RE2C"
if test -n "$RE2C"; then
  echo "$ac_t""$RE2C" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -n "$RE2C"; then
    echo $ac_n "checking for re2c version""... $ac_c" 1>&6
echo "configure:3079: checking for re2c version" >&5
if eval "test \"`echo '$''{'php_cv_re2c_version'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
      re2c_vernum=`$RE2C --vernum 2>/dev/null`
      if test -z "$re2c_vernum" || test "$re2c_vernum" -lt "1304"; then
        php_cv_re2c_version=invalid
      else
        php_cv_re2c_version="`$RE2C --version | cut -d ' ' -f 2  2>/dev/null` (ok)"
      fi 
    
fi

echo "$ac_t""$php_cv_re2c_version" 1>&6
  fi
  case $php_cv_re2c_version in
    ""|invalid)
      echo "configure: warning: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers." 1>&2
      RE2C="exit 0;"
      ;;
  esac
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST RE2C"



case $php_cv_bison_version in
  ""|invalid)
    if ! test -f "$abs_srcdir/Zend/zend_language_parser.h" || ! test -f "$abs_srcdir/Zend/zend_language_parser.c" ; then
      { echo "configure: error: bison is required to build PHP/Zend when building a GIT checkout!" 1>&2; exit 1; }
    fi
    ;;
esac


php_enable_re2c_cgoto=no

echo $ac_n "checking whether to enable computed goto gcc extension with re2c""... $ac_c" 1>&6
echo "configure:3118: checking whether to enable computed goto gcc extension with re2c" >&5
# Check whether --enable-re2c-cgoto or --disable-re2c-cgoto was given.
if test "${enable_re2c_cgoto+set}" = set; then
  enableval="$enable_re2c_cgoto"
  PHP_RE2C_CGOTO=$enableval
else
  
  PHP_RE2C_CGOTO=no
  

fi


ext_output=$PHP_RE2C_CGOTO
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_RE2C_CGOTO" = "no"; then
  RE2C_FLAGS=""
else
  echo $ac_n "checking whether re2c -g works""... $ac_c" 1>&6
echo "configure:3141: checking whether re2c -g works" >&5
  cat > conftest.$ac_ext <<EOF
#line 3143 "configure"
#include "confdefs.h"

int main() {

int main(int argc, const char **argv)
{
  argc = argc;
  argv = argv;
label1:
label2:
  static void *adr[] = { &&label1, &&label2};
  goto *adr[0];
  return 0;
}
  
; return 0; }
EOF
if { (eval echo configure:3161: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    RE2C_FLAGS=""
    echo "$ac_t""no" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    RE2C_FLAGS="-g"
    echo "$ac_t""yes" 1>&6
  
fi
rm -f conftest*
fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST RE2C_FLAGS"



case $host_cpu in
  alpha*)
    if test "$GCC" = "yes"; then
      CFLAGS="$CFLAGS -mieee"
    else
      CFLAGS="$CFLAGS -ieee"
    fi
    ;;
  sparc*)
    if test "$SUNCC" = "yes"; then
      CFLAGS="$CFLAGS -xmemalign=8s"
    fi
    ;;
esac

if test "$GCC" = "yes"; then
  case $host_alias in
  *darwin*)
    GCC_MAJOR_VERSION=`$CC -dumpversion | /usr/bin/sed -nE '1s/([0-9]+)\.[0-9]+\..*/\1/;1p'`
    ;;
  *)
    GCC_MAJOR_VERSION=`$CC --version | $SED -n '1s/[^0-9]*//;1s/\..*//;1p'`
    ;;
  esac
  if test $GCC_MAJOR_VERSION -ge 4; then
    CFLAGS="$CFLAGS -fvisibility=hidden"
  fi
fi

case $host_alias in
  *solaris*)
    CPPFLAGS="$CPPFLAGS -D_POSIX_PTHREAD_SEMANTICS"
    if test "${enable_libgcc+set}" != "set" && test "$GCC" = "yes"; then
      enable_libgcc=yes
    fi
    ;;
  *dgux*)
    CPPFLAGS="$CPPFLAGS -D_BSD_TIMEOFDAY_FLAVOR"
    ;;
  *darwin*|*rhapsody*)
    if test -n "$GCC"; then
      
  gcc_arg_name=ac_cv_gcc_arg_no_cpp_precomp
  echo $ac_n "checking whether $CC supports -no-cpp-precomp""... $ac_c" 1>&6
echo "configure:3227: checking whether $CC supports -no-cpp-precomp" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arg_no_cpp_precomp'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -no-cpp-precomp -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -no-cpp-precomp >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*
  
fi

echo "$ac_t""$ac_cv_gcc_arg_no_cpp_precomp" 1>&6
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_no_cpp_precomp=yes
  else
    :
    
  fi

      if test "$gcc_no_cpp_precomp" = "yes"; then
        CPPFLAGS="$CPPFLAGS -no-cpp-precomp"
      fi
    fi
    php_multiple_shlib_versions_ok=yes
    ;;
  *beos*)
    beos_threads=1
    LIBS="$LIBS -lbe -lroot"
    ;;
  *mips*)
    CPPFLAGS="$CPPFLAGS -D_XPG_IV"
    ;;
  *hpux*)
    if test "$GCC" = "yes"; then
      CPPFLAGS="$CPPFLAGS -D_XOPEN_SOURCE_EXTENDED"
    fi
    ;;
  *netware*)
    
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

    
  
  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    
  
  case win32 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "win32"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/win32/"; ac_bdir="win32/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sendmail.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre -I$CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre -I$CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre -I$CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre -I$CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    PHP5LIB_SHARED_LIBADD=\$\(EXTRA_LIBS\)
    EXTENSION_DIR=sys:/php$PHP_MAJOR_VERSION/ext
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP5LIB_SHARED_LIBADD"

    
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o 'netware'/php5lib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(PHP_GLOBAL_OBJS) $(PHP5LIB_SHARED_LIBADD) && mv -f 'netware'/.libs/php5lib.so 'netware'/php5lib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(PHP_GLOBAL_OBJS)  $(PHP5LIB_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(PHP_GLOBAL_OBJS) $(PHP5LIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/php5lib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/php5lib.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_GLOBAL_OBJS"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/php5lib.$suffix: netware/php5lib.$suffix
	\$(LIBTOOL) --mode=install cp netware/php5lib.$suffix \$(phplibdir)

netware/php5lib.$suffix: \$(PHP_GLOBAL_OBJS) \$(PHP5LIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

    ;;
esac

# Disable PIC mode by default where it is known to be safe to do so,
# to avoid the performance hit from the lost register
echo $ac_n "checking whether to force non-PIC code in shared modules""... $ac_c" 1>&6
echo "configure:3428: checking whether to force non-PIC code in shared modules" >&5
case $host_alias in
  i?86-*-linux*|i?86-*-freebsd*)
    if test "${with_pic+set}" != "set" || test "$with_pic" = "no"; then
      with_pic=no
      echo "$ac_t""yes" 1>&6
    else
      echo "$ac_t""no" 1>&6
    fi
    ;;
  *)
    echo "$ac_t""no" 1>&6
    ;;
esac















echo $ac_n "checking whether /dev/urandom exists""... $ac_c" 1>&6
echo "configure:3458: checking whether /dev/urandom exists" >&5 
if test -r "/dev/urandom" && test -c "/dev/urandom"; then 
  cat >> confdefs.h <<\EOF
#define HAVE_DEV_URANDOM 1
EOF

  echo "$ac_t""yes" 1>&6 
else 
  echo "$ac_t""no" 1>&6 
fi 
























if test "$beos_threads" = "1"; then
  pthreads_working="yes"
  ac_cv_pthreads_cflags=""
else
  save_CFLAGS=$CFLAGS
  save_LIBS=$LIBS
  
if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi

  
if test "$cross_compiling" = yes; then
  
    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat > conftest.$ac_ext <<EOF
#line 3519 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:3537: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
  LIBS=$save_LIBS
  CFLAGS=$save_CFLAGS

  echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
echo "configure:3557: checking for pthreads_cflags" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  ac_cv_pthreads_cflags=
  if test "$pthreads_working" != "yes"; then
    for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do 
      ac_save=$CFLAGS
      CFLAGS="$CFLAGS $flag"
      
if test "$cross_compiling" = yes; then
  
    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat > conftest.$ac_ext <<EOF
#line 3579 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:3597: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
      CFLAGS=$ac_save
      if test "$pthreads_working" = "yes"; then
        ac_cv_pthreads_cflags=$flag
        break
      fi
    done
  fi
fi

fi

echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6

echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
echo "configure:3627: checking for pthreads_lib" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_lib=
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save=$LIBS
    LIBS="$LIBS -l$lib"
    
if test "$cross_compiling" = yes; then
  
    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat > conftest.$ac_ext <<EOF
#line 3649 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:3667: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
    LIBS=$ac_save
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib=$lib
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_lib" 1>&6

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX-Threads found"
else
  threads_result="POSIX-Threads not found"
fi


# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi



  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SHLIB_SUFFIX_NAME"

  

 
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SHLIB_DL_SUFFIX_NAME"

  

 SHLIB_SUFFIX_NAME=so
 SHLIB_DL_SUFFIX_NAME=$SHLIB_SUFFIX_NAME
 case $host_alias in
 *hpux*)
   SHLIB_SUFFIX_NAME=sl
   SHLIB_DL_SUFFIX_NAME=sl
   ;;
 *darwin*)
   SHLIB_SUFFIX_NAME=dylib
   SHLIB_DL_SUFFIX_NAME=so
   ;;
 esac

PHP_SAPI=default

  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program




SAPI_SHARED=libs/libphp$PHP_MAJOR_VERSION.$SHLIB_DL_SUFFIX_NAME
SAPI_STATIC=libs/libphp$PHP_MAJOR_VERSION.a
SAPI_LIBTOOL=libphp$PHP_MAJOR_VERSION.la


  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring SAPI modules${T_ME}" 1>&6





php_with_aolserver=no


# Check whether --with-aolserver or --without-aolserver was given.
if test "${with_aolserver+set}" = set; then
  withval="$with_aolserver"
  PHP_AOLSERVER=$withval
else
  
  PHP_AOLSERVER=no
  

fi


ext_output=$PHP_AOLSERVER





echo $ac_n "checking for AOLserver support""... $ac_c" 1>&6
echo "configure:3798: checking for AOLserver support" >&5

if test "$PHP_AOLSERVER" != "no"; then
  if test -d "$PHP_AOLSERVER/include"; then
    PHP_AOLSERVER_SRC=$PHP_AOLSERVER
  fi
  if test -z "$PHP_AOLSERVER_SRC" || test ! -d $PHP_AOLSERVER_SRC/include; then
    { echo "configure: error: Please specify the path to the source distribution of AOLserver using --with-aolserver-src=DIR" 1>&2; exit 1; }
  fi
  if test ! -d $PHP_AOLSERVER/bin ; then
    { echo "configure: error: Please specify the path to the root of AOLserver using --with-aolserver=DIR" 1>&2; exit 1; }
  fi
  
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  
  if test "$PHP_AOLSERVER_SRC/include" != "/usr/include"; then
    
  if test -z "$PHP_AOLSERVER_SRC/include" || echo "$PHP_AOLSERVER_SRC/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_AOLSERVER_SRC/include
  else
    
    ep_dir="`echo $PHP_AOLSERVER_SRC/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_AOLSERVER_SRC/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_AOLSERVER 1
EOF

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=aolserver
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/aolserver in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/aolserver"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/aolserver/"; ac_bdir="sapi/aolserver/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in aolserver.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_AOLSERVER/bin/"
fi

echo "$ac_t""$PHP_AOLSERVER" 1>&6





php_with_apxs=no


# Check whether --with-apxs or --without-apxs was given.
if test "${with_apxs+set}" = set; then
  withval="$with_apxs"
  PHP_APXS=$withval
else
  
  PHP_APXS=no
  

fi


ext_output=$PHP_APXS





echo $ac_n "checking for Apache 1.x module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:4063: checking for Apache 1.x module support via DSO through APXS" >&5

if test "$PHP_APXS" != "no"; then
  if test "$PHP_APXS" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then #SUSE 6.x 
      APXS=/usr/sbin/apxs
    fi
  else
    
  if test -z "$PHP_APXS" || echo "$PHP_APXS" | grep '^/' >/dev/null ; then
    APXS=$PHP_APXS
  else
    
    ep_dir="`echo $PHP_APXS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$PHP_APXS\"`"
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    echo "$ac_t""" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""Sorry, I was not able to successfully run APXS.  Possible reasons:" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""1.  Perl is not installed;" 1>&6
    echo "$ac_t""2.  Apache was not compiled with DSO support (--enable-module=so);" 1>&6
    echo "$ac_t""3.  'apxs' is not in your path.  Try to use --with-apxs=/path/to/apxs" 1>&6
    echo "$ac_t""The output of $APXS follows" 1>&6
    $APXS -q CFLAGS
    { echo "configure: error: Aborting" 1>&2; exit 1; } 
  fi 

  APXS_LDFLAGS="@SYBASE_LFLAGS@ @SYBASE_LIBS@ @SYBASE_CT_LFLAGS@ @SYBASE_CT_LIBS@"
  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APACHE_INCLUDE=-I$APXS_INCLUDEDIR

  # Test that we're trying to configure with apache 1.x
  
  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -ge 2000000; then
    { echo "configure: error: You have enabled Apache 1.3 support while your server is Apache 2.  Please use the appropiate switch --with-apxs2" 1>&2; exit 1; } 
  fi

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  case $host_alias in
  *aix*)
    APXS_LIBEXECDIR=`$APXS -q LIBEXECDIR`
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    PHP_AIX_LDFLAGS="-Wl,-brtl"
    build_type=shared
    ;;
  *darwin*)
    MH_BUNDLE_FLAGS="-dynamic -twolevel_namespace -bundle -bundle_loader $APXS_HTTPD"
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    SAPI_SHARED=libs/libphp5.so
    build_type=bundle
    ;;
  *)
    build_type=shared
    ;;
  esac

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache
  
  case "$build_type" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  # Test whether apxs support -S option
  $APXS -q -S CFLAGS="$APXS_CFLAGS" CFLAGS >/dev/null 2>&1

  if test "$?" != "0"; then
    APACHE_INSTALL="$APXS -i -a -n php5 $SAPI_SHARED" # Old apxs does not have -S option
  else 
    APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
    if test -z `$APXS -q SYSCONFDIR`; then
      APACHE_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -i -n php5 $SAPI_SHARED"
    else
      APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
      APACHE_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                      \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                             -i -a -n php5 $SAPI_SHARED"
    fi
  fi

  if test -z "`$APXS -q LD_SHLIB`" || test "`$APXS -q LIBEXECDIR`" = "modules"; then
    PHP_APXS_BROKEN=yes
  fi
  STRONGHOLD=
  cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_APACHE 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


php_with_apache=no


# Check whether --with-apache or --without-apache was given.
if test "${with_apache+set}" = set; then
  withval="$with_apache"
  PHP_APACHE=$withval
else
  
  PHP_APACHE=no
  

fi


ext_output=$PHP_APACHE





echo $ac_n "checking for Apache 1.x module support""... $ac_c" 1>&6
echo "configure:4394: checking for Apache 1.x module support" >&5

if test "$PHP_SAPI" != "apache" && test "$PHP_APACHE" != "no"; then
  
  if test "$PHP_APACHE" = "yes"; then
    # Apache's default directory
    PHP_APACHE=/usr/local/apache
  fi

  APACHE_INSTALL_FILES="\$(srcdir)/sapi/apache/mod_php5.* sapi/apache/libphp5.module"

  cat >> confdefs.h <<\EOF
#define HAVE_APACHE 1
EOF

  APACHE_MODULE=yes
  
  if test -z "$PHP_APACHE" || echo "$PHP_APACHE" | grep '^/' >/dev/null ; then
    PHP_APACHE=$PHP_APACHE
  else
    
    ep_dir="`echo $PHP_APACHE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    PHP_APACHE="$ep_realdir/`basename \"$PHP_APACHE\"`"
  fi

  # For Apache 1.2.x
  if test -f $PHP_APACHE/src/httpd.h; then 
    APACHE_INCLUDE=-I$PHP_APACHE/src
    APACHE_TARGET=$PHP_APACHE/src
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_INSTALL_FILES $APACHE_TARGET"
    PHP_LIBS="-L. -lphp3"
    echo "$ac_t""yes - Apache 1.2.x" 1>&6
    STRONGHOLD=
    if test -f $PHP_APACHE/src/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
  # For Apache 2.0.x
  elif test -f $PHP_APACHE/include/httpd.h && test -f $PHP_APACHE/srclib/apr/include/apr_general.h ; then
    { echo "configure: error: Use --with-apxs2 with Apache 2.x!" 1>&2; exit 1; }
  # For Apache 1.3.x
  elif test -f $PHP_APACHE/src/main/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE/src/main -I$PHP_APACHE/src/os/unix -I$PHP_APACHE/src/ap"
    APACHE_TARGET=$PHP_APACHE/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    echo "$ac_t""yes - Apache 1.3.x" 1>&6
    STRONGHOLD=
    if test -f $PHP_APACHE/src/include/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
    if test -f $PHP_APACHE/src/include/ap_compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

      if test ! -f $PHP_APACHE/src/include/ap_config_auto.h; then
        { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
      fi
    elif test -f $PHP_APACHE/src/include/compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

    fi
  # Also for Apache 1.3.x
  elif test -f $PHP_APACHE/src/include/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE/src/include -I$PHP_APACHE/src/os/unix"
    APACHE_TARGET=$PHP_APACHE/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    echo "$ac_t""yes - Apache 1.3.x" 1>&6
    STRONGHOLD=
    if test -f $PHP_APACHE/src/include/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
    if test -f $PHP_APACHE/src/include/ap_compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

      if test ! -f $PHP_APACHE/src/include/ap_config_auto.h; then
        { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
      fi
    elif test -f $PHP_APACHE/src/include/compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

    fi
  # For StrongHold 2.2
  elif test -f $PHP_APACHE/apache/httpd.h; then
    APACHE_INCLUDE="-I$PHP_APACHE/apache -I$PHP_APACHE/ssl/include"
    APACHE_TARGET=$PHP_APACHE/apache
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET"
    STRONGHOLD=-DSTRONGHOLD=1
    echo "$ac_t""yes - StrongHold" 1>&6
    if test -f $PHP_APACHE/apache/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
    if test -f $PHP_APACHE/src/ap_compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

      if test ! -f $PHP_APACHE/src/include/ap_config_auto.h; then
        { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
      fi
    elif test -f $PHP_APACHE/src/compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

    fi
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Invalid Apache directory - unable to find httpd.h under $PHP_APACHE" 1>&2; exit 1; }
  fi
else
  echo "$ac_t""no" 1>&6
fi

# compatibility
if test -z "$enable_mod_charset" && test "$with_mod_charset"; then
  enable_mod_charset=$with_mod_charset
fi
  

php_enable_mod_charset=no

echo $ac_n "checking whether to enable Apache charset compatibility option""... $ac_c" 1>&6
echo "configure:5271: checking whether to enable Apache charset compatibility option" >&5
# Check whether --enable-mod-charset or --disable-mod-charset was given.
if test "${enable_mod_charset+set}" = set; then
  enableval="$enable_mod_charset"
  PHP_MOD_CHARSET=$enableval
else
  
  PHP_MOD_CHARSET=no
  

fi


ext_output=$PHP_MOD_CHARSET
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MOD_CHARSET" = "yes"; then
  cat >> confdefs.h <<\EOF
#define USE_TRANSFER_TABLES 1
EOF

fi

if test "$APACHE_MODULE" = "yes"; then
  
  if test -n "$GCC"; then
        
  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
echo "configure:5303: checking whether $CC supports -rdynamic" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*
  
fi

echo "$ac_t""$ac_cv_gcc_arg_rdynamic" 1>&6
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :
    
  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  $php_shtool mkdir -p sapi/apache
  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/apache/libphp5.module"

fi

if test -n "$APACHE_INSTALL"; then
  if test "x$APXS" != "x" -a "`uname -sv`" = "AIX 4" -a "$GCC" != "yes"; then
    APXS_EXP=-bE:sapi/apache/mod_php5.exp
  fi

  
echo $ac_n "checking for member fd in BUFF *""... $ac_c" 1>&6
echo "configure:5346: checking for member fd in BUFF *" >&5
if eval "test \"`echo '$''{'ac_cv_php_fd_in_buff'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  save=$CPPFLAGS
  if test -n "$APXS_INCLUDEDIR"; then
    CPPFLAGS="$CPPFLAGS -I$APXS_INCLUDEDIR"
  else
    CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
  fi
  cat > conftest.$ac_ext <<EOF
#line 5358 "configure"
#include "confdefs.h"
#include <httpd.h>
int main() {
conn_rec *c; int fd = c->client->fd;
; return 0; }
EOF
if { (eval echo configure:5365: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    ac_cv_php_fd_in_buff=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_php_fd_in_buff=no
fi
rm -f conftest*
  CPPFLAGS=$save

fi

echo "$ac_t""$ac_cv_php_fd_in_buff" 1>&6
if test "$ac_cv_php_fd_in_buff" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_APACHE_HAVE_CLIENT_FD 1
EOF

fi

  INSTALL_IT=$APACHE_INSTALL

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_EXP"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INCLUDE"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_TARGET"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_LDFLAGS"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INSTALL"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST STRONGHOLD"

fi




php_with_apxs2filter=no


# Check whether --with-apxs2filter or --without-apxs2filter was given.
if test "${with_apxs2filter+set}" = set; then
  withval="$with_apxs2filter"
  PHP_APXS2FILTER=$withval
else
  
  PHP_APXS2FILTER=no
  

fi


ext_output=$PHP_APXS2FILTER





echo $ac_n "checking for Apache 2.0 filter-module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:5438: checking for Apache 2.0 filter-module support via DSO through APXS" >&5

if test "$PHP_APXS2FILTER" != "no"; then
  if test "$PHP_APXS2FILTER" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then
      APXS=/usr/sbin/apxs
    fi
  else
    
  if test -z "$PHP_APXS2FILTER" || echo "$PHP_APXS2FILTER" | grep '^/' >/dev/null ; then
    APXS=$PHP_APXS2FILTER
  else
    
    ep_dir="`echo $PHP_APXS2FILTER|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$PHP_APXS2FILTER\"`"
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    echo "$ac_t""" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""Sorry, I cannot run apxs.  Possible reasons follow:" 1>&6 
    echo "$ac_t""" 1>&6
    echo "$ac_t""1. Perl is not installed" 1>&6
    echo "$ac_t""2. apxs was not found. Try to pass the path using --with-apxs2filter=/path/to/apxs" 1>&6
    echo "$ac_t""3. Apache was not built using --enable-so (the apxs usage page is displayed)" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""The output of $APXS follows:" 1>&6
    $APXS -q CFLAGS
    { echo "configure: error: Aborting" 1>&2; exit 1; }
  fi 

  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_BINDIR=`$APXS -q BINDIR`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APU_BINDIR=`$APXS -q APU_BINDIR`
  APR_BINDIR=`$APXS -q APR_BINDIR`

  # Pick up ap[ru]-N-config if using httpd >=2.1
  APR_CONFIG=`$APXS -q APR_CONFIG 2>/dev/null ||
    echo $APR_BINDIR/apr-config`
  APU_CONFIG=`$APXS -q APU_CONFIG 2>/dev/null ||
    echo $APU_BINDIR/apu-config`

  APR_CFLAGS="`$APR_CONFIG --cppflags --includes`"
  APU_CFLAGS="`$APU_CONFIG --includes`"

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  APACHE_CFLAGS="$APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $APR_CFLAGS $APU_CFLAGS"

  # Test that we're trying to configure with apache 2.x
  
  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -le 2000000; then
    { echo "configure: error: You have enabled Apache 2 support while your server is Apache 1.3.  Please use the appropiate switch --with-apxs (without the 2)" 1>&2; exit 1; }
  elif test "$APACHE_VERSION" -lt 2000040; then
    { echo "configure: error: Please note that Apache version >= 2.0.40 is required" 1>&2; exit 1; }
  fi

  APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
  if test -z `$APXS -q SYSCONFDIR`; then
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -i -n php5"
  else
    APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                       -i -a -n php5"
  fi

  case $host_alias in
  *aix*)
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2filter
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL" 
    ;;
  *darwin*)
                    if test -x "$APR_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APR_CONFIG --ldflags --link-ld --libs`"
    fi
    if test -x "$APU_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APU_CONFIG --ldflags --link-ld --libs` $MH_BUNDLE_FLAGS"
    fi
    MH_BUNDLE_FLAGS="-bundle -bundle_loader $APXS_HTTPD $MH_BUNDLE_FLAGS"
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2filter
  
  case "bundle" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    SAPI_SHARED=libs/libphp5.so
    INSTALL_IT="$INSTALL_IT $SAPI_SHARED"
    ;;
  *beos*)
    if test -f _APP_; then `rm _APP_`; fi
    `ln -s $APXS_BINDIR/httpd _APP_`
    EXTRA_LIBS="$EXTRA_LIBS _APP_"
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2filter
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  *)
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2filter
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


 
    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  esac

  if test "$APACHE_VERSION" -lt 2004001; then
    APXS_MPM=`$APXS -q MPM_NAME`
    if test "$APXS_MPM" != "prefork" && test "$APXS_MPM" != "peruser" && test "$APXS_MPM" != "itk"; then
      
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

    fi
  else
    APACHE_THREADED_MPM=`$APXS_HTTPD -V | grep 'threaded:.*yes'`
    if test -n "$APACHE_THREADED_MPM"; then
      
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

    fi
  fi
  echo "$ac_t""yes" 1>&6
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"

else
  echo "$ac_t""no" 1>&6
fi




php_with_apxs2=no


# Check whether --with-apxs2 or --without-apxs2 was given.
if test "${with_apxs2+set}" = set; then
  withval="$with_apxs2"
  PHP_APXS2=$withval
else
  
  PHP_APXS2=no
  

fi


ext_output=$PHP_APXS2





echo $ac_n "checking for Apache 2.0 handler-module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:6339: checking for Apache 2.0 handler-module support via DSO through APXS" >&5

if test "$PHP_APXS2" != "no"; then
  if test "$PHP_APXS2" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then
      APXS=/usr/sbin/apxs
    fi
  else
    
  if test -z "$PHP_APXS2" || echo "$PHP_APXS2" | grep '^/' >/dev/null ; then
    APXS=$PHP_APXS2
  else
    
    ep_dir="`echo $PHP_APXS2|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$PHP_APXS2\"`"
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    echo "$ac_t""" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""Sorry, I cannot run apxs.  Possible reasons follow:" 1>&6 
    echo "$ac_t""" 1>&6
    echo "$ac_t""1. Perl is not installed" 1>&6
    echo "$ac_t""2. apxs was not found. Try to pass the path using --with-apxs2=/path/to/apxs" 1>&6
    echo "$ac_t""3. Apache was not built using --enable-so (the apxs usage page is displayed)" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""The output of $APXS follows:" 1>&6
    $APXS -q CFLAGS
    { echo "configure: error: Aborting" 1>&2; exit 1; }
  fi 

  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_BINDIR=`$APXS -q BINDIR`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APU_BINDIR=`$APXS -q APU_BINDIR`
  APR_BINDIR=`$APXS -q APR_BINDIR`

  # Pick up ap[ru]-N-config if using httpd >=2.1
  APR_CONFIG=`$APXS -q APR_CONFIG 2>/dev/null ||
    echo $APR_BINDIR/apr-config`
  APU_CONFIG=`$APXS -q APU_CONFIG 2>/dev/null ||
    echo $APU_BINDIR/apu-config`

  APR_CFLAGS="`$APR_CONFIG --cppflags --includes`"
  APU_CFLAGS="`$APU_CONFIG --includes`"

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  APACHE_CFLAGS="$APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $APR_CFLAGS $APU_CFLAGS"

  # Test that we're trying to configure with apache 2.x
  
  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -le 2000000; then
    { echo "configure: error: You have enabled Apache 2 support while your server is Apache 1.3.  Please use the appropiate switch --with-apxs (without the 2)" 1>&2; exit 1; }
  elif test "$APACHE_VERSION" -lt 2000044; then
    { echo "configure: error: Please note that Apache version >= 2.0.44 is required" 1>&2; exit 1; }
  fi

  APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
  if test -z `$APXS -q SYSCONFDIR`; then
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -i -n php5"
  else
    APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                       -i -a -n php5"
  fi

  case $host_alias in
  *aix*)
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2handler
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL" 
    ;;
  *darwin*)
                    if test -x "$APR_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APR_CONFIG --ldflags --link-ld --libs`"
    fi
    if test -x "$APU_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APU_CONFIG --ldflags --link-ld --libs` $MH_BUNDLE_FLAGS"
    fi
    MH_BUNDLE_FLAGS="-bundle -bundle_loader $APXS_HTTPD $MH_BUNDLE_FLAGS"
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2handler
  
  case "bundle" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    SAPI_SHARED=libs/libphp5.so
    INSTALL_IT="$INSTALL_IT $SAPI_SHARED"
    ;;
  *beos*)
    if test -f _APP_; then `rm _APP_`; fi
    `ln -s $APXS_BINDIR/httpd _APP_`
    EXTRA_LIBS="$EXTRA_LIBS _APP_"
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2handler
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  *)
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache2handler
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


 
    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  esac

  if test "$APACHE_VERSION" -lt 2004001; then
    APXS_MPM=`$APXS -q MPM_NAME`
    if test "$APXS_MPM" != "prefork" && test "$APXS_MPM" != "peruser" && test "$APXS_MPM" != "itk"; then
      
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

    fi
  else
    APACHE_THREADED_MPM=`$APXS_HTTPD -V | grep 'threaded:.*yes'`
    if test -n "$APACHE_THREADED_MPM"; then
      
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

    fi
  fi
  echo "$ac_t""yes" 1>&6
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"

else
  echo "$ac_t""no" 1>&6
fi





php_with_apache_hooks=no


# Check whether --with-apache-hooks or --without-apache-hooks was given.
if test "${with_apache_hooks+set}" = set; then
  withval="$with_apache_hooks"
  PHP_APACHE_HOOKS=$withval
else
  
  PHP_APACHE_HOOKS=no
  

fi


ext_output=$PHP_APACHE_HOOKS





echo $ac_n "checking for Apache 1.x (hooks) module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:7241: checking for Apache 1.x (hooks) module support via DSO through APXS" >&5

if test "$PHP_APACHE_HOOKS" != "no"; then
  if test "$PHP_APACHE_HOOKS" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then #SUSE 6.x 
      APXS=/usr/sbin/apxs
    fi
  else
    
  if test -z "$PHP_APACHE_HOOKS" || echo "$PHP_APACHE_HOOKS" | grep '^/' >/dev/null ; then
    APXS=$PHP_APACHE_HOOKS
  else
    
    ep_dir="`echo $PHP_APACHE_HOOKS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$PHP_APACHE_HOOKS\"`"
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    echo "$ac_t""" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""Sorry, I was not able to successfully run APXS.  Possible reasons:" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""1.  Perl is not installed;" 1>&6
    echo "$ac_t""2.  Apache was not compiled with DSO support (--enable-module=so);" 1>&6
    echo "$ac_t""3.  'apxs' is not in your path.  Try to use --with-apxs=/path/to/apxs" 1>&6
    echo "$ac_t""The output of $APXS follows" 1>&6
    $APXS -q CFLAGS
    { echo "configure: error: Aborting" 1>&2; exit 1; } 
  fi 

  APXS_LDFLAGS="@SYBASE_LFLAGS@ @SYBASE_LIBS@ @SYBASE_CT_LFLAGS@ @SYBASE_CT_LIBS@"
  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APACHE_INCLUDE=-I$APXS_INCLUDEDIR

  # Test that we're trying to configure with apache 1.x
  
  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -ge 2000000; then
    { echo "configure: error: You have enabled Apache 1.3 support while your server is Apache 2.  Please use the appropiate switch --with-apxs2" 1>&2; exit 1; } 
  fi

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  case $host_alias in
  *aix*)
    APXS_LIBEXECDIR=`$APXS -q LIBEXECDIR`
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    PHP_AIX_LDFLAGS="-Wl,-brtl"
    build_type=shared
    ;;
  *darwin*)
    MH_BUNDLE_FLAGS="-dynamic -twolevel_namespace -bundle -bundle_loader $APXS_HTTPD"
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    SAPI_SHARED=libs/libphp5.so
    build_type=bundle
    ;;
  *)
    build_type=shared
    ;;
  esac

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache_hooks
  
  case "$build_type" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  # Test whether apxs support -S option
  $APXS -q -S CFLAGS="$APXS_CFLAGS" CFLAGS >/dev/null 2>&1

  if test "$?" != "0"; then
    APACHE_HOOKS_INSTALL="$APXS -i -a -n php5 $SAPI_SHARED" # Old apxs does not have -S option
  else 
    APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
    if test -z `$APXS -q SYSCONFDIR`; then
      APACHE_HOOKS_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -i -n php5 $SAPI_SHARED"
    else
      APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
      APACHE_HOOKS_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                      \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                             -i -a -n php5 $SAPI_SHARED"
    fi
  fi

  if test -z "`$APXS -q LD_SHLIB`" || test "`$APXS -q LIBEXECDIR`" = "modules"; then
    PHP_APXS_BROKEN=yes
  fi
  STRONGHOLD=
  cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_APACHE_HOOKS 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


php_with_apache_hooks_static=no


# Check whether --with-apache-hooks-static or --without-apache-hooks-static was given.
if test "${with_apache_hooks_static+set}" = set; then
  withval="$with_apache_hooks_static"
  PHP_APACHE_HOOKS_STATIC=$withval
else
  
  PHP_APACHE_HOOKS_STATIC=no
  

fi


ext_output=$PHP_APACHE_HOOKS_STATIC





echo $ac_n "checking for Apache 1.x (hooks) module support""... $ac_c" 1>&6
echo "configure:7572: checking for Apache 1.x (hooks) module support" >&5

if test "$PHP_SAPI" != "apache" && test "$PHP_SAPI" != "apache_hooks" && test "$PHP_APACHE_HOOKS_STATIC" != "no"; then

  if test "$PHP_APACHE_HOOKS_STATIC" = "yes"; then
    # Apache's default directory
    PHP_APACHE_HOOKS_STATIC=/usr/local/apache
  fi

  APACHE_HOOKS_INSTALL_FILES="\$(srcdir)/sapi/apache_hooks/mod_php5.* sapi/apache_hooks/libphp5.module"

  cat >> confdefs.h <<\EOF
#define HAVE_APACHE 1
EOF

  APACHE_HOOKS_MODULE=yes
  
  if test -z "$PHP_APACHE_HOOKS_STATIC" || echo "$PHP_APACHE_HOOKS_STATIC" | grep '^/' >/dev/null ; then
    PHP_APACHE_HOOKS_STATIC=$PHP_APACHE_HOOKS_STATIC
  else
    
    ep_dir="`echo $PHP_APACHE_HOOKS_STATIC|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    PHP_APACHE_HOOKS_STATIC="$ep_realdir/`basename \"$PHP_APACHE_HOOKS_STATIC\"`"
  fi

  # For Apache 1.2.x
  if test -f $PHP_APACHE_HOOKS_STATIC/src/httpd.h; then 
    APACHE_INCLUDE=-I$PHP_APACHE_HOOKS_STATIC/src
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/src
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache_hooks
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET"
    PHP_LIBS="-L. -lphp3"
    echo "$ac_t""yes - Apache 1.2.x" 1>&6
    STRONGHOLD=
    if test -f $PHP_APACHE_HOOKS_STATIC/src/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
  # For Apache 2.0.x
  elif test -f $PHP_APACHE_HOOKS_STATIC/include/httpd.h && test -f $PHP_APACHE_HOOKS_STATIC/srclib/apr/include/apr_general.h ; then
    { echo "configure: error: Use --with-apxs2 with Apache 2.x!" 1>&2; exit 1; }
  # For Apache 1.3.x
  elif test -f $PHP_APACHE_HOOKS_STATIC/src/main/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE_HOOKS_STATIC/src/main -I$PHP_APACHE_HOOKS_STATIC/src/os/unix -I$PHP_APACHE_HOOKS_STATIC/src/ap"
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache_hooks
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache_hooks/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache_hooks/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    echo "$ac_t""yes - Apache 1.3.x" 1>&6
    STRONGHOLD=
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

      if test ! -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config_auto.h; then
        { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
      fi
    elif test -f $PHP_APACHE_HOOKS_STATIC/src/include/compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

    fi
  # Also for Apache 1.3.x
  elif test -f $PHP_APACHE_HOOKS_STATIC/src/include/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE_HOOKS_STATIC/src/include -I$PHP_APACHE_HOOKS_STATIC/src/os/unix"
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache_hooks
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache_hooks/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache_hooks/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    echo "$ac_t""yes - Apache 1.3.x" 1>&6
    STRONGHOLD=
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

      if test ! -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config_auto.h; then
        { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
      fi
    elif test -f $PHP_APACHE_HOOKS_STATIC/src/include/compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

    fi
  # For StrongHold 2.2
  elif test -f $PHP_APACHE_HOOKS_STATIC/apache/httpd.h; then
    APACHE_INCLUDE="-I$PHP_APACHE_HOOKS_STATIC/apache -I$PHP_APACHE_HOOKS_STATIC/ssl/include"
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/apache
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=apache_hooks
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET"
    STRONGHOLD=-DSTRONGHOLD=1
    echo "$ac_t""yes - StrongHold" 1>&6
    if test -f $PHP_APACHE_HOOKS_STATIC/apache/ap_config.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

    fi
    if test -f $PHP_APACHE_HOOKS_STATIC/src/ap_compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

      if test ! -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config_auto.h; then
        { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
      fi
    elif test -f $PHP_APACHE_HOOKS_STATIC/src/compat.h; then
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

    fi
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Invalid Apache directory - unable to find httpd.h under $PHP_APACHE_HOOKS_STATIC" 1>&2; exit 1; }
  fi
else
  echo "$ac_t""no" 1>&6
fi

# compatibility
if test -z "$enable_mod_charset" && test "$with_mod_charset"; then
  enable_mod_charset=$with_mod_charset
fi


php_enable_mod_charset=no

echo $ac_n "checking whether to enable Apache charset compatibility option""... $ac_c" 1>&6
echo "configure:8449: checking whether to enable Apache charset compatibility option" >&5
# Check whether --enable-mod-charset or --disable-mod-charset was given.
if test "${enable_mod_charset+set}" = set; then
  enableval="$enable_mod_charset"
  PHP_MOD_CHARSET=$enableval
else
  
  PHP_MOD_CHARSET=no
  

fi


ext_output=$PHP_MOD_CHARSET
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MOD_CHARSET" = "yes"; then
  cat >> confdefs.h <<\EOF
#define USE_TRANSFER_TABLES 1
EOF

fi

if test "$APACHE_HOOKS_MODULE" = "yes"; then
  
  if test -n "$GCC"; then
        
  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
echo "configure:8481: checking whether $CC supports -rdynamic" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*
  
fi

echo "$ac_t""$ac_cv_gcc_arg_rdynamic" 1>&6
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :
    
  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  $php_shtool mkdir -p sapi/apache_hooks
  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/apache_hooks/libphp5.module"

fi

if test -n "$APACHE_HOOKS_INSTALL"; then
  if test "x$APXS" != "x" -a "`uname -sv`" = "AIX 4" -a "$GCC" != "yes"; then
    APXS_EXP=-bE:sapi/apache_hooks/mod_php5.exp
  fi

  
echo $ac_n "checking for member fd in BUFF *""... $ac_c" 1>&6
echo "configure:8524: checking for member fd in BUFF *" >&5
if eval "test \"`echo '$''{'ac_cv_php_fd_in_buff'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  save=$CPPFLAGS
  if test -n "$APXS_INCLUDEDIR"; then
    CPPFLAGS="$CPPFLAGS -I$APXS_INCLUDEDIR"
  else
    CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
  fi
  cat > conftest.$ac_ext <<EOF
#line 8536 "configure"
#include "confdefs.h"
#include <httpd.h>
int main() {
conn_rec *c; int fd = c->client->fd;
; return 0; }
EOF
if { (eval echo configure:8543: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    ac_cv_php_fd_in_buff=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_php_fd_in_buff=no
fi
rm -f conftest*
  CPPFLAGS=$save

fi

echo "$ac_t""$ac_cv_php_fd_in_buff" 1>&6
if test "$ac_cv_php_fd_in_buff" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_APACHE_HAVE_CLIENT_FD 1
EOF

fi

  INSTALL_IT=$APACHE_HOOKS_INSTALL

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_EXP"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INCLUDE"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_TARGET"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_LDFLAGS"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_HOOKS_INSTALL"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST STRONGHOLD"

fi



RESULT=no

php_with_caudium=no


# Check whether --with-caudium or --without-caudium was given.
if test "${with_caudium+set}" = set; then
  withval="$with_caudium"
  PHP_CAUDIUM=$withval
else
  
  PHP_CAUDIUM=no
  

fi


ext_output=$PHP_CAUDIUM





echo $ac_n "checking for Caudium support""... $ac_c" 1>&6
echo "configure:8617: checking for Caudium support" >&5

if test "$PHP_CAUDIUM" != "no"; then
  if test "$prefix" = "NONE"; then CPREF=/usr/local/; fi
  if test ! -d $PHP_CAUDIUM ; then
    if test "$prefix" = "NONE"; then
      PHP_CAUDIUM=/usr/local/caudium/server/
    else
      PHP_CAUDIUM=$prefix/caudium/server/
    fi
  fi
  if test -f $PHP_CAUDIUM/bin/caudium; then
    PIKE=$PHP_CAUDIUM/bin/caudium
  elif test -f $PHP_CAUDIUM/bin/pike; then
    PIKE=$PHP_CAUDIUM/bin/pike
  else
    { echo "configure: error: Could not find a pike in $PHP_CAUDIUM/bin/" 1>&2; exit 1; }
  fi
  if $PIKE -e 'float v; int rel;sscanf(version(), "Pike v%f release %d", v, rel);v += rel/10000.0; if(v < 7.0268) exit(1); exit(0);'; then
    PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,' `
    if test -z "$PIKE_INCLUDE_DIR" || test -z "$PIKE_MODULE_DIR"; then
      { echo "configure: error: Failed to figure out Pike module and include directories" 1>&2; exit 1; }
    fi
    echo "$ac_t""yes" 1>&6
    PIKE=`echo $PIKE | pike -e 'int tries=100;
       string orig,pike=Stdio.File("stdin")->read()-"\n";
       orig=pike;
       if(search(orig, "/"))
         orig = combine_path(getcwd(), orig);
       while(!catch(pike=readlink(pike)) && tries--)
         ;
       write(combine_path(dirname(orig), pike)); '`
    
  if test "$PIKE_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$PIKE_INCLUDE_DIR" || echo "$PIKE_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_INCLUDE_DIR
  else
    
    ep_dir="`echo $PIKE_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PIKE_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    if test "$prefix" != "NONE"; then
      PIKE_C_INCLUDE=$prefix/include/`basename $PIKE`
    else
      PIKE_C_INCLUDE=/usr/local/include/`basename $PIKE`
    fi
    echo $ac_n "checking for C includes in $PIKE_C_INCLUDE""... $ac_c" 1>&6
echo "configure:8687: checking for C includes in $PIKE_C_INCLUDE" >&5
    if test -f $PIKE_C_INCLUDE/version.h; then
      PIKE_TEST_VER=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`
      ###### VERSION MATCH CHECK #######
      PMAJOR="^#define PIKE_MAJOR_VERSION"
      PMINOR="^#define PIKE_MINOR_VERSION"
      PBUILD="^#define PIKE_BUILD_VERSION"

      PIKE_CMAJOR_VERSION=0
      PIKE_CMINOR_VERSION=0
      PIKE_CBUILD_VERSION=0

      PIKE_CMAJOR_VERSION=`grep "$PMAJOR" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
      if test -z "$PIKE_CMAJOR_VERSION"; then
        if test -n "`grep f_version $PIKE_C_INCLUDE/version.h`"; then
          PIKE_CMAJOR_VERSION=6
        fi
      else
        PIKE_CMINOR_VERSION=`grep "$PMINOR" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
        PIKE_CBUILD_VERSION=`grep "$PBUILD" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
      fi

      if test "$PIKE_TEST_VER" = "${PIKE_CMAJOR_VERSION}.${PIKE_CMINOR_VERSION}.${PIKE_CBUILD_VERSION}"; then
        
  if test "$PIKE_C_INCLUDE" != "/usr/include"; then
    
  if test -z "$PIKE_C_INCLUDE" || echo "$PIKE_C_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_C_INCLUDE
  else
    
    ep_dir="`echo $PIKE_C_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PIKE_C_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

        PIKE_INCLUDE_DIR="$PIKE_INCLUDE_DIR, $PIKE_C_INCLUDE"
        echo "$ac_t""found" 1>&6
      else
        echo "$ac_t""version mismatch" 1>&6
      fi
    else
      echo "$ac_t""not found" 1>&6
    fi
  else
    { echo "configure: error: Caudium PHP5 requires Pike 7.0 or newer" 1>&2; exit 1; }
  fi
  PIKE_VERSION=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`   
  cat >> confdefs.h <<\EOF
#define HAVE_CAUDIUM 1
EOF

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=caudium
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/caudium in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/caudium"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/caudium/"; ac_bdir="sapi/caudium/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in caudium.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_CAUDIUM/lib/$PIKE_VERSION/PHP5.so"
  RESULT="  *** Pike binary used:         $PIKE
  *** Pike include dir(s) used: $PIKE_INCLUDE_DIR
  *** Pike version:             $PIKE_VERSION"
    
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

fi
echo "$ac_t""$RESULT" 1>&6




php_enable_cli=yes


# Check whether --enable-cli or --disable-cli was given.
if test "${enable_cli+set}" = set; then
  enableval="$enable_cli"
  PHP_CLI=$enableval
else
  
  PHP_CLI=yes
  

fi


ext_output=$PHP_CLI





echo $ac_n "checking for CLI build""... $ac_c" 1>&6
echo "configure:8976: checking for CLI build" >&5
if test "$PHP_CLI" != "no"; then
  
  src=$abs_srcdir/sapi/cli/Makefile.frag
  ac_srcdir=$abs_srcdir/sapi/cli
  ac_builddir=sapi/cli
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

  SAPI_CLI_PATH=sapi/cli/php
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_CLI_PATH"


  case $host_alias in
  *aix*)
    if test "$php_build_target" = "shared"; then
      BUILD_CLI="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/.libs\/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    else
      BUILD_CLI="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    fi
    ;;
  *darwin*)
    BUILD_CLI="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_CLI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    ;;
  *netware*)
    BUILD_CLI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -Lnetware -lphp5lib -o \$(SAPI_CLI_PATH)"
    ;;
  *)
    BUILD_CLI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    ;;
  esac
  INSTALL_CLI="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(bindir); \$(INSTALL) -m 0755 \$(SAPI_CLI_PATH) \$(INSTALL_ROOT)\$(bindir)/\$(program_prefix)php\$(program_suffix)\$(EXEEXT)"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_CLI"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_CLI"

  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/cli/php.1"

fi
echo "$ac_t""$PHP_CLI" 1>&6



php_with_continuity=no

echo $ac_n "checking for Continuity support""... $ac_c" 1>&6
echo "configure:9026: checking for Continuity support" >&5
# Check whether --with-continuity or --without-continuity was given.
if test "${with_continuity+set}" = set; then
  withval="$with_continuity"
  PHP_CONTINUITY=$withval
else
  
  PHP_CONTINUITY=no
  

fi


ext_output=$PHP_CONTINUITY
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CONTINUITY" != "no"; then
  if test ! -d $PHP_CONTINUITY; then
    { echo "configure: error: Please specify the path to the root of your Continuity server using --with-continuity=DIR" 1>&2; exit 1; }
  fi
  echo $ac_n "checking for Continuity include files""... $ac_c" 1>&6
echo "configure:9050: checking for Continuity include files" >&5
  if test -d $PHP_CONTINUITY/include ; then
    CAPI_INCLUDE=$PHP_CONTINUITY/include
    echo "$ac_t""Continuity Binary Distribution" 1>&6
  else
    { echo "configure: error: Cannot find your CAPI include files in either DIR/src or DIR/include" 1>&2; exit 1; }
  fi

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=continuity
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/continuity in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/continuity"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/continuity/"; ac_bdir="sapi/continuity/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in capi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  
  if test "$CAPI_INCLUDE" != "/usr/include"; then
    
  if test -z "$CAPI_INCLUDE" || echo "$CAPI_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$CAPI_INCLUDE
  else
    
    ep_dir="`echo $CAPI_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CAPI_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_CONTINUITY 1
EOF

  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_CONTINUITY/lib/"
fi




php_enable_embed=no


# Check whether --enable-embed or --disable-embed was given.
if test "${enable_embed+set}" = set; then
  enableval="$enable_embed"
  PHP_EMBED=$enableval
else
  
  PHP_EMBED=no
  

fi


ext_output=$PHP_EMBED





echo $ac_n "checking for embedded SAPI library support""... $ac_c" 1>&6
echo "configure:9308: checking for embedded SAPI library support" >&5

if test "$PHP_EMBED" != "no"; then
  case "$PHP_EMBED" in
    yes|shared)
      PHP_EMBED_TYPE=shared
      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)\$(prefix)/lib"
      ;;
    static)
      PHP_EMBED_TYPE=static
      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0644 $SAPI_STATIC \$(INSTALL_ROOT)\$(prefix)/lib"
      ;;
    *)
      PHP_EMBED_TYPE=no
      ;;
  esac
  if test "$PHP_EMBED_TYPE" != "no"; then
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=embed
  
  case "$PHP_EMBED_TYPE" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/embed in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/embed"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/embed/"; ac_bdir="sapi/embed/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_embed.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    
  
    for header_file in sapi/embed/php_embed.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  fi
  echo "$ac_t""$PHP_EMBED_TYPE" 1>&6
else
  echo "$ac_t""no" 1>&6
fi




php_enable_fpm=no


# Check whether --enable-fpm or --disable-fpm was given.
if test "${enable_fpm+set}" = set; then
  enableval="$enable_fpm"
  PHP_FPM=$enableval
else
  
  PHP_FPM=no
  

fi


ext_output=$PHP_FPM


































echo $ac_n "checking for FPM build""... $ac_c" 1>&6
echo "configure:9584: checking for FPM build" >&5
if test "$PHP_FPM" != "no"; then
  echo "$ac_t""$PHP_FPM" 1>&6

  
  for ac_func in setenv clearenv setproctitle
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:9592: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9597 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9620: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  
echo $ac_n "checking for library containing socket""... $ac_c" 1>&6
echo "configure:9647: checking for library containing socket" >&5
if eval "test \"`echo '$''{'ac_cv_search_socket'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_func_search_save_LIBS="$LIBS"
ac_cv_search_socket="no"
cat > conftest.$ac_ext <<EOF
#line 9654 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:9665: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_socket="none required"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
test "$ac_cv_search_socket" = "no" && for i in socket; do
LIBS="-l$i  $ac_func_search_save_LIBS"
cat > conftest.$ac_ext <<EOF
#line 9676 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:9687: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_socket="-l$i"
break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
LIBS="$ac_func_search_save_LIBS"
fi

echo "$ac_t""$ac_cv_search_socket" 1>&6
if test "$ac_cv_search_socket" != "no"; then
  test "$ac_cv_search_socket" = "none required" || LIBS="$ac_cv_search_socket $LIBS"
  
else :
  
fi
  
echo $ac_n "checking for library containing inet_addr""... $ac_c" 1>&6
echo "configure:9709: checking for library containing inet_addr" >&5
if eval "test \"`echo '$''{'ac_cv_search_inet_addr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_func_search_save_LIBS="$LIBS"
ac_cv_search_inet_addr="no"
cat > conftest.$ac_ext <<EOF
#line 9716 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_addr();

int main() {
inet_addr()
; return 0; }
EOF
if { (eval echo configure:9727: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_inet_addr="none required"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
test "$ac_cv_search_inet_addr" = "no" && for i in nsl; do
LIBS="-l$i  $ac_func_search_save_LIBS"
cat > conftest.$ac_ext <<EOF
#line 9738 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_addr();

int main() {
inet_addr()
; return 0; }
EOF
if { (eval echo configure:9749: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_inet_addr="-l$i"
break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
LIBS="$ac_func_search_save_LIBS"
fi

echo "$ac_t""$ac_cv_search_inet_addr" 1>&6
if test "$ac_cv_search_inet_addr" != "no"; then
  test "$ac_cv_search_inet_addr" = "none required" || LIBS="$ac_cv_search_inet_addr $LIBS"
  
else :
  
fi

  for ac_hdr in errno.h fcntl.h stdio.h stdlib.h unistd.h sys/uio.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9774: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9779 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9784: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in sys/select.h sys/socket.h sys/time.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9814: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9819 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9824: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in arpa/inet.h netinet/in.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9854: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9859 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9864: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in sysexits.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9894: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9899 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9904: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  
  echo $ac_n "checking for prctl""... $ac_c" 1>&6
echo "configure:9933: checking for prctl" >&5

  cat > conftest.$ac_ext <<EOF
#line 9936 "configure"
#include "confdefs.h"
 #include <sys/prctl.h> 
int main() {
prctl(0, 0, 0, 0, 0);
; return 0; }
EOF
if { (eval echo configure:9943: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define HAVE_PRCTL 1
EOF

    echo "$ac_t""yes" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    echo "$ac_t""no" 1>&6
  
fi
rm -f conftest*

  
  have_clock_gettime=no

  echo $ac_n "checking for clock_gettime""... $ac_c" 1>&6
echo "configure:9966: checking for clock_gettime" >&5

  cat > conftest.$ac_ext <<EOF
#line 9969 "configure"
#include "confdefs.h"
 #include <time.h> 
int main() {
struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
; return 0; }
EOF
if { (eval echo configure:9976: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
    have_clock_gettime=yes
    echo "$ac_t""yes" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    echo "$ac_t""no" 1>&6
  
fi
rm -f conftest*

  if test "$have_clock_gettime" = "no"; then
    echo $ac_n "checking for clock_gettime in -lrt""... $ac_c" 1>&6
echo "configure:9994: checking for clock_gettime in -lrt" >&5

    SAVED_LIBS="$LIBS"
    LIBS="$LIBS -lrt"

    cat > conftest.$ac_ext <<EOF
#line 10000 "configure"
#include "confdefs.h"
 #include <time.h> 
int main() {
struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
; return 0; }
EOF
if { (eval echo configure:10007: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
      have_clock_gettime=yes
      echo "$ac_t""yes" 1>&6
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      LIBS="$SAVED_LIBS"
      echo "$ac_t""no" 1>&6
    
fi
rm -f conftest*
  fi

  if test "$have_clock_gettime" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_CLOCK_GETTIME 1
EOF

  fi

  have_clock_get_time=no

  if test "$have_clock_gettime" = "no"; then
    echo $ac_n "checking for clock_get_time""... $ac_c" 1>&6
echo "configure:10036: checking for clock_get_time" >&5

    if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 10042 "configure"
#include "confdefs.h"
 #include <mach/mach.h>
      #include <mach/clock.h>
      #include <mach/mach_error.h>

      int main()
      {
        kern_return_t ret; clock_serv_t aClock; mach_timespec_t aTime;
        ret = host_get_clock_service(mach_host_self(), REALTIME_CLOCK, &aClock);

        if (ret != KERN_SUCCESS) {
          return 1;
        }

        ret = clock_get_time(aClock, &aTime);
        if (ret != KERN_SUCCESS) {
          return 2;
        }

        return 0;
      }
    
EOF
if { (eval echo configure:10066: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      have_clock_get_time=yes
      echo "$ac_t""yes" 1>&6
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      echo "$ac_t""no" 1>&6
    
fi
rm -fr conftest*
fi

  fi

  if test "$have_clock_get_time" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_CLOCK_GET_TIME 1
EOF

  fi

  
  have_ptrace=no
  have_broken_ptrace=no

  echo $ac_n "checking for ptrace""... $ac_c" 1>&6
echo "configure:10097: checking for ptrace" >&5

  cat > conftest.$ac_ext <<EOF
#line 10100 "configure"
#include "confdefs.h"

    #include <sys/types.h>
    #include <sys/ptrace.h> 
int main() {
ptrace(0, 0, (void *) 0, 0);
; return 0; }
EOF
if { (eval echo configure:10109: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    have_ptrace=yes
    echo "$ac_t""yes" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    echo "$ac_t""no" 1>&6
  
fi
rm -f conftest*

  if test "$have_ptrace" = "yes"; then
    echo $ac_n "checking whether ptrace works""... $ac_c" 1>&6
echo "configure:10127: checking whether ptrace works" >&5

    if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 10133 "configure"
#include "confdefs.h"

      #include <unistd.h>
      #include <signal.h>
      #include <sys/wait.h>
      #include <sys/types.h>
      #include <sys/ptrace.h>
      #include <errno.h>

      #if !defined(PTRACE_ATTACH) && defined(PT_ATTACH)
      #define PTRACE_ATTACH PT_ATTACH
      #endif

      #if !defined(PTRACE_DETACH) && defined(PT_DETACH)
      #define PTRACE_DETACH PT_DETACH
      #endif

      #if !defined(PTRACE_PEEKDATA) && defined(PT_READ_D)
      #define PTRACE_PEEKDATA PT_READ_D
      #endif

      int main()
      {
        long v1 = (unsigned int) -1; /* copy will fail if sizeof(long) == 8 and we've got "int ptrace()" */
        long v2;
        pid_t child;
        int status;

        if ( (child = fork()) ) { /* parent */
          int ret = 0;

          if (0 > ptrace(PTRACE_ATTACH, child, 0, 0)) {
            return 2;
          }

          waitpid(child, &status, 0);

      #ifdef PT_IO
          struct ptrace_io_desc ptio = {
            .piod_op = PIOD_READ_D,
            .piod_offs = &v1,
            .piod_addr = &v2,
            .piod_len = sizeof(v1)
          };

          if (0 > ptrace(PT_IO, child, (void *) &ptio, 0)) {
            ret = 3;
          }
      #else
          errno = 0;

          v2 = ptrace(PTRACE_PEEKDATA, child, (void *) &v1, 0);

          if (errno) {
            ret = 4;
          }
      #endif
          ptrace(PTRACE_DETACH, child, (void *) 1, 0);

          kill(child, SIGKILL);

          return ret ? ret : (v1 != v2);
        }
        else { /* child */
          sleep(10);
          return 0;
        }
      }
    
EOF
if { (eval echo configure:10204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      echo "$ac_t""yes" 1>&6
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      have_ptrace=no
      have_broken_ptrace=yes
      echo "$ac_t""no" 1>&6
    
fi
rm -fr conftest*
fi

  fi

  if test "$have_ptrace" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_PTRACE 1
EOF

  fi

  have_mach_vm_read=no

  if test "$have_broken_ptrace" = "yes"; then
    echo $ac_n "checking for mach_vm_read""... $ac_c" 1>&6
echo "configure:10235: checking for mach_vm_read" >&5

    cat > conftest.$ac_ext <<EOF
#line 10238 "configure"
#include "confdefs.h"
 #include <mach/mach.h>
      #include <mach/mach_vm.h>
    
int main() {

      mach_vm_read((vm_map_t)0, (mach_vm_address_t)0, (mach_vm_size_t)0, (vm_offset_t *)0, (mach_msg_type_number_t*)0);
    
; return 0; }
EOF
if { (eval echo configure:10249: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
      have_mach_vm_read=yes
      echo "$ac_t""yes" 1>&6
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      echo "$ac_t""no" 1>&6
    
fi
rm -f conftest*
  fi

  if test "$have_mach_vm_read" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_MACH_VM_READ 1
EOF

  fi

  proc_mem_file=""

  if test -r /proc/$$/mem ; then
    proc_mem_file="mem"
  else
    if test -r /proc/$$/as ; then
      proc_mem_file="as"
    fi
  fi

  if test -n "$proc_mem_file" ; then
    echo $ac_n "checking for proc mem file""... $ac_c" 1>&6
echo "configure:10285: checking for proc mem file" >&5
  
    if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 10291 "configure"
#include "confdefs.h"

      #define _GNU_SOURCE
      #define _FILE_OFFSET_BITS 64
      #include <stdint.h>
      #include <unistd.h>
      #include <sys/types.h>
      #include <sys/stat.h>
      #include <fcntl.h>
      #include <stdio.h>
      int main()
      {
        long v1 = (unsigned int) -1, v2 = 0;
        char buf[128];
        int fd;
        sprintf(buf, "/proc/%d/$proc_mem_file", getpid());
        fd = open(buf, O_RDONLY);
        if (0 > fd) {
          return 1;
        }
        if (sizeof(long) != pread(fd, &v2, sizeof(long), (uintptr_t) &v1)) {
          close(fd);
          return 1;
        }
        close(fd);
        return v1 != v2;
      }
    
EOF
if { (eval echo configure:10321: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      echo "$ac_t""$proc_mem_file" 1>&6
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      proc_mem_file=""
      echo "$ac_t""no" 1>&6
    
fi
rm -fr conftest*
fi

  fi
  
  if test -n "$proc_mem_file"; then
    cat >> confdefs.h <<EOF
#define PROC_MEM_FILE "$proc_mem_file"
EOF

  fi
  
  fpm_trace_type=""

  if test "$have_ptrace" = "yes"; then
    fpm_trace_type=ptrace
    
  elif test -n "$proc_mem_file"; then
    fpm_trace_type=pread
    
  elif test "$have_mach_vm_read" = "yes" ; then
    fpm_trace_type=mach
    
  else
    echo "configure: warning: FPM Trace - ptrace, pread, or mach: could not be found" 1>&2    
  fi
  

  
  echo $ac_n "checking if gcc supports __sync_bool_compare_and_swap""... $ac_c" 1>&6
echo "configure:10365: checking if gcc supports __sync_bool_compare_and_swap" >&5
  cat > conftest.$ac_ext <<EOF
#line 10367 "configure"
#include "confdefs.h"

int main() {

    int variable = 1;
    return (__sync_bool_compare_and_swap(&variable, 1, 2)
           && __sync_add_and_fetch(&variable, 1)) ? 1 : 0;
  
; return 0; }
EOF
if { (eval echo configure:10378: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
    echo "$ac_t""yes" 1>&6
    cat >> confdefs.h <<\EOF
#define HAVE_BUILTIN_ATOMIC 1
EOF

  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    echo "$ac_t""no" 1>&6
  
fi
rm -f conftest*

  
  have_lq=no

  echo $ac_n "checking for TCP_INFO""... $ac_c" 1>&6
echo "configure:10401: checking for TCP_INFO" >&5

  cat > conftest.$ac_ext <<EOF
#line 10404 "configure"
#include "confdefs.h"
 #include <netinet/tcp.h> 
int main() {
struct tcp_info ti; int x = TCP_INFO;
; return 0; }
EOF
if { (eval echo configure:10411: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    have_lq=tcp_info
    echo "$ac_t""yes" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    echo "$ac_t""no" 1>&6
  
fi
rm -f conftest*

  if test "$have_lq" = "tcp_info"; then
    cat >> confdefs.h <<\EOF
#define HAVE_LQ_TCP_INFO 1
EOF

  fi

  if test "$have_lq" = "no" ; then
    echo $ac_n "checking for SO_LISTENQLEN""... $ac_c" 1>&6
echo "configure:10436: checking for SO_LISTENQLEN" >&5

    cat > conftest.$ac_ext <<EOF
#line 10439 "configure"
#include "confdefs.h"
 #include <sys/socket.h> 
int main() {
int x = SO_LISTENQLIMIT; int y = SO_LISTENQLEN;
; return 0; }
EOF
if { (eval echo configure:10446: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
      have_lq=so_listenq
      echo "$ac_t""yes" 1>&6
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      echo "$ac_t""no" 1>&6
    
fi
rm -f conftest*

    if test "$have_lq" = "tcp_info"; then
      cat >> confdefs.h <<\EOF
#define HAVE_LQ_SO_LISTENQ 1
EOF

    fi
  fi

	
	echo $ac_n "checking for sysconf""... $ac_c" 1>&6
echo "configure:10472: checking for sysconf" >&5

	cat > conftest.$ac_ext <<EOF
#line 10475 "configure"
#include "confdefs.h"
 #include <unistd.h> 
int main() {
sysconf(_SC_CLK_TCK);
; return 0; }
EOF
if { (eval echo configure:10482: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_SYSCONF 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*

	
	echo $ac_n "checking for times""... $ac_c" 1>&6
echo "configure:10503: checking for times" >&5

	cat > conftest.$ac_ext <<EOF
#line 10506 "configure"
#include "confdefs.h"
 #include <sys/times.h> 
int main() {
struct tms t; times(&t);
; return 0; }
EOF
if { (eval echo configure:10513: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_TIMES 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*

	
	echo $ac_n "checking for kqueue""... $ac_c" 1>&6
echo "configure:10534: checking for kqueue" >&5

	cat > conftest.$ac_ext <<EOF
#line 10537 "configure"
#include "confdefs.h"
 
		#include <sys/types.h>
		#include <sys/event.h>
		#include <sys/time.h>
	
int main() {

		int kfd;
		struct kevent k;
		kfd = kqueue();
		/* 0 -> STDIN_FILENO */
		EV_SET(&k, 0, EVFILT_READ , EV_ADD | EV_CLEAR, 0, 0, NULL);
	
; return 0; }
EOF
if { (eval echo configure:10554: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_KQUEUE 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*

	
	echo $ac_n "checking for port framework""... $ac_c" 1>&6
echo "configure:10575: checking for port framework" >&5

	cat > conftest.$ac_ext <<EOF
#line 10578 "configure"
#include "confdefs.h"
 
		#include <port.h>
	
int main() {

		int port;

		port = port_create();
		if (port < 0) {
			return 1;
		}
	
; return 0; }
EOF
if { (eval echo configure:10594: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_PORT 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*

	
	echo $ac_n "checking for /dev/poll""... $ac_c" 1>&6
echo "configure:10615: checking for /dev/poll" >&5

	cat > conftest.$ac_ext <<EOF
#line 10618 "configure"
#include "confdefs.h"
 
		#include <stdio.h>
		#include <sys/devpoll.h>
	
int main() {

		int n, dp;
		struct dvpoll dvp;
		dp = 0;
		dvp.dp_fds = NULL;
		dvp.dp_nfds = 0;
		dvp.dp_timeout = 0;
		n = ioctl(dp, DP_POLL, &dvp)
	
; return 0; }
EOF
if { (eval echo configure:10636: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_DEVPOLL 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*

	
	echo $ac_n "checking for epoll""... $ac_c" 1>&6
echo "configure:10657: checking for epoll" >&5

	cat > conftest.$ac_ext <<EOF
#line 10660 "configure"
#include "confdefs.h"
 
		#include <sys/epoll.h>
	
int main() {

		int epollfd;
		struct epoll_event e;

		epollfd = epoll_create(1);
		if (epollfd < 0) {
			return 1;
		}

		e.events = EPOLLIN | EPOLLET;
		e.data.fd = 0;

		if (epoll_ctl(epollfd, EPOLL_CTL_ADD, 0, &e) == -1) {
			return 1;
		}

		e.events = 0;
		if (epoll_wait(epollfd, &e, 1, 1) < 0) {
			return 1;
		}
	
; return 0; }
EOF
if { (eval echo configure:10689: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_EPOLL 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*

	
	echo $ac_n "checking for poll""... $ac_c" 1>&6
echo "configure:10710: checking for poll" >&5

	cat > conftest.$ac_ext <<EOF
#line 10713 "configure"
#include "confdefs.h"
 
		#include <poll.h>
	
int main() {

		struct pollfd fds[2];

		fds[0].fd = 0;
		fds[0].events = POLLIN;

		fds[1].fd = 0;
		fds[1].events = POLLIN;

		 poll(fds, 2, 1);
	
; return 0; }
EOF
if { (eval echo configure:10732: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_POLL 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*

	
	echo $ac_n "checking for select""... $ac_c" 1>&6
echo "configure:10753: checking for select" >&5

	cat > conftest.$ac_ext <<EOF
#line 10756 "configure"
#include "confdefs.h"
 
		/* According to POSIX.1-2001 */
		#include <sys/select.h>

		/* According to earlier standards */
		#include <sys/time.h>
		#include <sys/types.h>
		#include <unistd.h>
	
int main() {

		fd_set fds;
		struct timeval t;
		t.tv_sec = 0;
		t.tv_usec = 42;
		FD_ZERO(&fds);
		/* 0 -> STDIN_FILENO */
		FD_SET(0, &fds);
		select(FD_SETSIZE, &fds, NULL, NULL, &t);
	
; return 0; }
EOF
if { (eval echo configure:10780: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
		cat >> confdefs.h <<\EOF
#define HAVE_SELECT 1
EOF

		echo "$ac_t""yes" 1>&6
	
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
		echo "$ac_t""no" 1>&6
	
fi
rm -f conftest*


  
php_with_fpm_user=nobody


# Check whether --with-fpm-user or --without-fpm-user was given.
if test "${with_fpm_user+set}" = set; then
  withval="$with_fpm_user"
  PHP_FPM_USER=$withval
else
  
  PHP_FPM_USER=nobody
  

fi


ext_output=$PHP_FPM_USER





  
php_with_fpm_group=nobody


# Check whether --with-fpm-group or --without-fpm-group was given.
if test "${with_fpm_group+set}" = set; then
  withval="$with_fpm_group"
  PHP_FPM_GROUP=$withval
else
  
  PHP_FPM_GROUP=nobody
  

fi


ext_output=$PHP_FPM_GROUP





  if test -z "$PHP_FPM_USER" -o "$PHP_FPM_USER" = "yes" -o "$PHP_FPM_USER" = "no"; then
    php_fpm_user="nobody"
  else
    php_fpm_user="$PHP_FPM_USER"
  fi

  if test -z "$PHP_FPM_GROUP" -o "$PHP_FPM_GROUP" = "yes" -o "$PHP_FPM_GROUP" = "no"; then
    php_fpm_group="nobody"
  else
    php_fpm_group="$PHP_FPM_GROUP"
  fi

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_user"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_group"

  

  php_fpm_sysconfdir=`eval echo $sysconfdir`
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_sysconfdir"

  

  php_fpm_localstatedir=`eval echo $localstatedir`
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_localstatedir"

  

  php_fpm_prefix=`eval echo $prefix`
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_prefix"

  


  cat >> confdefs.h <<EOF
#define PHP_FPM_USER "$php_fpm_user"
EOF

  cat >> confdefs.h <<EOF
#define PHP_FPM_GROUP "$php_fpm_group"
EOF


  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/fpm/php-fpm.conf sapi/fpm/init.d.php-fpm sapi/fpm/php-fpm.service sapi/fpm/php-fpm.8 sapi/fpm/status.html"

  
  src=$abs_srcdir/sapi/fpm/Makefile.frag
  ac_srcdir=$abs_srcdir/sapi/fpm
  ac_builddir=sapi/fpm
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  SAPI_FPM_PATH=sapi/fpm/php-fpm
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_FPM_PATH"

  
  if test "$fpm_trace_type" && test -f "$abs_srcdir/sapi/fpm/fpm/fpm_trace_$fpm_trace_type.c"; then
    PHP_FPM_TRACE_FILES="fpm/fpm_trace.c fpm/fpm_trace_$fpm_trace_type.c"
  fi
  
  PHP_FPM_CFLAGS="-I$abs_srcdir/sapi/fpm"
 
  INSTALL_IT=":"
  PHP_FPM_FILES="fpm/fastcgi.c \
    fpm/fpm.c \
    fpm/fpm_children.c \
    fpm/fpm_cleanup.c \
    fpm/fpm_clock.c \
    fpm/fpm_conf.c \
    fpm/fpm_env.c \
    fpm/fpm_events.c \
		fpm/fpm_log.c \
    fpm/fpm_main.c \
    fpm/fpm_php.c \
    fpm/fpm_php_trace.c \
    fpm/fpm_process_ctl.c \
    fpm/fpm_request.c \
    fpm/fpm_shm.c \
    fpm/fpm_scoreboard.c \
    fpm/fpm_signals.c \
    fpm/fpm_sockets.c \
    fpm/fpm_status.c \
    fpm/fpm_stdio.c \
    fpm/fpm_unix.c \
    fpm/fpm_worker_pool.c \
    fpm/zlog.c \
		fpm/events/select.c \
		fpm/events/poll.c \
		fpm/events/epoll.c \
		fpm/events/kqueue.c \
		fpm/events/devpoll.c \
		fpm/events/port.c \
  "

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=fpm
  
  case "program" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET='$(SAPI_FPM_PATH)'
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/fpm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/fpm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/fpm/"; ac_bdir="sapi/fpm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_FPM_FILES $PHP_FPM_TRACE_FILES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $PHP_FPM_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $PHP_FPM_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $PHP_FPM_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $PHP_FPM_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  case $host_alias in
      *aix*)
        BUILD_FPM="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(SAPI_EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_FPM_PATH)"
        ;;
      *darwin*)
        BUILD_FPM="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_SAPI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(SAPI_EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_FPM_PATH)"
      ;;
      *)
        BUILD_FPM="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(SAPI_EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_FPM_PATH)"
      ;;
  esac

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_FPM"

else
  echo "$ac_t""no" 1>&6
fi



php_with_isapi=no

echo $ac_n "checking for Zeus ISAPI support""... $ac_c" 1>&6
echo "configure:11158: checking for Zeus ISAPI support" >&5
# Check whether --with-isapi or --without-isapi was given.
if test "${with_isapi+set}" = set; then
  withval="$with_isapi"
  PHP_ISAPI=$withval
else
  
  PHP_ISAPI=no
  

fi


ext_output=$PHP_ISAPI
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ISAPI" != "no"; then
  if test "$PHP_ISAPI" = "yes"; then
    ZEUSPATH=/usr/local/zeus # the default
  else
    ZEUSPATH=$PHP_ISAPI
  fi
  test -f "$ZEUSPATH/web/include/httpext.h" || { echo "configure: error: Unable to find httpext.h in $ZEUSPATH/web/include" 1>&2; exit 1; }
  
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define WITH_ZEUS 1
EOF

  
  if test "$ZEUSPATH/web/include" != "/usr/include"; then
    
  if test -z "$ZEUSPATH/web/include" || echo "$ZEUSPATH/web/include" | grep '^/' >/dev/null ; then
    ai_p=$ZEUSPATH/web/include
  else
    
    ep_dir="`echo $ZEUSPATH/web/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZEUSPATH/web/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=isapi
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/isapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/isapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/isapi/"; ac_bdir="sapi/isapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php5isapi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$ZEUSPATH/web/bin/"
fi



echo $ac_n "checking for LiteSpeed support""... $ac_c" 1>&6
echo "configure:11412: checking for LiteSpeed support" >&5


php_with_litespeed=no


# Check whether --with-litespeed or --without-litespeed was given.
if test "${with_litespeed+set}" = set; then
  withval="$with_litespeed"
  PHP_LITESPEED=$withval
else
  
  PHP_LITESPEED=no
  test "$PHP_ENABLE_ALL" && PHP_LITESPEED=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LITESPEED in
shared,*)
  PHP_LITESPEED=`echo "$PHP_LITESPEED"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LITESPEED=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








if test "$PHP_LITESPEED" != "no"; then
  
  src=$abs_srcdir/sapi/litespeed/Makefile.frag
  ac_srcdir=$abs_srcdir/sapi/litespeed
  ac_builddir=sapi/litespeed
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

  SAPI_LITESPEED_PATH=sapi/litespeed/php
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_LITESPEED_PATH"

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=litespeed
  
  case "program" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET='$(SAPI_LITESPEED_PATH)'
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/litespeed in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/litespeed"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/litespeed/"; ac_bdir="sapi/litespeed/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in lsapi_main.c lsapilib.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre "" $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre "" $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre "" $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre "" $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


 
  INSTALL_IT="@echo \"Installing PHP LiteSpeed into: \$(INSTALL_ROOT)\$(bindir)/\"; \$(INSTALL) -m 0755 \$(SAPI_LITESPEED_PATH) \$(INSTALL_ROOT)\$(bindir)/lsphp"
  case $host_alias in
  *darwin*)
    BUILD_LITESPEED="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_SAPI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_LITESPEED_PATH)"
    ;;
  *cygwin*)
    SAPI_LITESPEED_PATH=sapi/litespeed/php.exe
    BUILD_LITESPEED="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_LITESPEED_PATH)"
    ;;
  *)
    BUILD_LITESPEED="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_LITESPEED_PATH)"
    ;;
  esac

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_LITESPEED"

fi

echo "$ac_t""$PHP_LITESPEED" 1>&6



php_with_milter=no

echo $ac_n "checking for Milter support""... $ac_c" 1>&6
echo "configure:11675: checking for Milter support" >&5
# Check whether --with-milter or --without-milter was given.
if test "${with_milter+set}" = set; then
  withval="$with_milter"
  PHP_MILTER=$withval
else
  
  PHP_MILTER=no
  

fi


ext_output=$PHP_MILTER
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MILTER" != "no"; then
  if test "$PHP_MILTER" = "yes"; then
    if test -f /usr/lib/libmilter.a ; then
      MILTERPATH=/usr/lib
    else
      if test -f /usr/lib/libmilter/libmilter.a ; then
        MILTERPATH=/usr/lib/libmilter
      else
        { echo "configure: error: Unable to find libmilter.a" 1>&2; exit 1; }
      fi
    fi
  else
    MILTERPATH=$PHP_MILTER
  fi
  
  SAPI_MILTER_PATH=sapi/milter/php-milter
  
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  
  src=$abs_srcdir/sapi/milter/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=milter
  
  case "program" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET='$(SAPI_MILTER_PATH)'
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/milter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/milter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/milter/"; ac_bdir="sapi/milter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_milter.c getopt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


 
  

  if test -n "$MILTERPATH"; then
    
  if test "$MILTERPATH" != "/usr/$PHP_LIBDIR" && test "$MILTERPATH" != "/usr/lib"; then
    
  if test -z "$MILTERPATH" || echo "$MILTERPATH" | grep '^/' >/dev/null ; then
    ai_p=$MILTERPATH
  else
    
    ep_dir="`echo $MILTERPATH|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MILTERPATH\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case milter in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmilter $LIBS" 
   ;;
  esac




  BUILD_MILTER="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_MILTER_PATH)"
  INSTALL_IT="\$(INSTALL) -m 0755 \$(SAPI_MILTER_PATH) \$(bindir)/php-milter"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_MILTER_PATH"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_MILTER"

fi



php_with_nsapi=no

echo $ac_n "checking for NSAPI support""... $ac_c" 1>&6
echo "configure:11967: checking for NSAPI support" >&5
# Check whether --with-nsapi or --without-nsapi was given.
if test "${with_nsapi+set}" = set; then
  withval="$with_nsapi"
  PHP_NSAPI=$withval
else
  
  PHP_NSAPI=no
  

fi


ext_output=$PHP_NSAPI
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_NSAPI" != "no"; then
  if test ! -d $PHP_NSAPI/bin ; then
    { echo "configure: error: Please specify the path to the root of your Netscape/iPlanet/Sun Webserver using --with-nsapi=DIR" 1>&2; exit 1; }
  fi
  echo $ac_n "checking for NSAPI include files""... $ac_c" 1>&6
echo "configure:11991: checking for NSAPI include files" >&5
  if test -d $PHP_NSAPI/include ; then
    NSAPI_INC_DIR="$PHP_NSAPI/include"
    echo "$ac_t""Netscape 3.x / Sun 7.x style" 1>&6
    for ac_hdr in $NSAPI_INC_DIR/nsapi.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11999: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12004 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:12009: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    NSAPI_INCLUDE="-I$NSAPI_INC_DIR"
  fi
  if test -d $PHP_NSAPI/plugins/include ; then
    NSAPI_INC_DIR="$PHP_NSAPI/plugins/include"
    echo "$ac_t""iPlanet 4.x / Sun 6.x style" 1>&6
    for ac_hdr in $NSAPI_INC_DIR/nsapi.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:12044: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12049 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:12054: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    NSAPI_INCLUDE="$NSAPI_INCLUDE -I$NSAPI_INC_DIR"
  fi
  if test -z "$NSAPI_INCLUDE"; then
    { echo "configure: error: Please check you have nsapi.h in either $PHP_NSAPI/include or $PHP_NSAPI/plugins/include" 1>&2; exit 1; }
  fi

  
  for ac_i in $NSAPI_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

  
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_NSAPI 1
EOF

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=nsapi
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/nsapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/nsapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/nsapi/"; ac_bdir="sapi/nsapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in nsapi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_NSAPI/bin/"
fi





php_with_phttpd=no

echo $ac_n "checking for PHTTPD support""... $ac_c" 1>&6
echo "configure:12327: checking for PHTTPD support" >&5
# Check whether --with-phttpd or --without-phttpd was given.
if test "${with_phttpd+set}" = set; then
  withval="$with_phttpd"
  PHP_PHTTPD=$withval
else
  
  PHP_PHTTPD=no
  

fi


ext_output=$PHP_PHTTPD
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PHTTPD" != "no"; then
  if test ! -d $PHP_PHTTPD ; then
    { echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
  fi
  
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  
  if test "$PHP_PHTTPD/include" != "/usr/include"; then
    
  if test -z "$PHP_PHTTPD/include" || echo "$PHP_PHTTPD/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_PHTTPD/include
  else
    
    ep_dir="`echo $PHP_PHTTPD/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_PHTTPD/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_PHTTPD 1
EOF

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=phttpd
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/phttpd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/phttpd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/phttpd/"; ac_bdir="sapi/phttpd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in phttpd.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_PHTTPD/modules/"
fi




php_with_pi3web=no

echo $ac_n "checking for Pi3Web support""... $ac_c" 1>&6
echo "configure:12581: checking for Pi3Web support" >&5
# Check whether --with-pi3web or --without-pi3web was given.
if test "${with_pi3web+set}" = set; then
  withval="$with_pi3web"
  PHP_PI3WEB=$withval
else
  
  PHP_PI3WEB=no
  

fi


ext_output=$PHP_PI3WEB
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PI3WEB" != "no"; then
  if test "$PHP_PI3WEB" = "yes"; then
    PI3PATH=../.. # the default
  else
    PI3PATH=$PHP_PI3WEB
  fi
  test -f "$PI3PATH/PiAPI/PiAPI.h" || { echo "configure: error: Unable to find PiAPI.h in $PI3PATH/PiAPI" 1>&2; exit 1; }
  
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define WITH_PI3WEB 1
EOF

  
  if test "$PI3PATH/PiAPI" != "/usr/include"; then
    
  if test -z "$PI3PATH/PiAPI" || echo "$PI3PATH/PiAPI" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/PiAPI
  else
    
    ep_dir="`echo $PI3PATH/PiAPI|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/PiAPI\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$PI3PATH/Pi2API" != "/usr/include"; then
    
  if test -z "$PI3PATH/Pi2API" || echo "$PI3PATH/Pi2API" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/Pi2API
  else
    
    ep_dir="`echo $PI3PATH/Pi2API|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/Pi2API\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$PI3PATH/Pi3API" != "/usr/include"; then
    
  if test -z "$PI3PATH/Pi3API" || echo "$PI3PATH/Pi3API" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/Pi3API
  else
    
    ep_dir="`echo $PI3PATH/Pi3API|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/Pi3API\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$PI3PATH/PHP5" != "/usr/include"; then
    
  if test -z "$PI3PATH/PHP5" || echo "$PI3PATH/PHP5" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/PHP5
  else
    
    ep_dir="`echo $PI3PATH/PHP5|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/PHP5\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=pi3web
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/pi3web in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/pi3web"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/pi3web/"; ac_bdir="sapi/pi3web/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pi3web_sapi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PI3PATH/bin/"
fi




php_with_roxen=no


# Check whether --with-roxen or --without-roxen was given.
if test "${with_roxen+set}" = set; then
  withval="$with_roxen"
  PHP_ROXEN=$withval
else
  
  PHP_ROXEN=no
  

fi


ext_output=$PHP_ROXEN






php_enable_roxen_zts=no

echo $ac_n "checking whether Roxen module is build using ZTS""... $ac_c" 1>&6
echo "configure:12953: checking whether Roxen module is build using ZTS" >&5
# Check whether --enable-roxen-zts or --disable-roxen-zts was given.
if test "${enable_roxen_zts+set}" = set; then
  enableval="$enable_roxen_zts"
  PHP_ROXEN_ZTS=$enableval
else
  
  PHP_ROXEN_ZTS=no
  

fi


ext_output=$PHP_ROXEN_ZTS
echo "$ac_t""$ext_output" 1>&6




RESULT=
echo $ac_n "checking for Roxen/Pike support""... $ac_c" 1>&6
echo "configure:12974: checking for Roxen/Pike support" >&5
if test "$PHP_ROXEN" != "no"; then
  if test ! -d $PHP_ROXEN ; then
    { echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
  fi
  if test -f $PHP_ROXEN/bin/roxen; then
    PIKE=$PHP_ROXEN/bin/roxen
  elif test -f $PHP_ROXEN/bin/pike; then
    PIKE=$PHP_ROXEN/bin/pike
  else
    { echo "configure: error: Could not find a pike in $PHP_ROXEN/bin/" 1>&2; exit 1; }
  fi

  if $PIKE -e 'float v; catch(v = __VERSION__ + (__BUILD__/10000.0)); if(v < 0.7079) exit(1); exit(0);'; then
    PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,'`
    if test -z "$PIKE_INCLUDE_DIR" || test -z "$PIKE_MODULE_DIR"; then
      { echo "configure: error: Failed to figure out Pike module and include directories" 1>&2; exit 1; }
    fi
  else
    { echo "configure: error: Roxen/PHP requires Pike 0.7.79 or newer" 1>&2; exit 1; }
  fi
   
  
  if test "$PIKE_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$PIKE_INCLUDE_DIR" || echo "$PIKE_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_INCLUDE_DIR
  else
    
    ep_dir="`echo $PIKE_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PIKE_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_ROXEN 1
EOF

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=roxen
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/roxen in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/roxen"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/roxen/"; ac_bdir="sapi/roxen/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in roxen.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PIKE_MODULE_DIR/PHP5.so"
  RESULT="yes
  Pike binary used:      $PIKE
  Pike include dir:      $PIKE_INCLUDE_DIR
  Pike module directory: $PIKE_MODULE_DIR"
  PIKE_INCLUDE_DIR=" -I$PIKE_INCLUDE_DIR "

  if test "$PHP_ROXEN_ZTS" != "no"; then
    
  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

    cat >> confdefs.h <<\EOF
#define ROXEN_USE_ZTS 1
EOF

  fi
fi
echo "$ac_t""$RESULT" 1>&6




php_with_thttpd=no


# Check whether --with-thttpd or --without-thttpd was given.
if test "${with_thttpd+set}" = set; then
  withval="$with_thttpd"
  PHP_THTTPD=$withval
else
  
  PHP_THTTPD=no
  

fi


ext_output=$PHP_THTTPD





echo $ac_n "checking for thttpd""... $ac_c" 1>&6
echo "configure:13260: checking for thttpd" >&5

if test "$PHP_THTTPD" != "no"; then
  if test ! -d $PHP_THTTPD; then
    echo "$ac_t""thttpd directory does not exist ($PHP_THTTPD)" 1>&6
  fi

  
  if test -z "$PHP_THTTPD" || echo "$PHP_THTTPD" | grep '^/' >/dev/null ; then
    THTTPD=$PHP_THTTPD
  else
    
    ep_dir="`echo $PHP_THTTPD|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    THTTPD="$ep_realdir/`basename \"$PHP_THTTPD\"`"
  fi

  
  if grep thttpd.2.21b $PHP_THTTPD/version.h >/dev/null; then
    patch="test -f $THTTPD/php_patched || \
    (cd $THTTPD && patch -p1 < $abs_srcdir/sapi/thttpd/thttpd_patch && touch php_patched)"

  elif grep Premium $PHP_THTTPD/version.h >/dev/null; then
    patch=
  else
    { echo "configure: error: This version only supports thttpd-2.21b and Premium thttpd" 1>&2; exit 1; }
  fi
  
  if test -n "$GCC"; then
        
  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
echo "configure:13293: checking whether $CC supports -rdynamic" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*
  
fi

echo "$ac_t""$ac_cv_gcc_arg_rdynamic" 1>&6
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :
    
  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  INSTALL_IT="\
    echo 'PHP_LIBS = -L. -lphp5 \$(PHP_LIBS) \$(EXTRA_LIBS)' > $THTTPD/php_makefile; \
    echo 'PHP_LDFLAGS = \$(NATIVE_RPATHS) \$(PHP_LDFLAGS)' >> $THTTPD/php_makefile; \
    echo 'PHP_CFLAGS = \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(CPPFLAGS) \$(EXTRA_CFLAGS)' >> $THTTPD/php_makefile; \
    rm -f $THTTPD/php_thttpd.c $THTTPD/php_thttpd.h $THTTPD/libphp5.a; \
    \$(LN_S) $abs_srcdir/sapi/thttpd/thttpd.c $THTTPD/php_thttpd.c; \
    \$(LN_S) $abs_srcdir/sapi/thttpd/php_thttpd.h $abs_builddir/$SAPI_STATIC $THTTPD/;\
    $patch"
  PHP_THTTPD="yes, using $THTTPD"
  
  if test "$THTTPD" != "/usr/include"; then
    
  if test -z "$THTTPD" || echo "$THTTPD" | grep '^/' >/dev/null ; then
    ai_p=$THTTPD
  else
    
    ep_dir="`echo $THTTPD|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THTTPD\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=thttpd
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  

fi
echo "$ac_t""$PHP_THTTPD" 1>&6



php_with_tux=no


# Check whether --with-tux or --without-tux was given.
if test "${with_tux+set}" = set; then
  withval="$with_tux"
  PHP_TUX=$withval
else
  
  PHP_TUX=no
  

fi


ext_output=$PHP_TUX





echo $ac_n "checking for TUX""... $ac_c" 1>&6
echo "configure:13529: checking for TUX" >&5
if test "$PHP_TUX" != "no"; then
  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_TUX/php5.tux.so"
  for ac_hdr in tuxmodule.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:13536: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13541 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13546: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Cannot find tuxmodule.h" 1>&2; exit 1; }
fi
done

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=tux
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/tux in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/tux"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/tux/"; ac_bdir="sapi/tux/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_tux.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  echo "$ac_t""$PHP_TUX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi



php_with_webjames=no


# Check whether --with-webjames or --without-webjames was given.
if test "${with_webjames+set}" = set; then
  withval="$with_webjames"
  PHP_WEBJAMES=$withval
else
  
  PHP_WEBJAMES=no
  

fi


ext_output=$PHP_WEBJAMES





echo $ac_n "checking for webjames""... $ac_c" 1>&6
echo "configure:13783: checking for webjames" >&5

if test "$PHP_WEBJAMES" != "no"; then
  
  if test -z "$PHP_WEBJAMES" || echo "$PHP_WEBJAMES" | grep '^/' >/dev/null ; then
    PHP_WEBJAMES=$PHP_WEBJAMES
  else
    
    ep_dir="`echo $PHP_WEBJAMES|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    PHP_WEBJAMES="$ep_realdir/`basename \"$PHP_WEBJAMES\"`"
  fi

  INSTALL_IT="\
    echo 'PHP_LIBS = -l$abs_srcdir/$SAPI_STATIC \$(PHP_LIBS) \$(EXTRA_LIBS)' > $PHP_WEBJAMES/build/php; \
    echo 'PHP_LDFLAGS = \$(NATIVE_RPATHS) \$(PHP_LDFLAGS)' >> $PHP_WEBJAMES/build/php; \
    echo 'PHP_CFLAGS = -DPHP \$(COMMON_FLAGS) \$(EXTRA_CFLAGS) -I$abs_srcdir/sapi/webjames' >> $PHP_WEBJAMES/build/php;"
  
  if test "$PHP_WEBJAMES" != "/usr/include"; then
    
  if test -z "$PHP_WEBJAMES" || echo "$PHP_WEBJAMES" | grep '^/' >/dev/null ; then
    ai_p=$PHP_WEBJAMES
  else
    
    ep_dir="`echo $PHP_WEBJAMES|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_WEBJAMES\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=webjames
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/webjames in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/webjames"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/webjames/"; ac_bdir="sapi/webjames/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in webjames.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  echo "$ac_t""yes, using $PHP_WEBJAMES" 1>&6
else
  echo "$ac_t""no" 1>&6
fi



php_enable_cgi=yes


# Check whether --enable-cgi or --disable-cgi was given.
if test "${enable_cgi+set}" = set; then
  enableval="$enable_cgi"
  PHP_CGI=$enableval
else
  
  PHP_CGI=yes
  

fi


ext_output=$PHP_CGI





if test "$PHP_SAPI" = "default"; then
  echo $ac_n "checking whether to build CGI binary""... $ac_c" 1>&6
echo "configure:14043: checking whether to build CGI binary" >&5
  if test "$PHP_CGI" != "no"; then
    echo "$ac_t""yes" 1>&6

    echo $ac_n "checking for socklen_t in sys/socket.h""... $ac_c" 1>&6
echo "configure:14048: checking for socklen_t in sys/socket.h" >&5
    cat > conftest.$ac_ext <<EOF
#line 14050 "configure"
#include "confdefs.h"
#include <sys/socket.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "socklen_t" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
       cat >> confdefs.h <<\EOF
#define HAVE_SOCKLEN_T 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


    echo $ac_n "checking for sun_len in sys/un.h""... $ac_c" 1>&6
echo "configure:14070: checking for sun_len in sys/un.h" >&5
    cat > conftest.$ac_ext <<EOF
#line 14072 "configure"
#include "confdefs.h"
#include <sys/un.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "sun_len" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
       cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_UN_SUN_LEN 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


    echo $ac_n "checking whether cross-process locking is required by accept()""... $ac_c" 1>&6
echo "configure:14092: checking whether cross-process locking is required by accept()" >&5
    case "`uname -sr`" in
      IRIX\ 5.* | SunOS\ 5.* | UNIX_System_V\ 4.0)	
        echo "$ac_t""yes" 1>&6
        cat >> confdefs.h <<\EOF
#define USE_LOCKING 1
EOF

      ;;
      *)
        echo "$ac_t""no" 1>&6
      ;;
    esac

    
  src=$abs_srcdir/sapi/cgi/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


        case $host_alias in
      *cygwin* )
        SAPI_CGI_PATH=sapi/cgi/php-cgi.exe
        ;;
      * )
        SAPI_CGI_PATH=sapi/cgi/php-cgi
        ;;
    esac
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_CGI_PATH"


        INSTALL_IT="@echo \"Installing PHP CGI binary: \$(INSTALL_ROOT)\$(bindir)/\"; \$(INSTALL) -m 0755 \$(SAPI_CGI_PATH) \$(INSTALL_ROOT)\$(bindir)/\$(program_prefix)php-cgi\$(program_suffix)\$(EXEEXT)"
    
  if test "$PHP_SAPI" != "default"; then
{ echo "configure: error: 
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module and CLI binary at the same time.                   |
+--------------------------------------------------------------------+
" 1>&2; exit 1; }
  fi

  PHP_SAPI=cgi
  
  case "program" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET='$(SAPI_CGI_PATH)'
  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/cgi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/cgi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/cgi/"; ac_bdir="sapi/cgi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cgi_main.c fastcgi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    case $host_alias in
      *aix*)
        BUILD_CGI="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
        ;;
      *darwin*)
        BUILD_CGI="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_SAPI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
      ;;
      *)
        BUILD_CGI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
      ;;
    esac

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_CGI"


  elif test "$PHP_CLI" != "no"; then
    echo "$ac_t""no" 1>&6
    OVERALL_TARGET=
    PHP_SAPI=cli   
  else
    { echo "configure: error: No SAPIs selected." 1>&2; exit 1; }  
  fi
fi



echo $ac_n "checking for chosen SAPI module""... $ac_c" 1>&6
echo "configure:14336: checking for chosen SAPI module" >&5
echo "$ac_t""$PHP_SAPI" 1>&6

if test "$enable_maintainer_zts" = "yes"; then
  
if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi

  
  if test -z "$host_alias" && test -n "$host"; then
    host_alias=$host
  fi
  if test -z "$host_alias"; then
    { echo "configure: error: host_alias is not set. Make sure to run config.guess" 1>&2; exit 1; }
  fi
  case $host_alias in
  *solaris*)
    PTHREAD_FLAGS="-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT";;
  *freebsd*)
    PTHREAD_FLAGS="-D_REENTRANT -D_THREAD_SAFE";;
  *linux*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  *aix*)
    PTHREAD_FLAGS=-D_THREAD_SAFE;;
  *irix*)
    PTHREAD_FLAGS=-D_POSIX_THREAD_SAFE_FUNCTIONS;;
  *hpux*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  *sco*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  esac

  if test -n "$PTHREAD_FLAGS"; then
    CPPFLAGS="$CPPFLAGS $PTHREAD_FLAGS"
  fi

fi






  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Running system checks${T_ME}" 1>&6



  PHP_ALT_PATH=/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/lib
  # Extract the first word of "sendmail", so it can be a program name with args.
set dummy sendmail; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:14393: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PROG_SENDMAIL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PROG_SENDMAIL" in
  /*)
  ac_cv_path_PROG_SENDMAIL="$PROG_SENDMAIL" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PROG_SENDMAIL="$PROG_SENDMAIL" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH:$PHP_ALT_PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PROG_SENDMAIL="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
PROG_SENDMAIL="$ac_cv_path_PROG_SENDMAIL"
if test -n "$PROG_SENDMAIL"; then
  echo "$ac_t""$PROG_SENDMAIL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PROG_SENDMAIL"




  echo $ac_n "checking whether system uses EBCDIC""... $ac_c" 1>&6
echo "configure:14432: checking whether system uses EBCDIC" >&5
if eval "test \"`echo '$''{'ac_cv_ebcdic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
  ac_cv_ebcdic=no

else
  cat > conftest.$ac_ext <<EOF
#line 14443 "configure"
#include "confdefs.h"

int main(void) { 
  return (unsigned char)'A' != (unsigned char)0xC1; 
} 

EOF
if { (eval echo configure:14451: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_ebcdic=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_ebcdic=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ebcdic" 1>&6
  if test "$ac_cv_ebcdic" = "yes"; then
    cat >> confdefs.h <<\EOF
#define CHARSET_EBCDIC 1
EOF

  fi


echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
echo "configure:14479: checking whether byte ordering is bigendian" >&5
if eval "test \"`echo '$''{'ac_cv_c_bigendian_php'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  ac_cv_c_bigendian_php=unknown
  if test "$cross_compiling" = yes; then
  ac_cv_c_bigendian_php=unknown
else
  cat > conftest.$ac_ext <<EOF
#line 14489 "configure"
#include "confdefs.h"

int main(void)
{
  short one = 1;
  char *cp = (char *)&one;

  if (*cp == 0) {
    return(0);
  } else {
    return(1);
  }
}
  
EOF
if { (eval echo configure:14505: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_bigendian_php=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_bigendian_php=no
fi
rm -fr conftest*
fi

 
fi

echo "$ac_t""$ac_cv_c_bigendian_php" 1>&6
 if test $ac_cv_c_bigendian_php = yes; then
   cat >> confdefs.h <<\EOF
#define WORDS_BIGENDIAN 
EOF

 fi



  echo $ac_n "checking whether writing to stdout works""... $ac_c" 1>&6
echo "configure:14531: checking whether writing to stdout works" >&5
if eval "test \"`echo '$''{'ac_cv_write_stdout'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_write_stdout=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 14542 "configure"
#include "confdefs.h"

#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif

#define TEXT "This is the test message -- "

main()
{
  int n;

  n = write(1, TEXT, sizeof(TEXT)-1);
  return (!(n == sizeof(TEXT)-1));
}
    
EOF
if { (eval echo configure:14560: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_write_stdout=yes
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_write_stdout=no
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_write_stdout" 1>&6
  if test "$ac_cv_write_stdout" = "yes"; then
    cat >> confdefs.h <<\EOF
#define PHP_WRITE_STDOUT 1
EOF

  fi


if test -d /usr/pkg/include -a -d /usr/pkg/lib ; then
   CPPFLAGS="$CPPFLAGS -I/usr/pkg/include"
   LDFLAGS="$LDFLAGS -L/usr/pkg/lib"
fi
test -d /usr/ucblib && 
  if test "/usr/ucblib" != "/usr/$PHP_LIBDIR" && test "/usr/ucblib" != "/usr/lib"; then
    
  if test -z "/usr/ucblib" || echo "/usr/ucblib" | grep '^/' >/dev/null ; then
    ai_p=/usr/ucblib
  else
    
    ep_dir="`echo /usr/ucblib|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"/usr/ucblib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi






  unset ac_cv_func_socket
  unset ac_cv_func___socket
  unset found
  
  echo $ac_n "checking for socket""... $ac_c" 1>&6
echo "configure:14635: checking for socket" >&5
if eval "test \"`echo '$''{'ac_cv_func_socket'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14640 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char socket(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_socket) || defined (__stub___socket)
choke me
#else
socket();
#endif

; return 0; }
EOF
if { (eval echo configure:14663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_socket=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_socket=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'socket`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __socket""... $ac_c" 1>&6
echo "configure:14681: checking for __socket" >&5
if eval "test \"`echo '$''{'ac_cv_func___socket'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14686 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __socket(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __socket();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___socket) || defined (__stub_____socket)
choke me
#else
__socket();
#endif

; return 0; }
EOF
if { (eval echo configure:14709: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___socket=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___socket=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__socket`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_SOCKET 1
EOF

    ac_cv_func_socket=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_socket_socket
  unset ac_cv_lib_socket___socket
  unset found
  echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
echo "configure:14747: checking for socket in -lsocket" >&5
ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14755 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:14766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __socket in -lsocket""... $ac_c" 1>&6
echo "configure:14786: checking for __socket in -lsocket" >&5
ac_lib_var=`echo socket'_'__socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14794 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __socket();

int main() {
__socket()
; return 0; }
EOF
if { (eval echo configure:14805: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 14837 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:14841: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_SOCKET 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_socket=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_socketpair
  unset ac_cv_func___socketpair
  unset found
  
  echo $ac_n "checking for socketpair""... $ac_c" 1>&6
echo "configure:14892: checking for socketpair" >&5
if eval "test \"`echo '$''{'ac_cv_func_socketpair'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14897 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char socketpair(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socketpair();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_socketpair) || defined (__stub___socketpair)
choke me
#else
socketpair();
#endif

; return 0; }
EOF
if { (eval echo configure:14920: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_socketpair=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_socketpair=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'socketpair`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __socketpair""... $ac_c" 1>&6
echo "configure:14938: checking for __socketpair" >&5
if eval "test \"`echo '$''{'ac_cv_func___socketpair'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14943 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __socketpair(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __socketpair();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___socketpair) || defined (__stub_____socketpair)
choke me
#else
__socketpair();
#endif

; return 0; }
EOF
if { (eval echo configure:14966: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___socketpair=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___socketpair=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__socketpair`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_SOCKETPAIR 1
EOF

    ac_cv_func_socketpair=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_socket_socketpair
  unset ac_cv_lib_socket___socketpair
  unset found
  echo $ac_n "checking for socketpair in -lsocket""... $ac_c" 1>&6
echo "configure:15004: checking for socketpair in -lsocket" >&5
ac_lib_var=`echo socket'_'socketpair | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15012 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socketpair();

int main() {
socketpair()
; return 0; }
EOF
if { (eval echo configure:15023: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __socketpair in -lsocket""... $ac_c" 1>&6
echo "configure:15043: checking for __socketpair in -lsocket" >&5
ac_lib_var=`echo socket'_'__socketpair | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15051 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __socketpair();

int main() {
__socketpair()
; return 0; }
EOF
if { (eval echo configure:15062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 15094 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:15098: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_SOCKETPAIR 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_socketpair=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_htonl
  unset ac_cv_func___htonl
  unset found
  
  echo $ac_n "checking for htonl""... $ac_c" 1>&6
echo "configure:15149: checking for htonl" >&5
if eval "test \"`echo '$''{'ac_cv_func_htonl'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15154 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char htonl(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char htonl();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_htonl) || defined (__stub___htonl)
choke me
#else
htonl();
#endif

; return 0; }
EOF
if { (eval echo configure:15177: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_htonl=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_htonl=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'htonl`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __htonl""... $ac_c" 1>&6
echo "configure:15195: checking for __htonl" >&5
if eval "test \"`echo '$''{'ac_cv_func___htonl'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15200 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __htonl(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __htonl();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___htonl) || defined (__stub_____htonl)
choke me
#else
__htonl();
#endif

; return 0; }
EOF
if { (eval echo configure:15223: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___htonl=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___htonl=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__htonl`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_HTONL 1
EOF

    ac_cv_func_htonl=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_socket_htonl
  unset ac_cv_lib_socket___htonl
  unset found
  echo $ac_n "checking for htonl in -lsocket""... $ac_c" 1>&6
echo "configure:15261: checking for htonl in -lsocket" >&5
ac_lib_var=`echo socket'_'htonl | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15269 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char htonl();

int main() {
htonl()
; return 0; }
EOF
if { (eval echo configure:15280: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __htonl in -lsocket""... $ac_c" 1>&6
echo "configure:15300: checking for __htonl in -lsocket" >&5
ac_lib_var=`echo socket'_'__htonl | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15308 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __htonl();

int main() {
__htonl()
; return 0; }
EOF
if { (eval echo configure:15319: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 15351 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:15355: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_HTONL 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_htonl=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_gethostname
  unset ac_cv_func___gethostname
  unset found
  
  echo $ac_n "checking for gethostname""... $ac_c" 1>&6
echo "configure:15406: checking for gethostname" >&5
if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15411 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostname) || defined (__stub___gethostname)
choke me
#else
gethostname();
#endif

; return 0; }
EOF
if { (eval echo configure:15434: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_gethostname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'gethostname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __gethostname""... $ac_c" 1>&6
echo "configure:15452: checking for __gethostname" >&5
if eval "test \"`echo '$''{'ac_cv_func___gethostname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15457 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __gethostname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___gethostname) || defined (__stub_____gethostname)
choke me
#else
__gethostname();
#endif

; return 0; }
EOF
if { (eval echo configure:15480: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___gethostname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___gethostname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__gethostname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTNAME 1
EOF

    ac_cv_func_gethostname=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_nsl_gethostname
  unset ac_cv_lib_nsl___gethostname
  unset found
  echo $ac_n "checking for gethostname in -lnsl""... $ac_c" 1>&6
echo "configure:15518: checking for gethostname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15526 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostname();

int main() {
gethostname()
; return 0; }
EOF
if { (eval echo configure:15537: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __gethostname in -lnsl""... $ac_c" 1>&6
echo "configure:15557: checking for __gethostname in -lnsl" >&5
ac_lib_var=`echo nsl'_'__gethostname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15565 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostname();

int main() {
__gethostname()
; return 0; }
EOF
if { (eval echo configure:15576: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 15608 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:15612: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case nsl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnsl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTNAME 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF

    ac_cv_func_gethostname=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_gethostbyaddr
  unset ac_cv_func___gethostbyaddr
  unset found
  
  echo $ac_n "checking for gethostbyaddr""... $ac_c" 1>&6
echo "configure:15663: checking for gethostbyaddr" >&5
if eval "test \"`echo '$''{'ac_cv_func_gethostbyaddr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15668 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostbyaddr(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyaddr();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostbyaddr) || defined (__stub___gethostbyaddr)
choke me
#else
gethostbyaddr();
#endif

; return 0; }
EOF
if { (eval echo configure:15691: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_gethostbyaddr=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostbyaddr=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'gethostbyaddr`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __gethostbyaddr""... $ac_c" 1>&6
echo "configure:15709: checking for __gethostbyaddr" >&5
if eval "test \"`echo '$''{'ac_cv_func___gethostbyaddr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15714 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __gethostbyaddr(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostbyaddr();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___gethostbyaddr) || defined (__stub_____gethostbyaddr)
choke me
#else
__gethostbyaddr();
#endif

; return 0; }
EOF
if { (eval echo configure:15737: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___gethostbyaddr=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___gethostbyaddr=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__gethostbyaddr`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTBYADDR 1
EOF

    ac_cv_func_gethostbyaddr=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_nsl_gethostbyaddr
  unset ac_cv_lib_nsl___gethostbyaddr
  unset found
  echo $ac_n "checking for gethostbyaddr in -lnsl""... $ac_c" 1>&6
echo "configure:15775: checking for gethostbyaddr in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyaddr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15783 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyaddr();

int main() {
gethostbyaddr()
; return 0; }
EOF
if { (eval echo configure:15794: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __gethostbyaddr in -lnsl""... $ac_c" 1>&6
echo "configure:15814: checking for __gethostbyaddr in -lnsl" >&5
ac_lib_var=`echo nsl'_'__gethostbyaddr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15822 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostbyaddr();

int main() {
__gethostbyaddr()
; return 0; }
EOF
if { (eval echo configure:15833: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 15865 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:15869: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case nsl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnsl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTBYADDR 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF

    ac_cv_func_gethostbyaddr=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_yp_get_default_domain
  unset ac_cv_func___yp_get_default_domain
  unset found
  
  echo $ac_n "checking for yp_get_default_domain""... $ac_c" 1>&6
echo "configure:15920: checking for yp_get_default_domain" >&5
if eval "test \"`echo '$''{'ac_cv_func_yp_get_default_domain'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15925 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char yp_get_default_domain(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yp_get_default_domain();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_yp_get_default_domain) || defined (__stub___yp_get_default_domain)
choke me
#else
yp_get_default_domain();
#endif

; return 0; }
EOF
if { (eval echo configure:15948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_yp_get_default_domain=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_yp_get_default_domain=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'yp_get_default_domain`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __yp_get_default_domain""... $ac_c" 1>&6
echo "configure:15966: checking for __yp_get_default_domain" >&5
if eval "test \"`echo '$''{'ac_cv_func___yp_get_default_domain'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15971 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __yp_get_default_domain(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __yp_get_default_domain();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___yp_get_default_domain) || defined (__stub_____yp_get_default_domain)
choke me
#else
__yp_get_default_domain();
#endif

; return 0; }
EOF
if { (eval echo configure:15994: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___yp_get_default_domain=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___yp_get_default_domain=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__yp_get_default_domain`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_YP_GET_DEFAULT_DOMAIN 1
EOF

    ac_cv_func_yp_get_default_domain=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_nsl_yp_get_default_domain
  unset ac_cv_lib_nsl___yp_get_default_domain
  unset found
  echo $ac_n "checking for yp_get_default_domain in -lnsl""... $ac_c" 1>&6
echo "configure:16032: checking for yp_get_default_domain in -lnsl" >&5
ac_lib_var=`echo nsl'_'yp_get_default_domain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16040 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yp_get_default_domain();

int main() {
yp_get_default_domain()
; return 0; }
EOF
if { (eval echo configure:16051: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __yp_get_default_domain in -lnsl""... $ac_c" 1>&6
echo "configure:16071: checking for __yp_get_default_domain in -lnsl" >&5
ac_lib_var=`echo nsl'_'__yp_get_default_domain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16079 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __yp_get_default_domain();

int main() {
__yp_get_default_domain()
; return 0; }
EOF
if { (eval echo configure:16090: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 16122 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:16126: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case nsl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnsl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_YP_GET_DEFAULT_DOMAIN 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF

    ac_cv_func_yp_get_default_domain=yes
  else
    
  :

  fi
  
 ;;
  
  esac



  unset ac_cv_func_dlopen
  unset ac_cv_func___dlopen
  unset found
  
  echo $ac_n "checking for dlopen""... $ac_c" 1>&6
echo "configure:16178: checking for dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 16183 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dlopen) || defined (__stub___dlopen)
choke me
#else
dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:16206: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __dlopen""... $ac_c" 1>&6
echo "configure:16224: checking for __dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func___dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 16229 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___dlopen) || defined (__stub_____dlopen)
choke me
#else
__dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:16252: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF

    ac_cv_func_dlopen=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_dl_dlopen
  unset ac_cv_lib_dl___dlopen
  unset found
  echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:16290: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16298 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:16309: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dlopen in -ldl""... $ac_c" 1>&6
echo "configure:16329: checking for __dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'__dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16337 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dlopen();

int main() {
__dlopen()
; return 0; }
EOF
if { (eval echo configure:16348: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -ldl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 16380 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:16384: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case dl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBDL 1
EOF

    ac_cv_func_dlopen=yes
  else
    
  :

  fi
  
 ;;
  
  esac

if test "$ac_cv_func_dlopen" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_LIBDL 1
EOF

fi
echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
echo "configure:16436: checking for sin in -lm" >&5
ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16444 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sin();

int main() {
sin()
; return 0; }
EOF
if { (eval echo configure:16455: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lm $LIBS"

else
  echo "$ac_t""no" 1>&6
fi



  unset ac_cv_func_inet_aton
  unset ac_cv_func___inet_aton
  unset found
  
  echo $ac_n "checking for inet_aton""... $ac_c" 1>&6
echo "configure:16489: checking for inet_aton" >&5
if eval "test \"`echo '$''{'ac_cv_func_inet_aton'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 16494 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char inet_aton(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_inet_aton) || defined (__stub___inet_aton)
choke me
#else
inet_aton();
#endif

; return 0; }
EOF
if { (eval echo configure:16517: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_inet_aton=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_inet_aton=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'inet_aton`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __inet_aton""... $ac_c" 1>&6
echo "configure:16535: checking for __inet_aton" >&5
if eval "test \"`echo '$''{'ac_cv_func___inet_aton'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 16540 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __inet_aton(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __inet_aton();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___inet_aton) || defined (__stub_____inet_aton)
choke me
#else
__inet_aton();
#endif

; return 0; }
EOF
if { (eval echo configure:16563: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___inet_aton=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___inet_aton=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__inet_aton`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_INET_ATON 1
EOF

    ac_cv_func_inet_aton=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_inet_aton
  unset ac_cv_lib_resolv___inet_aton
  unset found
  echo $ac_n "checking for inet_aton in -lresolv""... $ac_c" 1>&6
echo "configure:16601: checking for inet_aton in -lresolv" >&5
ac_lib_var=`echo resolv'_'inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16609 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {
inet_aton()
; return 0; }
EOF
if { (eval echo configure:16620: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __inet_aton in -lresolv""... $ac_c" 1>&6
echo "configure:16640: checking for __inet_aton in -lresolv" >&5
ac_lib_var=`echo resolv'_'__inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16648 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __inet_aton();

int main() {
__inet_aton()
; return 0; }
EOF
if { (eval echo configure:16659: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 16691 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:16695: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_INET_ATON 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_inet_aton=yes
  else
    
  
  unset ac_cv_lib_bind_inet_aton
  unset ac_cv_lib_bind___inet_aton
  unset found
  echo $ac_n "checking for inet_aton in -lbind""... $ac_c" 1>&6
echo "configure:16737: checking for inet_aton in -lbind" >&5
ac_lib_var=`echo bind'_'inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16745 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {
inet_aton()
; return 0; }
EOF
if { (eval echo configure:16756: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __inet_aton in -lbind""... $ac_c" 1>&6
echo "configure:16776: checking for __inet_aton in -lbind" >&5
ac_lib_var=`echo bind'_'__inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16784 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __inet_aton();

int main() {
__inet_aton()
; return 0; }
EOF
if { (eval echo configure:16795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 16827 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:16831: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_INET_ATON 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_inet_aton=yes
  else
    
  :

  fi
  

  fi
  
 ;;
  
  esac



echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:16882: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 16887 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:16895: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 16912 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 16930 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 16951 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:16962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

ac_header_dirent=no
for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
echo "configure:16990: checking for $ac_hdr that defines DIR" >&5
if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 16995 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_hdr>
int main() {
DIR *dirp = 0;
; return 0; }
EOF
if { (eval echo configure:17003: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 ac_header_dirent=$ac_hdr; break
else
  echo "$ac_t""no" 1>&6
fi
done
# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
if test $ac_header_dirent = dirent.h; then
echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
echo "configure:17028: checking for opendir in -ldir" >&5
ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldir  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 17036 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:17047: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -ldir"
else
  echo "$ac_t""no" 1>&6
fi

else
echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
echo "configure:17069: checking for opendir in -lx" >&5
ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lx  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 17077 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:17088: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lx"
else
  echo "$ac_t""no" 1>&6
fi

fi


for ac_hdr in  \
inttypes.h \
stdint.h \
dirent.h \
ApplicationServices/ApplicationServices.h \
sys/param.h \
sys/types.h \
sys/time.h \
netinet/in.h \
alloca.h \
arpa/inet.h \
arpa/nameser.h \
assert.h \
crypt.h \
dns.h \
fcntl.h \
grp.h \
ieeefp.h \
langinfo.h \
limits.h \
locale.h \
monetary.h \
netdb.h \
pwd.h \
resolv.h \
signal.h \
stdarg.h \
stdlib.h \
string.h \
syslog.h \
sysexits.h \
sys/ioctl.h \
sys/file.h \
sys/mman.h \
sys/mount.h \
sys/poll.h \
sys/resource.h \
sys/select.h \
sys/socket.h \
sys/stat.h \
sys/statfs.h \
sys/statvfs.h \
sys/vfs.h \
sys/sysexits.h \
sys/varargs.h \
sys/wait.h \
sys/loadavg.h \
termios.h \
unistd.h \
unix.h \
utime.h \
sys/utsname.h \
sys/ipc.h \
dlfcn.h \
assert.h

do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:17170: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17175 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:17180: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



  echo $ac_n "checking for fopencookie""... $ac_c" 1>&6
echo "configure:17209: checking for fopencookie" >&5
if eval "test \"`echo '$''{'ac_cv_func_fopencookie'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17214 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char fopencookie(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char fopencookie();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_fopencookie) || defined (__stub___fopencookie)
choke me
#else
fopencookie();
#endif

; return 0; }
EOF
if { (eval echo configure:17237: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_fopencookie=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_fopencookie=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'fopencookie`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_glibc_fopencookie=yes
else
  echo "$ac_t""no" 1>&6
fi


  if test "$have_glibc_fopencookie" = "yes"; then
cat > conftest.$ac_ext <<EOF
#line 17259 "configure"
#include "confdefs.h"

#define _GNU_SOURCE
#include <stdio.h>

int main() {
cookie_io_functions_t cookie;
; return 0; }
EOF
if { (eval echo configure:17269: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  have_cookie_io_functions_t=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*

    if test "$have_cookie_io_functions_t" = "yes"; then
      cookie_io_functions_t=cookie_io_functions_t
      have_fopen_cookie=yes

if test "$cross_compiling" = yes; then
  
  cookie_io_functions_use_off64_t=no

else
  cat > conftest.$ac_ext <<EOF
#line 17288 "configure"
#include "confdefs.h"

#define _GNU_SOURCE
#include <stdio.h>

struct cookiedata {
  __off64_t pos;
};

__ssize_t reader(void *cookie, char *buffer, size_t size)
{ return size; }
__ssize_t writer(void *cookie, const char *buffer, size_t size)
{ return size; }
int closer(void *cookie)
{ return 0; }
int seeker(void *cookie, __off64_t *position, int whence)
{ ((struct cookiedata*)cookie)->pos = *position; return 0; }

cookie_io_functions_t funcs = {reader, writer, seeker, closer};

main() {
  struct cookiedata g = { 0 };
  FILE *fp = fopencookie(&g, "r", funcs);

  if (fp && fseek(fp, 8192, SEEK_SET) == 0 && g.pos == 8192)
    exit(0);
  exit(1);
}


EOF
if { (eval echo configure:17320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  cookie_io_functions_use_off64_t=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  cookie_io_functions_use_off64_t=no

fi
rm -fr conftest*
fi

    
    else

cat > conftest.$ac_ext <<EOF
#line 17340 "configure"
#include "confdefs.h"

#define _GNU_SOURCE
#include <stdio.h>

int main() {
 _IO_cookie_io_functions_t cookie; 
; return 0; }
EOF
if { (eval echo configure:17350: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  have_IO_cookie_io_functions_t=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      if test "$have_cookie_io_functions_t" = "yes" ; then
        cookie_io_functions_t=_IO_cookie_io_functions_t
        have_fopen_cookie=yes
      fi
    fi

    if test "$have_fopen_cookie" = "yes" ; then
      cat >> confdefs.h <<\EOF
#define HAVE_FOPENCOOKIE 1
EOF

      cat >> confdefs.h <<EOF
#define COOKIE_IO_FUNCTIONS_T $cookie_io_functions_t
EOF

      if test "$cookie_io_functions_use_off64_t" = "yes" ; then
        cat >> confdefs.h <<\EOF
#define COOKIE_SEEKER_USES_OFF64_T 1
EOF

      fi
    fi
  fi


  echo $ac_n "checking for broken getcwd""... $ac_c" 1>&6
echo "configure:17384: checking for broken getcwd" >&5
  os=`uname -sr 2>/dev/null`
  case $os in
    SunOS*)
      cat >> confdefs.h <<\EOF
#define HAVE_BROKEN_GETCWD 1
EOF

      echo "$ac_t""yes" 1>&6;;
    *)
      echo "$ac_t""no" 1>&6;;
  esac


  echo $ac_n "checking for broken libc stdio""... $ac_c" 1>&6
echo "configure:17399: checking for broken libc stdio" >&5
  if eval "test \"`echo '$''{'_cv_have_broken_glibc_fopen_append'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  cat > conftest.$ac_ext <<EOF
#line 17406 "configure"
#include "confdefs.h"

#include <features.h>

int main() {

#if !__GLIBC_PREREQ(2,2)
choke me
#endif

; return 0; }
EOF
if { (eval echo configure:17419: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _cv_have_broken_glibc_fopen_append=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _cv_have_broken_glibc_fopen_append=no 
fi
rm -f conftest*

else
  cat > conftest.$ac_ext <<EOF
#line 17432 "configure"
#include "confdefs.h"

#include <stdio.h>
int main(int argc, char *argv[])
{
  FILE *fp;
  long position;
  char *filename = tmpnam(NULL);
  
  fp = fopen(filename, "w");
  if (fp == NULL) {
    perror("fopen");
    exit(2);
  }
  fputs("foobar", fp);
  fclose(fp);

  fp = fopen(filename, "a+");
  position = ftell(fp);
  fclose(fp);
  unlink(filename);
  if (position == 0)
  return 1;
  return 0;
}

EOF
if { (eval echo configure:17460: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  _cv_have_broken_glibc_fopen_append=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  _cv_have_broken_glibc_fopen_append=yes 
fi
rm -fr conftest*
fi

fi


  if test "$_cv_have_broken_glibc_fopen_append" = "yes"; then
    echo "$ac_t""yes" 1>&6
    cat >> confdefs.h <<\EOF
#define HAVE_BROKEN_GLIBC_FOPEN_APPEND 1
EOF

  else
    echo "$ac_t""no" 1>&6
  fi



echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
echo "configure:17488: checking whether struct tm is in sys/time.h or time.h" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17493 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() {
struct tm *tp; tp->tm_sec;
; return 0; }
EOF
if { (eval echo configure:17501: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm=time.h
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm=sys/time.h
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm" 1>&6
if test $ac_cv_struct_tm = sys/time.h; then
  cat >> confdefs.h <<\EOF
#define TM_IN_SYS_TIME 1
EOF

fi

echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
echo "configure:17522: checking for tm_zone in struct tm" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17527 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_zone;
; return 0; }
EOF
if { (eval echo configure:17535: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_zone=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_zone=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm_zone" 1>&6
if test "$ac_cv_struct_tm_zone" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_TM_ZONE 1
EOF

else
  echo $ac_n "checking for tzname""... $ac_c" 1>&6
echo "configure:17555: checking for tzname" >&5
if eval "test \"`echo '$''{'ac_cv_var_tzname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17560 "configure"
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif
int main() {
atoi(*tzname);
; return 0; }
EOF
if { (eval echo configure:17570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_var_tzname=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_var_tzname=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_var_tzname" 1>&6
  if test $ac_cv_var_tzname = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_TZNAME 1
EOF

  fi
fi



  echo $ac_n "checking for missing declarations of reentrant functions""... $ac_c" 1>&6
echo "configure:17594: checking for missing declarations of reentrant functions" >&5
  cat > conftest.$ac_ext <<EOF
#line 17596 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
struct tm *(*func)() = localtime_r
; return 0; }
EOF
if { (eval echo configure:17603: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_LOCALTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 17621 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
struct tm *(*func)() = gmtime_r
; return 0; }
EOF
if { (eval echo configure:17628: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_GMTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 17646 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
char *(*func)() = asctime_r
; return 0; }
EOF
if { (eval echo configure:17653: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_ASCTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 17671 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
char *(*func)() = ctime_r
; return 0; }
EOF
if { (eval echo configure:17678: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_CTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 17696 "configure"
#include "confdefs.h"
#include <string.h>
int main() {
char *(*func)() = strtok_r
; return 0; }
EOF
if { (eval echo configure:17703: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_STRTOK_R_DECL 1
EOF

  
fi
rm -f conftest*
  echo "$ac_t""done" 1>&6


  echo $ac_n "checking for fclose declaration""... $ac_c" 1>&6
echo "configure:17724: checking for fclose declaration" >&5
  cat > conftest.$ac_ext <<EOF
#line 17726 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
int (*func)() = fclose
; return 0; }
EOF
if { (eval echo configure:17733: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_FCLOSE_DECL 0
EOF

    echo "$ac_t""ok" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_FCLOSE_DECL 1
EOF

    echo "$ac_t""missing" 1>&6
  
fi
rm -f conftest*



echo $ac_n "checking for tm_gmtoff in struct tm""... $ac_c" 1>&6
echo "configure:17759: checking for tm_gmtoff in struct tm" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm_gmtoff'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17764 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_gmtoff;
; return 0; }
EOF
if { (eval echo configure:17772: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm_gmtoff" 1>&6

if test "$ac_cv_struct_tm_gmtoff" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_TM_GMTOFF 1
EOF

fi


echo $ac_n "checking for struct flock""... $ac_c" 1>&6
echo "configure:17795: checking for struct flock" >&5
if eval "test \"`echo '$''{'ac_cv_struct_flock'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17800 "configure"
#include "confdefs.h"

#include <unistd.h>
#include <fcntl.h>
        
int main() {
struct flock x;
; return 0; }
EOF
if { (eval echo configure:17810: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
          ac_cv_struct_flock=yes
        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
          ac_cv_struct_flock=no
        
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_struct_flock" 1>&6
if test "$ac_cv_struct_flock" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE_STRUCT_FLOCK 1
EOF

fi


echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
echo "configure:17837: checking for socklen_t" >&5
if eval "test \"`echo '$''{'ac_cv_socklen_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 17842 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>

int main() {

socklen_t x;

; return 0; }
EOF
if { (eval echo configure:17854: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_socklen_t=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_socklen_t=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_socklen_t" 1>&6
if test "$ac_cv_socklen_t" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SOCKLEN_T 1
EOF

fi


echo $ac_n "checking size of size_t""... $ac_c" 1>&6
echo "configure:17880: checking size of size_t" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_size_t=8
else
  cat > conftest.$ac_ext <<EOF
#line 17888 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(size_t));
  exit(0);
}
EOF
if { (eval echo configure:17899: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_size_t=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_size_t=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_size_t" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_SIZE_T $ac_cv_sizeof_size_t
EOF


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:17919: checking size of long long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 17927 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long long));
  exit(0);
}
EOF
if { (eval echo configure:17938: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF


echo $ac_n "checking size of long long int""... $ac_c" 1>&6
echo "configure:17958: checking size of long long int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long_int=8
else
  cat > conftest.$ac_ext <<EOF
#line 17966 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long long int));
  exit(0);
}
EOF
if { (eval echo configure:17977: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG_INT $ac_cv_sizeof_long_long_int
EOF


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:17997: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 18005 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:18016: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:18036: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 18044 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:18055: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF




  echo $ac_n "checking size of intmax_t""... $ac_c" 1>&6
echo "configure:18077: checking size of intmax_t" >&5
  
  php_cache_value=php_cv_sizeof_intmax_t
  if eval "test \"`echo '$''{'php_cv_sizeof_intmax_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then
  
    eval $php_cache_value=0

else
  cat > conftest.$ac_ext <<EOF
#line 18094 "configure"
#include "confdefs.h"
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif


int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof(intmax_t));
	return(0);
}
  
EOF
if { (eval echo configure:18118: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    eval $php_cache_value=`cat conftestval`
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    eval $php_cache_value=0
  
fi
rm -fr conftest*
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then

    cat >> confdefs.h <<EOF
#define SIZEOF_INTMAX_T $php_cv_sizeof_intmax_t
EOF

    cat >> confdefs.h <<EOF
#define HAVE_INTMAX_T 1
EOF

  

  fi

  echo "$ac_t""$php_cv_sizeof_intmax_t" 1>&6


  echo $ac_n "checking size of ssize_t""... $ac_c" 1>&6
echo "configure:18157: checking size of ssize_t" >&5
  
  php_cache_value=php_cv_sizeof_ssize_t
  if eval "test \"`echo '$''{'php_cv_sizeof_ssize_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then
  
    eval $php_cache_value=8

else
  cat > conftest.$ac_ext <<EOF
#line 18174 "configure"
#include "confdefs.h"
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif


int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof(ssize_t));
	return(0);
}
  
EOF
if { (eval echo configure:18198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    eval $php_cache_value=`cat conftestval`
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    eval $php_cache_value=0
  
fi
rm -fr conftest*
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then

    cat >> confdefs.h <<EOF
#define SIZEOF_SSIZE_T $php_cv_sizeof_ssize_t
EOF

    cat >> confdefs.h <<EOF
#define HAVE_SSIZE_T 1
EOF

  

  fi

  echo "$ac_t""$php_cv_sizeof_ssize_t" 1>&6


  echo $ac_n "checking size of ptrdiff_t""... $ac_c" 1>&6
echo "configure:18237: checking size of ptrdiff_t" >&5
  
  php_cache_value=php_cv_sizeof_ptrdiff_t
  if eval "test \"`echo '$''{'php_cv_sizeof_ptrdiff_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then
  
    eval $php_cache_value=8

else
  cat > conftest.$ac_ext <<EOF
#line 18254 "configure"
#include "confdefs.h"
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif


int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof(ptrdiff_t));
	return(0);
}
  
EOF
if { (eval echo configure:18278: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    eval $php_cache_value=`cat conftestval`
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    eval $php_cache_value=0
  
fi
rm -fr conftest*
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then

    cat >> confdefs.h <<EOF
#define SIZEOF_PTRDIFF_T $php_cv_sizeof_ptrdiff_t
EOF

    cat >> confdefs.h <<EOF
#define HAVE_PTRDIFF_T 1
EOF

  

  fi

  echo "$ac_t""$php_cv_sizeof_ptrdiff_t" 1>&6


echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
echo "configure:18317: checking for st_blksize in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_blksize'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18322 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_blksize;
; return 0; }
EOF
if { (eval echo configure:18330: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_blksize=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_blksize=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_blksize" 1>&6
if test $ac_cv_struct_st_blksize = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_BLKSIZE 1
EOF

fi

if test "`uname -s 2>/dev/null`" != "QNX"; then
  echo $ac_n "checking for st_blocks in struct stat""... $ac_c" 1>&6
echo "configure:18352: checking for st_blocks in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_blocks'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18357 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_blocks;
; return 0; }
EOF
if { (eval echo configure:18365: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_blocks=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_blocks=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_blocks" 1>&6
if test $ac_cv_struct_st_blocks = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_BLOCKS 1
EOF

else
  LIBOBJS="$LIBOBJS fileblocks.${ac_objext}"
fi

else
  echo "configure: warning: warnings level for cc set to 0" 1>&2
  WARNING_LEVEL=0
fi
echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
echo "configure:18392: checking for st_rdev in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18397 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_rdev;
; return 0; }
EOF
if { (eval echo configure:18405: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_rdev=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_rdev=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_rdev" 1>&6
if test $ac_cv_struct_st_rdev = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_RDEV 1
EOF

fi


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:18427: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18432 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:18460: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18465 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi



    echo $ac_n "checking for struct sockaddr_storage""... $ac_c" 1>&6
echo "configure:18496: checking for struct sockaddr_storage" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_storage'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18501 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/socket.h>
int main() {
struct sockaddr_storage s; s
; return 0; }
EOF
if { (eval echo configure:18509: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_storage=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_storage=no
fi
rm -f conftest*
  
fi

echo "$ac_t""$ac_cv_sockaddr_storage" 1>&6
  if test "$ac_cv_sockaddr_storage" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_STORAGE 1
EOF

  fi
    echo $ac_n "checking for field sa_len in struct sockaddr""... $ac_c" 1>&6
echo "configure:18530: checking for field sa_len in struct sockaddr" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_sa_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 18536 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/socket.h>
int main() {
static struct sockaddr sa; int n = (int) sa.sa_len; return n;
; return 0; }
EOF
if { (eval echo configure:18544: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_sa_len=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_sa_len=no
fi
rm -f conftest*
  
fi

echo "$ac_t""$ac_cv_sockaddr_sa_len" 1>&6
  if test "$ac_cv_sockaddr_sa_len" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_SA_LEN 1
EOF

  fi


echo $ac_n "checking for IPv6 support""... $ac_c" 1>&6
echo "configure:18567: checking for IPv6 support" >&5
if eval "test \"`echo '$''{'ac_cv_ipv6_support'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18572 "configure"
#include "confdefs.h"
 #include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
int main() {
struct sockaddr_in6 s; struct in6_addr t=in6addr_any; int i=AF_INET6; s; t.s6_addr[0] = 0;
; return 0; }
EOF
if { (eval echo configure:18581: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_ipv6_support=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_ipv6_support=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_ipv6_support" 1>&6


echo $ac_n "checking for vprintf""... $ac_c" 1>&6
echo "configure:18597: checking for vprintf" >&5
if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18602 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vprintf(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vprintf();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vprintf) || defined (__stub___vprintf)
choke me
#else
vprintf();
#endif

; return 0; }
EOF
if { (eval echo configure:18625: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_vprintf=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_vprintf=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'vprintf`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_VPRINTF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$ac_cv_func_vprintf" != yes; then
echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
echo "configure:18649: checking for _doprnt" >&5
if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18654 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char _doprnt(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _doprnt();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub__doprnt) || defined (__stub____doprnt)
choke me
#else
_doprnt();
#endif

; return 0; }
EOF
if { (eval echo configure:18677: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func__doprnt=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func__doprnt=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'_doprnt`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOPRNT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

fi

for ac_func in alphasort \
asctime_r \
chroot \
ctime_r \
cuserid \
crypt \
flock \
ftok \
funopen \
gai_strerror \
gcvt \
getloadavg \
getlogin \
getprotobyname \
getprotobynumber \
getservbyname \
getservbyport \
gethostname \
getrusage \
gettimeofday \
gmtime_r \
getpwnam_r \
getgrnam_r \
getpwuid_r \
grantpt \
inet_ntoa \
inet_ntop \
inet_pton \
isascii \
link \
localtime_r \
lockf \
lchown \
lrand48 \
memcpy \
memmove \
mkstemp \
mmap \
nl_langinfo \
perror \
poll \
ptsname \
putenv \
realpath \
random \
rand_r \
scandir \
setitimer \
setlocale \
localeconv \
setenv \
setpgid \
setsockopt \
setvbuf \
shutdown \
sin \
snprintf \
srand48 \
srandom \
statfs \
statvfs \
std_syslog \
strcasecmp \
strcoll \
strdup \
strerror \
strftime \
strnlen \
strptime \
strstr \
strtok_r \
symlink \
tempnam \
tzset \
unlockpt \
unsetenv \
usleep \
utime \
vsnprintf \
vasprintf \
asprintf \
nanosleep \

do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:18786: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18791 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:18814: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



  
  unset ac_cv_lib_rt_nanosleep
  unset ac_cv_lib_rt___nanosleep
  unset found
  echo $ac_n "checking for nanosleep in -lrt""... $ac_c" 1>&6
echo "configure:18845: checking for nanosleep in -lrt" >&5
ac_lib_var=`echo rt'_'nanosleep | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lrt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 18853 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char nanosleep();

int main() {
nanosleep()
; return 0; }
EOF
if { (eval echo configure:18864: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __nanosleep in -lrt""... $ac_c" 1>&6
echo "configure:18884: checking for __nanosleep in -lrt" >&5
ac_lib_var=`echo rt'_'__nanosleep | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lrt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 18892 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __nanosleep();

int main() {
__nanosleep()
; return 0; }
EOF
if { (eval echo configure:18903: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lrt"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 18935 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:18939: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case rt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lrt $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_NANOSLEEP 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRT 1
EOF

    ac_cv_func_nanosleep=yes
  else
    
  :

  fi
  


echo $ac_n "checking for getaddrinfo""... $ac_c" 1>&6
echo "configure:18983: checking for getaddrinfo" >&5
if eval "test \"`echo '$''{'ac_cv_func_getaddrinfo'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 18988 "configure"
#include "confdefs.h"
#include <netdb.h>
int main() {
struct addrinfo *g,h;g=&h;getaddrinfo("","",g,&g);
; return 0; }
EOF
if { (eval echo configure:18995: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  if test "$cross_compiling" = yes; then
  ac_cv_func_getaddrinfo=no
else
  cat > conftest.$ac_ext <<EOF
#line 19001 "configure"
#include "confdefs.h"

#include <netdb.h>
#include <sys/types.h>
#ifndef AF_INET
# include <sys/socket.h>
#endif
int main(void) {
  struct addrinfo *ai, *pai, hints;

  memset(&hints, 0, sizeof(hints));
  hints.ai_flags = AI_NUMERICHOST;

  if (getaddrinfo("127.0.0.1", 0, &hints, &ai) < 0) {
    exit(1);
  }

  if (ai == 0) {
    exit(1);
  }

  pai = ai;
  
  while (pai) {
    if (pai->ai_family != AF_INET) {
      /* 127.0.0.1/NUMERICHOST should only resolve ONE way */
      exit(1);
    }
    if (pai->ai_addr->sa_family != AF_INET) {
      /* 127.0.0.1/NUMERICHOST should only resolve ONE way */
      exit(1);
    }
    pai = pai->ai_next;
  }
  freeaddrinfo(ai);
  exit(0);
}
  
EOF
if { (eval echo configure:19041: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_getaddrinfo=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_getaddrinfo=no
fi
rm -fr conftest*
fi

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_getaddrinfo=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_getaddrinfo" 1>&6
if test "$ac_cv_func_getaddrinfo" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_GETADDRINFO 1
EOF

fi

echo $ac_n "checking for __sync_fetch_and_add""... $ac_c" 1>&6
echo "configure:19071: checking for __sync_fetch_and_add" >&5
if eval "test \"`echo '$''{'ac_cv_func_sync_fetch_and_add'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19076 "configure"
#include "confdefs.h"

int main() {
int x;__sync_fetch_and_add(&x,1);
; return 0; }
EOF
if { (eval echo configure:19083: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_sync_fetch_and_add=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_sync_fetch_and_add=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_sync_fetch_and_add" 1>&6
if test "$ac_cv_func_sync_fetch_and_add" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_SYNC_FETCH_AND_ADD 1
EOF

fi

for ac_func in strlcat strlcpy getopt
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:19106: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19111 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:19134: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
LIBOBJS="$LIBOBJS ${ac_func}.${ac_objext}"
fi
done


echo $ac_n "checking whether utime accepts a null argument""... $ac_c" 1>&6
echo "configure:19161: checking whether utime accepts a null argument" >&5
if eval "test \"`echo '$''{'ac_cv_func_utime_null'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata; > conftestdata
# Sequent interprets utime(file, 0) to mean use start of epoch.  Wrong.
if test "$cross_compiling" = yes; then
  ac_cv_func_utime_null=no
else
  cat > conftest.$ac_ext <<EOF
#line 19171 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
main() {
struct stat s, t;
exit(!(stat ("conftestdata", &s) == 0 && utime("conftestdata", (long *)0) == 0
&& stat("conftestdata", &t) == 0 && t.st_mtime >= s.st_mtime
&& t.st_mtime - s.st_mtime < 120));
}
EOF
if { (eval echo configure:19182: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_utime_null=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_utime_null=no
fi
rm -fr conftest*
fi

rm -f core core.* *.core
fi

echo "$ac_t""$ac_cv_func_utime_null" 1>&6
if test $ac_cv_func_utime_null = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_UTIME_NULL 1
EOF

fi

# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:19208: checking for working alloca.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19213 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:19220: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:19241: checking for alloca" >&5
if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19246 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:19274: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:19306: checking whether alloca needs Cray hooks" >&5
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19311 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:19336: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19341 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:19364: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:19391: checking stack direction for C alloca" >&5
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
  cat > conftest.$ac_ext <<EOF
#line 19399 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:19418: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi


  echo $ac_n "checking for declared timezone""... $ac_c" 1>&6
echo "configure:19441: checking for declared timezone" >&5
if eval "test \"`echo '$''{'ac_cv_declared_timezone'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 19447 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <time.h>
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#endif

int main() {

    time_t foo = (time_t) timezone;

; return 0; }
EOF
if { (eval echo configure:19462: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_declared_timezone=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_declared_timezone=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_declared_timezone" 1>&6
  if test "$ac_cv_declared_timezone" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_DECLARED_TIMEZONE 1
EOF

  fi


echo $ac_n "checking for type of reentrant time-related functions""... $ac_c" 1>&6
echo "configure:19488: checking for type of reentrant time-related functions" >&5
if eval "test \"`echo '$''{'ac_cv_time_r_type'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_time_r_type=POSIX

else
  cat > conftest.$ac_ext <<EOF
#line 19499 "configure"
#include "confdefs.h"

#include <time.h>

main() {
char buf[27];
struct tm t;
time_t old = 0;
int r, s;

s = gmtime_r(&old, &t);
r = (int) asctime_r(&t, buf, 26);
if (r == s && s == 0) return (0);
return (1);
}

EOF
if { (eval echo configure:19517: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_time_r_type=hpux

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_time_r_type=POSIX
  
else
  cat > conftest.$ac_ext <<EOF
#line 19533 "configure"
#include "confdefs.h"

#include <time.h>
main() {
  struct tm t, *s;
  time_t old = 0;
  char buf[27], *p;
  
  s = gmtime_r(&old, &t);
  p = asctime_r(&t, buf, 26);
  if (p == buf && s == &t) return (0);
  return (1);
}
  
EOF
if { (eval echo configure:19549: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_time_r_type=irix
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_time_r_type=POSIX
  
fi
rm -fr conftest*
fi


fi
rm -fr conftest*
fi


fi

echo "$ac_t""$ac_cv_time_r_type" 1>&6
  case $ac_cv_time_r_type in
  hpux) cat >> confdefs.h <<\EOF
#define PHP_HPUX_TIME_R 1
EOF
 ;;
  irix) cat >> confdefs.h <<\EOF
#define PHP_IRIX_TIME_R 1
EOF
 ;;
  esac


    echo $ac_n "checking for readdir_r""... $ac_c" 1>&6
echo "configure:19587: checking for readdir_r" >&5
if eval "test \"`echo '$''{'ac_cv_func_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19592 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char readdir_r(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char readdir_r();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_readdir_r) || defined (__stub___readdir_r)
choke me
#else
readdir_r();
#endif

; return 0; }
EOF
if { (eval echo configure:19615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_readdir_r=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_readdir_r=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'readdir_r`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_cv_func_readdir_r=yes
else
  echo "$ac_t""no" 1>&6
ac_cv_func_readdir=no
fi

  if test "$ac_cv_func_readdir_r" = "yes"; then
  echo $ac_n "checking for type of readdir_r""... $ac_c" 1>&6
echo "configure:19637: checking for type of readdir_r" >&5
if eval "test \"`echo '$''{'ac_cv_what_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_what_readdir_r=none
   
else
  cat > conftest.$ac_ext <<EOF
#line 19648 "configure"
#include "confdefs.h"

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>

#ifndef PATH_MAX
#define PATH_MAX 1024
#endif

main() {
  DIR *dir;
  char entry[sizeof(struct dirent)+PATH_MAX];
  struct dirent *pentry = (struct dirent *) &entry;

  dir = opendir("/");
  if (!dir) 
    exit(1);
  if (readdir_r(dir, (struct dirent *) entry, &pentry) == 0)
    exit(0);
  exit(1);
}
    
EOF
if { (eval echo configure:19673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_what_readdir_r=POSIX
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      cat > conftest.$ac_ext <<EOF
#line 19684 "configure"
#include "confdefs.h"

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>
int readdir_r(DIR *, struct dirent *);
        
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:19694: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  
          ac_cv_what_readdir_r=old-style
        
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
          ac_cv_what_readdir_r=none
      
fi
rm -f conftest*
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_what_readdir_r" 1>&6
    case $ac_cv_what_readdir_r in
    POSIX)
      cat >> confdefs.h <<\EOF
#define HAVE_POSIX_READDIR_R 1
EOF
;;
    old-style)
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_READDIR_R 1
EOF
;;
    esac
  fi


echo $ac_n "checking for in_addr_t""... $ac_c" 1>&6
echo "configure:19736: checking for in_addr_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_in_addr_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19741 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_NETINET_IN_H
#include <netinet/in.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "in_addr_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_in_addr_t=yes
else
  rm -rf conftest*
  ac_cv_type_in_addr_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_in_addr_t" 1>&6
if test $ac_cv_type_in_addr_t = no; then
  cat >> confdefs.h <<\EOF
#define in_addr_t u_int
EOF

fi


for ac_func in crypt_r
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:19775: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 19780 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:19803: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
  php_crypt_r="1" 
else
  echo "$ac_t""no" 1>&6
php_crypt_r="0" 
fi
done

if test "x$php_crypt_r" = "x1"; then
  
  echo $ac_n "checking which data struct is used by crypt_r""... $ac_c" 1>&6
echo "configure:19831: checking which data struct is used by crypt_r" >&5
if eval "test \"`echo '$''{'php_cv_crypt_r_style'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    php_cv_crypt_r_style=none
    cat > conftest.$ac_ext <<EOF
#line 19838 "configure"
#include "confdefs.h"

#define _REENTRANT 1
#include <crypt.h>

int main() {

CRYPTD buffer;
crypt_r("passwd", "hash", &buffer);

; return 0; }
EOF
if { (eval echo configure:19851: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  php_cv_crypt_r_style=cryptd
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*

    if test "$php_cv_crypt_r_style" = "none"; then
      cat > conftest.$ac_ext <<EOF
#line 19862 "configure"
#include "confdefs.h"

#define _REENTRANT 1
#include <crypt.h>

int main() {

struct crypt_data buffer;
crypt_r("passwd", "hash", &buffer);

; return 0; }
EOF
if { (eval echo configure:19875: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  php_cv_crypt_r_style=struct_crypt_data
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
    fi

    if test "$php_cv_crypt_r_style" = "none"; then
      cat > conftest.$ac_ext <<EOF
#line 19887 "configure"
#include "confdefs.h"

#define _REENTRANT 1
#define _GNU_SOURCE
#include <crypt.h>

int main() {

struct crypt_data buffer;
crypt_r("passwd", "hash", &buffer);

; return 0; }
EOF
if { (eval echo configure:19901: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  php_cv_crypt_r_style=struct_crypt_data_gnu_source
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
    fi
    
fi

echo "$ac_t""$php_cv_crypt_r_style" 1>&6

  if test "$php_cv_crypt_r_style" = "cryptd"; then
    cat >> confdefs.h <<\EOF
#define CRYPT_R_CRYPTD 1
EOF

  fi
  if test "$php_cv_crypt_r_style" = "struct_crypt_data" -o "$php_cv_crypt_r_style" = "struct_crypt_data_gnu_source"; then
    cat >> confdefs.h <<\EOF
#define CRYPT_R_STRUCT_CRYPT_DATA 1
EOF

  fi
  if test "$php_cv_crypt_r_style" = "struct_crypt_data_gnu_source"; then
    cat >> confdefs.h <<\EOF
#define CRYPT_R_GNU_SOURCE 1
EOF

  fi
  if test "$php_cv_crypt_r_style" = "none"; then
    { echo "configure: error: Unable to detect data struct used by crypt_r" 1>&2; exit 1; }
  fi

fi





  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}General settings${T_ME}" 1>&6



# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi




php_enable_gcov=no

echo $ac_n "checking whether to include gcov symbols""... $ac_c" 1>&6
echo "configure:19960: checking whether to include gcov symbols" >&5
# Check whether --enable-gcov or --disable-gcov was given.
if test "${enable_gcov+set}" = set; then
  enableval="$enable_gcov"
  PHP_GCOV=$enableval
else
  
  PHP_GCOV=no
  

fi


ext_output=$PHP_GCOV
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_GCOV" = "yes"; then

  if test "$GCC" != "yes"; then
    { echo "configure: error: GCC is required for --enable-gcov" 1>&2; exit 1; }
  fi
  
    case `$php_shtool path $CC` in
    *ccache*) gcc_ccache=yes;;
    *) gcc_ccache=no;;
  esac

  if test "$gcc_ccache" = "yes" && (test -z "$CCACHE_DISABLE" || test "$CCACHE_DISABLE" != "1"); then
    { echo "configure: error: ccache must be disabled when --enable-gcov option is used. You can disable ccache by setting environment variable CCACHE_DISABLE=1." 1>&2; exit 1; }
  fi
  
  ltp_version_list="1.5 1.6 1.7 1.9 1.10"

  # Extract the first word of "lcov", so it can be a program name with args.
set dummy lcov; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:19999: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LTP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LTP"; then
  ac_cv_prog_LTP="$LTP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LTP="lcov"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LTP="$ac_cv_prog_LTP"
if test -n "$LTP"; then
  echo "$ac_t""$LTP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  # Extract the first word of "genhtml", so it can be a program name with args.
set dummy genhtml; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:20028: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LTP_GENHTML'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LTP_GENHTML"; then
  ac_cv_prog_LTP_GENHTML="$LTP_GENHTML" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LTP_GENHTML="genhtml"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LTP_GENHTML="$ac_cv_prog_LTP_GENHTML"
if test -n "$LTP_GENHTML"; then
  echo "$ac_t""$LTP_GENHTML" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST LTP"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST LTP_GENHTML"


  if test "$LTP"; then
    echo $ac_n "checking for ltp version""... $ac_c" 1>&6
echo "configure:20063: checking for ltp version" >&5
if eval "test \"`echo '$''{'php_cv_ltp_version'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
      php_cv_ltp_version=invalid
      ltp_version=`$LTP -v 2>/dev/null | $SED -e 's/^.* //'`
      for ltp_check_version in $ltp_version_list; do
        if test "$ltp_version" = "$ltp_check_version"; then
          php_cv_ltp_version="$ltp_check_version (ok)"
        fi
      done
    
fi

echo "$ac_t""$php_cv_ltp_version" 1>&6
  else
    ltp_msg="To enable code coverage reporting you must have one of the following LTP versions installed: $ltp_version_list"      
    { echo "configure: error: $ltp_msg" 1>&2; exit 1; }
  fi

  case $php_cv_ltp_version in
    ""|invalid)
      ltp_msg="You must have one of the following versions of LTP: $ltp_version_list (found: $ltp_version)."
      { echo "configure: error: $ltp_msg" 1>&2; exit 1; }
      LTP="exit 0;"
      ;;
  esac

  if test -z "$LTP_GENHTML"; then
    { echo "configure: error: Could not find genhtml from the LTP package" 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_GCOV 1
EOF

  
  src=$abs_srcdir/Makefile.gcov
  ac_srcdir=$abs_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


    
  CFLAGS=`echo "$CFLAGS" | $SED -e 's/-O[0-9s]*//g'`
  CXXFLAGS=`echo "$CXXFLAGS" | $SED -e 's/-O[0-9s]*//g'`
  

    CFLAGS="$CFLAGS -O0 -fprofile-arcs -ftest-coverage"
  CXXFLAGS="$CXXFLAGS -O0 -fprofile-arcs -ftest-coverage"
fi


php_enable_debug=no

echo $ac_n "checking whether to include debugging symbols""... $ac_c" 1>&6
echo "configure:20120: checking whether to include debugging symbols" >&5
# Check whether --enable-debug or --disable-debug was given.
if test "${enable_debug+set}" = set; then
  enableval="$enable_debug"
  PHP_DEBUG=$enableval
else
  
  PHP_DEBUG=no
  

fi


ext_output=$PHP_DEBUG
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DEBUG" = "yes"; then
  PHP_DEBUG=1
  ZEND_DEBUG=yes
  
  CFLAGS=`echo "$CFLAGS" | $SED -e 's/-O[0-9s]*//g'`
  CXXFLAGS=`echo "$CXXFLAGS" | $SED -e 's/-O[0-9s]*//g'`
  
    if test "$GCC" = "yes" || test "$ICC" = "yes"; then
    CFLAGS="$CFLAGS -O0"
    CXXFLAGS="$CXXFLAGS -g -O0"
  fi
  if test "$SUNCC" = "yes"; then
    if test -n "$auto_cflags"; then
      CFLAGS="-g"
      CXXFLAGS="-g"
    else
      CFLAGS="$CFLAGS -g"
      CXXFLAGS="$CFLAGS -g"
    fi
  fi
else
  PHP_DEBUG=0
  ZEND_DEBUG=no
fi


php_with_layout=PHP

echo $ac_n "checking layout of installed files""... $ac_c" 1>&6
echo "configure:20168: checking layout of installed files" >&5
# Check whether --with-layout or --without-layout was given.
if test "${with_layout+set}" = set; then
  withval="$with_layout"
  PHP_LAYOUT=$withval
else
  
  PHP_LAYOUT=PHP
  

fi


ext_output=$PHP_LAYOUT
echo "$ac_t""$ext_output" 1>&6




case $PHP_LAYOUT in
  GNU)
    oldstyleextdir=no
    ;;
  *)
    oldstyleextdir=yes
    ;;
esac


php_with_config_file_path=DEFAULT

echo $ac_n "checking path to configuration file""... $ac_c" 1>&6
echo "configure:20200: checking path to configuration file" >&5
# Check whether --with-config-file-path or --without-config-file-path was given.
if test "${with_config_file_path+set}" = set; then
  withval="$with_config_file_path"
  PHP_CONFIG_FILE_PATH=$withval
else
  
  PHP_CONFIG_FILE_PATH=DEFAULT
  

fi


ext_output=$PHP_CONFIG_FILE_PATH
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CONFIG_FILE_PATH" = "DEFAULT"; then
  case $PHP_LAYOUT in
    GNU)
      PHP_CONFIG_FILE_PATH=$sysconfdir
      ;;
    *)
      PHP_CONFIG_FILE_PATH=$libdir
      ;;
  esac
fi

echo $ac_n "checking where to scan for configuration files""... $ac_c" 1>&6
echo "configure:20231: checking where to scan for configuration files" >&5

php_with_config_file_scan_dir=DEFAULT


# Check whether --with-config-file-scan-dir or --without-config-file-scan-dir was given.
if test "${with_config_file_scan_dir+set}" = set; then
  withval="$with_config_file_scan_dir"
  PHP_CONFIG_FILE_SCAN_DIR=$withval
else
  
  PHP_CONFIG_FILE_SCAN_DIR=DEFAULT
  

fi


ext_output=$PHP_CONFIG_FILE_SCAN_DIR



 
if test "$PHP_CONFIG_FILE_SCAN_DIR" = "DEFAULT"; then
  PHP_CONFIG_FILE_SCAN_DIR=
fi
echo "$ac_t""$PHP_CONFIG_FILE_SCAN_DIR" 1>&6

test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"


php_enable_safe_mode=no

echo $ac_n "checking whether to enable safe mode by default""... $ac_c" 1>&6
echo "configure:20264: checking whether to enable safe mode by default" >&5
# Check whether --enable-safe-mode or --disable-safe-mode was given.
if test "${enable_safe_mode+set}" = set; then
  enableval="$enable_safe_mode"
  PHP_SAFE_MODE=$enableval
else
  
  PHP_SAFE_MODE=no
  

fi


ext_output=$PHP_SAFE_MODE
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SAFE_MODE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE 1
EOF

else
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE 0
EOF

fi

echo $ac_n "checking for safe mode exec dir""... $ac_c" 1>&6
echo "configure:20296: checking for safe mode exec dir" >&5

php_with_exec_dir=no


# Check whether --with-exec-dir or --without-exec-dir was given.
if test "${with_exec_dir+set}" = set; then
  withval="$with_exec_dir"
  PHP_EXEC_DIR=$withval
else
  
  PHP_EXEC_DIR=no
  

fi


ext_output=$PHP_EXEC_DIR





if test "$PHP_EXEC_DIR" != "no" && test "$PHP_EXEC_DIR" != "yes" ; then
  cat >> confdefs.h <<EOF
#define PHP_SAFE_MODE_EXEC_DIR "$PHP_EXEC_DIR"
EOF

  echo "$ac_t""$PHP_EXEC_DIR" 1>&6
else
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE_EXEC_DIR "/usr/local/php/bin"
EOF

  echo "$ac_t""/usr/local/php/bin" 1>&6
fi


php_enable_sigchild=no

echo $ac_n "checking whether to enable PHP's own SIGCHLD handler""... $ac_c" 1>&6
echo "configure:20337: checking whether to enable PHP's own SIGCHLD handler" >&5
# Check whether --enable-sigchild or --disable-sigchild was given.
if test "${enable_sigchild+set}" = set; then
  enableval="$enable_sigchild"
  PHP_SIGCHILD=$enableval
else
  
  PHP_SIGCHILD=no
  

fi


ext_output=$PHP_SIGCHILD
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SIGCHILD" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_SIGCHILD 1
EOF

else
  cat >> confdefs.h <<\EOF
#define PHP_SIGCHILD 0
EOF

fi


php_enable_magic_quotes=no

echo $ac_n "checking whether to enable magic quotes by default""... $ac_c" 1>&6
echo "configure:20372: checking whether to enable magic quotes by default" >&5
# Check whether --enable-magic-quotes or --disable-magic-quotes was given.
if test "${enable_magic_quotes+set}" = set; then
  enableval="$enable_magic_quotes"
  PHP_MAGIC_QUOTES=$enableval
else
  
  PHP_MAGIC_QUOTES=no
  

fi


ext_output=$PHP_MAGIC_QUOTES
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MAGIC_QUOTES" = "yes"; then
  cat >> confdefs.h <<\EOF
#define MAGIC_QUOTES 1
EOF

else
  cat >> confdefs.h <<\EOF
#define MAGIC_QUOTES 0
EOF

fi


php_enable_libgcc=no

echo $ac_n "checking whether to explicitly link against libgcc""... $ac_c" 1>&6
echo "configure:20407: checking whether to explicitly link against libgcc" >&5
# Check whether --enable-libgcc or --disable-libgcc was given.
if test "${enable_libgcc+set}" = set; then
  enableval="$enable_libgcc"
  PHP_LIBGCC=$enableval
else
  
  PHP_LIBGCC=no
  

fi


ext_output=$PHP_LIBGCC
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_LIBGCC" = "yes"; then
  
  
  libgcc_libpath=`gcc --print-libgcc-file-name|$SED 's%/*[^/][^/]*$%%'`
  

  if test -z "$libgcc_libpath"; then
    { echo "configure: error: Cannot locate libgcc. Make sure that gcc is in your path" 1>&2; exit 1; }
  fi
  
  if test "$libgcc_libpath" != "/usr/$PHP_LIBDIR" && test "$libgcc_libpath" != "/usr/lib"; then
    
  if test -z "$libgcc_libpath" || echo "$libgcc_libpath" | grep '^/' >/dev/null ; then
    ai_p=$libgcc_libpath
  else
    
    ep_dir="`echo $libgcc_libpath|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$libgcc_libpath\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  
  
  case gcc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lgcc" 
   ;;
  esac


fi


php_enable_short_tags=yes

echo $ac_n "checking whether to enable short tags by default""... $ac_c" 1>&6
echo "configure:20484: checking whether to enable short tags by default" >&5
# Check whether --enable-short-tags or --disable-short-tags was given.
if test "${enable_short_tags+set}" = set; then
  enableval="$enable_short_tags"
  PHP_SHORT_TAGS=$enableval
else
  
  PHP_SHORT_TAGS=yes
  

fi


ext_output=$PHP_SHORT_TAGS
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SHORT_TAGS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define DEFAULT_SHORT_OPEN_TAG "1"
EOF

else
  cat >> confdefs.h <<\EOF
#define DEFAULT_SHORT_OPEN_TAG "0"
EOF

fi


php_enable_dmalloc=no

echo $ac_n "checking whether to enable dmalloc""... $ac_c" 1>&6
echo "configure:20519: checking whether to enable dmalloc" >&5
# Check whether --enable-dmalloc or --disable-dmalloc was given.
if test "${enable_dmalloc+set}" = set; then
  enableval="$enable_dmalloc"
  PHP_DMALLOC=$enableval
else
  
  PHP_DMALLOC=no
  

fi


ext_output=$PHP_DMALLOC
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DMALLOC" = "yes"; then
  echo $ac_n "checking for dmalloc_error in -ldmalloc""... $ac_c" 1>&6
echo "configure:20540: checking for dmalloc_error in -ldmalloc" >&5
ac_lib_var=`echo dmalloc'_'dmalloc_error | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldmalloc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 20548 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dmalloc_error();

int main() {
dmalloc_error()
; return 0; }
EOF
if { (eval echo configure:20559: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    
  
  case dmalloc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldmalloc $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DMALLOC 1
EOF

    CPPFLAGS="$CPPFLAGS -DDMALLOC_FUNC_CHECK"
  
else
  echo "$ac_t""no" 1>&6

    { echo "configure: error: Problem with enabling dmalloc. Please check config.log for details." 1>&2; exit 1; }
  
fi

fi


php_enable_ipv6=yes

echo $ac_n "checking whether to enable IPv6 support""... $ac_c" 1>&6
echo "configure:20604: checking whether to enable IPv6 support" >&5
# Check whether --enable-ipv6 or --disable-ipv6 was given.
if test "${enable_ipv6+set}" = set; then
  enableval="$enable_ipv6"
  PHP_IPV6=$enableval
else
  
  PHP_IPV6=yes
  

fi


ext_output=$PHP_IPV6
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_IPV6" != "no" && test "$ac_cv_ipv6_support" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_IPV6 1
EOF

fi

echo $ac_n "checking how big to make fd sets""... $ac_c" 1>&6
echo "configure:20631: checking how big to make fd sets" >&5

php_enable_fd_setsize=no


# Check whether --enable-fd-setsize or --disable-fd-setsize was given.
if test "${enable_fd_setsize+set}" = set; then
  enableval="$enable_fd_setsize"
  PHP_FD_SETSIZE=$enableval
else
  
  PHP_FD_SETSIZE=no
  

fi


ext_output=$PHP_FD_SETSIZE





if test "$PHP_FD_SETSIZE" != "no"; then
  if test "0$PHP_FD_SETSIZE" -gt 0 2>/dev/null; then
    CPPFLAGS="$CPPFLAGS -DFD_SETSIZE=$PHP_FD_SETSIZE"
    echo "$ac_t""using $PHP_FD_SETSIZE" 1>&6
  else
    { echo "configure: error: Invalid value passed to --enable-fd-setsize!" 1>&2; exit 1; }
  fi
else
  echo "$ac_t""using system default" 1>&6
fi






# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi




  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring extensions${T_ME}" 1>&6



# Check whether --enable-all or --disable-all was given.
if test "${enable_all+set}" = set; then
  enableval="$enable_all"
  
  PHP_ENABLE_ALL=$enableval

fi


# reading config stubs




echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:20699: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 20707 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:20718: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:20738: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 20746 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:20757: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF



echo $ac_n "checking for int32_t""... $ac_c" 1>&6
echo "configure:20778: checking for int32_t" >&5
if eval "test \"`echo '$''{'ac_cv_int_type_int32_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
cat > conftest.$ac_ext <<EOF
#line 20784 "configure"
#include "confdefs.h"

#if HAVE_SYS_TYPES_H
# include <sys/types.h>
#endif
#if HAVE_INTTYPES_H
# include <inttypes.h>
#elif HAVE_STDINT_H   
# include <stdint.h>  
#endif
int main() {
if ((int32_t *) 0)
  return 0;   
if (sizeof (int32_t))
  return 0;

; return 0; }
EOF
if { (eval echo configure:20803: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_int_type_int32_t=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_int_type_int32_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_int_type_int32_t" 1>&6
if test "$ac_cv_int_type_int32_t" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_INT32_T 1
EOF

fi


echo $ac_n "checking for uint32_t""... $ac_c" 1>&6
echo "configure:20826: checking for uint32_t" >&5
if eval "test \"`echo '$''{'ac_cv_int_type_uint32_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
cat > conftest.$ac_ext <<EOF
#line 20832 "configure"
#include "confdefs.h"

#if HAVE_SYS_TYPES_H
# include <sys/types.h>
#endif
#if HAVE_INTTYPES_H
# include <inttypes.h>
#elif HAVE_STDINT_H   
# include <stdint.h>  
#endif
int main() {
if ((uint32_t *) 0)
  return 0;   
if (sizeof (uint32_t))
  return 0;

; return 0; }
EOF
if { (eval echo configure:20851: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_int_type_uint32_t=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_int_type_uint32_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_int_type_uint32_t" 1>&6
if test "$ac_cv_int_type_uint32_t" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_UINT32_T 1
EOF

fi


for ac_hdr in  \
sys/types.h \
inttypes.h \
stdint.h \
string.h \
stdlib.h

do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:20883: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 20888 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:20893: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


for ac_func in strtoll atoll strftime
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:20923: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 20928 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:20951: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




PHP_DATE_CFLAGS="-I@ext_builddir@/lib"
timelib_sources="lib/astro.c lib/dow.c lib/parse_date.c lib/parse_tz.c 
                 lib/timelib.c lib/tm2unixtime.c lib/unixtime2tm.c lib/parse_iso_intervals.c lib/interval.c"


  ext_builddir=ext/date
  ext_srcdir=$abs_srcdir/ext/date

  ac_extra=`echo "$PHP_DATE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_DATE_SHARED=no
    
  
  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC date"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC date"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_DATE_SHARED=yes
      
  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_date="$shared_objects_date $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdate.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(PHPDATE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdate.so '$ext_builddir'/phpdate.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPDATE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(PHPDATE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdate.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdate.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_date"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpdate.$suffix: $ext_builddir/phpdate.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdate.$suffix \$(phplibdir)

$ext_builddir/phpdate.$suffix: \$(shared_objects_date) \$(PHPDATE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/date.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(DATE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/date.so '$ext_builddir'/date.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(DATE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(DATE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/date.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/date.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_date"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/date.$suffix: $ext_builddir/date.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/date.$suffix \$(phplibdir)

$ext_builddir/date.$suffix: \$(shared_objects_date) \$(DATE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_DATE 1
EOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_DATE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC date"
        ;;
      *)
        
  
  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC date"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=date
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



  
    $php_shtool mkdir -p $ext_builddir/lib
  


  if test "$ext_builddir/lib" != "/usr/include"; then
    
  if test -z "$ext_builddir/lib" || echo "$ext_builddir/lib" | grep '^/' >/dev/null ; then
    ai_p=$ext_builddir/lib
  else
    
    ep_dir="`echo $ext_builddir/lib|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_builddir/lib\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  if test "$ext_srcdir/lib" != "/usr/include"; then
    
  if test -z "$ext_srcdir/lib" || echo "$ext_srcdir/lib" | grep '^/' >/dev/null ; then
    ai_p=$ext_srcdir/lib
  else
    
    ep_dir="`echo $ext_srcdir/lib|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_srcdir/lib\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi



  
    header_path=ext/date
    for header_file in php_date.h lib/timelib.h lib/timelib_structs.h lib/timelib_config.h; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  


cat > $ext_builddir/lib/timelib_config.h <<EOF
#ifdef PHP_WIN32
# include "config.w32.h"
#else
# include <php_config.h>
#endif
EOF



php_with_regex=php


# Check whether --with-regex or --without-regex was given.
if test "${with_regex+set}" = set; then
  withval="$with_regex"
  PHP_REGEX=$withval
else
  
  PHP_REGEX=php
  

fi


ext_output=$PHP_REGEX





case $PHP_REGEX in
  system)
    if test "$PHP_SAPI" = "apache" || test "$PHP_SAPI" = "apache2filter" || test "$PHP_SAPI" = "apache2handler"; then
      REGEX_TYPE=php
    else
      REGEX_TYPE=system
    fi
    ;;
  yes | php)
    REGEX_TYPE=php
    ;;
  *)
    REGEX_TYPE=php
    echo "configure: warning: Invalid regex library type selected. Using default value: php" 1>&2
    ;;
esac

echo $ac_n "checking which regex library to use""... $ac_c" 1>&6
echo "configure:21413: checking which regex library to use" >&5
echo "$ac_t""$REGEX_TYPE" 1>&6

if test "$REGEX_TYPE" = "php"; then
  ereg_regex_sources="regex/regcomp.c regex/regexec.c regex/regerror.c regex/regfree.c"
  ereg_regex_headers="regex/"
  PHP_EREG_CFLAGS="-Dregexec=php_regexec -Dregerror=php_regerror -Dregfree=php_regfree -Dregcomp=php_regcomp"
fi


  ext_builddir=ext/ereg
  ext_srcdir=$abs_srcdir/ext/ereg

  ac_extra=`echo "$PHP_EREG_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_EREG_SHARED=no
    
  
  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ereg"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ereg"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_EREG_SHARED=yes
      
  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ereg="$shared_objects_ereg $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpereg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(PHPEREG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpereg.so '$ext_builddir'/phpereg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPEREG, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(PHPEREG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpereg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpereg.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ereg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpereg.$suffix: $ext_builddir/phpereg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpereg.$suffix \$(phplibdir)

$ext_builddir/phpereg.$suffix: \$(shared_objects_ereg) \$(PHPEREG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ereg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(EREG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ereg.so '$ext_builddir'/ereg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(EREG, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(EREG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ereg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ereg.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ereg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ereg.$suffix: $ext_builddir/ereg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ereg.$suffix \$(phplibdir)

$ext_builddir/ereg.$suffix: \$(shared_objects_ereg) \$(EREG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_EREG 1
EOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_EREG_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ereg"
        ;;
      *)
        
  
  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ereg"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ereg
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  
    header_path=ext/ereg
    for header_file in php_ereg.h php_regex.h $ereg_regex_headers; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  


if test "$REGEX_TYPE" = "php"; then
  cat >> confdefs.h <<\EOF
#define HAVE_REGEX_T_RE_MAGIC 1
EOF

  cat >> confdefs.h <<\EOF
#define HSREGEX 1
EOF

  cat >> confdefs.h <<\EOF
#define REGEX 1
EOF
  
  
  
    $php_shtool mkdir -p $ext_builddir/regex
  

  
  if test "$ext_srcdir/regex" != "/usr/include"; then
    
  if test -z "$ext_srcdir/regex" || echo "$ext_srcdir/regex" | grep '^/' >/dev/null ; then
    ai_p=$ext_srcdir/regex
  else
    
    ep_dir="`echo $ext_srcdir/regex|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_srcdir/regex\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

elif test "$REGEX_TYPE" = "system"; then
  cat >> confdefs.h <<\EOF
#define REGEX 0
EOF

    echo $ac_n "checking whether field re_magic exists in struct regex_t""... $ac_c" 1>&6
echo "configure:21790: checking whether field re_magic exists in struct regex_t" >&5
if eval "test \"`echo '$''{'ac_cv_regex_t_re_magic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  cat > conftest.$ac_ext <<EOF
#line 21796 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <regex.h>
int main() {
regex_t rt; rt.re_magic;
; return 0; }
EOF
if { (eval echo configure:21804: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_regex_t_re_magic=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_regex_t_re_magic=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_regex_t_re_magic" 1>&6
  if test "$ac_cv_regex_t_re_magic" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_REGEX_T_RE_MAGIC  
EOF
   
  fi 
fi   



php_enable_libxml=yes

echo $ac_n "checking whether to enable LIBXML support""... $ac_c" 1>&6
echo "configure:21830: checking whether to enable LIBXML support" >&5
# Check whether --enable-libxml or --disable-libxml was given.
if test "${enable_libxml+set}" = set; then
  enableval="$enable_libxml"
  PHP_LIBXML=$enableval
else
  
  PHP_LIBXML=yes
  test "$PHP_ENABLE_ALL" && PHP_LIBXML=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LIBXML in
shared,*)
  PHP_LIBXML=`echo "$PHP_LIBXML"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LIBXML=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:21875: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_LIBXML" != "no"; then

    ext_shared=no

  
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:21901: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LIBXML_SHARED_LIBADD="$LIBXML_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LIBXML_SHARED_LIBADD="$LIBXML_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LIBXML_SHARED_LIBADD="-L$ai_p $LIBXML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LIBXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $LIBXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:22059: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $LIBXML_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 22075 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:22086: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
    cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

    
  ext_builddir=ext/libxml
  ext_srcdir=$abs_srcdir/ext/libxml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_LIBXML_SHARED=no
    
  
  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC libxml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC libxml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_LIBXML_SHARED=yes
      
  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_libxml="$shared_objects_libxml $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phplibxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(PHPLIBXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phplibxml.so '$ext_builddir'/phplibxml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPLIBXML, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(PHPLIBXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phplibxml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phplibxml.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libxml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phplibxml.$suffix: $ext_builddir/phplibxml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phplibxml.$suffix \$(phplibdir)

$ext_builddir/phplibxml.$suffix: \$(shared_objects_libxml) \$(PHPLIBXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/libxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(LIBXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/libxml.so '$ext_builddir'/libxml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(LIBXML, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(LIBXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/libxml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/libxml.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libxml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/libxml.$suffix: $ext_builddir/libxml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/libxml.$suffix \$(phplibdir)

$ext_builddir/libxml.$suffix: \$(shared_objects_libxml) \$(LIBXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_LIBXML 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_LIBXML_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC libxml"
        ;;
      *)
        
  
  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC libxml"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=libxml
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  
    for header_file in ext/libxml/php_libxml.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
  
  fi

fi



php_with_openssl=no

echo $ac_n "checking for OpenSSL support""... $ac_c" 1>&6
echo "configure:22451: checking for OpenSSL support" >&5
# Check whether --with-openssl or --without-openssl was given.
if test "${with_openssl+set}" = set; then
  withval="$with_openssl"
  PHP_OPENSSL=$withval
else
  
  PHP_OPENSSL=no
  test "$PHP_ENABLE_ALL" && PHP_OPENSSL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OPENSSL in
shared,*)
  PHP_OPENSSL=`echo "$PHP_OPENSSL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_OPENSSL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_kerberos=no

echo $ac_n "checking for Kerberos support""... $ac_c" 1>&6
echo "configure:22495: checking for Kerberos support" >&5
# Check whether --with-kerberos or --without-kerberos was given.
if test "${with_kerberos+set}" = set; then
  withval="$with_kerberos"
  PHP_KERBEROS=$withval
else
  
  PHP_KERBEROS=no
  

fi


ext_output=$PHP_KERBEROS
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_OPENSSL" != "no"; then
  
  ext_builddir=ext/openssl
  ext_srcdir=$abs_srcdir/ext/openssl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_OPENSSL_SHARED=no
    
  
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC openssl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC openssl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_OPENSSL_SHARED=yes
      
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_openssl="$shared_objects_openssl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpopenssl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(PHPOPENSSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpopenssl.so '$ext_builddir'/phpopenssl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPOPENSSL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(PHPOPENSSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpopenssl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpopenssl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_openssl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpopenssl.$suffix: $ext_builddir/phpopenssl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpopenssl.$suffix \$(phplibdir)

$ext_builddir/phpopenssl.$suffix: \$(shared_objects_openssl) \$(PHPOPENSSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/openssl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(OPENSSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/openssl.so '$ext_builddir'/openssl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(OPENSSL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(OPENSSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/openssl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/openssl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_openssl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/openssl.$suffix: $ext_builddir/openssl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/openssl.$suffix \$(phplibdir)

$ext_builddir/openssl.$suffix: \$(shared_objects_openssl) \$(OPENSSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_OPENSSL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_OPENSSL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC openssl"
        ;;
      *)
        
  
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC openssl"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=openssl
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OPENSSL_SHARED_LIBADD"


  if test "$PHP_KERBEROS" != "no"; then
    
  found_kerberos=no
  unset KERBEROS_CFLAGS
  unset KERBEROS_LIBS

    if test -z "$KRB5_CONFIG"; then
    # Extract the first word of "krb5-config", so it can be a program name with args.
set dummy krb5-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:22821: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_KRB5_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$KRB5_CONFIG" in
  /*)
  ac_cv_path_KRB5_CONFIG="$KRB5_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_KRB5_CONFIG="$KRB5_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH:/usr/kerberos/bin:/usr/local/bin"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_KRB5_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_KRB5_CONFIG" && ac_cv_path_KRB5_CONFIG="no"
  ;;
esac
fi
KRB5_CONFIG="$ac_cv_path_KRB5_CONFIG"
if test -n "$KRB5_CONFIG"; then
  echo "$ac_t""$KRB5_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test "$PHP_KERBEROS" = "yes" && test -x "$KRB5_CONFIG"; then
    KERBEROS_LIBS=`$KRB5_CONFIG --libs gssapi`
    KERBEROS_CFLAGS=`$KRB5_CONFIG --cflags gssapi`

    if test -n "$KERBEROS_LIBS"; then
      found_kerberos=yes
      
  for ac_i in $KERBEROS_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $KERBEROS_CFLAGS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_kerberos" = "no"; then

    if test "$PHP_KERBEROS" = "yes"; then
      PHP_KERBEROS="/usr/kerberos /usr/local /usr"
    fi

    for i in $PHP_KERBEROS; do
      if test -f $i/$PHP_LIBDIR/libkrb5.a || test -f $i/$PHP_LIBDIR/libkrb5.$SHLIB_SUFFIX_NAME; then
        PHP_KERBEROS_DIR=$i
        break
      fi
    done

    if test "$PHP_KERBEROS_DIR"; then
      found_kerberos=yes
      
  if test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_KERBEROS_DIR/$PHP_LIBDIR" || echo "$PHP_KERBEROS_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_KERBEROS_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_KERBEROS_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

      
  
  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lgssapi_krb5" 
    else
      
  
  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lgssapi_krb5" 
   ;;
  esac


    fi
   ;;
  esac


      
  
  case krb5 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lkrb5" 
    else
      
  
  case krb5 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lkrb5" 
   ;;
  esac


    fi
   ;;
  esac


      
  
  case k5crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lk5crypto" 
    else
      
  
  case k5crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lk5crypto" 
   ;;
  esac


    fi
   ;;
  esac


      
  
  case com_err in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lcom_err" 
    else
      
  
  case com_err in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lcom_err" 
   ;;
  esac


    fi
   ;;
  esac


      
  if test "$PHP_KERBEROS_DIR/include" != "/usr/include"; then
    
  if test -z "$PHP_KERBEROS_DIR/include" || echo "$PHP_KERBEROS_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/include
  else
    
    ep_dir="`echo $PHP_KERBEROS_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_KERBEROS_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi
  fi

  if test "$found_kerberos" = "yes"; then
:

  fi

  fi

  echo $ac_n "checking for DSA_get_default_method in -lssl""... $ac_c" 1>&6
echo "configure:23181: checking for DSA_get_default_method in -lssl" >&5
ac_lib_var=`echo ssl'_'DSA_get_default_method | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lssl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 23189 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char DSA_get_default_method();

int main() {
DSA_get_default_method()
; return 0; }
EOF
if { (eval echo configure:23200: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DSA_DEFAULT_METHOD 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for X509_free in -lcrypto""... $ac_c" 1>&6
echo "configure:23224: checking for X509_free in -lcrypto" >&5
ac_lib_var=`echo crypto'_'X509_free | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 23232 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char X509_free();

int main() {
X509_free()
; return 0; }
EOF
if { (eval echo configure:23243: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DSA_DEFAULT_METHOD 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


  
  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:23285: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    fi

    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
      
  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then
  
    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
echo "configure:23490: checking for OpenSSL version" >&5
    cat > conftest.$ac_ext <<EOF
#line 23492 "configure"
#include "confdefs.h"

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t"">= 0.9.6" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    
fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS

    
  if test "$OPENSSL_INCDIR" != "/usr/include"; then
    
  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else
    
    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
echo "configure:23647: checking for CRYPTO_free in -lcrypto" >&5
ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 23655 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char CRYPTO_free();

int main() {
CRYPTO_free()
; return 0; }
EOF
if { (eval echo configure:23666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-lcrypto $OPENSSL_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free
    
      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
    
  
fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
echo "configure:23823: checking for SSL_CTX_set_ssl_version in -lssl" >&5
ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lssl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 23831 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSL_CTX_set_ssl_version();

int main() {
SSL_CTX_set_ssl_version()
; return 0; }
EOF
if { (eval echo configure:23842: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      found_openssl=yes
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
    
      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
    
  
fi

    LIBS=$old_LIBS
    
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-lssl $OPENSSL_SHARED_LIBADD" 
    else
      
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-lcrypto $OPENSSL_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac



    
  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else
    
    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
  


    cat >> confdefs.h <<\EOF
#define HAVE_OPENSSL_EXT 1
EOF

  
else 
    { echo "configure: error: OpenSSL check failed. Please check config.log for more information." 1>&2; exit 1; }
  
  fi

fi




php_with_pcre_regex=yes


# Check whether --with-pcre-regex or --without-pcre-regex was given.
if test "${with_pcre_regex+set}" = set; then
  withval="$with_pcre_regex"
  PHP_PCRE_REGEX=$withval
else
  
  PHP_PCRE_REGEX=yes
  

fi


ext_output=$PHP_PCRE_REGEX





  if test "$PHP_PCRE_REGEX" != "yes" && test "$PHP_PCRE_REGEX" != "no"; then
    echo $ac_n "checking for PCRE headers location""... $ac_c" 1>&6
echo "configure:24007: checking for PCRE headers location" >&5
    for i in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/include $PHP_PCRE_REGEX/include/pcre $PHP_PCRE_REGEX/local/include; do
      test -f $i/pcre.h && PCRE_INCDIR=$i
    done

    if test -z "$PCRE_INCDIR"; then
      { echo "configure: error: Could not find pcre.h in $PHP_PCRE_REGEX" 1>&2; exit 1; }
    fi
    echo "$ac_t""$PCRE_INCDIR" 1>&6

    echo $ac_n "checking for PCRE library location""... $ac_c" 1>&6
echo "configure:24018: checking for PCRE library location" >&5
    for j in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/$PHP_LIBDIR; do
      test -f $j/libpcre.a || test -f $j/libpcre.$SHLIB_SUFFIX_NAME && PCRE_LIBDIR=$j
    done
    
    if test -z "$PCRE_LIBDIR" ; then
      { echo "configure: error: Could not find libpcre.(a|$SHLIB_SUFFIX_NAME) in $PHP_PCRE_REGEX" 1>&2; exit 1; }
    fi
    echo "$ac_t""$PCRE_LIBDIR" 1>&6

    
    pcre_major=`grep PCRE_MAJOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`
    pcre_minor=`grep PCRE_MINOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`
    
    pcre_minor_length=`echo "$pcre_minor" | wc -c | sed -e 's/^0-9//g'`
    if test "$pcre_minor_length" -eq 2 ; then
      pcre_minor="$pcre_minor"0
    fi
    pcre_version=$pcre_major$pcre_minor
    if test "$pcre_version" -lt 660; then
      { echo "configure: error: The PCRE extension requires PCRE library version >= 6.6" 1>&2; exit 1; }
    fi

    

  if test -n "$PCRE_LIBDIR"; then
    
  if test "$PCRE_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PCRE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PCRE_LIBDIR" || echo "$PCRE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PCRE_LIBDIR
  else
    
    ep_dir="`echo $PCRE_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pcre in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpcre $LIBS" 
   ;;
  esac




    
    cat >> confdefs.h <<\EOF
#define HAVE_PCRE 1
EOF

    
  if test "$PCRE_INCDIR" != "/usr/include"; then
    
  if test -z "$PCRE_INCDIR" || echo "$PCRE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PCRE_INCDIR
  else
    
    ep_dir="`echo $PCRE_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  ext_builddir=ext/pcre
  ext_srcdir=$abs_srcdir/ext/pcre

  ac_extra=

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_PCRE_SHARED=no
    
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcre"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_PCRE_SHARED=yes
      
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pcre="$shared_objects_pcre $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcre.so '$ext_builddir'/phppcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPCRE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcre.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppcre.$suffix: $ext_builddir/phppcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcre.$suffix \$(phplibdir)

$ext_builddir/phppcre.$suffix: \$(shared_objects_pcre) \$(PHPPCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcre.so '$ext_builddir'/pcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PCRE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcre.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcre.$suffix: $ext_builddir/pcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcre.$suffix \$(phplibdir)

$ext_builddir/pcre.$suffix: \$(shared_objects_pcre) \$(PCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PCRE 1
EOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_PCRE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pcre"
        ;;
      *)
        
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pcre
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  
    header_path=ext/pcre
    for header_file in php_pcre.h; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

  else
    echo $ac_n "checking for PCRE library to use""... $ac_c" 1>&6
echo "configure:24440: checking for PCRE library to use" >&5
    echo "$ac_t""bundled" 1>&6
    pcrelib_sources="pcrelib/pcre_chartables.c pcrelib/pcre_ucd.c \
    				 pcrelib/pcre_compile.c pcrelib/pcre_config.c pcrelib/pcre_exec.c \
    				 pcrelib/pcre_fullinfo.c pcrelib/pcre_get.c pcrelib/pcre_globals.c \
    				 pcrelib/pcre_maketables.c pcrelib/pcre_newline.c \
    				 pcrelib/pcre_ord2utf8.c pcrelib/pcre_refcount.c pcrelib/pcre_study.c \
    				 pcrelib/pcre_tables.c pcrelib/pcre_valid_utf8.c \
    				 pcrelib/pcre_version.c pcrelib/pcre_xclass.c"
    PHP_PCRE_CFLAGS="-DHAVE_CONFIG_H -I@ext_srcdir@/pcrelib"
    
  ext_builddir=ext/pcre
  ext_srcdir=$abs_srcdir/ext/pcre

  ac_extra=`echo "$PHP_PCRE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_PCRE_SHARED=no
    
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcre"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_PCRE_SHARED=yes
      
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pcre="$shared_objects_pcre $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcre.so '$ext_builddir'/phppcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPCRE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcre.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppcre.$suffix: $ext_builddir/phppcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcre.$suffix \$(phplibdir)

$ext_builddir/phppcre.$suffix: \$(shared_objects_pcre) \$(PHPPCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcre.so '$ext_builddir'/pcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PCRE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcre.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcre.$suffix: $ext_builddir/pcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcre.$suffix \$(phplibdir)

$ext_builddir/pcre.$suffix: \$(shared_objects_pcre) \$(PCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PCRE 1
EOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_PCRE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pcre"
        ;;
      *)
        
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pcre
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/pcrelib"
  

    
  
    header_path=ext/pcre
    for header_file in php_pcre.h pcrelib/; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

    cat >> confdefs.h <<\EOF
#define HAVE_BUNDLED_PCRE 1
EOF

  fi



php_with_sqlite3=yes

echo $ac_n "checking whether to enable the SQLite3 extension""... $ac_c" 1>&6
echo "configure:24778: checking whether to enable the SQLite3 extension" >&5
# Check whether --with-sqlite3 or --without-sqlite3 was given.
if test "${with_sqlite3+set}" = set; then
  withval="$with_sqlite3"
  PHP_SQLITE3=$withval
else
  
  PHP_SQLITE3=yes
  test "$PHP_ENABLE_ALL" && PHP_SQLITE3=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SQLITE3 in
shared,*)
  PHP_SQLITE3=`echo "$PHP_SQLITE3"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SQLITE3=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test $PHP_SQLITE3 != "no"; then
  sqlite3_extra_sources=""
  PHP_SQLITE3_CFLAGS=""

    if test -z "$enable_maintainer_zts"; then
    if test -f "$phpincludedir/main/php_config.h"; then
      ZTS=`grep '#define ZTS' $phpincludedir/main/php_config.h|$SED 's/#define ZTS//'`
      if test "$ZTS" -eq "1"; then
        enable_maintainer_zts="yes"
      fi
    fi
  fi

  if test $PHP_SQLITE3 != "yes"; then
    echo $ac_n "checking for sqlite3 files in default path""... $ac_c" 1>&6
echo "configure:24833: checking for sqlite3 files in default path" >&5
    for i in $PHP_SQLITE3 /usr/local /usr; do
      if test -r $i/include/sqlite3.h; then
        SQLITE3_DIR=$i
        echo "$ac_t""found in $i" 1>&6
        break
      fi
    done

    if test -z "$SQLITE3_DIR"; then
      echo "$ac_t""not found" 1>&6
      { echo "configure: error: Please reinstall the sqlite distribution from http://www.sqlite.org" 1>&2; exit 1; }
    fi

    echo $ac_n "checking for SQLite 3.3.9+""... $ac_c" 1>&6
echo "configure:24848: checking for SQLite 3.3.9+" >&5
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$SQLITE3_DIR/$PHP_LIBDIR -lm
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for sqlite3_prepare_v2 in -lsqlite3""... $ac_c" 1>&6
echo "configure:24947: checking for sqlite3_prepare_v2 in -lsqlite3" >&5
ac_lib_var=`echo sqlite3'_'sqlite3_prepare_v2 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsqlite3  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 24955 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqlite3_prepare_v2();

int main() {
sqlite3_prepare_v2()
; return 0; }
EOF
if { (eval echo configure:24966: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      echo "$ac_t""found" 1>&6
      

  if test "$ext_shared" = "yes"; then
    SQLITE3_SHARED_LIBADD="-lsqlite3 $SQLITE3_SHARED_LIBADD"
    if test -n "$SQLITE3_DIR/$PHP_LIBDIR"; then
      
  if test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SQLITE3_DIR/$PHP_LIBDIR" || echo "$SQLITE3_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE3_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $SQLITE3_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SQLITE3_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SQLITE3_SHARED_LIBADD="-L$ai_p $SQLITE3_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SQLITE3_SHARED_LIBADD="$ld_runpath_switch$ai_p $SQLITE3_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$SQLITE3_DIR/$PHP_LIBDIR"; then
    
  if test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SQLITE3_DIR/$PHP_LIBDIR" || echo "$SQLITE3_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE3_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $SQLITE3_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SQLITE3_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlite3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlite3 $LIBS" 
   ;;
  esac




  fi


      
  if test "$SQLITE3_DIR/include" != "/usr/include"; then
    
  if test -z "$SQLITE3_DIR/include" || echo "$SQLITE3_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE3_DIR/include
  else
    
    ep_dir="`echo $SQLITE3_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SQLITE3_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_prepare_v2
    
      echo "$ac_t""not found" 1>&6
      { echo "configure: error: Please install SQLite 3.3.9 first or check libsqlite3 is present" 1>&2; exit 1; }
    
  
fi


    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for sqlite3_key in -lsqlite3""... $ac_c" 1>&6
echo "configure:25226: checking for sqlite3_key in -lsqlite3" >&5
ac_lib_var=`echo sqlite3'_'sqlite3_key | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsqlite3  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 25234 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqlite3_key();

int main() {
sqlite3_key()
; return 0; }
EOF
if { (eval echo configure:25245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      cat >> confdefs.h <<\EOF
#define HAVE_SQLITE3_KEY 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_key
    
  
fi


    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for sqlite3_load_extension in -lsqlite3""... $ac_c" 1>&6
echo "configure:25377: checking for sqlite3_load_extension in -lsqlite3" >&5
ac_lib_var=`echo sqlite3'_'sqlite3_load_extension | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsqlite3  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 25385 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqlite3_load_extension();

int main() {
sqlite3_load_extension()
; return 0; }
EOF
if { (eval echo configure:25396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_load_extension
    cat >> confdefs.h <<\EOF
#define SQLITE_OMIT_LOAD_EXTENSION 1
EOF

    
  
fi


  else
    echo $ac_n "checking bundled sqlite3 library""... $ac_c" 1>&6
echo "configure:25433: checking bundled sqlite3 library" >&5
    echo "$ac_t""yes" 1>&6

    sqlite3_extra_sources="libsqlite/sqlite3.c"

    if test "$enable_maintainer_zts" = "yes"; then
      threadsafe_flags="-DSQLITE_THREADSAFE=1"
    else
      threadsafe_flags="-DSQLITE_THREADSAFE=0"
    fi

    if test "$ZEND_DEBUG" = "yes"; then
      debug_flags="-DSQLITE_DEBUG=1"
    fi

    other_flags="-DSQLITE_ENABLE_FTS3=1 -DSQLITE_CORE=1 -DSQLITE_ENABLE_COLUMN_METADATA=1"

	    if test "$PHP_INTL" = "yes" && test "$PHP_INTL_SHARED" != "yes"; then
      other_flags="$other_flags -DSQLITE_ENABLE_ICU=1"
    fi

    PHP_SQLITE3_CFLAGS="-I@ext_srcdir@/libsqlite $other_flags $threadsafe_flags $debug_flags"
    
  
    for header_file in ext/sqlite3/libsqlite/sqlite3.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_SQLITE3 1
EOF


  sqlite3_sources="sqlite3.c $sqlite3_extra_sources"

  
  ext_builddir=ext/sqlite3
  ext_srcdir=$abs_srcdir/ext/sqlite3

  ac_extra=`echo "$PHP_SQLITE3_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SQLITE3_SHARED=no
    
  
  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sqlite3"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite3"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SQLITE3_SHARED=yes
      
  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sqlite3="$shared_objects_sqlite3 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsqlite3.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(PHPSQLITE3_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsqlite3.so '$ext_builddir'/phpsqlite3.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSQLITE3, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(PHPSQLITE3_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsqlite3.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsqlite3.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite3"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsqlite3.$suffix: $ext_builddir/phpsqlite3.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsqlite3.$suffix \$(phplibdir)

$ext_builddir/phpsqlite3.$suffix: \$(shared_objects_sqlite3) \$(PHPSQLITE3_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sqlite3.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(SQLITE3_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sqlite3.so '$ext_builddir'/sqlite3.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SQLITE3, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(SQLITE3_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sqlite3.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sqlite3.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite3"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sqlite3.$suffix: $ext_builddir/sqlite3.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sqlite3.$suffix \$(phplibdir)

$ext_builddir/sqlite3.$suffix: \$(shared_objects_sqlite3) \$(SQLITE3_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SQLITE3 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SQLITE3_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sqlite3"
        ;;
      *)
        
  
  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite3"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sqlite3
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libsqlite"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE3_SHARED_LIBADD"

fi



php_with_zlib=no

echo $ac_n "checking for ZLIB support""... $ac_c" 1>&6
echo "configure:25789: checking for ZLIB support" >&5
# Check whether --with-zlib or --without-zlib was given.
if test "${with_zlib+set}" = set; then
  withval="$with_zlib"
  PHP_ZLIB=$withval
else
  
  PHP_ZLIB=no
  test "$PHP_ENABLE_ALL" && PHP_ZLIB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ZLIB in
shared,*)
  PHP_ZLIB=`echo "$PHP_ZLIB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ZLIB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_zlib_dir=no

echo $ac_n "checking if the location of ZLIB install directory is defined""... $ac_c" 1>&6
echo "configure:25833: checking if the location of ZLIB install directory is defined" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no
  

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ZLIB" != "no" || test "$PHP_ZLIB_DIR" != "no"; then
  
  ext_builddir=ext/zlib
  ext_srcdir=$abs_srcdir/ext/zlib

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ZLIB_SHARED=no
    
  
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC zlib"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC zlib"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ZLIB_SHARED=yes
      
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_zlib="$shared_objects_zlib $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzlib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(PHPZLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzlib.so '$ext_builddir'/phpzlib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPZLIB, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(PHPZLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzlib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzlib.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zlib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpzlib.$suffix: $ext_builddir/phpzlib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzlib.$suffix \$(phplibdir)

$ext_builddir/phpzlib.$suffix: \$(shared_objects_zlib) \$(PHPZLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zlib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(ZLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zlib.so '$ext_builddir'/zlib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ZLIB, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(ZLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zlib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zlib.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zlib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/zlib.$suffix: $ext_builddir/zlib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/zlib.$suffix \$(phplibdir)

$ext_builddir/zlib.$suffix: \$(shared_objects_zlib) \$(ZLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_ZLIB 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ZLIB_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC zlib"
        ;;
      *)
        
  
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC zlib"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=zlib
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ZLIB_SHARED_LIBADD"

  
  if test "$PHP_ZLIB" != "yes" -a "$PHP_ZLIB" != "no"; then 
    if test -f $PHP_ZLIB/include/zlib/zlib.h; then
      ZLIB_DIR=$PHP_ZLIB
      ZLIB_INCDIR=$ZLIB_DIR/include/zlib
    elif test -f $PHP_ZLIB/include/zlib.h; then
      ZLIB_DIR=$PHP_ZLIB
      ZLIB_INCDIR=$ZLIB_DIR/include
    fi
  else 
    for i in /usr/local /usr $PHP_ZLIB_DIR; do
      if test -f $i/include/zlib/zlib.h; then
        ZLIB_DIR=$i
        ZLIB_INCDIR=$i/include/zlib
      elif test -f $i/include/zlib.h; then
        ZLIB_DIR=$i
        ZLIB_INCDIR=$i/include
      fi
    done
  fi
  
  if test -z "$ZLIB_DIR"; then
    { echo "configure: error: Cannot find libz" 1>&2; exit 1; }
  fi

  case $ZLIB_DIR in
  /usr) ac_extra= ;; 
  *) ac_extra=-L$ZLIB_DIR/$PHP_LIBDIR ;;
  esac

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $ac_extra
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gzgets in -lz""... $ac_c" 1>&6
echo "configure:26276: checking for gzgets in -lz" >&5
ac_lib_var=`echo z'_'gzgets | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 26284 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gzgets();

int main() {
gzgets()
; return 0; }
EOF
if { (eval echo configure:26295: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_ZLIB 1
EOF
 
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_z_gzgets
    
    { echo "configure: error: ZLIB extension requires zlib >= 1.0.9" 1>&2; exit 1; }
  
  
fi


  
  if test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ZLIB_DIR/$PHP_LIBDIR" || echo "$ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZLIB_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ZLIB_SHARED_LIBADD="-L$ai_p $ZLIB_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ZLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZLIB_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi


  PHP_ZLIB_DIR=$ZLIB_DIR
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        ZLIB_SHARED_LIBADD="-lz $ZLIB_SHARED_LIBADD" 
    else
      
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
  if test "$ZLIB_INCDIR" != "/usr/include"; then
    
  if test -z "$ZLIB_INCDIR" || echo "$ZLIB_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZLIB_INCDIR
  else
    
    ep_dir="`echo $ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZLIB_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


fi



php_enable_bcmath=no

echo $ac_n "checking whether to enable bc style precision math functions""... $ac_c" 1>&6
echo "configure:26435: checking whether to enable bc style precision math functions" >&5
# Check whether --enable-bcmath or --disable-bcmath was given.
if test "${enable_bcmath+set}" = set; then
  enableval="$enable_bcmath"
  PHP_BCMATH=$enableval
else
  
  PHP_BCMATH=no
  test "$PHP_ENABLE_ALL" && PHP_BCMATH=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BCMATH in
shared,*)
  PHP_BCMATH=`echo "$PHP_BCMATH"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_BCMATH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_BCMATH" != "no"; then
  
  ext_builddir=ext/bcmath
  ext_srcdir=$abs_srcdir/ext/bcmath

  ac_extra=`echo "-I@ext_srcdir@/libbcmath/src"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_BCMATH_SHARED=no
    
  
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC bcmath"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_BCMATH_SHARED=yes
      
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_bcmath="$shared_objects_bcmath $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbcmath.so '$ext_builddir'/phpbcmath.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBCMATH, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbcmath.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbcmath.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpbcmath.$suffix: $ext_builddir/phpbcmath.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbcmath.$suffix \$(phplibdir)

$ext_builddir/phpbcmath.$suffix: \$(shared_objects_bcmath) \$(PHPBCMATH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bcmath.so '$ext_builddir'/bcmath.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BCMATH, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bcmath.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bcmath.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/bcmath.$suffix: $ext_builddir/bcmath.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/bcmath.$suffix \$(phplibdir)

$ext_builddir/bcmath.$suffix: \$(shared_objects_bcmath) \$(BCMATH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_BCMATH 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_BCMATH_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC bcmath"
        ;;
      *)
        
  
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=bcmath
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libbcmath/src"
  

  cat >> confdefs.h <<\EOF
#define HAVE_BCMATH 1
EOF

fi



php_with_bz2=no

echo $ac_n "checking for BZip2 support""... $ac_c" 1>&6
echo "configure:26800: checking for BZip2 support" >&5
# Check whether --with-bz2 or --without-bz2 was given.
if test "${with_bz2+set}" = set; then
  withval="$with_bz2"
  PHP_BZ2=$withval
else
  
  PHP_BZ2=no
  test "$PHP_ENABLE_ALL" && PHP_BZ2=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BZ2 in
shared,*)
  PHP_BZ2=`echo "$PHP_BZ2"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_BZ2=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_BZ2" != "no"; then
  if test -r $PHP_BZ2/include/bzlib.h; then
    BZIP_DIR=$PHP_BZ2
  else
    echo $ac_n "checking for BZip2 in default path""... $ac_c" 1>&6
echo "configure:26845: checking for BZip2 in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/bzlib.h; then
        BZIP_DIR=$i
        echo "$ac_t""found in $i" 1>&6
        break
      fi
    done
  fi

  if test -z "$BZIP_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the BZip2 distribution" 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$BZIP_DIR/$PHP_LIBDIR
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for BZ2_bzerror in -lbz2""... $ac_c" 1>&6
echo "configure:26958: checking for BZ2_bzerror in -lbz2" >&5
ac_lib_var=`echo bz2'_'BZ2_bzerror | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbz2  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 26966 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char BZ2_bzerror();

int main() {
BZ2_bzerror()
; return 0; }
EOF
if { (eval echo configure:26977: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    
  if test "$BZIP_DIR/include" != "/usr/include"; then
    
  if test -z "$BZIP_DIR/include" || echo "$BZIP_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/include
  else
    
    ep_dir="`echo $BZIP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$BZIP_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    BZ2_SHARED_LIBADD="-lbz2 $BZ2_SHARED_LIBADD"
    if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
      
  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        BZ2_SHARED_LIBADD="-L$ai_p $BZ2_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && BZ2_SHARED_LIBADD="$ld_runpath_switch$ai_p $BZ2_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
    
  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case bz2 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbz2 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_BZ2 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_bz2_BZ2_bzerror
    
    { echo "configure: error: bz2 module requires libbz2 >= 1.0.0" 1>&2; exit 1; }
  
  
fi


  
  ext_builddir=ext/bz2
  ext_srcdir=$abs_srcdir/ext/bz2

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_BZ2_SHARED=no
    
  
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC bz2"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_BZ2_SHARED=yes
      
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_bz2="$shared_objects_bz2 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbz2.so '$ext_builddir'/phpbz2.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBZ2, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbz2.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbz2.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpbz2.$suffix: $ext_builddir/phpbz2.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbz2.$suffix \$(phplibdir)

$ext_builddir/phpbz2.$suffix: \$(shared_objects_bz2) \$(PHPBZ2_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bz2.so '$ext_builddir'/bz2.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BZ2, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bz2.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bz2.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/bz2.$suffix: $ext_builddir/bz2.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/bz2.$suffix \$(phplibdir)

$ext_builddir/bz2.$suffix: \$(shared_objects_bz2) \$(BZ2_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_BZ2 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_BZ2_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC bz2"
        ;;
      *)
        
  
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=bz2
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST BZ2_SHARED_LIBADD"

fi



php_enable_calendar=no

echo $ac_n "checking whether to enable calendar conversion support""... $ac_c" 1>&6
echo "configure:27445: checking whether to enable calendar conversion support" >&5
# Check whether --enable-calendar or --disable-calendar was given.
if test "${enable_calendar+set}" = set; then
  enableval="$enable_calendar"
  PHP_CALENDAR=$enableval
else
  
  PHP_CALENDAR=no
  test "$PHP_ENABLE_ALL" && PHP_CALENDAR=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CALENDAR in
shared,*)
  PHP_CALENDAR=`echo "$PHP_CALENDAR"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CALENDAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CALENDAR" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_CALENDAR 1
EOF

  
  ext_builddir=ext/calendar
  ext_srcdir=$abs_srcdir/ext/calendar

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_CALENDAR_SHARED=no
    
  
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC calendar"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_CALENDAR_SHARED=yes
      
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_calendar="$shared_objects_calendar $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcalendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcalendar.so '$ext_builddir'/phpcalendar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCALENDAR, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcalendar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcalendar.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpcalendar.$suffix: $ext_builddir/phpcalendar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcalendar.$suffix \$(phplibdir)

$ext_builddir/phpcalendar.$suffix: \$(shared_objects_calendar) \$(PHPCALENDAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/calendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/calendar.so '$ext_builddir'/calendar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CALENDAR, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/calendar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/calendar.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/calendar.$suffix: $ext_builddir/calendar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/calendar.$suffix \$(phplibdir)

$ext_builddir/calendar.$suffix: \$(shared_objects_calendar) \$(CALENDAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_CALENDAR 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_CALENDAR_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC calendar"
        ;;
      *)
        
  
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=calendar
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_ctype=yes

echo $ac_n "checking whether to enable ctype functions""... $ac_c" 1>&6
echo "configure:27789: checking whether to enable ctype functions" >&5
# Check whether --enable-ctype or --disable-ctype was given.
if test "${enable_ctype+set}" = set; then
  enableval="$enable_ctype"
  PHP_CTYPE=$enableval
else
  
  PHP_CTYPE=yes
  test "$PHP_ENABLE_ALL" && PHP_CTYPE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CTYPE in
shared,*)
  PHP_CTYPE=`echo "$PHP_CTYPE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CTYPE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CTYPE" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_CTYPE 1
EOF

  
  ext_builddir=ext/ctype
  ext_srcdir=$abs_srcdir/ext/ctype

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_CTYPE_SHARED=no
    
  
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ctype"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_CTYPE_SHARED=yes
      
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ctype="$shared_objects_ctype $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpctype.so '$ext_builddir'/phpctype.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCTYPE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpctype.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpctype.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpctype.$suffix: $ext_builddir/phpctype.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpctype.$suffix \$(phplibdir)

$ext_builddir/phpctype.$suffix: \$(shared_objects_ctype) \$(PHPCTYPE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ctype.so '$ext_builddir'/ctype.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CTYPE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ctype.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ctype.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ctype.$suffix: $ext_builddir/ctype.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ctype.$suffix \$(phplibdir)

$ext_builddir/ctype.$suffix: \$(shared_objects_ctype) \$(CTYPE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_CTYPE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_CTYPE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ctype"
        ;;
      *)
        
  
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ctype
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_with_curl=no

echo $ac_n "checking for cURL support""... $ac_c" 1>&6
echo "configure:28133: checking for cURL support" >&5
# Check whether --with-curl or --without-curl was given.
if test "${with_curl+set}" = set; then
  withval="$with_curl"
  PHP_CURL=$withval
else
  
  PHP_CURL=no
  test "$PHP_ENABLE_ALL" && PHP_CURL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CURL in
shared,*)
  PHP_CURL=`echo "$PHP_CURL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CURL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_curlwrappers=no

echo $ac_n "checking if we should use cURL for url streams""... $ac_c" 1>&6
echo "configure:28177: checking if we should use cURL for url streams" >&5
# Check whether --with-curlwrappers or --without-curlwrappers was given.
if test "${with_curlwrappers+set}" = set; then
  withval="$with_curlwrappers"
  PHP_CURLWRAPPERS=$withval
else
  
  PHP_CURLWRAPPERS=no
  

fi


ext_output=$PHP_CURLWRAPPERS
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CURL" != "no"; then
  if test -r $PHP_CURL/include/curl/easy.h; then
    CURL_DIR=$PHP_CURL
  else
    echo $ac_n "checking for cURL in default path""... $ac_c" 1>&6
echo "configure:28201: checking for cURL in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/curl/easy.h; then
        CURL_DIR=$i
        echo "$ac_t""found in $i" 1>&6
        break
      fi
    done
  fi

  if test -z "$CURL_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libcurl distribution -
    easy.h should be in <curl-dir>/include/curl/" 1>&2; exit 1; }
  fi

  CURL_CONFIG="curl-config"
  echo $ac_n "checking for cURL 7.10.5 or greater""... $ac_c" 1>&6
echo "configure:28219: checking for cURL 7.10.5 or greater" >&5

  if ${CURL_DIR}/bin/curl-config --libs > /dev/null 2>&1; then
    CURL_CONFIG=${CURL_DIR}/bin/curl-config
  else
    if ${CURL_DIR}/curl-config --libs > /dev/null 2>&1; then
      CURL_CONFIG=${CURL_DIR}/curl-config
    fi
  fi

  curl_version_full=`$CURL_CONFIG --version`
  curl_version=`echo ${curl_version_full} | sed -e 's/libcurl //' | $AWK 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
  if test "$curl_version" -ge 7010005; then
    echo "$ac_t""$curl_version_full" 1>&6
    CURL_LIBS=`$CURL_CONFIG --libs`
  else
    { echo "configure: error: cURL version 7.10.5 or later is required to compile php with cURL support" 1>&2; exit 1; }
  fi

  
  if test "$CURL_DIR/include" != "/usr/include"; then
    
  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/include
  else
    
    ep_dir="`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  for ac_i in $CURL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  

  if test "$ext_shared" = "yes"; then
    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
    if test -n "$CURL_DIR/$PHP_LIBDIR"; then
      
  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$CURL_DIR/$PHP_LIBDIR"; then
    
  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case curl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcurl $LIBS" 
   ;;
  esac




  fi


  
  echo $ac_n "checking for SSL support in libcurl""... $ac_c" 1>&6
echo "configure:28457: checking for SSL support in libcurl" >&5
  CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
  if test "$CURL_SSL" = "SSL"; then
    echo "$ac_t""yes" 1>&6
    cat >> confdefs.h <<\EOF
#define HAVE_CURL_SSL 1
EOF

   
    save_CFLAGS="$CFLAGS"
    CFLAGS="`$CURL_CONFIG --cflags`"
   
    echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:28470: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 28485 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:28491: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 28502 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:28508: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 28519 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:28525: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6

    echo $ac_n "checking for openssl support in libcurl""... $ac_c" 1>&6
echo "configure:28550: checking for openssl support in libcurl" >&5
    if test "$cross_compiling" = yes; then
  
      echo "$ac_t""no" 1>&6
    
else
  cat > conftest.$ac_ext <<EOF
#line 28557 "configure"
#include "confdefs.h"

#include <curl/curl.h>

int main(int argc, char *argv[])
{
  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);

  if (data && data->ssl_version && *data->ssl_version) {
    const char *ptr = data->ssl_version;

    while(*ptr == ' ') ++ptr;
    return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
  }
  return 1;
}
    
EOF
if { (eval echo configure:28576: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      echo "$ac_t""yes" 1>&6
      for ac_hdr in openssl/crypto.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:28584: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 28589 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:28594: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
        cat >> confdefs.h <<\EOF
#define HAVE_CURL_OPENSSL 1
EOF

      
else
  echo "$ac_t""no" 1>&6
fi
done

    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      echo "$ac_t""no" 1>&6
    
fi
rm -fr conftest*
fi

   
    echo $ac_n "checking for gnutls support in libcurl""... $ac_c" 1>&6
echo "configure:28639: checking for gnutls support in libcurl" >&5
    if test "$cross_compiling" = yes; then
  
      echo "$ac_t""no" 1>&6
    
else
  cat > conftest.$ac_ext <<EOF
#line 28646 "configure"
#include "confdefs.h"

#include <curl/curl.h>

int main(int argc, char *argv[])
{
  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
  
  if (data && data->ssl_version && *data->ssl_version) {
    const char *ptr = data->ssl_version;

    while(*ptr == ' ') ++ptr;
    return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
  }
  return 1;
}

EOF
if { (eval echo configure:28665: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      echo "$ac_t""yes" 1>&6
      ac_safe=`echo "gcrypt.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for gcrypt.h""... $ac_c" 1>&6
echo "configure:28671: checking for gcrypt.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 28676 "configure"
#include "confdefs.h"
#include <gcrypt.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:28681: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        cat >> confdefs.h <<\EOF
#define HAVE_CURL_GNUTLS 1
EOF

      
else
  echo "$ac_t""no" 1>&6
fi

    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      echo "$ac_t""no" 1>&6
    
fi
rm -fr conftest*
fi

   
    CFLAGS="$save_CFLAGS"
  else
    echo "$ac_t""no" 1>&6
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for curl_easy_perform in -lcurl""... $ac_c" 1>&6
echo "configure:28823: checking for curl_easy_perform in -lcurl" >&5
ac_lib_var=`echo curl'_'curl_easy_perform | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcurl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 28831 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char curl_easy_perform();

int main() {
curl_easy_perform()
; return 0; }
EOF
if { (eval echo configure:28842: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
     
    cat >> confdefs.h <<\EOF
#define HAVE_CURL 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_curl_curl_easy_perform
    
    { echo "configure: error: There is something wrong. Please check config.log for more information." 1>&2; exit 1; }
  
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for curl_version_info in -lcurl""... $ac_c" 1>&6
echo "configure:28978: checking for curl_version_info in -lcurl" >&5
ac_lib_var=`echo curl'_'curl_version_info | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcurl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 28986 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char curl_version_info();

int main() {
curl_version_info()
; return 0; }
EOF
if { (eval echo configure:28997: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_CURL_VERSION_INFO 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_curl_curl_version_info
    
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for curl_easy_strerror in -lcurl""... $ac_c" 1>&6
echo "configure:29131: checking for curl_easy_strerror in -lcurl" >&5
ac_lib_var=`echo curl'_'curl_easy_strerror | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcurl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 29139 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char curl_easy_strerror();

int main() {
curl_easy_strerror()
; return 0; }
EOF
if { (eval echo configure:29150: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_CURL_EASY_STRERROR 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_curl_curl_easy_strerror
    
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for curl_multi_strerror in -lcurl""... $ac_c" 1>&6
echo "configure:29284: checking for curl_multi_strerror in -lcurl" >&5
ac_lib_var=`echo curl'_'curl_multi_strerror | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcurl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 29292 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char curl_multi_strerror();

int main() {
curl_multi_strerror()
; return 0; }
EOF
if { (eval echo configure:29303: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_CURL_MULTI_STRERROR 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_curl_curl_multi_strerror
    
  
fi


  if test "$PHP_CURLWRAPPERS" != "no" ; then
    cat >> confdefs.h <<\EOF
#define PHP_CURL_URL_WRAPPERS 1
EOF

  fi

  
  ext_builddir=ext/curl
  ext_srcdir=$abs_srcdir/ext/curl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_CURL_SHARED=no
    
  
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c streams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC curl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC curl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_CURL_SHARED=yes
      
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c streams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_curl="$shared_objects_curl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcurl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(PHPCURL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcurl.so '$ext_builddir'/phpcurl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCURL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(PHPCURL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcurl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcurl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_curl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpcurl.$suffix: $ext_builddir/phpcurl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcurl.$suffix \$(phplibdir)

$ext_builddir/phpcurl.$suffix: \$(shared_objects_curl) \$(PHPCURL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/curl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(CURL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/curl.so '$ext_builddir'/curl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CURL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(CURL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/curl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/curl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_curl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/curl.$suffix: $ext_builddir/curl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/curl.$suffix \$(phplibdir)

$ext_builddir/curl.$suffix: \$(shared_objects_curl) \$(CURL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_CURL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_CURL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c streams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC curl"
        ;;
      *)
        
  
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c streams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC curl"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=curl
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST CURL_SHARED_LIBADD"

fi

















php_enable_dba=no


# Check whether --enable-dba or --disable-dba was given.
if test "${enable_dba+set}" = set; then
  enableval="$enable_dba"
  PHP_DBA=$enableval
else
  
  PHP_DBA=no
  test "$PHP_ENABLE_ALL" && PHP_DBA=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DBA in
shared,*)
  PHP_DBA=`echo "$PHP_DBA"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_DBA=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac









php_with_qdbm=no


# Check whether --with-qdbm or --without-qdbm was given.
if test "${with_qdbm+set}" = set; then
  withval="$with_qdbm"
  PHP_QDBM=$withval
else
  
  PHP_QDBM=no
  

fi


ext_output=$PHP_QDBM






php_with_gdbm=no


# Check whether --with-gdbm or --without-gdbm was given.
if test "${with_gdbm+set}" = set; then
  withval="$with_gdbm"
  PHP_GDBM=$withval
else
  
  PHP_GDBM=no
  

fi


ext_output=$PHP_GDBM






php_with_ndbm=no


# Check whether --with-ndbm or --without-ndbm was given.
if test "${with_ndbm+set}" = set; then
  withval="$with_ndbm"
  PHP_NDBM=$withval
else
  
  PHP_NDBM=no
  

fi


ext_output=$PHP_NDBM






php_with_db4=no


# Check whether --with-db4 or --without-db4 was given.
if test "${with_db4+set}" = set; then
  withval="$with_db4"
  PHP_DB4=$withval
else
  
  PHP_DB4=no
  

fi


ext_output=$PHP_DB4






php_with_db3=no


# Check whether --with-db3 or --without-db3 was given.
if test "${with_db3+set}" = set; then
  withval="$with_db3"
  PHP_DB3=$withval
else
  
  PHP_DB3=no
  

fi


ext_output=$PHP_DB3






php_with_db2=no


# Check whether --with-db2 or --without-db2 was given.
if test "${with_db2+set}" = set; then
  withval="$with_db2"
  PHP_DB2=$withval
else
  
  PHP_DB2=no
  

fi


ext_output=$PHP_DB2






php_with_db1=no


# Check whether --with-db1 or --without-db1 was given.
if test "${with_db1+set}" = set; then
  withval="$with_db1"
  PHP_DB1=$withval
else
  
  PHP_DB1=no
  

fi


ext_output=$PHP_DB1






php_with_dbm=no


# Check whether --with-dbm or --without-dbm was given.
if test "${with_dbm+set}" = set; then
  withval="$with_dbm"
  PHP_DBM=$withval
else
  
  PHP_DBM=no
  

fi


ext_output=$PHP_DBM






# QDBM
if test "$PHP_QDBM" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  for i in $PHP_QDBM /usr/local /usr; do
    if test -f "$i/include/depot.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/depot.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    for LIB in qdbm; do
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for dpopen in -l$LIB""... $ac_c" 1>&6
echo "configure:29989: checking for dpopen in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'dpopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 29997 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dpopen();

int main() {
dpopen()
; return 0; }
EOF
if { (eval echo configure:30008: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        cat >> confdefs.h <<EOF
#define QDBM_INCLUDE_FILE "$THIS_INCLUDE"
EOF

        cat >> confdefs.h <<\EOF
#define DBA_QDBM 1
EOF

        THIS_LIBS=$LIB
      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_dpopen
    
  
fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi

  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=QDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:30177: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# GDBM
if test "$PHP_GDBM" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_QDBM" = "1"; then
    
  THIS_NAME=GDBM
  if test -n "gdbm"; then
    THIS_FULL_NAME="gdbm"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:30205: checking for $THIS_FULL_NAME support" >&5
  if test -n "You cannot combine --with-gdbm with --with-qdbm"; then
    { echo "configure: error: You cannot combine --with-gdbm with --with-qdbm" 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_GDBM /usr/local /usr; do
    if test -f "$i/include/gdbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/gdbm.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:30324: checking for gdbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'gdbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgdbm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 30332 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdbm_open();

int main() {
gdbm_open()
; return 0; }
EOF
if { (eval echo configure:30343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      cat >> confdefs.h <<EOF
#define GDBM_INCLUDE_FILE "$THIS_INCLUDE"
EOF

      cat >> confdefs.h <<\EOF
#define DBA_GDBM 1
EOF
 
      THIS_LIBS=gdbm
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gdbm_gdbm_open
    
  
fi

  fi
    
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=GDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:30508: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# NDBM
if test "$PHP_NDBM" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  for i in $PHP_NDBM /usr/local /usr; do
    if test -f "$i/include/ndbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/ndbm.h
      break
    elif test -f "$i/include/db1/ndbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db1/ndbm.h
      break
    fi
  done
  
  if test -n "$THIS_INCLUDE"; then
    for LIB in ndbm db1 c; do
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for dbm_open in -l$LIB""... $ac_c" 1>&6
echo "configure:30637: checking for dbm_open in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 30645 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:30656: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        cat >> confdefs.h <<EOF
#define NDBM_INCLUDE_FILE "$THIS_INCLUDE"
EOF

        cat >> confdefs.h <<\EOF
#define DBA_NDBM 1
EOF
 
        THIS_LIBS=$LIB
      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_dbm_open
    
  
fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi

  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=NDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:30825: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME




# DB4
if test "$PHP_DB4" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  dbdp4="/usr/local/BerkeleyDB.4."
  dbdp5="/usr/local/BerkeleyDB.5."
  for i in $PHP_DB4 ${dbdp5}1 ${dbdp5}0 ${dbdp4}8 ${dbdp4}7 ${dbdp4}6 ${dbdp4}5 ${dbdp4}4 ${dbdp4}3 ${dbdp4}2 ${dbdp4}1 ${dbdp}0 /usr/local /usr; do
    if test -f "$i/db5/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/db5/db.h
      break
    elif test -f "$i/db4/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/db4/db.h
      break
    elif test -f "$i/include/db5.1/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db5.1/db.h
      break
    elif test -f "$i/include/db5.0/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db5.0/db.h
      break
    elif test -f "$i/include/db4.8/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.8/db.h
      break
    elif test -f "$i/include/db4.7/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.7/db.h
      break
    elif test -f "$i/include/db4.6/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.6/db.h
      break
    elif test -f "$i/include/db4.5/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.5/db.h
      break
    elif test -f "$i/include/db4/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4/db.h
      break
    elif test -f "$i/include/db/db4.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db/db4.h
      break
    elif test -f "$i/include/db4.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.h
      break
    elif test -f "$i/include/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db.h
      break
    fi
  done
  
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  for LIB in db-5.1 db-5.0 db-4.8 db-4.7 db-4.6 db-4.5 db-4.4 db-4.3 db-4.2 db-4.1 db-4.0 db-4 db4 db; do
    if test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.a || test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.$SHLIB_SUFFIX_NAME; then
      lib_found="";
      
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$LIB $LIBS"
  
        cat > conftest.$ac_ext <<EOF
#line 30913 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
        
int main() {

          (void)db_create((DB**)0, (DB_ENV*)0, 0);
        
; return 0; }
EOF
if { (eval echo configure:30924: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
          cat > conftest.$ac_ext <<EOF
#line 30928 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 4 || (4 == 4 && DB_VERSION_MAJOR == 5)
            yes
#endif
          
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
            THIS_LIBS=$LIB
            lib_found=1
          
fi
rm -f conftest*

        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      
  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

      if test -n "$lib_found"; then
        lib_found="";
        break;
      fi
    fi
  done
  if test -z "$THIS_LIBS"; then
    echo $ac_n "checking for DB4 major version""... $ac_c" 1>&6
echo "configure:30965: checking for DB4 major version" >&5
    { echo "configure: error: Header contains different version" 1>&2; exit 1; }
  fi
  if test "4" = "4"; then
    echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
echo "configure:30970: checking for DB4 minor version and patch level" >&5
    cat > conftest.$ac_ext <<EOF
#line 30972 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 4 || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR != 1) || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR == 1 && DB_VERSION_PATCH >= 25)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""ok" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: Version 4.1 requires patch level 25" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
echo "configure:30998: checking if dba can be used as shared extension" >&5
    cat > conftest.$ac_ext <<EOF
#line 31000 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: At least version 3.3 is required" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then
    cat >> confdefs.h <<\EOF
#define DBA_DB4 1
EOF
 
    if test -n "$THIS_INCLUDE"; then
      cat >> confdefs.h <<EOF
#define DB4_INCLUDE_FILE "$THIS_INCLUDE"
EOF

    fi
  else
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi
  THIS_RESULT=yes
  DB4_LIBS=$THIS_LIBS
  DB4_PREFIX=$THIS_PREFIX
  DB4_INCLUDE=$THIS_INCLUDE
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


fi

  THIS_NAME=DB4
  if test -n "Berkeley DB4"; then
    THIS_FULL_NAME="Berkeley DB4"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:31157: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DB3
if test "$PHP_DB3" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_DB4" = "1"; then
    
  THIS_NAME=DB3
  if test -n "Berkeley DB3"; then
    THIS_FULL_NAME="Berkeley DB3"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:31185: checking for $THIS_FULL_NAME support" >&5
  if test -n "You cannot combine --with-db3 with --with-db4"; then
    { echo "configure: error: You cannot combine --with-db3 with --with-db4" 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_DB3 /usr/local/BerkeleyDB.3.3 /usr/local/BerkeleyDB.3.2 /usr/local/BerkeleyDB.3.1 /usr/local/BerkeleyDB.3.0 /usr/local /usr; do
    if test -f "$i/db3/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db3/db.h
      break
    elif test -f "$i/include/db3/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db3/db.h
      break
    elif test -f "$i/include/db/db3.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db/db3.h
      break
    elif test -f "$i/include/db3.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db3.h
      break
    elif test -f "$i/include/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db.h
      break
    fi
  done
  
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  for LIB in db-3.3 db-3.2 db-3.1 db-3.0 db-3 db3 db; do
    if test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.a || test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.$SHLIB_SUFFIX_NAME; then
      lib_found="";
      
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$LIB $LIBS"
  
        cat > conftest.$ac_ext <<EOF
#line 31236 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
        
int main() {

          (void)db_create((DB**)0, (DB_ENV*)0, 0);
        
; return 0; }
EOF
if { (eval echo configure:31247: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
          cat > conftest.$ac_ext <<EOF
#line 31251 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 3 || (3 == 4 && DB_VERSION_MAJOR == 5)
            yes
#endif
          
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
            THIS_LIBS=$LIB
            lib_found=1
          
fi
rm -f conftest*

        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      
  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

      if test -n "$lib_found"; then
        lib_found="";
        break;
      fi
    fi
  done
  if test -z "$THIS_LIBS"; then
    echo $ac_n "checking for DB3 major version""... $ac_c" 1>&6
echo "configure:31288: checking for DB3 major version" >&5
    { echo "configure: error: Header contains different version" 1>&2; exit 1; }
  fi
  if test "3" = "4"; then
    echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
echo "configure:31293: checking for DB4 minor version and patch level" >&5
    cat > conftest.$ac_ext <<EOF
#line 31295 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 4 || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR != 1) || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR == 1 && DB_VERSION_PATCH >= 25)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""ok" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: Version 4.1 requires patch level 25" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
echo "configure:31321: checking if dba can be used as shared extension" >&5
    cat > conftest.$ac_ext <<EOF
#line 31323 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: At least version 3.3 is required" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then
    cat >> confdefs.h <<\EOF
#define DBA_DB3 1
EOF
 
    if test -n "$THIS_INCLUDE"; then
      cat >> confdefs.h <<EOF
#define DB3_INCLUDE_FILE "$THIS_INCLUDE"
EOF

    fi
  else
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi
  THIS_RESULT=yes
  DB3_LIBS=$THIS_LIBS
  DB3_PREFIX=$THIS_PREFIX
  DB3_INCLUDE=$THIS_INCLUDE
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


fi

  THIS_NAME=DB3
  if test -n "Berkeley DB3"; then
    THIS_FULL_NAME="Berkeley DB3"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:31480: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DB2
if test "$PHP_DB2" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_DB3" = "1" || test "$HAVE_DB4" = "1"; then
    
  THIS_NAME=DB2
  if test -n "Berkeley DB2"; then
    THIS_FULL_NAME="Berkeley DB2"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:31508: checking for $THIS_FULL_NAME support" >&5
  if test -n "You cannot combine --with-db2 with --with-db3 or --with-db4"; then
    { echo "configure: error: You cannot combine --with-db2 with --with-db3 or --with-db4" 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_DB2 $PHP_DB2/BerkeleyDB /usr/BerkeleyDB /usr/local /usr; do
    if test -f "$i/db2/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/db2/db.h
      break
    elif test -f "$i/include/db2/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db2/db.h
      break
    elif test -f "$i/include/db/db2.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db/db2.h
      break
    elif test -f "$i/include/db2.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db2.h
      break
    elif test -f "$i/include/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db.h
      break
    fi
  done
  
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  for LIB in db-2 db2 db; do
    if test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.a || test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.$SHLIB_SUFFIX_NAME; then
      lib_found="";
      
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$LIB $LIBS"
  
        cat > conftest.$ac_ext <<EOF
#line 31559 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
        
int main() {

          (void)db_appinit("", NULL, (DB_ENV*)0, 0);
        
; return 0; }
EOF
if { (eval echo configure:31570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
          cat > conftest.$ac_ext <<EOF
#line 31574 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 2 || (2 == 4 && DB_VERSION_MAJOR == 5)
            yes
#endif
          
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
            THIS_LIBS=$LIB
            lib_found=1
          
fi
rm -f conftest*

        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      
  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

      if test -n "$lib_found"; then
        lib_found="";
        break;
      fi
    fi
  done
  if test -z "$THIS_LIBS"; then
    echo $ac_n "checking for DB2 major version""... $ac_c" 1>&6
echo "configure:31611: checking for DB2 major version" >&5
    { echo "configure: error: Header contains different version" 1>&2; exit 1; }
  fi
  if test "2" = "4"; then
    echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
echo "configure:31616: checking for DB4 minor version and patch level" >&5
    cat > conftest.$ac_ext <<EOF
#line 31618 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 4 || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR != 1) || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR == 1 && DB_VERSION_PATCH >= 25)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""ok" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: Version 4.1 requires patch level 25" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
echo "configure:31644: checking if dba can be used as shared extension" >&5
    cat > conftest.$ac_ext <<EOF
#line 31646 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: At least version 3.3 is required" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then
    cat >> confdefs.h <<\EOF
#define DBA_DB2 1
EOF
 
    if test -n "$THIS_INCLUDE"; then
      cat >> confdefs.h <<EOF
#define DB2_INCLUDE_FILE "$THIS_INCLUDE"
EOF

    fi
  else
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi
  THIS_RESULT=yes
  DB2_LIBS=$THIS_LIBS
  DB2_PREFIX=$THIS_PREFIX
  DB2_INCLUDE=$THIS_INCLUDE
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


fi

  THIS_NAME=DB2
  if test -n "Berkeley DB2"; then
    THIS_FULL_NAME="Berkeley DB2"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:31803: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DB1
if test "$PHP_DB1" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  echo $ac_n "checking for DB1 in library""... $ac_c" 1>&6
echo "configure:31823: checking for DB1 in library" >&5
  if test "$HAVE_DB4" = "1"; then
    THIS_VERSION=4
    THIS_LIBS=$DB4_LIBS
    THIS_PREFIX=$DB4_PREFIX
  elif test "$HAVE_DB3" = "1"; then
    THIS_LIBS=$DB3_LIBS
    THIS_PREFIX=$DB3_PREFIX
  elif test "$HAVE_DB2" = "1"; then
    THIS_VERSION=2
    THIS_LIBS=$DB2_LIBS
    THIS_PREFIX=$DB2_PREFIX
  fi
  if test "$HAVE_DB4" = "1" || test "$HAVE_DB3" = "1" || test "$HAVE_DB2" = "1"; then
    cat >> confdefs.h <<EOF
#define DB1_VERSION "Berkeley DB 1.85 emulation in DB$THIS_VERSION"
EOF

    for i in db$THIS_VERSION/db_185.h include/db$THIS_VERSION/db_185.h include/db/db_185.h; do
      if test -f "$THIS_PREFIX/$i"; then
        THIS_INCLUDE=$THIS_PREFIX/$i
        break
      fi
    done
  else
    cat >> confdefs.h <<EOF
#define DB1_VERSION "Unknown DB1"
EOF

    for i in $PHP_DB1 /usr/local /usr; do
      if test -f "$i/db1/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/db1/db.h
        break
      elif test -f "$i/include/db1/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db1/db.h
        break
      elif test -f "$i/include/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db.h
        break
      fi
    done
    THIS_LIBS=db
  fi
  echo "$ac_t""$THIS_LIBS" 1>&6
  echo $ac_n "checking for DB1 in header""... $ac_c" 1>&6
echo "configure:31871: checking for DB1 in header" >&5
  echo "$ac_t""$THIS_INCLUDE" 1>&6
  if test -n "$THIS_INCLUDE"; then
    
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$THIS_LIBS $LIBS"
  
      cat > conftest.$ac_ext <<EOF
#line 31881 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
      
int main() {

        DB * dbp = dbopen("", 0, 0, DB_HASH, 0);
      
; return 0; }
EOF
if { (eval echo configure:31892: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
        cat >> confdefs.h <<EOF
#define DB1_INCLUDE_FILE "$THIS_INCLUDE"
EOF

        cat >> confdefs.h <<\EOF
#define DBA_DB1 1
EOF

        THIS_RESULT=yes
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
        THIS_RESULT=no
      
fi
rm -f conftest*
    
  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

  fi
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=DB1
  if test -n "DB1"; then
    THIS_FULL_NAME="DB1"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:32042: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DBM
if test "$PHP_DBM" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_QDBM" = "1"; then
    
  THIS_NAME=DBM
  if test -n "dbm"; then
    THIS_FULL_NAME="dbm"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:32070: checking for $THIS_FULL_NAME support" >&5
  if test -n "You cannot combine --with-dbm with --with-qdbm"; then
    { echo "configure: error: You cannot combine --with-dbm with --with-qdbm" 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_DBM /usr/local /usr; do
    if test -f "$i/include/dbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/dbm.h
      break
    elif test -f "$i/include/gdbm/dbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/gdbm/dbm.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    for LIB in dbm c gdbm; do
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for dbminit in -l$LIB""... $ac_c" 1>&6
echo "configure:32194: checking for dbminit in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'dbminit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32202 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbminit();

int main() {
dbminit()
; return 0; }
EOF
if { (eval echo configure:32213: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        echo $ac_n "checking for DBM using GDBM""... $ac_c" 1>&6
echo "configure:32233: checking for DBM using GDBM" >&5
        cat >> confdefs.h <<EOF
#define DBM_INCLUDE_FILE "$THIS_INCLUDE"
EOF

        if test "$LIB" = "gdbm"; then
          cat >> confdefs.h <<EOF
#define DBM_VERSION "GDBM"
EOF

          echo "$ac_t""yes" 1>&6
        else
          cat >> confdefs.h <<EOF
#define DBM_VERSION "DBM"
EOF

          echo "$ac_t""no" 1>&6
        fi
        cat >> confdefs.h <<\EOF
#define DBA_DBM 1
EOF
 
        THIS_LIBS=$LIB
      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_dbminit
    
  
fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi
  
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=DBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:32397: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


if test "$PHP_DBA" != "no" || test "$HAVE_DBA" = "1" || test "$with_cdb" = "yes" || test "$enable_inifile" = "yes" || test "$enable_flatfile" = "yes"; then
  php_dba_enable=yes
else
  php_dba_enable=no
fi


php_with_cdb=$php_dba_enable


# Check whether --with-cdb or --without-cdb was given.
if test "${with_cdb+set}" = set; then
  withval="$with_cdb"
  PHP_CDB=$withval
else
  
  PHP_CDB=$php_dba_enable
  

fi


ext_output=$PHP_CDB






php_enable_inifile=$php_dba_enable


# Check whether --enable-inifile or --disable-inifile was given.
if test "${enable_inifile+set}" = set; then
  enableval="$enable_inifile"
  PHP_INIFILE=$enableval
else
  
  PHP_INIFILE=$php_dba_enable
  

fi


ext_output=$PHP_INIFILE






php_enable_flatfile=$php_dba_enable


# Check whether --enable-flatfile or --disable-flatfile was given.
if test "${enable_flatfile+set}" = set; then
  enableval="$enable_flatfile"
  PHP_FLATFILE=$enableval
else
  
  PHP_FLATFILE=$php_dba_enable
  

fi


ext_output=$PHP_FLATFILE





# CDB
if test "$PHP_CDB" = "yes"; then
  cat >> confdefs.h <<\EOF
#define DBA_CDB_BUILTIN 1
EOF

  cat >> confdefs.h <<\EOF
#define DBA_CDB_MAKE 1
EOF

  cat >> confdefs.h <<\EOF
#define DBA_CDB 1
EOF

  cdb_sources="libcdb/cdb.c libcdb/cdb_make.c libcdb/uint32.c"
  THIS_RESULT="builtin"
elif test "$PHP_CDB" != "no"; then
  
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  for i in $PHP_CDB /usr/local /usr; do
    if test -f "$i/include/cdb.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/cdb.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    for LIB in cdb c; do
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for cdb_read in -l$LIB""... $ac_c" 1>&6
echo "configure:32609: checking for cdb_read in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'cdb_read | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32617 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cdb_read();

int main() {
cdb_read()
; return 0; }
EOF
if { (eval echo configure:32628: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        cat >> confdefs.h <<EOF
#define CDB_INCLUDE_FILE "$THIS_INCLUDE"
EOF

        cat >> confdefs.h <<\EOF
#define DBA_CDB 1
EOF
 
        THIS_LIBS=$LIB
      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_cdb_read
    
  
fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi

  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi

  
  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: DBA: Could not find necessary header file(s)." 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: DBA: Could not find necessary library." 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=CDB
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:32797: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# INIFILE
if test "$PHP_INIFILE" != "no"; then
  cat >> confdefs.h <<\EOF
#define DBA_INIFILE 1
EOF

  ini_sources="libinifile/inifile.c"
  THIS_RESULT="builtin"
fi

  THIS_NAME=INIFILE
  if test -n "INI File"; then
    THIS_FULL_NAME="INI File"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:32828: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# FLATFILE
if test "$PHP_FLATFILE" != "no"; then
  cat >> confdefs.h <<\EOF
#define DBA_FLATFILE 1
EOF

  flat_sources="libflatfile/flatfile.c"
  THIS_RESULT="builtin"
fi

  THIS_NAME=FLATFILE
  if test -n "FlatFile"; then
    THIS_FULL_NAME="FlatFile"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:32859: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


echo $ac_n "checking whether to enable DBA interface""... $ac_c" 1>&6
echo "configure:32874: checking whether to enable DBA interface" >&5
if test "$HAVE_DBA" = "1"; then
  if test "$ext_shared" = "yes"; then
    echo "$ac_t""yes, shared" 1>&6
  else
    echo "$ac_t""yes" 1>&6
  fi
  cat >> confdefs.h <<\EOF
#define HAVE_DBA 1
EOF

  
  ext_builddir=ext/dba
  ext_srcdir=$abs_srcdir/ext/dba

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_DBA_SHARED=no
    
  
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c $cdb_sources $flat_sources $ini_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dba"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dba"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_DBA_SHARED=yes
      
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c $cdb_sources $flat_sources $ini_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_dba="$shared_objects_dba $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdba.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(PHPDBA_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdba.so '$ext_builddir'/phpdba.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPDBA, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(PHPDBA_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdba.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdba.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dba"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpdba.$suffix: $ext_builddir/phpdba.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdba.$suffix \$(phplibdir)

$ext_builddir/phpdba.$suffix: \$(shared_objects_dba) \$(PHPDBA_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/dba.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(DBA_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/dba.so '$ext_builddir'/dba.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(DBA, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(DBA_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/dba.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/dba.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dba"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dba.$suffix: $ext_builddir/dba.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/dba.$suffix \$(phplibdir)

$ext_builddir/dba.$suffix: \$(shared_objects_dba) \$(DBA_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_DBA 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_DBA_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c $cdb_sources $flat_sources $ini_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC dba"
        ;;
      *)
        
  
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c $cdb_sources $flat_sources $ini_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC dba"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=dba
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libinifile"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libcdb"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libflatfile"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DBA_SHARED_LIBADD"

else
  echo "$ac_t""no" 1>&6
fi



php_enable_dom=yes

echo $ac_n "checking whether to enable DOM support""... $ac_c" 1>&6
echo "configure:33204: checking whether to enable DOM support" >&5
# Check whether --enable-dom or --disable-dom was given.
if test "${enable_dom+set}" = set; then
  enableval="$enable_dom"
  PHP_DOM=$enableval
else
  
  PHP_DOM=yes
  test "$PHP_ENABLE_ALL" && PHP_DOM=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DOM in
shared,*)
  PHP_DOM=`echo "$PHP_DOM"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_DOM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:33249: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_DOM" != "no"; then

  if test "$PHP_LIBXML" = "no"; then   
    { echo "configure: error: DOM extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
  fi

  
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:33277: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        DOM_SHARED_LIBADD="$DOM_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        DOM_SHARED_LIBADD="$DOM_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOM_SHARED_LIBADD="-L$ai_p $DOM_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DOM_SHARED_LIBADD="$ld_runpath_switch$ai_p $DOM_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:33435: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $DOM_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 33451 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:33462: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
    cat >> confdefs.h <<\EOF
#define HAVE_DOM 1
EOF

    
  ext_builddir=ext/dom
  ext_srcdir=$abs_srcdir/ext/dom

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_DOM_SHARED=no
    
  
  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dom"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dom"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_DOM_SHARED=yes
      
  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_dom="$shared_objects_dom $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdom.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(PHPDOM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdom.so '$ext_builddir'/phpdom.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPDOM, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(PHPDOM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdom.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdom.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dom"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpdom.$suffix: $ext_builddir/phpdom.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdom.$suffix \$(phplibdir)

$ext_builddir/phpdom.$suffix: \$(shared_objects_dom) \$(PHPDOM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/dom.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(DOM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/dom.so '$ext_builddir'/dom.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(DOM, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(DOM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/dom.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/dom.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dom"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dom.$suffix: $ext_builddir/dom.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/dom.$suffix \$(phplibdir)

$ext_builddir/dom.$suffix: \$(shared_objects_dom) \$(DOM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_DOM 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_DOM_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC dom"
        ;;
      *)
        
  
  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC dom"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=dom
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST DOM_SHARED_LIBADD"

    
  
    for header_file in ext/dom/xml_common.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

    
  am_i_shared=$PHP_DOM_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension dom to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build dom shared or build libxml statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension dom, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
  
  fi

fi



php_with_enchant=no

echo $ac_n "checking for ENCHANT support""... $ac_c" 1>&6
echo "configure:33885: checking for ENCHANT support" >&5
# Check whether --with-enchant or --without-enchant was given.
if test "${with_enchant+set}" = set; then
  withval="$with_enchant"
  PHP_ENCHANT=$withval
else
  
  PHP_ENCHANT=no
  test "$PHP_ENABLE_ALL" && PHP_ENCHANT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ENCHANT in
shared,*)
  PHP_ENCHANT=`echo "$PHP_ENCHANT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ENCHANT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ENCHANT" != "no"; then
	
  ext_builddir=ext/enchant
  ext_srcdir=$abs_srcdir/ext/enchant

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ENCHANT_SHARED=no
    
  
  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC enchant"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC enchant"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ENCHANT_SHARED=yes
      
  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_enchant="$shared_objects_enchant $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpenchant.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(PHPENCHANT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpenchant.so '$ext_builddir'/phpenchant.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPENCHANT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(PHPENCHANT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpenchant.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpenchant.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_enchant"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpenchant.$suffix: $ext_builddir/phpenchant.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpenchant.$suffix \$(phplibdir)

$ext_builddir/phpenchant.$suffix: \$(shared_objects_enchant) \$(PHPENCHANT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/enchant.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(ENCHANT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/enchant.so '$ext_builddir'/enchant.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ENCHANT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(ENCHANT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/enchant.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/enchant.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_enchant"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/enchant.$suffix: $ext_builddir/enchant.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/enchant.$suffix \$(phplibdir)

$ext_builddir/enchant.$suffix: \$(shared_objects_enchant) \$(ENCHANT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_ENCHANT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ENCHANT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC enchant"
        ;;
      *)
        
  
  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC enchant"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=enchant
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

	if test "$PHP_ENCHANT" != "yes"; then
	    ENCHANT_SEARCH_DIRS=$PHP_ENCHANT
	else
	    ENCHANT_SEARCH_DIRS="/usr/local /usr"
	fi
	for i in $ENCHANT_SEARCH_DIRS; do
		if test -f $i/include/enchant/enchant.h; then
			ENCHANT_DIR=$i
			ENCHANT_INCDIR=$i/include/enchant
		elif test -f $i/include/enchant.h; then
			ENCHANT_DIR=$i
			ENCHANT_INCDIR=$i/include
		fi
	done

	if test -z "$ENCHANT_DIR"; then
		{ echo "configure: error: Cannot find enchant" 1>&2; exit 1; }
	fi

	ENCHANT_LIBDIR=$ENCHANT_DIR/lib

	cat >> confdefs.h <<\EOF
#define HAVE_ENCHANT 1
EOF

	
  PHP_VAR_SUBST="$PHP_VAR_SUBST ENCHANT_SHARED_LIBADD"

	

  if test "$ext_shared" = "yes"; then
    ENCHANT_SHARED_LIBADD="-lenchant $ENCHANT_SHARED_LIBADD"
    if test -n "$ENCHANT_LIBDIR"; then
      
  if test "$ENCHANT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ENCHANT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ENCHANT_LIBDIR" || echo "$ENCHANT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ENCHANT_LIBDIR
  else
    
    ep_dir="`echo $ENCHANT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ENCHANT_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ENCHANT_SHARED_LIBADD="-L$ai_p $ENCHANT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ENCHANT_SHARED_LIBADD="$ld_runpath_switch$ai_p $ENCHANT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ENCHANT_LIBDIR"; then
    
  if test "$ENCHANT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ENCHANT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ENCHANT_LIBDIR" || echo "$ENCHANT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ENCHANT_LIBDIR
  else
    
    ep_dir="`echo $ENCHANT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ENCHANT_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case enchant in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lenchant $LIBS" 
   ;;
  esac




  fi


	
  if test "$ENCHANT_INCDIR" != "/usr/include"; then
    
  if test -z "$ENCHANT_INCDIR" || echo "$ENCHANT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ENCHANT_INCDIR
  else
    
    ep_dir="`echo $ENCHANT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ENCHANT_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$ENCHANT_LIB $ENCHANT_SHARED_LIBADD"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for enchant_broker_set_param in -lenchant""... $ac_c" 1>&6
echo "configure:34470: checking for enchant_broker_set_param in -lenchant" >&5
ac_lib_var=`echo enchant'_'enchant_broker_set_param | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lenchant  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 34478 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char enchant_broker_set_param();

int main() {
enchant_broker_set_param()
; return 0; }
EOF
if { (eval echo configure:34489: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
	  cat >> confdefs.h <<\EOF
#define HAVE_ENCHANT_BROKER_SET_PARAM 1
EOF

	  cat >> confdefs.h <<\EOF
#define ENCHANT_VERSION_STRING "1.5.x"
EOF

	
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_enchant_enchant_broker_set_param
    
  
fi


fi



php_enable_exif=no

echo $ac_n "checking whether to enable EXIF (metadata from images) support""... $ac_c" 1>&6
echo "configure:34536: checking whether to enable EXIF (metadata from images) support" >&5
# Check whether --enable-exif or --disable-exif was given.
if test "${enable_exif+set}" = set; then
  enableval="$enable_exif"
  PHP_EXIF=$enableval
else
  
  PHP_EXIF=no
  test "$PHP_ENABLE_ALL" && PHP_EXIF=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_EXIF in
shared,*)
  PHP_EXIF=`echo "$PHP_EXIF"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_EXIF=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_EXIF" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_EXIF 1
EOF

  
  ext_builddir=ext/exif
  ext_srcdir=$abs_srcdir/ext/exif

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_EXIF_SHARED=no
    
  
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC exif"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC exif"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_EXIF_SHARED=yes
      
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_exif="$shared_objects_exif $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpexif.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(PHPEXIF_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpexif.so '$ext_builddir'/phpexif.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPEXIF, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(PHPEXIF_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpexif.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpexif.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_exif"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpexif.$suffix: $ext_builddir/phpexif.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpexif.$suffix \$(phplibdir)

$ext_builddir/phpexif.$suffix: \$(shared_objects_exif) \$(PHPEXIF_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/exif.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(EXIF_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/exif.so '$ext_builddir'/exif.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(EXIF, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(EXIF_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/exif.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/exif.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_exif"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/exif.$suffix: $ext_builddir/exif.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/exif.$suffix \$(phplibdir)

$ext_builddir/exif.$suffix: \$(shared_objects_exif) \$(EXIF_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_EXIF 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_EXIF_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC exif"
        ;;
      *)
        
  
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC exif"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=exif
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_fileinfo=yes

echo $ac_n "checking for fileinfo support""... $ac_c" 1>&6
echo "configure:34880: checking for fileinfo support" >&5
# Check whether --enable-fileinfo or --disable-fileinfo was given.
if test "${enable_fileinfo+set}" = set; then
  enableval="$enable_fileinfo"
  PHP_FILEINFO=$enableval
else
  
  PHP_FILEINFO=yes
  test "$PHP_ENABLE_ALL" && PHP_FILEINFO=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FILEINFO in
shared,*)
  PHP_FILEINFO=`echo "$PHP_FILEINFO"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_FILEINFO=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FILEINFO" != "no"; then

  libmagic_sources=" \
    libmagic/apprentice.c libmagic/apptype.c libmagic/ascmagic.c \
    libmagic/cdf.c libmagic/cdf_time.c libmagic/compress.c \
    libmagic/encoding.c libmagic/fsmagic.c libmagic/funcs.c \
    libmagic/is_tar.c libmagic/magic.c libmagic/print.c \
    libmagic/readcdf.c libmagic/readelf.c libmagic/softmagic.c"

  
  ext_builddir=ext/fileinfo
  ext_srcdir=$abs_srcdir/ext/fileinfo

  ac_extra=`echo "-I@ext_srcdir@/libmagic"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_FILEINFO_SHARED=no
    
  
  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC fileinfo"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC fileinfo"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_FILEINFO_SHARED=yes
      
  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_fileinfo="$shared_objects_fileinfo $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpfileinfo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(PHPFILEINFO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpfileinfo.so '$ext_builddir'/phpfileinfo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPFILEINFO, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(PHPFILEINFO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpfileinfo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpfileinfo.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_fileinfo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpfileinfo.$suffix: $ext_builddir/phpfileinfo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpfileinfo.$suffix \$(phplibdir)

$ext_builddir/phpfileinfo.$suffix: \$(shared_objects_fileinfo) \$(PHPFILEINFO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/fileinfo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(FILEINFO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/fileinfo.so '$ext_builddir'/fileinfo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(FILEINFO, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(FILEINFO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/fileinfo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/fileinfo.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_fileinfo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/fileinfo.$suffix: $ext_builddir/fileinfo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/fileinfo.$suffix \$(phplibdir)

$ext_builddir/fileinfo.$suffix: \$(shared_objects_fileinfo) \$(FILEINFO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_FILEINFO 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_FILEINFO_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC fileinfo"
        ;;
      *)
        
  
  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC fileinfo"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=fileinfo
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libmagic"
  


  for ac_func in utimes strndup
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:35230: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 35235 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:35258: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi



php_enable_filter=yes

echo $ac_n "checking whether to enable input filter support""... $ac_c" 1>&6
echo "configure:35296: checking whether to enable input filter support" >&5
# Check whether --enable-filter or --disable-filter was given.
if test "${enable_filter+set}" = set; then
  enableval="$enable_filter"
  PHP_FILTER=$enableval
else
  
  PHP_FILTER=yes
  test "$PHP_ENABLE_ALL" && PHP_FILTER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FILTER in
shared,*)
  PHP_FILTER=`echo "$PHP_FILTER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_FILTER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_pcre_dir=no

echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
echo "configure:35340: checking pcre install prefix" >&5
# Check whether --with-pcre-dir or --without-pcre-dir was given.
if test "${with_pcre_dir+set}" = set; then
  withval="$with_pcre_dir"
  PHP_PCRE_DIR=$withval
else
  
  PHP_PCRE_DIR=no
  

fi


ext_output=$PHP_PCRE_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FILTER" != "no"; then

    if test -n "$PHP_VERSION"; then
        ext_shared=no
  else
        old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=$INCLUDES
    cat > conftest.$ac_ext <<EOF
#line 35367 "configure"
#include "confdefs.h"

#include <main/php_config.h>
#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      PHP_PCRE_REGEX=yes
    
else
  rm -rf conftest*
  
      cat > conftest.$ac_ext <<EOF
#line 35386 "configure"
#include "confdefs.h"

#include <main/php_config.h>
#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif
      
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
        PHP_PCRE_REGEX=pecl
      
else
  rm -rf conftest*
  
        PHP_PCRE_REGEX=no
      
fi
rm -f conftest*

    
fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS
  fi

  
  ext_builddir=ext/filter
  ext_srcdir=$abs_srcdir/ext/filter

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_FILTER_SHARED=no
    
  
  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC filter"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC filter"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_FILTER_SHARED=yes
      
  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_filter="$shared_objects_filter $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpfilter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(PHPFILTER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpfilter.so '$ext_builddir'/phpfilter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPFILTER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(PHPFILTER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpfilter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpfilter.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_filter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpfilter.$suffix: $ext_builddir/phpfilter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpfilter.$suffix \$(phplibdir)

$ext_builddir/phpfilter.$suffix: \$(shared_objects_filter) \$(PHPFILTER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/filter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(FILTER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/filter.so '$ext_builddir'/filter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(FILTER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(FILTER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/filter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/filter.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_filter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/filter.$suffix: $ext_builddir/filter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/filter.$suffix \$(phplibdir)

$ext_builddir/filter.$suffix: \$(shared_objects_filter) \$(FILTER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_FILTER 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_FILTER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC filter"
        ;;
      *)
        
  
  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC filter"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=filter
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST FILTER_SHARED_LIBADD"


  
  
    for header_file in ext/filter/php_filter.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  
  am_i_shared=$PHP_FILTER_SHARED
  is_it_shared=$PHP_PCRE_SHARED
  is_it_enabled=$PHP_PCRE
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension filter to build statically, but it
depends on extension pcre, which you've configured to build shared.
You either need to build filter shared or build pcre statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension filter, which depends on extension pcre,
but you've either not enabled pcre, or have disabled it.
" 1>&2; exit 1; }
  fi
  
fi



php_enable_ftp=no

echo $ac_n "checking whether to enable FTP support""... $ac_c" 1>&6
echo "configure:35756: checking whether to enable FTP support" >&5
# Check whether --enable-ftp or --disable-ftp was given.
if test "${enable_ftp+set}" = set; then
  enableval="$enable_ftp"
  PHP_FTP=$enableval
else
  
  PHP_FTP=no
  test "$PHP_ENABLE_ALL" && PHP_FTP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FTP in
shared,*)
  PHP_FTP=`echo "$PHP_FTP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_FTP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_openssl_dir=no

echo $ac_n "checking OpenSSL dir for FTP""... $ac_c" 1>&6
echo "configure:35800: checking OpenSSL dir for FTP" >&5
# Check whether --with-openssl-dir or --without-openssl-dir was given.
if test "${with_openssl_dir+set}" = set; then
  withval="$with_openssl_dir"
  PHP_OPENSSL_DIR=$withval
else
  
  PHP_OPENSSL_DIR=no
  

fi


ext_output=$PHP_OPENSSL_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FTP" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_FTP 1
EOF

  
  ext_builddir=ext/ftp
  ext_srcdir=$abs_srcdir/ext/ftp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_FTP_SHARED=no
    
  
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ftp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ftp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_FTP_SHARED=yes
      
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ftp="$shared_objects_ftp $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpftp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(PHPFTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpftp.so '$ext_builddir'/phpftp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPFTP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(PHPFTP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpftp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpftp.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ftp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpftp.$suffix: $ext_builddir/phpftp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpftp.$suffix \$(phplibdir)

$ext_builddir/phpftp.$suffix: \$(shared_objects_ftp) \$(PHPFTP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ftp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(FTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ftp.so '$ext_builddir'/ftp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(FTP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(FTP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ftp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ftp.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ftp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ftp.$suffix: $ext_builddir/ftp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ftp.$suffix \$(phplibdir)

$ext_builddir/ftp.$suffix: \$(shared_objects_ftp) \$(FTP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_FTP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_FTP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ftp"
        ;;
      *)
        
  
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ftp"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ftp
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no

  if test "$PHP_OPENSSL" != "no" || test "$PHP_OPENSSL_DIR" != "no"; then
    
  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:36138: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    fi

    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
      
  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="$FTP_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="$FTP_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-L$ai_p $FTP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && FTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $FTP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then
  
    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
echo "configure:36343: checking for OpenSSL version" >&5
    cat > conftest.$ac_ext <<EOF
#line 36345 "configure"
#include "confdefs.h"

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t"">= 0.9.6" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    
fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS

    
  if test "$OPENSSL_INCDIR" != "/usr/include"; then
    
  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else
    
    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
echo "configure:36500: checking for CRYPTO_free in -lcrypto" >&5
ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 36508 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char CRYPTO_free();

int main() {
CRYPTO_free()
; return 0; }
EOF
if { (eval echo configure:36519: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-lcrypto $FTP_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free
    
      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
    
  
fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
echo "configure:36676: checking for SSL_CTX_set_ssl_version in -lssl" >&5
ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lssl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 36684 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSL_CTX_set_ssl_version();

int main() {
SSL_CTX_set_ssl_version()
; return 0; }
EOF
if { (eval echo configure:36695: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      found_openssl=yes
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
    
      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
    
  
fi

    LIBS=$old_LIBS
    
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-lssl $FTP_SHARED_LIBADD" 
    else
      
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-lcrypto $FTP_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac



    
  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else
    
    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-L$ai_p $FTP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && FTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $FTP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
  

:

  fi

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST FTP_SHARED_LIBADD"

  fi
fi




php_with_gd=no

echo $ac_n "checking for GD support""... $ac_c" 1>&6
echo "configure:36837: checking for GD support" >&5
# Check whether --with-gd or --without-gd was given.
if test "${with_gd+set}" = set; then
  withval="$with_gd"
  PHP_GD=$withval
else
  
  PHP_GD=no
  test "$PHP_ENABLE_ALL" && PHP_GD=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GD in
shared,*)
  PHP_GD=`echo "$PHP_GD"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_GD=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_JPEG_DIR"; then
  
php_with_jpeg_dir=no

echo $ac_n "checking for the location of libjpeg""... $ac_c" 1>&6
echo "configure:36882: checking for the location of libjpeg" >&5
# Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  PHP_JPEG_DIR=$withval
else
  
  PHP_JPEG_DIR=no
  

fi


ext_output=$PHP_JPEG_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test -z "$PHP_PNG_DIR"; then
  
php_with_png_dir=no

echo $ac_n "checking for the location of libpng""... $ac_c" 1>&6
echo "configure:36907: checking for the location of libpng" >&5
# Check whether --with-png-dir or --without-png-dir was given.
if test "${with_png_dir+set}" = set; then
  withval="$with_png_dir"
  PHP_PNG_DIR=$withval
else
  
  PHP_PNG_DIR=no
  

fi


ext_output=$PHP_PNG_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test -z "$PHP_ZLIB_DIR"; then
  
php_with_zlib_dir=no

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:36932: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no
  

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi


php_with_xpm_dir=no

echo $ac_n "checking for the location of libXpm""... $ac_c" 1>&6
echo "configure:36956: checking for the location of libXpm" >&5
# Check whether --with-xpm-dir or --without-xpm-dir was given.
if test "${with_xpm_dir+set}" = set; then
  withval="$with_xpm_dir"
  PHP_XPM_DIR=$withval
else
  
  PHP_XPM_DIR=no
  

fi


ext_output=$PHP_XPM_DIR
echo "$ac_t""$ext_output" 1>&6





php_with_freetype_dir=no

echo $ac_n "checking for FreeType 2""... $ac_c" 1>&6
echo "configure:36979: checking for FreeType 2" >&5
# Check whether --with-freetype-dir or --without-freetype-dir was given.
if test "${with_freetype_dir+set}" = set; then
  withval="$with_freetype_dir"
  PHP_FREETYPE_DIR=$withval
else
  
  PHP_FREETYPE_DIR=no
  

fi


ext_output=$PHP_FREETYPE_DIR
echo "$ac_t""$ext_output" 1>&6





php_with_t1lib=no

echo $ac_n "checking for T1lib support""... $ac_c" 1>&6
echo "configure:37002: checking for T1lib support" >&5
# Check whether --with-t1lib or --without-t1lib was given.
if test "${with_t1lib+set}" = set; then
  withval="$with_t1lib"
  PHP_T1LIB=$withval
else
  
  PHP_T1LIB=no
  

fi


ext_output=$PHP_T1LIB
echo "$ac_t""$ext_output" 1>&6





php_enable_gd_native_ttf=no

echo $ac_n "checking whether to enable truetype string function in GD""... $ac_c" 1>&6
echo "configure:37025: checking whether to enable truetype string function in GD" >&5
# Check whether --enable-gd-native-ttf or --disable-gd-native-ttf was given.
if test "${enable_gd_native_ttf+set}" = set; then
  enableval="$enable_gd_native_ttf"
  PHP_GD_NATIVE_TTF=$enableval
else
  
  PHP_GD_NATIVE_TTF=no
  

fi


ext_output=$PHP_GD_NATIVE_TTF
echo "$ac_t""$ext_output" 1>&6





php_enable_gd_jis_conv=no

echo $ac_n "checking whether to enable JIS-mapped Japanese font support in GD""... $ac_c" 1>&6
echo "configure:37048: checking whether to enable JIS-mapped Japanese font support in GD" >&5
# Check whether --enable-gd-jis-conv or --disable-gd-jis-conv was given.
if test "${enable_gd_jis_conv+set}" = set; then
  enableval="$enable_gd_jis_conv"
  PHP_GD_JIS_CONV=$enableval
else
  
  PHP_GD_JIS_CONV=no
  

fi


ext_output=$PHP_GD_JIS_CONV
echo "$ac_t""$ext_output" 1>&6
























if test "$PHP_GD" = "yes"; then
  GD_MODULE_TYPE=builtin
  extra_sources="libgd/gd.c libgd/gd_gd.c libgd/gd_gd2.c libgd/gd_io.c libgd/gd_io_dp.c \
                 libgd/gd_io_file.c libgd/gd_ss.c libgd/gd_io_ss.c libgd/gd_png.c libgd/gd_jpeg.c \
                 libgd/gdxpm.c libgd/gdfontt.c libgd/gdfonts.c libgd/gdfontmb.c libgd/gdfontl.c \
                 libgd/gdfontg.c libgd/gdtables.c libgd/gdft.c libgd/gdcache.c libgd/gdkanji.c \
                 libgd/wbmp.c libgd/gd_wbmp.c libgd/gdhelpers.c libgd/gd_topal.c libgd/gd_gif_in.c \
                 libgd/xbm.c libgd/gd_gif_out.c libgd/gd_security.c libgd/gd_filter.c \
                 libgd/gd_pixelate.c libgd/gd_arc.c libgd/gd_rotate.c libgd/gd_color.c"

  for ac_func in fabsf floorf
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:37100: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 37105 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:37128: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  test "$PHP_PNG_DIR" = "no" && PHP_PNG_DIR=yes

  
	if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
		if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
		elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
		else
			{ echo "configure: error: Can't find zlib headers under "$PHP_ZLIB_DIR"" 1>&2; exit 1; }
		fi
	else
		for i in /usr/local /usr; do
			if test -f "$i/include/zlib/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include/zlib"
			elif test -f "$i/include/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include"
			fi
		done
	fi

  
  if test "$PHP_GD_NATIVE_TTF" = "yes"; then
    cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

  fi

  
  if test "$PHP_GD_JIS_CONV" = "yes"; then
    USE_GD_JIS_CONV=1
  fi

  
  if test "$PHP_JPEG_DIR" != "no"; then

    for i in $PHP_JPEG_DIR /usr/local /usr; do
      test -f $i/include/jpeglib.h && GD_JPEG_DIR=$i && break
    done

    if test -z "$GD_JPEG_DIR"; then
      { echo "configure: error: jpeglib.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_JPEG_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:37300: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 37308 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:37319: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  if test "$GD_JPEG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_JPEG_DIR/include" || echo "$GD_JPEG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/include
  else
    
    ep_dir="`echo $GD_JPEG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-ljpeg $GD_SHARED_LIBADD"
    if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case jpeg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljpeg $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_jpeg_jpeg_read_header
    
      { echo "configure: error: Problem with libjpeg.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  else
    echo "$ac_t""If configure fails try --with-jpeg-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_PNG_DIR" != "no"; then

    for i in $PHP_PNG_DIR /usr/local /usr; do
      test -f $i/include/png.h && GD_PNG_DIR=$i && break
    done

    if test -z "$GD_PNG_DIR"; then
      { echo "configure: error: png.h not found." 1>&2; exit 1; }
    fi

    if test "$PHP_ZLIB_DIR" = "no"; then
      { echo "configure: error: PNG support requires ZLIB. Use --with-zlib-dir=<DIR>" 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz -L$GD_PNG_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
echo "configure:37597: checking for png_write_image in -lpng" >&5
ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 37605 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_write_image();

int main() {
png_write_image()
; return 0; }
EOF
if { (eval echo configure:37616: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  if test "$GD_PNG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_PNG_DIR/include" || echo "$GD_PNG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/include
  else
    
    ep_dir="`echo $GD_PNG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lz $GD_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
      
  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
    
  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lpng $GD_SHARED_LIBADD"
    if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case png in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpng $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_png_png_write_image
    
      { echo "configure: error: Problem with libpng.(a|so) or libz.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi


  else
    echo "$ac_t""If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_XPM_DIR" != "no"; then

    for i in $PHP_XPM_DIR /usr/local /usr/X11R6 /usr; do
      test -f $i/$PHP_LIBDIR/libXpm.$SHLIB_SUFFIX_NAME || test -f $i/$PHP_LIBDIR/libXpm.a && GD_XPM_DIR=$i && break
    done

    if test -z "$GD_XPM_DIR"; then
      { echo "configure: error: libXpm.(a|so) not found." 1>&2; exit 1; }
    fi

    for i in include include/X11; do
      test -f $GD_XPM_DIR/$i/xpm.h && GD_XPM_INC=$GD_XPM_DIR/include
    done

    if test -z "$GD_XPM_INC"; then
      { echo "configure: error: xpm.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_XPM_DIR/$PHP_LIBDIR -lX11
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
echo "configure:37996: checking for XpmFreeXpmImage in -lXpm" >&5
ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXpm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 38004 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XpmFreeXpmImage();

int main() {
XpmFreeXpmImage()
; return 0; }
EOF
if { (eval echo configure:38015: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  if test "$GD_XPM_INC" != "/usr/include"; then
    
  if test -z "$GD_XPM_INC" || echo "$GD_XPM_INC" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_INC
  else
    
    ep_dir="`echo $GD_XPM_INC|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_INC\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lXpm $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case Xpm in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lXpm $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lX11 $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case X11 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lX11 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_Xpm_XpmFreeXpmImage
    
      { echo "configure: error: Problem with libXpm.(a|so) or libX11.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  else
    echo "$ac_t""If configure fails try --with-xpm-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_FREETYPE_DIR" != "no"; then

    for i in $PHP_FREETYPE_DIR /usr/local /usr; do
      if test -f "$i/include/freetype2/freetype/freetype.h"; then
        FREETYPE2_DIR=$i
        FREETYPE2_INC_DIR=$i/include/freetype2
        break
      fi
    done

    if test -z "$FREETYPE2_DIR"; then
      { echo "configure: error: freetype.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$FREETYPE2_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for FT_New_Face in -lfreetype""... $ac_c" 1>&6
echo "configure:38390: checking for FT_New_Face in -lfreetype" >&5
ac_lib_var=`echo freetype'_'FT_New_Face | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lfreetype  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 38398 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char FT_New_Face();

int main() {
FT_New_Face()
; return 0; }
EOF
if { (eval echo configure:38409: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lfreetype $GD_SHARED_LIBADD"
    if test -n "$FREETYPE2_DIR/$PHP_LIBDIR"; then
      
  if test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/$PHP_LIBDIR" || echo "$FREETYPE2_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $FREETYPE2_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FREETYPE2_DIR/$PHP_LIBDIR"; then
    
  if test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/$PHP_LIBDIR" || echo "$FREETYPE2_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $FREETYPE2_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case freetype in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lfreetype $LIBS" 
   ;;
  esac




  fi


      
  if test "$FREETYPE2_DIR/include" != "/usr/include"; then
    
  if test -z "$FREETYPE2_DIR/include" || echo "$FREETYPE2_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/include
  else
    
    ep_dir="`echo $FREETYPE2_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      
  if test "$FREETYPE2_INC_DIR" != "/usr/include"; then
    
  if test -z "$FREETYPE2_INC_DIR" || echo "$FREETYPE2_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_INC_DIR
  else
    
    ep_dir="`echo $FREETYPE2_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

      cat >> confdefs.h <<\EOF
#define HAVE_LIBFREETYPE 1
EOF

      cat >> confdefs.h <<\EOF
#define ENABLE_GD_TTF 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_freetype_FT_New_Face
    
      { echo "configure: error: Problem with freetype.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  else
    echo "$ac_t""If configure fails try --with-freetype-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_T1LIB" != "no"; then

    for i in $PHP_T1LIB /usr/local /usr; do
      test -f "$i/include/t1lib.h" && GD_T1_DIR=$i && break
    done

    if test -z "$GD_T1_DIR"; then
      { echo "configure: error: Your t1lib distribution is not installed correctly. Please reinstall it." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_T1_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for T1_StrError in -lt1""... $ac_c" 1>&6
echo "configure:38726: checking for T1_StrError in -lt1" >&5
ac_lib_var=`echo t1'_'T1_StrError | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lt1  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 38734 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char T1_StrError();

int main() {
T1_StrError()
; return 0; }
EOF
if { (eval echo configure:38745: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      cat >> confdefs.h <<\EOF
#define HAVE_LIBT1 1
EOF

      
  if test "$GD_T1_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_T1_DIR/include" || echo "$GD_T1_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/include
  else
    
    ep_dir="`echo $GD_T1_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lt1 $GD_SHARED_LIBADD"
    if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case t1 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lt1 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_t1_T1_StrError
    
      { echo "configure: error: Problem with libt1.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD15 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD20 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD204 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETTILE 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETBRUSH 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GDIMAGECOLORRESOLVE 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_COLORCLOSESTHWB 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_WBMP 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_GD2 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_PNG 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_XBM 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_BUNDLED 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_READ 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_CREATE 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGEELLIPSE 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_FONTCACHESHUTDOWN 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_FONTMUTEX 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_DYNAMIC_CTX_EX 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_CTX 1
EOF


  GDLIB_CFLAGS="-DHAVE_LIBPNG"


  if test -n "$GD_JPEG_DIR"; then
    cat >> confdefs.h <<\EOF
#define HAVE_GD_JPG 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBJPEG"
  fi

  if test -n "$GD_XPM_DIR"; then
    cat >> confdefs.h <<\EOF
#define HAVE_GD_XPM 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_XPM"
  fi

  if test -n "$FREETYPE2_DIR"; then
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFT 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFTEX 1
EOF

    cat >> confdefs.h <<\EOF
#define ENABLE_GD_TTF 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBFREETYPE -DENABLE_GD_TTF"
  fi

  if test -n "$USE_GD_JIS_CONV"; then
    cat >> confdefs.h <<\EOF
#define USE_GD_JISX0208 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DJISX0208"
  fi

else

 if test "$PHP_GD" != "no"; then
  GD_MODULE_TYPE=external
  extra_sources="gdcache.c libgd/gd_compat.c libgd/gd_filter.c libgd/gd_pixelate.c libgd/gd_arc.c \
                 libgd/gd_rotate.c libgd/gd_color.c"

  
	if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
		if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
		elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
		else
			{ echo "configure: error: Can't find zlib headers under "$PHP_ZLIB_DIR"" 1>&2; exit 1; }
		fi
	else
		for i in /usr/local /usr; do
			if test -f "$i/include/zlib/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include/zlib"
			elif test -f "$i/include/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include"
			fi
		done
	fi

  
  if test "$PHP_GD_NATIVE_TTF" = "yes"; then
    cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

  fi

  
  if test "$PHP_JPEG_DIR" != "no"; then

    for i in $PHP_JPEG_DIR /usr/local /usr; do
      test -f $i/include/jpeglib.h && GD_JPEG_DIR=$i && break
    done

    if test -z "$GD_JPEG_DIR"; then
      { echo "configure: error: jpeglib.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_JPEG_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:39188: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 39196 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:39207: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  if test "$GD_JPEG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_JPEG_DIR/include" || echo "$GD_JPEG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/include
  else
    
    ep_dir="`echo $GD_JPEG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-ljpeg $GD_SHARED_LIBADD"
    if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case jpeg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljpeg $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_jpeg_jpeg_read_header
    
      { echo "configure: error: Problem with libjpeg.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  else
    echo "$ac_t""If configure fails try --with-jpeg-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_PNG_DIR" != "no"; then

    for i in $PHP_PNG_DIR /usr/local /usr; do
      test -f $i/include/png.h && GD_PNG_DIR=$i && break
    done

    if test -z "$GD_PNG_DIR"; then
      { echo "configure: error: png.h not found." 1>&2; exit 1; }
    fi

    if test "$PHP_ZLIB_DIR" = "no"; then
      { echo "configure: error: PNG support requires ZLIB. Use --with-zlib-dir=<DIR>" 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz -L$GD_PNG_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
echo "configure:39485: checking for png_write_image in -lpng" >&5
ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 39493 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_write_image();

int main() {
png_write_image()
; return 0; }
EOF
if { (eval echo configure:39504: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  if test "$GD_PNG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_PNG_DIR/include" || echo "$GD_PNG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/include
  else
    
    ep_dir="`echo $GD_PNG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lz $GD_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
      
  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
    
  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lpng $GD_SHARED_LIBADD"
    if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case png in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpng $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_png_png_write_image
    
      { echo "configure: error: Problem with libpng.(a|so) or libz.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi


  else
    echo "$ac_t""If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_XPM_DIR" != "no"; then

    for i in $PHP_XPM_DIR /usr/local /usr/X11R6 /usr; do
      test -f $i/$PHP_LIBDIR/libXpm.$SHLIB_SUFFIX_NAME || test -f $i/$PHP_LIBDIR/libXpm.a && GD_XPM_DIR=$i && break
    done

    if test -z "$GD_XPM_DIR"; then
      { echo "configure: error: libXpm.(a|so) not found." 1>&2; exit 1; }
    fi

    for i in include include/X11; do
      test -f $GD_XPM_DIR/$i/xpm.h && GD_XPM_INC=$GD_XPM_DIR/include
    done

    if test -z "$GD_XPM_INC"; then
      { echo "configure: error: xpm.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_XPM_DIR/$PHP_LIBDIR -lX11
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
echo "configure:39884: checking for XpmFreeXpmImage in -lXpm" >&5
ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXpm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 39892 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XpmFreeXpmImage();

int main() {
XpmFreeXpmImage()
; return 0; }
EOF
if { (eval echo configure:39903: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  if test "$GD_XPM_INC" != "/usr/include"; then
    
  if test -z "$GD_XPM_INC" || echo "$GD_XPM_INC" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_INC
  else
    
    ep_dir="`echo $GD_XPM_INC|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_INC\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lXpm $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case Xpm in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lXpm $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lX11 $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case X11 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lX11 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_Xpm_XpmFreeXpmImage
    
      { echo "configure: error: Problem with libXpm.(a|so) or libX11.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  else
    echo "$ac_t""If configure fails try --with-xpm-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_FREETYPE_DIR" != "no"; then

    for i in $PHP_FREETYPE_DIR /usr/local /usr; do
      if test -f "$i/include/freetype2/freetype/freetype.h"; then
        FREETYPE2_DIR=$i
        FREETYPE2_INC_DIR=$i/include/freetype2
        break
      fi
    done

    if test -z "$FREETYPE2_DIR"; then
      { echo "configure: error: freetype.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$FREETYPE2_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for FT_New_Face in -lfreetype""... $ac_c" 1>&6
echo "configure:40278: checking for FT_New_Face in -lfreetype" >&5
ac_lib_var=`echo freetype'_'FT_New_Face | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lfreetype  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 40286 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char FT_New_Face();

int main() {
FT_New_Face()
; return 0; }
EOF
if { (eval echo configure:40297: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lfreetype $GD_SHARED_LIBADD"
    if test -n "$FREETYPE2_DIR/$PHP_LIBDIR"; then
      
  if test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/$PHP_LIBDIR" || echo "$FREETYPE2_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $FREETYPE2_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FREETYPE2_DIR/$PHP_LIBDIR"; then
    
  if test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETYPE2_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/$PHP_LIBDIR" || echo "$FREETYPE2_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $FREETYPE2_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case freetype in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lfreetype $LIBS" 
   ;;
  esac




  fi


      
  if test "$FREETYPE2_DIR/include" != "/usr/include"; then
    
  if test -z "$FREETYPE2_DIR/include" || echo "$FREETYPE2_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/include
  else
    
    ep_dir="`echo $FREETYPE2_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      
  if test "$FREETYPE2_INC_DIR" != "/usr/include"; then
    
  if test -z "$FREETYPE2_INC_DIR" || echo "$FREETYPE2_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_INC_DIR
  else
    
    ep_dir="`echo $FREETYPE2_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

      cat >> confdefs.h <<\EOF
#define HAVE_LIBFREETYPE 1
EOF

      cat >> confdefs.h <<\EOF
#define ENABLE_GD_TTF 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_freetype_FT_New_Face
    
      { echo "configure: error: Problem with freetype.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  else
    echo "$ac_t""If configure fails try --with-freetype-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_T1LIB" != "no"; then

    for i in $PHP_T1LIB /usr/local /usr; do
      test -f "$i/include/t1lib.h" && GD_T1_DIR=$i && break
    done

    if test -z "$GD_T1_DIR"; then
      { echo "configure: error: Your t1lib distribution is not installed correctly. Please reinstall it." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_T1_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for T1_StrError in -lt1""... $ac_c" 1>&6
echo "configure:40614: checking for T1_StrError in -lt1" >&5
ac_lib_var=`echo t1'_'T1_StrError | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lt1  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 40622 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char T1_StrError();

int main() {
T1_StrError()
; return 0; }
EOF
if { (eval echo configure:40633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      cat >> confdefs.h <<\EOF
#define HAVE_LIBT1 1
EOF

      
  if test "$GD_T1_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_T1_DIR/include" || echo "$GD_T1_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/include
  else
    
    ep_dir="`echo $GD_T1_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lt1 $GD_SHARED_LIBADD"
    if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then
      
  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then
    
  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case t1 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lt1 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_t1_T1_StrError
    
      { echo "configure: error: Problem with libt1.(a|so). Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  fi


  for i in include/gd1.3 include/gd include gd1.3 gd ""; do
    test -f "$PHP_GD/$i/gd.h" && GD_INCLUDE="$PHP_GD/$i"
  done

  for i in $PHP_LIBDIR/gd1.3 $PHP_LIBDIR/gd $PHP_LIBDIR gd1.3 gd ""; do
    test -f "$PHP_GD/$i/libgd.$SHLIB_SUFFIX_NAME" || test -f "$PHP_GD/$i/libgd.a" && GD_LIB="$PHP_GD/$i"
  done

  if test -n "$GD_INCLUDE" && test -n "$GD_LIB"; then
    

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lgd $GD_SHARED_LIBADD"
    if test -n "$GD_LIB"; then
      
  if test "$GD_LIB" != "/usr/$PHP_LIBDIR" && test "$GD_LIB" != "/usr/lib"; then
    
  if test -z "$GD_LIB" || echo "$GD_LIB" | grep '^/' >/dev/null ; then
    ai_p=$GD_LIB
  else
    
    ep_dir="`echo $GD_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_LIB\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_LIB"; then
    
  if test "$GD_LIB" != "/usr/$PHP_LIBDIR" && test "$GD_LIB" != "/usr/lib"; then
    
  if test -z "$GD_LIB" || echo "$GD_LIB" | grep '^/' >/dev/null ; then
    ai_p=$GD_LIB
  else
    
    ep_dir="`echo $GD_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_LIB\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case gd in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lgd $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD 1
EOF

    
  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
echo "configure:41008: checking for gdImageString16 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41016 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageString16();

int main() {
gdImageString16()
; return 0; }
EOF
if { (eval echo configure:41027: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageString16
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImagePaletteCopy in -lgd""... $ac_c" 1>&6
echo "configure:41156: checking for gdImagePaletteCopy in -lgd" >&5
ac_lib_var=`echo gd'_'gdImagePaletteCopy | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41164 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImagePaletteCopy();

int main() {
gdImagePaletteCopy()
; return 0; }
EOF
if { (eval echo configure:41175: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD15 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImagePaletteCopy
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageCreateFromPng in -lgd""... $ac_c" 1>&6
echo "configure:41304: checking for gdImageCreateFromPng in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromPng | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41312 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromPng();

int main() {
gdImageCreateFromPng()
; return 0; }
EOF
if { (eval echo configure:41323: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_PNG 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromPng
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageCreateFromGif in -lgd""... $ac_c" 1>&6
echo "configure:41452: checking for gdImageCreateFromGif in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromGif | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41460 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromGif();

int main() {
gdImageCreateFromGif()
; return 0; }
EOF
if { (eval echo configure:41471: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_READ 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromGif
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageGif in -lgd""... $ac_c" 1>&6
echo "configure:41600: checking for gdImageGif in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageGif | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41608 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageGif();

int main() {
gdImageGif()
; return 0; }
EOF
if { (eval echo configure:41619: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_CREATE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageGif
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageWBMP in -lgd""... $ac_c" 1>&6
echo "configure:41748: checking for gdImageWBMP in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageWBMP | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41756 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageWBMP();

int main() {
gdImageWBMP()
; return 0; }
EOF
if { (eval echo configure:41767: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_WBMP 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageWBMP
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageCreateFromJpeg in -lgd""... $ac_c" 1>&6
echo "configure:41896: checking for gdImageCreateFromJpeg in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromJpeg | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41904 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromJpeg();

int main() {
gdImageCreateFromJpeg()
; return 0; }
EOF
if { (eval echo configure:41915: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_JPG 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromJpeg
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageCreateFromXpm in -lgd""... $ac_c" 1>&6
echo "configure:42044: checking for gdImageCreateFromXpm in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromXpm | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42052 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromXpm();

int main() {
gdImageCreateFromXpm()
; return 0; }
EOF
if { (eval echo configure:42063: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_XPM 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromXpm
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageCreateFromGd2 in -lgd""... $ac_c" 1>&6
echo "configure:42192: checking for gdImageCreateFromGd2 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromGd2 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42200 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromGd2();

int main() {
gdImageCreateFromGd2()
; return 0; }
EOF
if { (eval echo configure:42211: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GD2 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromGd2
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageCreateTrueColor in -lgd""... $ac_c" 1>&6
echo "configure:42340: checking for gdImageCreateTrueColor in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateTrueColor | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42348 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateTrueColor();

int main() {
gdImageCreateTrueColor()
; return 0; }
EOF
if { (eval echo configure:42359: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD20 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateTrueColor
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageSetTile in -lgd""... $ac_c" 1>&6
echo "configure:42488: checking for gdImageSetTile in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageSetTile | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42496 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageSetTile();

int main() {
gdImageSetTile()
; return 0; }
EOF
if { (eval echo configure:42507: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETTILE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageSetTile
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageEllipse in -lgd""... $ac_c" 1>&6
echo "configure:42636: checking for gdImageEllipse in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageEllipse | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42644 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageEllipse();

int main() {
gdImageEllipse()
; return 0; }
EOF
if { (eval echo configure:42655: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGEELLIPSE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageEllipse
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageSetBrush in -lgd""... $ac_c" 1>&6
echo "configure:42784: checking for gdImageSetBrush in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageSetBrush | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42792 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageSetBrush();

int main() {
gdImageSetBrush()
; return 0; }
EOF
if { (eval echo configure:42803: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETBRUSH 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageSetBrush
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageStringTTF in -lgd""... $ac_c" 1>&6
echo "configure:42932: checking for gdImageStringTTF in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageStringTTF | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42940 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageStringTTF();

int main() {
gdImageStringTTF()
; return 0; }
EOF
if { (eval echo configure:42951: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGTTF 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageStringTTF
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageStringFT in -lgd""... $ac_c" 1>&6
echo "configure:43080: checking for gdImageStringFT in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageStringFT | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 43088 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageStringFT();

int main() {
gdImageStringFT()
; return 0; }
EOF
if { (eval echo configure:43099: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFT 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageStringFT
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageStringFTEx in -lgd""... $ac_c" 1>&6
echo "configure:43228: checking for gdImageStringFTEx in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageStringFTEx | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 43236 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageStringFTEx();

int main() {
gdImageStringFTEx()
; return 0; }
EOF
if { (eval echo configure:43247: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFTEX 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageStringFTEx
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageColorClosestHWB in -lgd""... $ac_c" 1>&6
echo "configure:43376: checking for gdImageColorClosestHWB in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorClosestHWB | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 43384 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorClosestHWB();

int main() {
gdImageColorClosestHWB()
; return 0; }
EOF
if { (eval echo configure:43395: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_COLORCLOSESTHWB 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageColorClosestHWB
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageColorResolve in -lgd""... $ac_c" 1>&6
echo "configure:43524: checking for gdImageColorResolve in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorResolve | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 43532 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorResolve();

int main() {
gdImageColorResolve()
; return 0; }
EOF
if { (eval echo configure:43543: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GDIMAGECOLORRESOLVE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageColorResolve
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageGifCtx in -lgd""... $ac_c" 1>&6
echo "configure:43672: checking for gdImageGifCtx in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageGifCtx | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 43680 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageGifCtx();

int main() {
gdImageGifCtx()
; return 0; }
EOF
if { (eval echo configure:43691: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_CTX 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageGifCtx
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdCacheCreate in -lgd""... $ac_c" 1>&6
echo "configure:43820: checking for gdCacheCreate in -lgd" >&5
ac_lib_var=`echo gd'_'gdCacheCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 43828 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdCacheCreate();

int main() {
gdCacheCreate()
; return 0; }
EOF
if { (eval echo configure:43839: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_CACHE_CREATE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdCacheCreate
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdFontCacheShutdown in -lgd""... $ac_c" 1>&6
echo "configure:43968: checking for gdFontCacheShutdown in -lgd" >&5
ac_lib_var=`echo gd'_'gdFontCacheShutdown | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 43976 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdFontCacheShutdown();

int main() {
gdFontCacheShutdown()
; return 0; }
EOF
if { (eval echo configure:43987: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_FONTCACHESHUTDOWN 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdFontCacheShutdown
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdFreeFontCache in -lgd""... $ac_c" 1>&6
echo "configure:44116: checking for gdFreeFontCache in -lgd" >&5
ac_lib_var=`echo gd'_'gdFreeFontCache | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 44124 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdFreeFontCache();

int main() {
gdFreeFontCache()
; return 0; }
EOF
if { (eval echo configure:44135: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_FREEFONTCACHE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdFreeFontCache
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdFontCacheMutexSetup in -lgd""... $ac_c" 1>&6
echo "configure:44264: checking for gdFontCacheMutexSetup in -lgd" >&5
ac_lib_var=`echo gd'_'gdFontCacheMutexSetup | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 44272 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdFontCacheMutexSetup();

int main() {
gdFontCacheMutexSetup()
; return 0; }
EOF
if { (eval echo configure:44283: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_FONTMUTEX 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdFontCacheMutexSetup
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdNewDynamicCtxEx in -lgd""... $ac_c" 1>&6
echo "configure:44412: checking for gdNewDynamicCtxEx in -lgd" >&5
ac_lib_var=`echo gd'_'gdNewDynamicCtxEx | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 44420 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdNewDynamicCtxEx();

int main() {
gdNewDynamicCtxEx()
; return 0; }
EOF
if { (eval echo configure:44431: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_DYNAMIC_CTX_EX 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdNewDynamicCtxEx
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageConvolution in -lgd""... $ac_c" 1>&6
echo "configure:44560: checking for gdImageConvolution in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageConvolution | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 44568 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageConvolution();

int main() {
gdImageConvolution()
; return 0; }
EOF
if { (eval echo configure:44579: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGE_CONVOLUTION 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageConvolution
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImagePixelate in -lgd""... $ac_c" 1>&6
echo "configure:44708: checking for gdImagePixelate in -lgd" >&5
ac_lib_var=`echo gd'_'gdImagePixelate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 44716 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImagePixelate();

int main() {
gdImagePixelate()
; return 0; }
EOF
if { (eval echo configure:44727: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGE_PIXELATE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImagePixelate
    
  
fi


  elif test -z "$GD_INCLUDE"; then
    { echo "configure: error: Unable to find gd.h anywhere under $PHP_GD" 1>&2; exit 1; }
  else
    { echo "configure: error: Unable to find libgd.(a|so) anywhere under $PHP_GD" 1>&2; exit 1; }
  fi

  
  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    GD_INCLUDE=$GD_INCLUDE
  else
    
    ep_dir="`echo $GD_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    GD_INCLUDE="$ep_realdir/`basename \"$GD_INCLUDE\"`"
  fi


        old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$GD_INCLUDE
  cat > conftest.$ac_ext <<EOF
#line 44782 "configure"
#include "confdefs.h"

#include <gd.h>
#include <stdlib.h>
  
int main() {

gdIOCtx *ctx;
ctx = malloc(sizeof(gdIOCtx));
ctx->gd_free = 1;
  
; return 0; }
EOF
if { (eval echo configure:44796: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD204 1
EOF

  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  CPPFLAGS=$old_CPPFLAGS

 fi
fi

if test "$PHP_GD" != "no"; then
  
  ext_builddir=ext/gd
  ext_srcdir=$abs_srcdir/ext/gd

  ac_extra=`echo "\\$(GDLIB_CFLAGS)"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_GD_SHARED=no
    
  
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gd"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gd"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_GD_SHARED=yes
      
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_gd="$shared_objects_gd $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpgd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(PHPGD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpgd.so '$ext_builddir'/phpgd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPGD, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(PHPGD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpgd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpgd.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpgd.$suffix: $ext_builddir/phpgd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpgd.$suffix \$(phplibdir)

$ext_builddir/phpgd.$suffix: \$(shared_objects_gd) \$(PHPGD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/gd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(GD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/gd.so '$ext_builddir'/gd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(GD, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(GD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/gd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/gd.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gd.$suffix: $ext_builddir/gd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/gd.$suffix \$(phplibdir)

$ext_builddir/gd.$suffix: \$(shared_objects_gd) \$(GD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_GD 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_GD_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC gd"
        ;;
      *)
        
  
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC gd"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=gd
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libgd"
  


  if test "$GD_MODULE_TYPE" = "builtin"; then
    GDLIB_CFLAGS="-I$ext_srcdir/libgd $GDLIB_CFLAGS"
    GD_HEADER_DIRS="ext/gd/ ext/gd/libgd/"

    
  old_LIBS=$LIBS
  LIBS=" $GD_SHARED_LIBADD  $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 45127 "configure"
#include "confdefs.h"

    char foobar () {}
    char foobar();
    int main() {
      foobar();
      return 0;
    }
  
EOF
if { (eval echo configure:45138: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
      { echo "configure: error: GD build test failed. Please check the config.log for details." 1>&2; exit 1; }
    
  
fi
rm -fr conftest*
fi


  else
    GD_HEADER_DIRS="ext/gd/"
    GDLIB_CFLAGS="-I$GD_INCLUDE $GDLIB_CFLAGS"
    
  if test "$GD_INCLUDE" != "/usr/include"; then
    
  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$GD_INCLUDE
  else
    
    ep_dir="`echo $GD_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$GD_LIB $GD_SHARED_LIBADD "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gdImageCreate in -lgd""... $ac_c" 1>&6
echo "configure:45289: checking for gdImageCreate in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 45297 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreate();

int main() {
gdImageCreate()
; return 0; }
EOF
if { (eval echo configure:45308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreate
    
      { echo "configure: error: GD build test failed. Please check the config.log for details." 1>&2; exit 1; }
    
  
fi

  fi

  
  
    for header_file in $GD_HEADER_DIRS; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GDLIB_CFLAGS"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GD_SHARED_LIBADD"

fi



php_with_gettext=no

echo $ac_n "checking for GNU gettext support""... $ac_c" 1>&6
echo "configure:45373: checking for GNU gettext support" >&5
# Check whether --with-gettext or --without-gettext was given.
if test "${with_gettext+set}" = set; then
  withval="$with_gettext"
  PHP_GETTEXT=$withval
else
  
  PHP_GETTEXT=no
  test "$PHP_ENABLE_ALL" && PHP_GETTEXT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GETTEXT in
shared,*)
  PHP_GETTEXT=`echo "$PHP_GETTEXT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_GETTEXT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_GETTEXT" != "no"; then
  for i in $PHP_GETTEXT /usr/local /usr; do
    test -r $i/include/libintl.h && GETTEXT_DIR=$i && break
  done

  if test -z "$GETTEXT_DIR"; then
    { echo "configure: error: Cannot locate header file libintl.h" 1>&2; exit 1; }
  fi

  GETTEXT_LIBDIR=$GETTEXT_DIR/$PHP_LIBDIR
  GETTEXT_INCDIR=$GETTEXT_DIR/include
  
  O_LDFLAGS=$LDFLAGS
  LDFLAGS="$LDFLAGS -L$GETTEXT_LIBDIR"
  echo $ac_n "checking for bindtextdomain in -lintl""... $ac_c" 1>&6
echo "configure:45428: checking for bindtextdomain in -lintl" >&5
ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lintl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 45436 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bindtextdomain();

int main() {
bindtextdomain()
; return 0; }
EOF
if { (eval echo configure:45447: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
	GETTEXT_LIBS=intl
	GETTEXT_CHECK_IN_LIB=intl
	
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for bindtextdomain in -lc""... $ac_c" 1>&6
echo "configure:45469: checking for bindtextdomain in -lc" >&5
ac_lib_var=`echo c'_'bindtextdomain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 45477 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bindtextdomain();

int main() {
bindtextdomain()
; return 0; }
EOF
if { (eval echo configure:45488: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
		GETTEXT_LIBS=
		GETTEXT_CHECK_IN_LIB=c
	
else
  echo "$ac_t""no" 1>&6

		{ echo "configure: error: Unable to find required gettext library" 1>&2; exit 1; }
	
fi

  
fi

  LDFLAGS=$O_LDFLAGS

  cat >> confdefs.h <<\EOF
#define HAVE_LIBINTL 1
EOF

  
  ext_builddir=ext/gettext
  ext_srcdir=$abs_srcdir/ext/gettext

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_GETTEXT_SHARED=no
    
  
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gettext"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gettext"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_GETTEXT_SHARED=yes
      
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_gettext="$shared_objects_gettext $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpgettext.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(PHPGETTEXT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpgettext.so '$ext_builddir'/phpgettext.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPGETTEXT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(PHPGETTEXT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpgettext.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpgettext.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gettext"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpgettext.$suffix: $ext_builddir/phpgettext.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpgettext.$suffix \$(phplibdir)

$ext_builddir/phpgettext.$suffix: \$(shared_objects_gettext) \$(PHPGETTEXT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/gettext.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(GETTEXT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/gettext.so '$ext_builddir'/gettext.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(GETTEXT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(GETTEXT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/gettext.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/gettext.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gettext"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gettext.$suffix: $ext_builddir/gettext.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/gettext.$suffix \$(phplibdir)

$ext_builddir/gettext.$suffix: \$(shared_objects_gettext) \$(GETTEXT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_GETTEXT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_GETTEXT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC gettext"
        ;;
      *)
        
  
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC gettext"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=gettext
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GETTEXT_SHARED_LIBADD"


  if test -n "$GETTEXT_LIBS"; then
    

  if test "$ext_shared" = "yes"; then
    GETTEXT_SHARED_LIBADD="-l$GETTEXT_LIBS $GETTEXT_SHARED_LIBADD"
    if test -n "$GETTEXT_LIBDIR"; then
      
  if test "$GETTEXT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GETTEXT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_LIBDIR
  else
    
    ep_dir="`echo $GETTEXT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GETTEXT_SHARED_LIBADD="-L$ai_p $GETTEXT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GETTEXT_SHARED_LIBADD="$ld_runpath_switch$ai_p $GETTEXT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GETTEXT_LIBDIR"; then
    
  if test "$GETTEXT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GETTEXT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_LIBDIR
  else
    
    ep_dir="`echo $GETTEXT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $GETTEXT_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$GETTEXT_LIBS $LIBS" 
   ;;
  esac




  fi


  fi

  
  if test "$GETTEXT_INCDIR" != "/usr/include"; then
    
  if test -z "$GETTEXT_INCDIR" || echo "$GETTEXT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_INCDIR
  else
    
    ep_dir="`echo $GETTEXT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  echo $ac_n "checking for ngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:45952: checking for ngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'ngettext | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 45960 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ngettext();

int main() {
ngettext()
; return 0; }
EOF
if { (eval echo configure:45971: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_NGETTEXT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for dngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:45995: checking for dngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dngettext | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 46003 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dngettext();

int main() {
dngettext()
; return 0; }
EOF
if { (eval echo configure:46014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DNGETTEXT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:46038: checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dcngettext | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 46046 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dcngettext();

int main() {
dcngettext()
; return 0; }
EOF
if { (eval echo configure:46057: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DCNGETTEXT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:46081: checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'bind_textdomain_codeset | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 46089 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bind_textdomain_codeset();

int main() {
bind_textdomain_codeset()
; return 0; }
EOF
if { (eval echo configure:46100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_BIND_TEXTDOMAIN_CODESET 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  
fi



php_with_gmp=no

echo $ac_n "checking for GNU MP support""... $ac_c" 1>&6
echo "configure:46131: checking for GNU MP support" >&5
# Check whether --with-gmp or --without-gmp was given.
if test "${with_gmp+set}" = set; then
  withval="$with_gmp"
  PHP_GMP=$withval
else
  
  PHP_GMP=no
  test "$PHP_ENABLE_ALL" && PHP_GMP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GMP in
shared,*)
  PHP_GMP=`echo "$PHP_GMP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_GMP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_GMP" != "no"; then

  for i in $PHP_GMP /usr/local /usr; do
    test -f $i/include/gmp.h && GMP_DIR=$i && break
  done

  if test -z "$GMP_DIR"; then
    { echo "configure: error: Unable to locate gmp.h" 1>&2; exit 1; }
  fi
 
  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$GMP_DIR/$PHP_LIBDIR
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for __gmp_randinit_lc_2exp_size in -lgmp""... $ac_c" 1>&6
echo "configure:46279: checking for __gmp_randinit_lc_2exp_size in -lgmp" >&5
ac_lib_var=`echo gmp'_'__gmp_randinit_lc_2exp_size | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgmp  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 46287 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gmp_randinit_lc_2exp_size();

int main() {
__gmp_randinit_lc_2exp_size()
; return 0; }
EOF
if { (eval echo configure:46298: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gmp___gmp_randinit_lc_2exp_size
    
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GMP_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for gmp_randinit_lc_2exp_size in -lgmp""... $ac_c" 1>&6
echo "configure:46423: checking for gmp_randinit_lc_2exp_size in -lgmp" >&5
ac_lib_var=`echo gmp'_'gmp_randinit_lc_2exp_size | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgmp  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 46431 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gmp_randinit_lc_2exp_size();

int main() {
gmp_randinit_lc_2exp_size()
; return 0; }
EOF
if { (eval echo configure:46442: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gmp_gmp_randinit_lc_2exp_size
    
      { echo "configure: error: GNU MP Library version 4.1.2 or greater required." 1>&2; exit 1; }
    
  
fi

  
  
fi


  

  if test "$ext_shared" = "yes"; then
    GMP_SHARED_LIBADD="-lgmp $GMP_SHARED_LIBADD"
    if test -n "$GMP_DIR/$PHP_LIBDIR"; then
      
  if test "$GMP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GMP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GMP_DIR/$PHP_LIBDIR" || echo "$GMP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GMP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GMP_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GMP_SHARED_LIBADD="-L$ai_p $GMP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $GMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GMP_DIR/$PHP_LIBDIR"; then
    
  if test "$GMP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GMP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GMP_DIR/$PHP_LIBDIR" || echo "$GMP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $GMP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GMP_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case gmp in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lgmp $LIBS" 
   ;;
  esac




  fi


  
  if test "$GMP_DIR/include" != "/usr/include"; then
    
  if test -z "$GMP_DIR/include" || echo "$GMP_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/include
  else
    
    ep_dir="`echo $GMP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GMP_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  ext_builddir=ext/gmp
  ext_srcdir=$abs_srcdir/ext/gmp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_GMP_SHARED=no
    
  
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gmp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gmp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_GMP_SHARED=yes
      
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_gmp="$shared_objects_gmp $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpgmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(PHPGMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpgmp.so '$ext_builddir'/phpgmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPGMP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(PHPGMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpgmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpgmp.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpgmp.$suffix: $ext_builddir/phpgmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpgmp.$suffix \$(phplibdir)

$ext_builddir/phpgmp.$suffix: \$(shared_objects_gmp) \$(PHPGMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/gmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(GMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/gmp.so '$ext_builddir'/gmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(GMP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(GMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/gmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/gmp.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gmp.$suffix: $ext_builddir/gmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/gmp.$suffix \$(phplibdir)

$ext_builddir/gmp.$suffix: \$(shared_objects_gmp) \$(GMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_GMP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_GMP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC gmp"
        ;;
      *)
        
  
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC gmp"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=gmp
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GMP_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_GMP 1
EOF

fi



php_with_mhash=no

echo $ac_n "checking for mhash support""... $ac_c" 1>&6
echo "configure:46914: checking for mhash support" >&5
# Check whether --with-mhash or --without-mhash was given.
if test "${with_mhash+set}" = set; then
  withval="$with_mhash"
  PHP_MHASH=$withval
else
  
  PHP_MHASH=no
  test "$PHP_ENABLE_ALL" && PHP_MHASH=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MHASH in
shared,*)
  PHP_MHASH=`echo "$PHP_MHASH"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MHASH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_enable_hash=yes

echo $ac_n "checking whether to enable hash support""... $ac_c" 1>&6
echo "configure:46958: checking whether to enable hash support" >&5
# Check whether --enable-hash or --disable-hash was given.
if test "${enable_hash+set}" = set; then
  enableval="$enable_hash"
  PHP_HASH=$enableval
else
  
  PHP_HASH=yes
  test "$PHP_ENABLE_ALL" && PHP_HASH=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_HASH in
shared,*)
  PHP_HASH=`echo "$PHP_HASH"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_HASH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MHASH" != "no"; then
  if test "$PHP_HASH" = "no"; then
    PHP_HASH="yes"
  fi

  cat >> confdefs.h <<\EOF
#define PHP_MHASH_BC 1
EOF

fi

if test "$PHP_HASH" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_HASH_EXT 1
EOF


  echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
echo "configure:47016: checking whether byte ordering is bigendian" >&5
if eval "test \"`echo '$''{'ac_cv_c_bigendian_php'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  ac_cv_c_bigendian_php=unknown
  if test "$cross_compiling" = yes; then
  ac_cv_c_bigendian_php=unknown
else
  cat > conftest.$ac_ext <<EOF
#line 47026 "configure"
#include "confdefs.h"

int main(void)
{
  short one = 1;
  char *cp = (char *)&one;

  if (*cp == 0) {
    return(0);
  } else {
    return(1);
  }
}
  
EOF
if { (eval echo configure:47042: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_bigendian_php=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_bigendian_php=no
fi
rm -fr conftest*
fi

 
fi

echo "$ac_t""$ac_cv_c_bigendian_php" 1>&6
 if test $ac_cv_c_bigendian_php = yes; then
   cat >> confdefs.h <<\EOF
#define WORDS_BIGENDIAN 
EOF

 fi


  echo $ac_n "checking size of short""... $ac_c" 1>&6
echo "configure:47067: checking size of short" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_short=2
else
  cat > conftest.$ac_ext <<EOF
#line 47075 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(short));
  exit(0);
}
EOF
if { (eval echo configure:47086: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_short=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_short=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_short" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
EOF


  echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:47106: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 47114 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:47125: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF


  echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:47145: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=4
else
  cat > conftest.$ac_ext <<EOF
#line 47153 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:47164: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


  echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:47184: checking size of long long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 47192 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long long));
  exit(0);
}
EOF
if { (eval echo configure:47203: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF


  
  EXT_HASH_SOURCES="hash.c hash_md.c hash_sha.c hash_ripemd.c hash_haval.c \
    hash_tiger.c hash_gost.c hash_snefru.c hash_whirlpool.c hash_adler32.c \
    hash_crc32.c hash_salsa.c"
  EXT_HASH_HEADERS="php_hash.h php_hash_md.h php_hash_sha.h php_hash_ripemd.h \
    php_hash_haval.h php_hash_tiger.h php_hash_gost.h php_hash_snefru.h \
    php_hash_whirlpool.h php_hash_adler32.h php_hash_crc32.h php_hash_salsa.h \
    php_hash_types.h"
  
  
  ext_builddir=ext/hash
  ext_srcdir=$abs_srcdir/ext/hash

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_HASH_SHARED=no
    
  
  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC hash"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC hash"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_HASH_SHARED=yes
      
  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_hash="$shared_objects_hash $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phphash.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(PHPHASH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phphash.so '$ext_builddir'/phphash.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPHASH, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(PHPHASH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phphash.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phphash.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_hash"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phphash.$suffix: $ext_builddir/phphash.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phphash.$suffix \$(phplibdir)

$ext_builddir/phphash.$suffix: \$(shared_objects_hash) \$(PHPHASH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/hash.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(HASH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/hash.so '$ext_builddir'/hash.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(HASH, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(HASH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/hash.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/hash.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_hash"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/hash.$suffix: $ext_builddir/hash.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/hash.$suffix \$(phplibdir)

$ext_builddir/hash.$suffix: \$(shared_objects_hash) \$(HASH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_HASH 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_HASH_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC hash"
        ;;
      *)
        
  
  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC hash"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=hash
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  	
  
    header_path=ext/hash
    for header_file in $EXT_HASH_HEADERS; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

  
fi



php_with_iconv=yes

echo $ac_n "checking for iconv support""... $ac_c" 1>&6
echo "configure:47552: checking for iconv support" >&5
# Check whether --with-iconv or --without-iconv was given.
if test "${with_iconv+set}" = set; then
  withval="$with_iconv"
  PHP_ICONV=$withval
else
  
  PHP_ICONV=yes
  test "$PHP_ENABLE_ALL" && PHP_ICONV=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ICONV in
shared,*)
  PHP_ICONV=`echo "$PHP_ICONV"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ICONV=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ICONV" != "no"; then

  
  found_iconv=no
  unset ICONV_DIR

  # Create the directories for a VPATH build:
  $php_shtool mkdir -p ext/iconv

  echo > ext/iconv/php_have_bsd_iconv.h
  echo > ext/iconv/php_have_ibm_iconv.h
  echo > ext/iconv/php_have_glibc_iconv.h
  echo > ext/iconv/php_have_libiconv.h
  echo > ext/iconv/php_have_iconv.h
  echo > ext/iconv/php_php_iconv_impl.h
  echo > ext/iconv/php_iconv_aliased_libiconv.h
  echo > ext/iconv/php_php_iconv_h_path.h
  echo > ext/iconv/php_iconv_supports_errno.h

      
  if test "$PHP_ICONV" = "yes"; then
            LIBS_save="$LIBS"
    LIBS=
    echo $ac_n "checking for iconv""... $ac_c" 1>&6
echo "configure:47616: checking for iconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47621 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char iconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_iconv) || defined (__stub___iconv)
choke me
#else
iconv();
#endif

; return 0; }
EOF
if { (eval echo configure:47644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_iconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_iconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      found_iconv=yes
    
else
  echo "$ac_t""no" 1>&6

      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
echo "configure:47665: checking for libiconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47670 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char libiconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_libiconv) || defined (__stub___libiconv)
choke me
#else
libiconv();
#endif

; return 0; }
EOF
if { (eval echo configure:47693: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_libiconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_libiconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        
  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_LIBICONV 1
EOF

        found_iconv=yes
      
else
  echo "$ac_t""no" 1>&6
fi

    
fi

    LIBS="$LIBS_save"
  fi

        if test "$found_iconv" = "no"; then

    for i in $PHP_ICONV /usr/local /usr; do
      if test -r $i/include/giconv.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_GICONV_H 1
EOF

        ICONV_DIR=$i
        iconv_lib_name=giconv
        break
      elif test -r $i/include/iconv.h; then
        ICONV_DIR=$i
        iconv_lib_name=iconv
        break
      fi
    done

    if test -z "$ICONV_DIR"; then
      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
    fi
  
    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
    then
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$ICONV_DIR/$PHP_LIBDIR
      "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:47850: checking for libiconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 47858 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {
libiconv()
; return 0; }
EOF
if { (eval echo configure:47869: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        found_iconv=yes
        
  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_LIBICONV 1
EOF

        
  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h

        cat >> confdefs.h <<\EOF
#define ICONV_ALIASED_LIBICONV 1
EOF

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_libiconv
    
        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$ICONV_DIR/$PHP_LIBDIR
        "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:48010: checking for iconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 48018 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:48029: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
          found_iconv=yes
        
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_iconv
    
  
fi

      
  
fi

    fi
  fi

  if test "$found_iconv" = "yes"; then
    
  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h

    cat >> confdefs.h <<\EOF
#define HAVE_ICONV 1
EOF

    if test -n "$ICONV_DIR"; then
      

  if test "$ext_shared" = "yes"; then
    ICONV_SHARED_LIBADD="-l$iconv_lib_name $ICONV_SHARED_LIBADD"
    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
      
  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ICONV_SHARED_LIBADD="-L$ai_p $ICONV_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ICONV_SHARED_LIBADD="$ld_runpath_switch$ai_p $ICONV_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
    
  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $iconv_lib_name in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$iconv_lib_name $LIBS" 
   ;;
  esac




  fi


      
  if test "$ICONV_DIR/include" != "/usr/include"; then
    
  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/include
  else
    
    ep_dir="`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi
    
    iconv_avail="yes";
  
else 
    iconv_avail="no";
  
  fi


  if test "$iconv_avail" != "no"; then
    if test -z "$ICONV_DIR"; then
      for i in /usr/local /usr; do
        if test -f "$i/include/iconv.h" || test -f "$i/include/giconv.h"; then
          PHP_ICONV_PREFIX="$i"
          break
        fi
      done
      if test -z "$PHP_ICONV_PREFIX"; then
        PHP_ICONV_PREFIX="/usr"
      fi
    else
      PHP_ICONV_PREFIX="$ICONV_DIR"
    fi

    CFLAGS="-I$PHP_ICONV_PREFIX/include $CFLAGS"
    LDFLAGS="-L$PHP_ICONV_PREFIX/$PHP_LIBDIR $LDFLAGS"

    if test -r "$PHP_ICONV_PREFIX/include/giconv.h"; then
      PHP_ICONV_H_PATH="$PHP_ICONV_PREFIX/include/giconv.h"
    else
      PHP_ICONV_H_PATH="$PHP_ICONV_PREFIX/include/iconv.h"
    fi 

    echo $ac_n "checking if iconv is glibc's""... $ac_c" 1>&6
echo "configure:48240: checking if iconv is glibc's" >&5
    cat > conftest.$ac_ext <<EOF
#line 48242 "configure"
#include "confdefs.h"
#include <gnu/libc-version.h>
int main() {
gnu_get_libc_version();
; return 0; }
EOF
if { (eval echo configure:48249: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
      iconv_impl_name="glibc"
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      echo "$ac_t""no" 1>&6
    
fi
rm -f conftest*

    if test -z "$iconv_impl_name"; then
      echo $ac_n "checking if using GNU libiconv""... $ac_c" 1>&6
echo "configure:48267: checking if using GNU libiconv" >&5
      php_iconv_old_ld="$LDFLAGS"
      LDFLAGS="-liconv $LDFLAGS"
      if test "$cross_compiling" = yes; then
  
        echo "$ac_t""no" 1>&6
        LDFLAGS="$php_iconv_old_ld"
      
else
  cat > conftest.$ac_ext <<EOF
#line 48277 "configure"
#include "confdefs.h"

#include <$PHP_ICONV_H_PATH>
int main() {
	printf("%d", _libiconv_version);
	return 0;
}
      
EOF
if { (eval echo configure:48287: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
        echo "$ac_t""yes" 1>&6
        iconv_impl_name="gnu_libiconv"
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
        echo "$ac_t""no" 1>&6
        LDFLAGS="$php_iconv_old_ld"
      
fi
rm -fr conftest*
fi

    fi

    if test -z "$iconv_impl_name"; then
      echo $ac_n "checking if iconv is Konstantin Chuguev's""... $ac_c" 1>&6
echo "configure:48309: checking if iconv is Konstantin Chuguev's" >&5
      cat > conftest.$ac_ext <<EOF
#line 48311 "configure"
#include "confdefs.h"
#include <iconv.h>
int main() {
iconv_ccs_init(NULL, NULL);
; return 0; }
EOF
if { (eval echo configure:48318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
        echo "$ac_t""yes" 1>&6
        iconv_impl_name="bsd"
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
        echo "$ac_t""no" 1>&6
      
fi
rm -f conftest*
    fi

    if test -z "$iconv_impl_name"; then
      echo $ac_n "checking if using IBM iconv""... $ac_c" 1>&6
echo "configure:48337: checking if using IBM iconv" >&5
      php_iconv_old_ld="$LDFLAGS"
      LDFLAGS="-liconv $LDFLAGS"
      cat > conftest.$ac_ext <<EOF
#line 48341 "configure"
#include "confdefs.h"
#include <iconv.h>
int main() {
cstoccsid("");
; return 0; }
EOF
if { (eval echo configure:48348: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
        echo "$ac_t""yes" 1>&6
        iconv_impl_name="ibm"
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
        echo "$ac_t""no" 1>&6
        LDFLAGS="$php_iconv_old_ld"
      
fi
rm -f conftest*
    fi

    echo > ext/iconv/php_have_bsd_iconv.h
    echo > ext/iconv/php_have_glibc_iconv.h
    echo > ext/iconv/php_have_libiconv.h
    echo > ext/iconv/php_have_ibm_iconv.h

    case "$iconv_impl_name" in
      gnu_libiconv )
        
  echo "#define PHP_ICONV_IMPL \"libiconv\"" > ext/iconv/php_php_iconv_impl.h

        cat >> confdefs.h <<\EOF
#define PHP_ICONV_IMPL "libiconv"
EOF

        
  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h

        

  if test "$ext_shared" = "yes"; then
    ICONV_SHARED_LIBADD="-liconv $ICONV_SHARED_LIBADD"
    if test -n ""$PHP_ICONV_PREFIX/$PHP_LIBDIR""; then
      
  if test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/$PHP_LIBDIR" && test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/lib"; then
    
  if test -z ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" || echo ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" | grep '^/' >/dev/null ; then
    ai_p="$PHP_ICONV_PREFIX/$PHP_LIBDIR"
  else
    
    ep_dir="`echo "$PHP_ICONV_PREFIX/$PHP_LIBDIR"|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$PHP_ICONV_PREFIX/$PHP_LIBDIR"\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ICONV_SHARED_LIBADD="-L$ai_p $ICONV_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ICONV_SHARED_LIBADD="$ld_runpath_switch$ai_p $ICONV_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n ""$PHP_ICONV_PREFIX/$PHP_LIBDIR""; then
    
  if test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/$PHP_LIBDIR" && test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/lib"; then
    
  if test -z ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" || echo ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" | grep '^/' >/dev/null ; then
    ai_p="$PHP_ICONV_PREFIX/$PHP_LIBDIR"
  else
    
    ep_dir="`echo "$PHP_ICONV_PREFIX/$PHP_LIBDIR"|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$PHP_ICONV_PREFIX/$PHP_LIBDIR"\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case iconv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-liconv $LIBS" 
   ;;
  esac




  fi


        ;;

      bsd )
        
  echo "#define HAVE_BSD_ICONV 1" > ext/iconv/php_have_bsd_iconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_BSD_ICONV 1
EOF

        
  echo "#define PHP_ICONV_IMPL \"BSD iconv\"" > ext/iconv/php_php_iconv_impl.h

        cat >> confdefs.h <<\EOF
#define PHP_ICONV_IMPL "BSD iconv"
EOF

        ;;

      glibc )
        
  echo "#define HAVE_GLIBC_ICONV 1" > ext/iconv/php_have_glibc_iconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_GLIBC_ICONV 1
EOF

        
  echo "#define PHP_ICONV_IMPL \"glibc\"" > ext/iconv/php_php_iconv_impl.h

        cat >> confdefs.h <<\EOF
#define PHP_ICONV_IMPL "glibc"
EOF

        ;;
      ibm )
        
  echo "#define HAVE_IBM_ICONV 1" > ext/iconv/php_have_ibm_iconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_IBM_ICONV 1
EOF

        
  echo "#define PHP_ICONV_IMPL \"IBM iconv\"" > ext/iconv/php_php_iconv_impl.h

        cat >> confdefs.h <<\EOF
#define PHP_ICONV_IMPL "IBM iconv"
EOF

        ;;
    esac

    echo $ac_n "checking if iconv supports errno""... $ac_c" 1>&6
echo "configure:48534: checking if iconv supports errno" >&5
    if test "$cross_compiling" = yes; then
  
      echo "$ac_t""no" 1>&6
      
  echo "#define ICONV_SUPPORTS_ERRNO 0" > ext/iconv/php_iconv_supports_errno.h

      cat >> confdefs.h <<\EOF
#define ICONV_SUPPORTS_ERRNO 0
EOF

    
else
  cat > conftest.$ac_ext <<EOF
#line 48548 "configure"
#include "confdefs.h"

#include <$PHP_ICONV_H_PATH>
#include <errno.h>

int main() {
  iconv_t cd;
  cd = iconv_open( "*blahblah*", "*blahblah*" );
  if (cd == (iconv_t)(-1)) {
    if (errno == EINVAL) {
      return 0;
	} else {
      return 1;
    }
  }
  iconv_close( cd );
  return 2;
}
    
EOF
if { (eval echo configure:48569: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      echo "$ac_t""yes" 1>&6
      
  echo "#define ICONV_SUPPORTS_ERRNO 1" > ext/iconv/php_iconv_supports_errno.h

      cat >> confdefs.h <<\EOF
#define ICONV_SUPPORTS_ERRNO 1
EOF

    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      echo "$ac_t""no" 1>&6
      
  echo "#define ICONV_SUPPORTS_ERRNO 0" > ext/iconv/php_iconv_supports_errno.h

      cat >> confdefs.h <<\EOF
#define ICONV_SUPPORTS_ERRNO 0
EOF

    
fi
rm -fr conftest*
fi


    echo $ac_n "checking if your cpp allows macro usage in include lines""... $ac_c" 1>&6
echo "configure:48601: checking if your cpp allows macro usage in include lines" >&5
    cat > conftest.$ac_ext <<EOF
#line 48603 "configure"
#include "confdefs.h"

#define FOO <$PHP_ICONV_H_PATH>
#include FOO
    
int main() {

; return 0; }
EOF
if { (eval echo configure:48613: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
      
  echo "#define PHP_ICONV_H_PATH <$PHP_ICONV_H_PATH>" > ext/iconv/php_php_iconv_h_path.h

      cat >> confdefs.h <<EOF
#define PHP_ICONV_H_PATH <$PHP_ICONV_H_PATH>
EOF

    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      echo "$ac_t""no" 1>&6
    
fi
rm -f conftest*

    
  ext_builddir=ext/iconv
  ext_srcdir=$abs_srcdir/ext/iconv

  ac_extra=`echo "-I\"$PHP_ICONV_PREFIX/include\""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ICONV_SHARED=no
    
  
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC iconv"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC iconv"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ICONV_SHARED=yes
      
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_iconv="$shared_objects_iconv $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpiconv.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(PHPICONV_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpiconv.so '$ext_builddir'/phpiconv.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPICONV, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(PHPICONV_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpiconv.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpiconv.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_iconv"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpiconv.$suffix: $ext_builddir/phpiconv.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpiconv.$suffix \$(phplibdir)

$ext_builddir/phpiconv.$suffix: \$(shared_objects_iconv) \$(PHPICONV_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/iconv.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(ICONV_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/iconv.so '$ext_builddir'/iconv.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ICONV, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(ICONV_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/iconv.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/iconv.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_iconv"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/iconv.$suffix: $ext_builddir/iconv.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/iconv.$suffix \$(phplibdir)

$ext_builddir/iconv.$suffix: \$(shared_objects_iconv) \$(ICONV_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_ICONV 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ICONV_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC iconv"
        ;;
      *)
        
  
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC iconv"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=iconv
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST ICONV_SHARED_LIBADD"

    
  
    for header_file in ext/iconv/; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  else
    { echo "configure: error: Please reinstall the iconv library." 1>&2; exit 1; }
  fi
fi














php_with_imap=no

echo $ac_n "checking for IMAP support""... $ac_c" 1>&6
echo "configure:48969: checking for IMAP support" >&5
# Check whether --with-imap or --without-imap was given.
if test "${with_imap+set}" = set; then
  withval="$with_imap"
  PHP_IMAP=$withval
else
  
  PHP_IMAP=no
  test "$PHP_ENABLE_ALL" && PHP_IMAP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IMAP in
shared,*)
  PHP_IMAP=`echo "$PHP_IMAP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_IMAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_kerberos=no

echo $ac_n "checking for IMAP Kerberos support""... $ac_c" 1>&6
echo "configure:49013: checking for IMAP Kerberos support" >&5
# Check whether --with-kerberos or --without-kerberos was given.
if test "${with_kerberos+set}" = set; then
  withval="$with_kerberos"
  PHP_KERBEROS=$withval
else
  
  PHP_KERBEROS=no
  

fi


ext_output=$PHP_KERBEROS
echo "$ac_t""$ext_output" 1>&6





php_with_imap_ssl=no

echo $ac_n "checking for IMAP SSL support""... $ac_c" 1>&6
echo "configure:49036: checking for IMAP SSL support" >&5
# Check whether --with-imap-ssl or --without-imap-ssl was given.
if test "${with_imap_ssl+set}" = set; then
  withval="$with_imap_ssl"
  PHP_IMAP_SSL=$withval
else
  
  PHP_IMAP_SSL=no
  

fi


ext_output=$PHP_IMAP_SSL
echo "$ac_t""$ext_output" 1>&6





if test "$PHP_IMAP" != "no"; then  
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST IMAP_SHARED_LIBADD"

    
  ext_builddir=ext/imap
  ext_srcdir=$abs_srcdir/ext/imap

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_IMAP_SHARED=no
    
  
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC imap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC imap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_IMAP_SHARED=yes
      
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_imap="$shared_objects_imap $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpimap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(PHPIMAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpimap.so '$ext_builddir'/phpimap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPIMAP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(PHPIMAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpimap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpimap.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_imap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpimap.$suffix: $ext_builddir/phpimap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpimap.$suffix \$(phplibdir)

$ext_builddir/phpimap.$suffix: \$(shared_objects_imap) \$(PHPIMAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/imap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(IMAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/imap.so '$ext_builddir'/imap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(IMAP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(IMAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/imap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/imap.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_imap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/imap.$suffix: $ext_builddir/imap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/imap.$suffix \$(phplibdir)

$ext_builddir/imap.$suffix: \$(shared_objects_imap) \$(IMAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_IMAP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_IMAP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC imap"
        ;;
      *)
        
  
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC imap"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=imap
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    cat >> confdefs.h <<\EOF
#define HAVE_IMAP 1
EOF


    for i in $PHP_IMAP /usr/local /usr; do
      if test -r "$i/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i
    break
  elif test -r "$i/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i
	break

      elif test -r "$i/include/c-client/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include/c-client
    break
  elif test -r "$i/include/c-client/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/include/c-client
	break

      elif test -r "$i/include/imap/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include/imap
    break
  elif test -r "$i/include/imap/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/include/imap
	break

      elif test -r "$i/include/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include
    break
  elif test -r "$i/include/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/include
	break

      elif test -r "$i/imap/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/imap
    break
  elif test -r "$i/imap/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/imap
	break

      elif test -r "$i/c-client/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/c-client
    break
  elif test -r "$i/c-client/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/c-client
	break

      fi
    done

        cat > conftest.$ac_ext <<EOF
#line 49440 "configure"
#include "confdefs.h"
#include <$IMAP_INC_DIR/mail.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "mail_fetch_overview_sequence" >/dev/null 2>&1; then
  rm -rf conftest*
  
      cat >> confdefs.h <<\EOF
#define HAVE_IMAP2004 1
EOF

    
fi
rm -f conftest*


        old_CFLAGS=$CFLAGS
    CFLAGS="-I$IMAP_INC_DIR"
    echo $ac_n "checking for utf8_mime2text signature""... $ac_c" 1>&6
echo "configure:49460: checking for utf8_mime2text signature" >&5
if eval "test \"`echo '$''{'ac_cv_utf8_mime2text'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 49465 "configure"
#include "confdefs.h"

#include <stdio.h>
#include <c-client.h>
      
int main() {

        SIZEDTEXT *src, *dst;
        utf8_mime2text(src, dst);
      
; return 0; }
EOF
if { (eval echo configure:49478: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
        ac_cv_utf8_mime2text=old
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
        ac_cv_utf8_mime2text=new
      
fi
rm -f conftest*
    
fi

echo "$ac_t""$ac_cv_utf8_mime2text" 1>&6
    if test "$ac_cv_utf8_mime2text" = "new"; then
      cat >> confdefs.h <<\EOF
#define HAVE_NEW_MIME2TEXT 1
EOF

    fi
    CFLAGS=$old_CFLAGS

    old_CFLAGS=$CFLAGS
    CFLAGS="-I$IMAP_INC_DIR"
    echo $ac_n "checking for U8T_DECOMPOSE""... $ac_c" 1>&6
echo "configure:49507: checking for U8T_DECOMPOSE" >&5
if eval "test \"`echo '$''{'ac_cv_u8t_canonical'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 49512 "configure"
#include "confdefs.h"

#include <c-client.h>
      
int main() {

         int i = U8T_CANONICAL;
      
; return 0; }
EOF
if { (eval echo configure:49523: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
         ac_cv_u8t_decompose=yes
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
         ac_cv_u8t_decompose=no
      
fi
rm -f conftest*
    
fi

echo "$ac_t""$ac_cv_u8t_canonical" 1>&6
    CFLAGS=$old_CFLAGS

    if test "$ac_cv_u8t_decompose" = "no" && test "$ac_cv_utf8_mime2text" = "new"; then
		{ echo "configure: error: utf8_mime2text() has new signature, but U8T_CANONICAL is missing. This should not happen. Check config.log for additional information." 1>&2; exit 1; }
    fi
    if test "$ac_cv_u8t_decompose" = "yes" && test "$ac_cv_utf8_mime2text" = "old"; then
		{ echo "configure: error: utf8_mime2text() has old signature, but U8T_CANONICAL is present. This should not happen. Check config.log for additional information." 1>&2; exit 1; }
    fi

        old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$IMAP_INC_DIR
    cat > conftest.$ac_ext <<EOF
#line 49553 "configure"
#include "confdefs.h"

#include "imap4r1.h"
#if defined(IMAPSSLPORT)
      this_is_true
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "this_is_true" >/dev/null 2>&1; then
  rm -rf conftest*
  
      cat >> confdefs.h <<\EOF
#define HAVE_IMAP2001 1
EOF

    
fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for pam_start in -lpam""... $ac_c" 1>&6
echo "configure:49672: checking for pam_start in -lpam" >&5
ac_lib_var=`echo pam'_'pam_start | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpam  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 49680 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pam_start();

int main() {
pam_start()
; return 0; }
EOF
if { (eval echo configure:49691: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case pam in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lpam $IMAP_SHARED_LIBADD" 
    else
      
  
  case pam in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpam $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


      cat >> confdefs.h <<\EOF
#define HAVE_LIBPAM 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_pam_pam_start
    
  
fi


    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
echo "configure:49846: checking for crypt in -lcrypt" >&5
ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 49854 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char crypt();

int main() {
crypt()
; return 0; }
EOF
if { (eval echo configure:49865: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case crypt in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lcrypt $IMAP_SHARED_LIBADD" 
    else
      
  
  case crypt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypt $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


      cat >> confdefs.h <<\EOF
#define HAVE_LIBCRYPT 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypt_crypt
    
  
fi

	    
    
  if test -z "$IMAP_DIR" || echo "$IMAP_DIR" | grep '^/' >/dev/null ; then
    IMAP_DIR=$IMAP_DIR
  else
    
    ep_dir="`echo $IMAP_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    IMAP_DIR="$ep_realdir/`basename \"$IMAP_DIR\"`"
  fi


    if test -z "$IMAP_DIR"; then
      { echo "configure: error: Cannot find rfc822.h. Please check your c-client installation." 1>&2; exit 1; }
    fi

    if test -r "$IMAP_DIR/c-client/c-client.a"; then
      ln -s "$IMAP_DIR/c-client/c-client.a" "$IMAP_DIR/c-client/libc-client.a" >/dev/null 2>&1
    elif test -r "$IMAP_DIR/$PHP_LIBDIR/c-client.a"; then
      ln -s "$IMAP_DIR/$PHP_LIBDIR/c-client.a" "$IMAP_DIR/$PHP_LIBDIR/libc-client.a" >/dev/null 2>&1
    fi

    for lib in c-client4 c-client imap; do
      IMAP_LIB=$lib
      
  str="$IMAP_DIR/$PHP_LIBDIR/lib$lib.*"
  for i in `echo $str`; do
    test -r $i && IMAP_LIBDIR=$IMAP_DIR/$PHP_LIBDIR && break 2
  done

      
  str="$IMAP_DIR/c-client/lib$lib.*"
  for i in `echo $str`; do
    test -r $i && IMAP_LIBDIR=$IMAP_DIR/c-client && break 2
  done

    done

    if test -z "$IMAP_LIBDIR"; then
      { echo "configure: error: Cannot find imap library (libc-client.a). Please check your c-client installation." 1>&2; exit 1; }
    fi

    
  if test "$IMAP_INC_DIR" != "/usr/include"; then
    
  if test -z "$IMAP_INC_DIR" || echo "$IMAP_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$IMAP_INC_DIR
  else
    
    ep_dir="`echo $IMAP_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  
  case $IMAP_LIB in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-l$IMAP_LIB $IMAP_SHARED_LIBADD" 
    else
      
  
  case $IMAP_LIB in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="-l$IMAP_LIB $DLIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  if test "$IMAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$IMAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IMAP_LIBDIR" || echo "$IMAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IMAP_LIBDIR
  else
    
    ep_dir="`echo $IMAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    
  if test "$PHP_KERBEROS" != "no"; then
    
  found_kerberos=no
  unset KERBEROS_CFLAGS
  unset KERBEROS_LIBS

    if test -z "$KRB5_CONFIG"; then
    # Extract the first word of "krb5-config", so it can be a program name with args.
set dummy krb5-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:50069: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_KRB5_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$KRB5_CONFIG" in
  /*)
  ac_cv_path_KRB5_CONFIG="$KRB5_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_KRB5_CONFIG="$KRB5_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH:/usr/kerberos/bin:/usr/local/bin"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_KRB5_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_KRB5_CONFIG" && ac_cv_path_KRB5_CONFIG="no"
  ;;
esac
fi
KRB5_CONFIG="$ac_cv_path_KRB5_CONFIG"
if test -n "$KRB5_CONFIG"; then
  echo "$ac_t""$KRB5_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test "$PHP_KERBEROS" = "yes" && test -x "$KRB5_CONFIG"; then
    KERBEROS_LIBS=`$KRB5_CONFIG --libs gssapi`
    KERBEROS_CFLAGS=`$KRB5_CONFIG --cflags gssapi`

    if test -n "$KERBEROS_LIBS"; then
      found_kerberos=yes
      
  for ac_i in $KERBEROS_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $KERBEROS_CFLAGS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_kerberos" = "no"; then

    if test "$PHP_KERBEROS" = "yes"; then
      PHP_KERBEROS="/usr/kerberos /usr/local /usr"
    fi

    for i in $PHP_KERBEROS; do
      if test -f $i/$PHP_LIBDIR/libkrb5.a || test -f $i/$PHP_LIBDIR/libkrb5.$SHLIB_SUFFIX_NAME; then
        PHP_KERBEROS_DIR=$i
        break
      fi
    done

    if test "$PHP_KERBEROS_DIR"; then
      found_kerberos=yes
      
  if test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_KERBEROS_DIR/$PHP_LIBDIR" || echo "$PHP_KERBEROS_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_KERBEROS_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_KERBEROS_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

      
  
  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lgssapi_krb5" 
    else
      
  
  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lgssapi_krb5" 
   ;;
  esac


    fi
   ;;
  esac


      
  
  case krb5 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lkrb5" 
    else
      
  
  case krb5 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lkrb5" 
   ;;
  esac


    fi
   ;;
  esac


      
  
  case k5crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lk5crypto" 
    else
      
  
  case k5crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lk5crypto" 
   ;;
  esac


    fi
   ;;
  esac


      
  
  case com_err in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lcom_err" 
    else
      
  
  case com_err in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lcom_err" 
   ;;
  esac


    fi
   ;;
  esac


      
  if test "$PHP_KERBEROS_DIR/include" != "/usr/include"; then
    
  if test -z "$PHP_KERBEROS_DIR/include" || echo "$PHP_KERBEROS_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/include
  else
    
    ep_dir="`echo $PHP_KERBEROS_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_KERBEROS_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi
  fi

  if test "$found_kerberos" = "yes"; then

      cat >> confdefs.h <<\EOF
#define HAVE_IMAP_KRB 1
EOF

    
else 
      { echo "configure: error: Kerberos libraries not found. 
      
      Check the path given to --with-kerberos (if no path is given, searches in /usr/kerberos, /usr/local and /usr )
      " 1>&2; exit 1; }
    
  fi

  else
    cat > conftest.$ac_ext <<EOF
#line 50438 "configure"
#include "confdefs.h"
#include <$IMAP_INC_DIR/linkage.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "auth_gss" >/dev/null 2>&1; then
  rm -rf conftest*
  
      { echo "configure: error: This c-client library is built with Kerberos support. 

      Add --with-kerberos to your configure line. Check config.log for details.
      " 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi

    
  if test "$PHP_IMAP_SSL" != "no"; then
    if test "$PHP_OPENSSL" = ""; then
      PHP_OPENSSL='no'
    fi
    
  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:50479: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    fi

    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
      
  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then
  
    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
echo "configure:50684: checking for OpenSSL version" >&5
    cat > conftest.$ac_ext <<EOF
#line 50686 "configure"
#include "confdefs.h"

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t"">= 0.9.6" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    
fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS

    
  if test "$OPENSSL_INCDIR" != "/usr/include"; then
    
  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else
    
    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
echo "configure:50841: checking for CRYPTO_free in -lcrypto" >&5
ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 50849 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char CRYPTO_free();

int main() {
CRYPTO_free()
; return 0; }
EOF
if { (eval echo configure:50860: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lcrypto $IMAP_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free
    
      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
    
  
fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
echo "configure:51017: checking for SSL_CTX_set_ssl_version in -lssl" >&5
ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lssl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51025 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSL_CTX_set_ssl_version();

int main() {
SSL_CTX_set_ssl_version()
; return 0; }
EOF
if { (eval echo configure:51036: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      found_openssl=yes
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
    
      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
    
  
fi

    LIBS=$old_LIBS
    
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lssl $IMAP_SHARED_LIBADD" 
    else
      
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lcrypto $IMAP_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac



    
  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else
    
    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
  


      cat >> confdefs.h <<\EOF
#define HAVE_IMAP_SSL 1
EOF

    
else 
      { echo "configure: error: OpenSSL libraries not found. 
      
      Check the path given to --with-openssl-dir and output in config.log)
      " 1>&2; exit 1; }
    
  fi

  elif test -f "$IMAP_INC_DIR/linkage.c"; then
    cat > conftest.$ac_ext <<EOF
#line 51178 "configure"
#include "confdefs.h"
#include <$IMAP_INC_DIR/linkage.c>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "ssl_onceonlyinit" >/dev/null 2>&1; then
  rm -rf conftest*
  
      { echo "configure: error: This c-client library is built with SSL support. 

      Add --with-imap-ssl to your configure line. Check config.log for details.
      " 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi


        TST_LIBS="$DLIBS $IMAP_SHARED_LIBADD"

        
  
  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 51209 "configure"
#include "confdefs.h"

    
#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

    PHP_IMAP_EXPORT void mm_log(void){}
    PHP_IMAP_EXPORT void mm_dlog(void){}
    PHP_IMAP_EXPORT void mm_flags(void){}
    PHP_IMAP_EXPORT void mm_fatal(void){}
    PHP_IMAP_EXPORT void mm_critical(void){}
    PHP_IMAP_EXPORT void mm_nocritical(void){}
    PHP_IMAP_EXPORT void mm_notify(void){}
    PHP_IMAP_EXPORT void mm_login(void){}
    PHP_IMAP_EXPORT void mm_diskerror(void){}
    PHP_IMAP_EXPORT void mm_status(void){}
    PHP_IMAP_EXPORT void mm_lsub(void){}
    PHP_IMAP_EXPORT void mm_list(void){}
    PHP_IMAP_EXPORT void mm_exists(void){}
    PHP_IMAP_EXPORT void mm_searched(void){}
    PHP_IMAP_EXPORT void mm_expunged(void){}
  
    char auth_gssapi_valid();
    int main() {
      auth_gssapi_valid();
      return 0;
    }
  
EOF
if { (eval echo configure:51242: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
      cat >> confdefs.h <<\EOF
#define HAVE_IMAP_AUTH_GSS 1
EOF

    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
  
fi
rm -fr conftest*
fi




        
  
  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 51278 "configure"
#include "confdefs.h"

    
#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

    PHP_IMAP_EXPORT void mm_log(void){}
    PHP_IMAP_EXPORT void mm_dlog(void){}
    PHP_IMAP_EXPORT void mm_flags(void){}
    PHP_IMAP_EXPORT void mm_fatal(void){}
    PHP_IMAP_EXPORT void mm_critical(void){}
    PHP_IMAP_EXPORT void mm_nocritical(void){}
    PHP_IMAP_EXPORT void mm_notify(void){}
    PHP_IMAP_EXPORT void mm_login(void){}
    PHP_IMAP_EXPORT void mm_diskerror(void){}
    PHP_IMAP_EXPORT void mm_status(void){}
    PHP_IMAP_EXPORT void mm_lsub(void){}
    PHP_IMAP_EXPORT void mm_list(void){}
    PHP_IMAP_EXPORT void mm_exists(void){}
    PHP_IMAP_EXPORT void mm_searched(void){}
    PHP_IMAP_EXPORT void mm_expunged(void){}
  
    char utf8_to_mutf7();
    int main() {
      utf8_to_mutf7();
      return 0;
    }
  
EOF
if { (eval echo configure:51311: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
      cat >> confdefs.h <<\EOF
#define HAVE_IMAP_MUTF7 1
EOF

    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
  
fi
rm -fr conftest*
fi




    echo $ac_n "checking whether rfc822_output_address_list function present""... $ac_c" 1>&6
echo "configure:51338: checking whether rfc822_output_address_list function present" >&5
    
  old_LIBS=$LIBS
  LIBS="
      $TST_LIBS
     $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 51350 "configure"
#include "confdefs.h"

    
#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

      PHP_IMAP_EXPORT void mm_log(void){}
      PHP_IMAP_EXPORT void mm_dlog(void){}
      PHP_IMAP_EXPORT void mm_flags(void){}
      PHP_IMAP_EXPORT void mm_fatal(void){}
      PHP_IMAP_EXPORT void mm_critical(void){}
      PHP_IMAP_EXPORT void mm_nocritical(void){}
      PHP_IMAP_EXPORT void mm_notify(void){}
      PHP_IMAP_EXPORT void mm_login(void){}
      PHP_IMAP_EXPORT void mm_diskerror(void){}
      PHP_IMAP_EXPORT void mm_status(void){}
      PHP_IMAP_EXPORT void mm_lsub(void){}
      PHP_IMAP_EXPORT void mm_list(void){}
      PHP_IMAP_EXPORT void mm_exists(void){}
      PHP_IMAP_EXPORT void mm_searched(void){}
      PHP_IMAP_EXPORT void mm_expunged(void){}
      void rfc822_output_address_list(void);
      void (*f)(void);
      char foobar () {f = rfc822_output_address_list;}
    
    char foobar();
    int main() {
      foobar();
      return 0;
    }
  
EOF
if { (eval echo configure:51386: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
      echo "$ac_t""yes" 1>&6
      cat >> confdefs.h <<\EOF
#define HAVE_RFC822_OUTPUT_ADDRESS_LIST 1
EOF

    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
      echo "$ac_t""no" 1>&6
	
  
fi
rm -fr conftest*
fi



    echo $ac_n "checking whether build with IMAP works""... $ac_c" 1>&6
echo "configure:51415: checking whether build with IMAP works" >&5
    
  
  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 51426 "configure"
#include "confdefs.h"

    
#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

    PHP_IMAP_EXPORT void mm_log(void){}
    PHP_IMAP_EXPORT void mm_dlog(void){}
    PHP_IMAP_EXPORT void mm_flags(void){}
    PHP_IMAP_EXPORT void mm_fatal(void){}
    PHP_IMAP_EXPORT void mm_critical(void){}
    PHP_IMAP_EXPORT void mm_nocritical(void){}
    PHP_IMAP_EXPORT void mm_notify(void){}
    PHP_IMAP_EXPORT void mm_login(void){}
    PHP_IMAP_EXPORT void mm_diskerror(void){}
    PHP_IMAP_EXPORT void mm_status(void){}
    PHP_IMAP_EXPORT void mm_lsub(void){}
    PHP_IMAP_EXPORT void mm_list(void){}
    PHP_IMAP_EXPORT void mm_exists(void){}
    PHP_IMAP_EXPORT void mm_searched(void){}
    PHP_IMAP_EXPORT void mm_expunged(void){}
  
    char mail_newbody();
    int main() {
      mail_newbody();
      return 0;
    }
  
EOF
if { (eval echo configure:51459: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
      echo "$ac_t""yes" 1>&6
    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
      echo "$ac_t""no" 1>&6
      { echo "configure: error: build test failed. Please check the config.log for details." 1>&2; exit 1; }
    
  
fi
rm -fr conftest*
fi



fi



php_with_interbase=no

echo $ac_n "checking for InterBase support""... $ac_c" 1>&6
echo "configure:51491: checking for InterBase support" >&5
# Check whether --with-interbase or --without-interbase was given.
if test "${with_interbase+set}" = set; then
  withval="$with_interbase"
  PHP_INTERBASE=$withval
else
  
  PHP_INTERBASE=no
  test "$PHP_ENABLE_ALL" && PHP_INTERBASE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_INTERBASE in
shared,*)
  PHP_INTERBASE=`echo "$PHP_INTERBASE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_INTERBASE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_INTERBASE" != "no"; then
  if test "$PHP_INTERBASE" = "yes"; then
    IBASE_INCDIR=/usr/interbase/include
    IBASE_LIBDIR=/usr/interbase/lib
  else
    IBASE_INCDIR=$PHP_INTERBASE/include
    IBASE_LIBDIR=$PHP_INTERBASE/$PHP_LIBDIR
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$IBASE_LIBDIR
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for isc_detach_database in -lfbclient""... $ac_c" 1>&6
echo "configure:51638: checking for isc_detach_database in -lfbclient" >&5
ac_lib_var=`echo fbclient'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lfbclient  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51646 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:51657: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    IBASE_LIBNAME=fbclient
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_fbclient_isc_detach_database
    
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$IBASE_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
echo "configure:51784: checking for isc_detach_database in -lgds" >&5
ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgds  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51792 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:51803: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      IBASE_LIBNAME=gds
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gds_isc_detach_database
    
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$IBASE_LIBDIR
      "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
echo "configure:51930: checking for isc_detach_database in -lib_util" >&5
ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lib_util  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51938 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:51949: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        IBASE_LIBNAME=ib_util
      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ib_util_isc_detach_database
    
        { echo "configure: error: libgds, libib_util or libfbclient not found! Check config.log for more information." 1>&2; exit 1; }
      
  
fi

    
  
fi

  
  
fi

  
  

  if test "$ext_shared" = "yes"; then
    INTERBASE_SHARED_LIBADD="-l$IBASE_LIBNAME $INTERBASE_SHARED_LIBADD"
    if test -n "$IBASE_LIBDIR"; then
      
  if test "$IBASE_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$IBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_LIBDIR
  else
    
    ep_dir="`echo $IBASE_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INTERBASE_SHARED_LIBADD="-L$ai_p $INTERBASE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && INTERBASE_SHARED_LIBADD="$ld_runpath_switch$ai_p $INTERBASE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$IBASE_LIBDIR"; then
    
  if test "$IBASE_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$IBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_LIBDIR
  else
    
    ep_dir="`echo $IBASE_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $IBASE_LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$IBASE_LIBNAME $LIBS" 
   ;;
  esac




  fi


  
  if test "$IBASE_INCDIR" != "/usr/include"; then
    
  if test -z "$IBASE_INCDIR" || echo "$IBASE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_INCDIR
  else
    
    ep_dir="`echo $IBASE_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_IBASE 1
EOF

  
  ext_builddir=ext/interbase
  ext_srcdir=$abs_srcdir/ext/interbase

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_INTERBASE_SHARED=no
    
  
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC interbase"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC interbase"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_INTERBASE_SHARED=yes
      
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_interbase="$shared_objects_interbase $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpinterbase.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(PHPINTERBASE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpinterbase.so '$ext_builddir'/phpinterbase.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPINTERBASE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(PHPINTERBASE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpinterbase.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpinterbase.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_interbase"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpinterbase.$suffix: $ext_builddir/phpinterbase.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpinterbase.$suffix \$(phplibdir)

$ext_builddir/phpinterbase.$suffix: \$(shared_objects_interbase) \$(PHPINTERBASE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/interbase.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(INTERBASE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/interbase.so '$ext_builddir'/interbase.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(INTERBASE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(INTERBASE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/interbase.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/interbase.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_interbase"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/interbase.$suffix: $ext_builddir/interbase.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/interbase.$suffix \$(phplibdir)

$ext_builddir/interbase.$suffix: \$(shared_objects_interbase) \$(INTERBASE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_INTERBASE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_INTERBASE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC interbase"
        ;;
      *)
        
  
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC interbase"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=interbase
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INTERBASE_SHARED_LIBADD"

fi



php_enable_intl=no

echo $ac_n "checking whether to enable internationalization support""... $ac_c" 1>&6
echo "configure:52426: checking whether to enable internationalization support" >&5
# Check whether --enable-intl or --disable-intl was given.
if test "${enable_intl+set}" = set; then
  enableval="$enable_intl"
  PHP_INTL=$enableval
else
  
  PHP_INTL=no
  test "$PHP_ENABLE_ALL" && PHP_INTL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_INTL in
shared,*)
  PHP_INTL=`echo "$PHP_INTL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_INTL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_INTL" != "no"; then
  
  
php_with_icu_dir=DEFAULT


# Check whether --with-icu-dir or --without-icu-dir was given.
if test "${with_icu_dir+set}" = set; then
  withval="$with_icu_dir"
  PHP_ICU_DIR=$withval
else
  
  PHP_ICU_DIR=DEFAULT
  

fi


ext_output=$PHP_ICU_DIR





  if test "$PHP_ICU_DIR" = "no"; then
    PHP_ICU_DIR=DEFAULT
  fi

  if test "$PHP_ICU_DIR" = "DEFAULT"; then
        # Extract the first word of "icu-config", so it can be a program name with args.
set dummy icu-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:52498: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_ICU_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$ICU_CONFIG" in
  /*)
  ac_cv_path_ICU_CONFIG="$ICU_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_ICU_CONFIG="$ICU_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH:/usr/local/bin"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_ICU_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_ICU_CONFIG" && ac_cv_path_ICU_CONFIG="no"
  ;;
esac
fi
ICU_CONFIG="$ac_cv_path_ICU_CONFIG"
if test -n "$ICU_CONFIG"; then
  echo "$ac_t""$ICU_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    ICU_CONFIG="$PHP_ICU_DIR/bin/icu-config"
  fi

  echo $ac_n "checking for location of ICU headers and libraries""... $ac_c" 1>&6
echo "configure:52536: checking for location of ICU headers and libraries" >&5

    icu_install_prefix=`$ICU_CONFIG --prefix 2> /dev/null`
  if test "$?" != "0" || test -z "$icu_install_prefix"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Unable to detect ICU prefix or $ICU_CONFIG failed. Please verify ICU install prefix and make sure icu-config works." 1>&2; exit 1; }
  else
    echo "$ac_t""$icu_install_prefix" 1>&6

        echo $ac_n "checking for ICU 3.4 or greater""... $ac_c" 1>&6
echo "configure:52546: checking for ICU 3.4 or greater" >&5
    icu_version_full=`$ICU_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $icu_version_full
    IFS=$ac_IFS
    icu_version=`expr $1 \* 1000 + $2`
    echo "$ac_t""found $icu_version_full" 1>&6

    if test "$icu_version" -lt "3004"; then
      { echo "configure: error: ICU version 3.4 or later is required" 1>&2; exit 1; }
    fi

    ICU_VERSION=$icu_version
    ICU_INCS=`$ICU_CONFIG --cppflags-searchpath`
    ICU_LIBS=`$ICU_CONFIG --ldflags --ldflags-icuio`
    
  for ac_i in $ICU_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    
  for ac_i in $ICU_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        INTL_SHARED_LIBADD="$INTL_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        INTL_SHARED_LIBADD="$INTL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INTL_SHARED_LIBADD="-L$ai_p $INTL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && INTL_SHARED_LIBADD="$ld_runpath_switch$ai_p $INTL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INTL_SHARED_LIBADD"

  
  if test -z "$php_cxx_done"; then
    for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:52703: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:52735: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 52746 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:52751: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:52777: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:52782: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:52791: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:52810: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi

    echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
echo "configure:52842: checking how to run the C++ preprocessor" >&5
if test -z "$CXXCPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross
  CXXCPP="${CXX-g++} -E"
  cat > conftest.$ac_ext <<EOF
#line 52855 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:52860: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CXXCPP=/lib/cpp
fi
rm -f conftest*
  ac_cv_prog_CXXCPP="$CXXCPP"
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross
fi
fi
CXXCPP="$ac_cv_prog_CXXCPP"
echo "$ac_t""$CXXCPP" 1>&6

    php_cxx_done=yes
  fi


  
  ext_builddir=ext/intl
  ext_srcdir=$abs_srcdir/ext/intl

  ac_extra=`echo "$ICU_INCS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_INTL_SHARED=no
    
  
  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_parse.c \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    idn/idn.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC intl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC intl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_INTL_SHARED=yes
      
  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_parse.c \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    idn/idn.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_intl="$shared_objects_intl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpintl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(PHPINTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpintl.so '$ext_builddir'/phpintl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPINTL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(PHPINTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpintl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpintl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_intl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpintl.$suffix: $ext_builddir/phpintl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpintl.$suffix \$(phplibdir)

$ext_builddir/phpintl.$suffix: \$(shared_objects_intl) \$(PHPINTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/intl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(INTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/intl.so '$ext_builddir'/intl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(INTL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(INTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/intl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/intl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_intl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/intl.$suffix: $ext_builddir/intl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/intl.$suffix \$(phplibdir)

$ext_builddir/intl.$suffix: \$(shared_objects_intl) \$(INTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_INTL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_INTL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_parse.c \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    idn/idn.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC intl"
        ;;
      *)
        
  
  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_parse.c \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    idn/idn.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC intl"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=intl
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/collator"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/common"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/formatter"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/normalizer"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/dateformat"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/locale"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/msgformat"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/grapheme"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/resourcebundle"
  

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/idn"
  

fi



php_enable_json=yes

echo $ac_n "checking whether to enable JavaScript Object Serialization support""... $ac_c" 1>&6
echo "configure:53418: checking whether to enable JavaScript Object Serialization support" >&5
# Check whether --enable-json or --disable-json was given.
if test "${enable_json+set}" = set; then
  enableval="$enable_json"
  PHP_JSON=$enableval
else
  
  PHP_JSON=yes
  test "$PHP_ENABLE_ALL" && PHP_JSON=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_JSON in
shared,*)
  PHP_JSON=`echo "$PHP_JSON"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_JSON=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_JSON" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_JSON 1 
EOF

  echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:53464: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 53469 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:53477: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 53494 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 53512 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 53533 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:53544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi


  
  ext_builddir=ext/json
  ext_srcdir=$abs_srcdir/ext/json

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_JSON_SHARED=no
    
  
  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_to_utf16.c utf8_decode.c JSON_parser.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC json"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC json"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_JSON_SHARED=yes
      
  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_to_utf16.c utf8_decode.c JSON_parser.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_json="$shared_objects_json $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpjson.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(PHPJSON_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpjson.so '$ext_builddir'/phpjson.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPJSON, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(PHPJSON_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpjson.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpjson.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_json"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpjson.$suffix: $ext_builddir/phpjson.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpjson.$suffix \$(phplibdir)

$ext_builddir/phpjson.$suffix: \$(shared_objects_json) \$(PHPJSON_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/json.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(JSON_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/json.so '$ext_builddir'/json.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(JSON, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(JSON_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/json.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/json.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_json"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/json.$suffix: $ext_builddir/json.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/json.$suffix \$(phplibdir)

$ext_builddir/json.$suffix: \$(shared_objects_json) \$(JSON_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_JSON 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_JSON_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_to_utf16.c utf8_decode.c JSON_parser.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC json"
        ;;
      *)
        
  
  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_to_utf16.c utf8_decode.c JSON_parser.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC json"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=json
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    header_path=ext/json
    for header_file in php_json.h; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST JSON_SHARED_LIBADD"

fi







php_with_ldap=no

echo $ac_n "checking for LDAP support""... $ac_c" 1>&6
echo "configure:53894: checking for LDAP support" >&5
# Check whether --with-ldap or --without-ldap was given.
if test "${with_ldap+set}" = set; then
  withval="$with_ldap"
  PHP_LDAP=$withval
else
  
  PHP_LDAP=no
  test "$PHP_ENABLE_ALL" && PHP_LDAP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LDAP in
shared,*)
  PHP_LDAP=`echo "$PHP_LDAP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LDAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_ldap_sasl=no

echo $ac_n "checking for LDAP Cyrus SASL support""... $ac_c" 1>&6
echo "configure:53938: checking for LDAP Cyrus SASL support" >&5
# Check whether --with-ldap-sasl or --without-ldap-sasl was given.
if test "${with_ldap_sasl+set}" = set; then
  withval="$with_ldap_sasl"
  PHP_LDAP_SASL=$withval
else
  
  PHP_LDAP_SASL=no
  

fi


ext_output=$PHP_LDAP_SASL
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_LDAP" != "no"; then

  
  ext_builddir=ext/ldap
  ext_srcdir=$abs_srcdir/ext/ldap

  ac_extra=`echo "-DLDAP_DEPRECATED=1"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_LDAP_SHARED=no
    
  
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ldap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ldap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_LDAP_SHARED=yes
      
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ldap="$shared_objects_ldap $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpldap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(PHPLDAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpldap.so '$ext_builddir'/phpldap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPLDAP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(PHPLDAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpldap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpldap.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ldap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpldap.$suffix: $ext_builddir/phpldap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpldap.$suffix \$(phplibdir)

$ext_builddir/phpldap.$suffix: \$(shared_objects_ldap) \$(PHPLDAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ldap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(LDAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ldap.so '$ext_builddir'/ldap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(LDAP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(LDAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ldap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ldap.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ldap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ldap.$suffix: $ext_builddir/ldap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ldap.$suffix \$(phplibdir)

$ext_builddir/ldap.$suffix: \$(shared_objects_ldap) \$(LDAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_LDAP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_LDAP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ldap"
        ;;
      *)
        
  
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ldap"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ldap
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  if test "$PHP_LDAP" = "yes"; then
    for i in /usr/local /usr; do
      
  if test -f $i/include/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/include
    LDAP_LIBDIR=$i/$PHP_LIBDIR
  elif test -f $i/include/umich-ldap/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/include/umich-ldap
    LDAP_LIBDIR=$i/$PHP_LIBDIR
  elif test -f $i/ldap/public/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/ldap/public
    LDAP_LIBDIR=$i/$PHP_LIBDIR
  fi

    done
  else
    
  if test -f $PHP_LDAP/include/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/include
    LDAP_LIBDIR=$PHP_LDAP/$PHP_LIBDIR
  elif test -f $PHP_LDAP/include/umich-ldap/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/include/umich-ldap
    LDAP_LIBDIR=$PHP_LDAP/$PHP_LIBDIR
  elif test -f $PHP_LDAP/ldap/public/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/ldap/public
    LDAP_LIBDIR=$PHP_LDAP/$PHP_LIBDIR
  fi

  fi

  if test -z "$LDAP_DIR"; then
    { echo "configure: error: Cannot find ldap.h" 1>&2; exit 1; }
  fi

        
  if test `uname` = "Linux"; then
    LDAP_PTHREAD=pthread
  else
    LDAP_PTHREAD=
  fi

  if test -f $LDAP_LIBDIR/liblber.a || test -f $LDAP_LIBDIR/liblber.$SHLIB_SUFFIX_NAME; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-llber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case lber in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-llber $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap $LIBS" 
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libldap.$SHLIB_SUFFIX_NAME || test -f $LDAP_LIBDIR/libldap.$SHLIB_SUFFIX_NAME.3 || test -f $LDAP_LIBDIR/libldap.3.dylib; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap $LIBS" 
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libssldap50.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lnspr4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nspr4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnspr4 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplc4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plc4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplc4 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplds4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plds4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplds4 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lssldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ssldap50 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssldap50 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap50 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap50 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lprldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case prldap50 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lprldap50 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lssl3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ssl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl3 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libldapssl41.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lnspr3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nspr3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnspr3 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplc3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plc3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplc3 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplds3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plds3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplds3 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl41 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldapssl41 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldapssl41 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libldapssl30.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldapssl30 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldapssl30 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libldap30.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap30 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap30 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libumich_ldap.$SHLIB_SUFFIX_NAME; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_lber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case umich_lber in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lumich_lber $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_ldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case umich_ldap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lumich_ldap $LIBS" 
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libclntsh.$SHLIB_SUFFIX_NAME; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lclntsh $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclntsh $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_ORALDAP 1
EOF

    if test -f $LDAP_LIBDIR/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
      cat >> confdefs.h <<\EOF
#define HAVE_ORALDAP_10 1
EOF

    fi
  else
    { echo "configure: error: Cannot find ldap libraries in $LDAP_LIBDIR." 1>&2; exit 1; }
  fi

  
  if test "$LDAP_INCDIR" != "/usr/include"; then
    
  if test -z "$LDAP_INCDIR" || echo "$LDAP_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_INCDIR
  else
    
    ep_dir="`echo $LDAP_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST LDAP_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_LDAP 1
EOF

  
    _SAVE_CPPFLAGS=$CPPFLAGS
  _SAVE_LIBS=$LIBS
  CPPFLAGS="$CPPFLAGS -I$LDAP_INCDIR"
  LIBS="$LIBS $LDAP_SHARED_LIBADD"

    echo $ac_n "checking for 3 arg ldap_set_rebind_proc""... $ac_c" 1>&6
echo "configure:56280: checking for 3 arg ldap_set_rebind_proc" >&5
if eval "test \"`echo '$''{'ac_cv_3arg_setrebindproc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 56285 "configure"
#include "confdefs.h"
#include <ldap.h>
int main() {
ldap_set_rebind_proc(0,0,0)
; return 0; }
EOF
if { (eval echo configure:56292: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_3arg_setrebindproc=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_3arg_setrebindproc=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_3arg_setrebindproc" 1>&6
  if test "$ac_cv_3arg_setrebindproc" = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_3ARG_SETREBINDPROC 1
EOF

  fi

      for ac_func in ldap_parse_result ldap_parse_reference ldap_start_tls_s
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:56315: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 56320 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:56343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  
        if test "$PHP_LDAP_SASL" != "no"; then
    
  if test "$PHP_LDAP_SASL" = "yes"; then
    SEARCH_DIRS="/usr/local /usr"
  else
    SEARCH_DIRS=$PHP_LDAP_SASL
  fi

  for i in $SEARCH_DIRS; do
    if test -f $i/include/sasl/sasl.h; then
      LDAP_SASL_DIR=$i
      cat >> confdefs.h <<\EOF
#define HAVE_LDAP_SASL_SASL_H 1
EOF

      break
    elif test -f $i/include/sasl.h; then
      LDAP_SASL_DIR=$i
      cat >> confdefs.h <<\EOF
#define HAVE_LDAP_SASL_H 1
EOF

      break
    fi
  done
  
  if test "$LDAP_SASL_DIR"; then
    LDAP_SASL_INCDIR=$LDAP_SASL_DIR/include
    LDAP_SASL_LIBDIR=$LDAP_SASL_DIR/$PHP_LIBDIR
  else
    { echo "configure: error: sasl.h not found!" 1>&2; exit 1; }
  fi

  if test "$PHP_LDAP_SASL" = "yes"; then
    SASL_LIB="-lsasl2"
  else
    SASL_LIB="-L$LDAP_SASL_LIBDIR -lsasl2"
  fi
  
  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $LDAP_SHARED_LIBADD $SASL_LIB
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for sasl_version in -lsasl2""... $ac_c" 1>&6
echo "configure:56505: checking for sasl_version in -lsasl2" >&5
ac_lib_var=`echo sasl2'_'sasl_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsasl2  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 56513 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sasl_version();

int main() {
sasl_version()
; return 0; }
EOF
if { (eval echo configure:56524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    
  if test "$LDAP_SASL_INCDIR" != "/usr/include"; then
    
  if test -z "$LDAP_SASL_INCDIR" || echo "$LDAP_SASL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_SASL_INCDIR
  else
    
    ep_dir="`echo $LDAP_SASL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_SASL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lsasl2 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_SASL_LIBDIR"; then
      
  if test "$LDAP_SASL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_SASL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_SASL_LIBDIR" || echo "$LDAP_SASL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_SASL_LIBDIR
  else
    
    ep_dir="`echo $LDAP_SASL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_SASL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_SASL_LIBDIR"; then
    
  if test "$LDAP_SASL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_SASL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_SASL_LIBDIR" || echo "$LDAP_SASL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_SASL_LIBDIR
  else
    
    ep_dir="`echo $LDAP_SASL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_SASL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sasl2 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsasl2 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_LDAP_SASL 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sasl2_sasl_version
    
    { echo "configure: error: LDAP SASL check failed. Please check config.log for more information." 1>&2; exit 1; }
  
  
fi


  fi

        echo $ac_n "checking for ldap_bind_s""... $ac_c" 1>&6
echo "configure:56693: checking for ldap_bind_s" >&5
if eval "test \"`echo '$''{'ac_cv_func_ldap_bind_s'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 56698 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char ldap_bind_s(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_bind_s();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_ldap_bind_s) || defined (__stub___ldap_bind_s)
choke me
#else
ldap_bind_s();
#endif

; return 0; }
EOF
if { (eval echo configure:56721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_ldap_bind_s=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_ldap_bind_s=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'ldap_bind_s`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6

    { echo "configure: error: LDAP build check failed. Please check config.log for more information." 1>&2; exit 1; } 
  
fi

  
    CPPFLAGS=$_SAVE_CPPFLAGS
  LIBS=$_SAVE_LIBS
fi 
























php_enable_mbstring=no

echo $ac_n "checking whether to enable multibyte string support""... $ac_c" 1>&6
echo "configure:56774: checking whether to enable multibyte string support" >&5
# Check whether --enable-mbstring or --disable-mbstring was given.
if test "${enable_mbstring+set}" = set; then
  enableval="$enable_mbstring"
  PHP_MBSTRING=$enableval
else
  
  PHP_MBSTRING=no
  test "$PHP_ENABLE_ALL" && PHP_MBSTRING=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MBSTRING in
shared,*)
  PHP_MBSTRING=`echo "$PHP_MBSTRING"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MBSTRING=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_enable_mbregex=yes

echo $ac_n "checking whether to enable multibyte regex support""... $ac_c" 1>&6
echo "configure:56818: checking whether to enable multibyte regex support" >&5
# Check whether --enable-mbregex or --disable-mbregex was given.
if test "${enable_mbregex+set}" = set; then
  enableval="$enable_mbregex"
  PHP_MBREGEX=$enableval
else
  
  PHP_MBREGEX=yes
  

fi


ext_output=$PHP_MBREGEX
echo "$ac_t""$ext_output" 1>&6





php_enable_mbregex_backtrack=yes

echo $ac_n "checking whether to check multibyte regex backtrack""... $ac_c" 1>&6
echo "configure:56841: checking whether to check multibyte regex backtrack" >&5
# Check whether --enable-mbregex_backtrack or --disable-mbregex_backtrack was given.
if test "${enable_mbregex_backtrack+set}" = set; then
  enableval="$enable_mbregex_backtrack"
  PHP_MBREGEX_BACKTRACK=$enableval
else
  
  PHP_MBREGEX_BACKTRACK=yes
  

fi


ext_output=$PHP_MBREGEX_BACKTRACK
echo "$ac_t""$ext_output" 1>&6





php_with_libmbfl=no

echo $ac_n "checking for external libmbfl""... $ac_c" 1>&6
echo "configure:56864: checking for external libmbfl" >&5
# Check whether --with-libmbfl or --without-libmbfl was given.
if test "${with_libmbfl+set}" = set; then
  withval="$with_libmbfl"
  PHP_LIBMBFL=$withval
else
  
  PHP_LIBMBFL=no
  

fi


ext_output=$PHP_LIBMBFL
echo "$ac_t""$ext_output" 1>&6





php_with_onig=no

echo $ac_n "checking for external oniguruma""... $ac_c" 1>&6
echo "configure:56887: checking for external oniguruma" >&5
# Check whether --with-onig or --without-onig was given.
if test "${with_onig+set}" = set; then
  withval="$with_onig"
  PHP_ONIG=$withval
else
  
  PHP_ONIG=no
  

fi


ext_output=$PHP_ONIG
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MBSTRING" != "no"; then  
  cat >> confdefs.h <<\EOF
#define HAVE_MBSTRING 1
EOF


  
  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES mbstring.c php_unicode.c mb_gpc.c"


  if test "$PHP_MBREGEX" != "no"; then
    
  if test "$PHP_MBREGEX" = "yes"; then
    if test "$PHP_ONIG" = "yes" || test "$PHP_ONIG" = "no"; then
                        if test "$PHP_MBREGEX_BACKTRACK" != "no"; then
        cat >> confdefs.h <<\EOF
#define USE_COMBINATION_EXPLOSION_CHECK 1
EOF

      fi

      echo $ac_n "checking for variable length prototypes and stdarg.h""... $ac_c" 1>&6
echo "configure:56928: checking for variable length prototypes and stdarg.h" >&5
if eval "test \"`echo '$''{'php_cv_mbstring_stdarg'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        if test "$cross_compiling" = yes; then
  
                    case $host_alias in
          *netware*)
          php_cv_mbstring_stdarg=yes
          ;;
          *)
          php_cv_mbstring_stdarg=no
          ;;
          esac
        
else
  cat > conftest.$ac_ext <<EOF
#line 56946 "configure"
#include "confdefs.h"

#include <stdarg.h>
int foo(int x, ...) {
	va_list va;
	va_start(va, x);
	va_arg(va, int);
	va_arg(va, char *);
	va_arg(va, double);
	return 0;
}
int main() { return foo(10, "", 3.14); }
        
EOF
if { (eval echo configure:56961: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  php_cv_mbstring_stdarg=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  php_cv_mbstring_stdarg=no
fi
rm -fr conftest*
fi

      
fi

echo "$ac_t""$php_cv_mbstring_stdarg" 1>&6

      for ac_hdr in stdlib.h string.h strings.h unistd.h sys/time.h sys/times.h stdarg.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:56982: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 56987 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:56992: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

      echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:57019: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 57027 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:57038: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF


      echo $ac_n "checking size of short""... $ac_c" 1>&6
echo "configure:57058: checking size of short" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_short=2
else
  cat > conftest.$ac_ext <<EOF
#line 57066 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(short));
  exit(0);
}
EOF
if { (eval echo configure:57077: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_short=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_short=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_short" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
EOF


      echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:57097: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=4
else
  cat > conftest.$ac_ext <<EOF
#line 57105 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:57116: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


      echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:57136: checking for working const" >&5
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 57141 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:57190: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.h <<\EOF
#define const 
EOF

fi

      echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:57211: checking whether time.h and sys/time.h may both be included" >&5
if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 57216 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:57225: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF

fi
 
      # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:57248: checking for working alloca.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 57253 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:57260: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:57281: checking for alloca" >&5
if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 57286 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:57314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:57346: checking whether alloca needs Cray hooks" >&5
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 57351 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:57376: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 57381 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:57404: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:57431: checking stack direction for C alloca" >&5
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
  cat > conftest.$ac_ext <<EOF
#line 57439 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:57458: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi

      echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
echo "configure:57480: checking for 8-bit clean memcmp" >&5
if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_func_memcmp_clean=no
else
  cat > conftest.$ac_ext <<EOF
#line 57488 "configure"
#include "confdefs.h"

main()
{
  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
}

EOF
if { (eval echo configure:57498: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_memcmp_clean=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_memcmp_clean=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"

      ac_safe=`echo "stdarg.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for stdarg.h""... $ac_c" 1>&6
echo "configure:57517: checking for stdarg.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 57522 "configure"
#include "confdefs.h"
#include <stdarg.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:57527: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        cat >> confdefs.h <<\EOF
#define HAVE_STDARG_PROTOTYPES 1
EOF

      
else
  echo "$ac_t""no" 1>&6
fi

      cat >> confdefs.h <<\EOF
#define PHP_ONIG_BUNDLED 1
EOF

      cat >> confdefs.h <<\EOF
#define HAVE_ONIG 1
EOF
 
      
  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DNOT_RUBY"

      
  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma"

      
  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma/enc"

      
  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES oniguruma"

      
  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS oniguruma/config.h"

      
  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
        oniguruma/regcomp.c
        oniguruma/regerror.c
        oniguruma/regexec.c
        oniguruma/reggnu.c
        oniguruma/regparse.c
        oniguruma/regenc.c
        oniguruma/regext.c
        oniguruma/regsyntax.c
        oniguruma/regtrav.c
        oniguruma/regversion.c
        oniguruma/st.c
        oniguruma/enc/unicode.c
        oniguruma/enc/ascii.c
        oniguruma/enc/utf8.c
        oniguruma/enc/euc_jp.c
        oniguruma/enc/euc_tw.c
        oniguruma/enc/euc_kr.c
        oniguruma/enc/sjis.c
        oniguruma/enc/iso8859_1.c
        oniguruma/enc/iso8859_2.c
        oniguruma/enc/iso8859_3.c
        oniguruma/enc/iso8859_4.c
        oniguruma/enc/iso8859_5.c
        oniguruma/enc/iso8859_6.c
        oniguruma/enc/iso8859_7.c
        oniguruma/enc/iso8859_8.c
        oniguruma/enc/iso8859_9.c
        oniguruma/enc/iso8859_10.c
        oniguruma/enc/iso8859_11.c
        oniguruma/enc/iso8859_13.c
        oniguruma/enc/iso8859_14.c
        oniguruma/enc/iso8859_15.c
        oniguruma/enc/iso8859_16.c
        oniguruma/enc/koi8.c
        oniguruma/enc/koi8_r.c
        oniguruma/enc/big5.c
        oniguruma/enc/utf16_be.c
        oniguruma/enc/utf16_le.c
        oniguruma/enc/utf32_be.c
        oniguruma/enc/utf32_le.c
      "

      
  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS oniguruma/oniguruma.h"

    else
                        if test ! -f "$PHP_ONIG/include/oniguruma.h"; then
        { echo "configure: error: oniguruma.h not found in $PHP_ONIG/include" 1>&2; exit 1; }
      fi
      
  if test "$PHP_ONIG/include" != "/usr/include"; then
    
  if test -z "$PHP_ONIG/include" || echo "$PHP_ONIG/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ONIG/include
  else
    
    ep_dir="`echo $PHP_ONIG/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ONIG/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$PHP_ONIG/$PHP_LIBDIR
      "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for onig_init in -lonig""... $ac_c" 1>&6
echo "configure:57757: checking for onig_init in -lonig" >&5
ac_lib_var=`echo onig'_'onig_init | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lonig  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 57765 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char onig_init();

int main() {
onig_init()
; return 0; }
EOF
if { (eval echo configure:57776: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        

  if test "$ext_shared" = "yes"; then
    MBSTRING_SHARED_LIBADD="-lonig $MBSTRING_SHARED_LIBADD"
    if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
      
  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ONIG/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
    
  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ONIG/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case onig in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lonig $LIBS" 
   ;;
  esac




  fi


        cat >> confdefs.h <<\EOF
#define HAVE_ONIG 1
EOF
 
      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_onig_onig_init
    
        { echo "configure: error: Problem with oniguruma. Please check config.log for more information." 1>&2; exit 1; }
      
  
fi


      save_old_LDFLAGS=$LDFLAGS
      
  for ac_i in $MBSTRING_SHARED_LIBADD; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      echo $ac_n "checking if oniguruma has an invalid entry for KOI8 encoding""... $ac_c" 1>&6
echo "configure:58002: checking if oniguruma has an invalid entry for KOI8 encoding" >&5
      cat > conftest.$ac_ext <<EOF
#line 58004 "configure"
#include "confdefs.h"

#include <oniguruma.h>
      
int main() {

return (int)(ONIG_ENCODING_KOI8 + 1);
      
; return 0; }
EOF
if { (eval echo configure:58015: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
        echo "$ac_t""no" 1>&6
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
        echo "$ac_t""yes" 1>&6
        cat >> confdefs.h <<\EOF
#define PHP_ONIG_BAD_KOI8_ENTRY 1
EOF

      
fi
rm -f conftest*
      LDFLAGS=$save_old_LDFLAGS
    fi

    
  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DONIG_ESCAPE_UCHAR_COLLISION=1"

    
  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DUChar=OnigUChar"


    cat >> confdefs.h <<\EOF
#define HAVE_MBREGEX 1
EOF


    
  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES php_mbregex.c"

    
  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS php_mbregex.h php_onig_compat.h"

  fi

  fi
  
    
    if test "$PHP_LIBMBFL" = "yes" || test "$PHP_LIBMBFL" = "no"; then
                
  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl"

    
  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/mbfl"

    
  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/filters"

    
  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/nls"

    
  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl"

    
  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl/mbfl"

    
  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS libmbfl/config.h"


    
  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
     libmbfl/filters/html_entities.c
     libmbfl/filters/mbfilter_7bit.c
     libmbfl/filters/mbfilter_ascii.c
     libmbfl/filters/mbfilter_base64.c
     libmbfl/filters/mbfilter_big5.c
     libmbfl/filters/mbfilter_byte2.c
     libmbfl/filters/mbfilter_byte4.c
     libmbfl/filters/mbfilter_cp1251.c
     libmbfl/filters/mbfilter_cp1252.c
     libmbfl/filters/mbfilter_cp1254.c
     libmbfl/filters/mbfilter_cp5022x.c
     libmbfl/filters/mbfilter_cp51932.c
     libmbfl/filters/mbfilter_cp850.c
     libmbfl/filters/mbfilter_cp866.c
     libmbfl/filters/mbfilter_cp932.c
     libmbfl/filters/mbfilter_cp936.c
     libmbfl/filters/mbfilter_euc_cn.c
     libmbfl/filters/mbfilter_euc_jp.c
     libmbfl/filters/mbfilter_euc_jp_win.c
     libmbfl/filters/mbfilter_euc_kr.c
     libmbfl/filters/mbfilter_euc_tw.c
     libmbfl/filters/mbfilter_htmlent.c
     libmbfl/filters/mbfilter_hz.c
     libmbfl/filters/mbfilter_iso2022_jp_ms.c
     libmbfl/filters/mbfilter_iso2022_kr.c
     libmbfl/filters/mbfilter_iso8859_1.c
     libmbfl/filters/mbfilter_iso8859_10.c
     libmbfl/filters/mbfilter_iso8859_13.c
     libmbfl/filters/mbfilter_iso8859_14.c
     libmbfl/filters/mbfilter_iso8859_15.c
     libmbfl/filters/mbfilter_iso8859_16.c
     libmbfl/filters/mbfilter_iso8859_2.c
     libmbfl/filters/mbfilter_iso8859_3.c
     libmbfl/filters/mbfilter_iso8859_4.c
     libmbfl/filters/mbfilter_iso8859_5.c
     libmbfl/filters/mbfilter_iso8859_6.c
     libmbfl/filters/mbfilter_iso8859_7.c
     libmbfl/filters/mbfilter_iso8859_8.c
     libmbfl/filters/mbfilter_iso8859_9.c
     libmbfl/filters/mbfilter_jis.c
     libmbfl/filters/mbfilter_koi8r.c
     libmbfl/filters/mbfilter_armscii8.c
     libmbfl/filters/mbfilter_qprint.c
     libmbfl/filters/mbfilter_sjis.c
     libmbfl/filters/mbfilter_sjis_open.c
     libmbfl/filters/mbfilter_tl_jisx0201_jisx0208.c
     libmbfl/filters/mbfilter_ucs2.c
     libmbfl/filters/mbfilter_ucs4.c
     libmbfl/filters/mbfilter_uhc.c
     libmbfl/filters/mbfilter_utf16.c
     libmbfl/filters/mbfilter_utf32.c
     libmbfl/filters/mbfilter_utf7.c
     libmbfl/filters/mbfilter_utf7imap.c
     libmbfl/filters/mbfilter_utf8.c
     libmbfl/filters/mbfilter_uuencode.c
     libmbfl/filters/mbfilter_koi8u.c
     libmbfl/mbfl/mbfilter.c
     libmbfl/mbfl/mbfilter_8bit.c
     libmbfl/mbfl/mbfilter_pass.c
     libmbfl/mbfl/mbfilter_wchar.c
     libmbfl/mbfl/mbfl_convert.c
     libmbfl/mbfl/mbfl_encoding.c
     libmbfl/mbfl/mbfl_filter_output.c
     libmbfl/mbfl/mbfl_ident.c
     libmbfl/mbfl/mbfl_language.c
     libmbfl/mbfl/mbfl_memory_device.c
     libmbfl/mbfl/mbfl_string.c
     libmbfl/mbfl/mbfl_allocators.c
     libmbfl/nls/nls_de.c
     libmbfl/nls/nls_en.c
     libmbfl/nls/nls_ja.c
     libmbfl/nls/nls_kr.c
     libmbfl/nls/nls_neutral.c
     libmbfl/nls/nls_ru.c
     libmbfl/nls/nls_uni.c
     libmbfl/nls/nls_zh.c
     libmbfl/nls/nls_hy.c
     libmbfl/nls/nls_tr.c
     libmbfl/nls/nls_ua.c
    "

    
  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DHAVE_CONFIG_H"

    
  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS libmbfl/config.h libmbfl/mbfl/eaw_table.h libmbfl/mbfl/mbfilter.h libmbfl/mbfl/mbfilter_8bit.h libmbfl/mbfl/mbfilter_pass.h libmbfl/mbfl/mbfilter_wchar.h libmbfl/mbfl/mbfl_allocators.h libmbfl/mbfl/mbfl_consts.h libmbfl/mbfl/mbfl_convert.h libmbfl/mbfl/mbfl_defs.h libmbfl/mbfl/mbfl_encoding.h libmbfl/mbfl/mbfl_filter_output.h libmbfl/mbfl/mbfl_ident.h libmbfl/mbfl/mbfl_language.h libmbfl/mbfl/mbfl_memory_device.h libmbfl/mbfl/mbfl_string.h"

  else
                for inc in include include/mbfl-1.0 include/mbfl; do
      if test -f "$PHP_LIBMBFL/$inc/mbfilter.h"; then
        PHP_LIBMBFL_INCLUDE="$inc"
        break
      fi
    done

    if test -z "$PHP_LIBMBFL_INCLUDE"; then
      { echo "configure: error: mbfilter.h not found. Please reinstall libmbfl library." 1>&2; exit 1; }
    else 
      
  if test "$PHP_LIBMBFL_INCLUDE" != "/usr/include"; then
    
  if test -z "$PHP_LIBMBFL_INCLUDE" || echo "$PHP_LIBMBFL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PHP_LIBMBFL_INCLUDE
  else
    
    ep_dir="`echo $PHP_LIBMBFL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PHP_LIBMBFL/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mbfl_buffer_converter_new in -lmbfl""... $ac_c" 1>&6
echo "configure:58313: checking for mbfl_buffer_converter_new in -lmbfl" >&5
ac_lib_var=`echo mbfl'_'mbfl_buffer_converter_new | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmbfl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 58321 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mbfl_buffer_converter_new();

int main() {
mbfl_buffer_converter_new()
; return 0; }
EOF
if { (eval echo configure:58332: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      

  if test "$ext_shared" = "yes"; then
    MBSTRING_SHARED_LIBADD="-lmbfl $MBSTRING_SHARED_LIBADD"
    if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then
      
  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then
    
  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mbfl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmbfl $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_mbfl_mbfl_buffer_converter_new
    
      { echo "configure: error: Problem with libmbfl. Please check config.log for more information." 1>&2; exit 1; }
    
  
fi

  fi

  
  
  ext_builddir=ext/mbstring
  ext_srcdir=$abs_srcdir/ext/mbstring

  ac_extra=`echo "$PHP_MBSTRING_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MBSTRING_SHARED=no
    
  
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mbstring"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MBSTRING_SHARED=yes
      
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmbstring.so '$ext_builddir'/phpmbstring.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMBSTRING, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmbstring.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmbstring.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmbstring.$suffix: $ext_builddir/phpmbstring.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmbstring.$suffix \$(phplibdir)

$ext_builddir/phpmbstring.$suffix: \$(shared_objects_mbstring) \$(PHPMBSTRING_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mbstring.so '$ext_builddir'/mbstring.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MBSTRING, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mbstring.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mbstring.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mbstring.$suffix: $ext_builddir/mbstring.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mbstring.$suffix \$(phplibdir)

$ext_builddir/mbstring.$suffix: \$(shared_objects_mbstring) \$(MBSTRING_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_MBSTRING 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MBSTRING_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mbstring"
        ;;
      *)
        
  
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mbstring
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MBSTRING_SHARED_LIBADD"


  for dir in $PHP_MBSTRING_EXTRA_BUILD_DIRS; do
    
  
    $php_shtool mkdir -p $ext_builddir/$dir
  

  done
  
  for dir in $PHP_MBSTRING_EXTRA_INCLUDES; do
    
  if test "$ext_srcdir/$dir" != "/usr/include"; then
    
  if test -z "$ext_srcdir/$dir" || echo "$ext_srcdir/$dir" | grep '^/' >/dev/null ; then
    ai_p=$ext_srcdir/$dir
  else
    
    ep_dir="`echo $ext_srcdir/$dir|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_srcdir/$dir\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  if test "$ext_builddir/$dir" != "/usr/include"; then
    
  if test -z "$ext_builddir/$dir" || echo "$ext_builddir/$dir" | grep '^/' >/dev/null ; then
    ai_p=$ext_builddir/$dir
  else
    
    ep_dir="`echo $ext_builddir/$dir|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_builddir/$dir\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  done

  if test "$ext_shared" = "no"; then
    
  
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    out="php_config.h"
  else
    
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

    if test -f "$ext_builddir/config.h.in"; then
      out="$abs_builddir/config.h"
    else
      out="php_config.h"
    fi
  fi
  
  for cfg in $PHP_MBSTRING_EXTRA_CONFIG_HEADERS; do
    cat > $ext_builddir/$cfg <<EOF
#include "$out"
EOF
  done
  
  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS mbstring.h"

  
  
    header_path=ext/mbstring
    for header_file in $PHP_MBSTRING_INSTALL_HEADERS; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  


fi

# vim600: sts=2 sw=2 et


  



php_with_mcrypt=no

echo $ac_n "checking for mcrypt support""... $ac_c" 1>&6
echo "configure:58969: checking for mcrypt support" >&5
# Check whether --with-mcrypt or --without-mcrypt was given.
if test "${with_mcrypt+set}" = set; then
  withval="$with_mcrypt"
  PHP_MCRYPT=$withval
else
  
  PHP_MCRYPT=no
  test "$PHP_ENABLE_ALL" && PHP_MCRYPT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MCRYPT in
shared,*)
  PHP_MCRYPT=`echo "$PHP_MCRYPT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MCRYPT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MCRYPT" != "no"; then
  for i in $PHP_MCRYPT /usr/local /usr; do
    test -f $i/include/mcrypt.h && MCRYPT_DIR=$i && break
  done

  if test -z "$MCRYPT_DIR"; then
    { echo "configure: error: mcrypt.h not found. Please reinstall libmcrypt." 1>&2; exit 1; }
  fi

  
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$MCRYPT_DIR/include
  echo $ac_n "checking for libmcrypt version""... $ac_c" 1>&6
echo "configure:59022: checking for libmcrypt version" >&5
  cat > conftest.$ac_ext <<EOF
#line 59024 "configure"
#include "confdefs.h"

#include <mcrypt.h>
#if MCRYPT_API_VERSION >= 20021217
  yes
#endif
  
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
    echo "$ac_t"">= 2.5.6" 1>&6
  
else
  rm -rf conftest*
  
    { echo "configure: error: libmcrypt version 2.5.6 or greater required." 1>&2; exit 1; }
  
fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$MCRYPT_DIR/$PHP_LIBDIR -lltdl
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
echo "configure:59148: checking for mcrypt_module_open in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 59156 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mcrypt_module_open();

int main() {
mcrypt_module_open()
; return 0; }
EOF
if { (eval echo configure:59167: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    
  
  case ltdl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        MCRYPT_SHARED_LIBADD="-lltdl $MCRYPT_SHARED_LIBADD" 
    else
      
  
  case ltdl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lltdl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_mcrypt_mcrypt_module_open
    
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$MCRYPT_DIR/$PHP_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
echo "configure:59320: checking for mcrypt_module_open in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 59328 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mcrypt_module_open();

int main() {
mcrypt_module_open()
; return 0; }
EOF
if { (eval echo configure:59339: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_mcrypt_mcrypt_module_open
    
      { echo "configure: error: Sorry, I was not able to diagnose which libmcrypt version you have installed." 1>&2; exit 1; }
    
  
fi

  
  
fi


  

  if test "$ext_shared" = "yes"; then
    MCRYPT_SHARED_LIBADD="-lmcrypt $MCRYPT_SHARED_LIBADD"
    if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then
      
  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MCRYPT_SHARED_LIBADD="-L$ai_p $MCRYPT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MCRYPT_SHARED_LIBADD="$ld_runpath_switch$ai_p $MCRYPT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then
    
  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mcrypt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmcrypt $LIBS" 
   ;;
  esac




  fi


  
  if test "$MCRYPT_DIR/include" != "/usr/include"; then
    
  if test -z "$MCRYPT_DIR/include" || echo "$MCRYPT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/include
  else
    
    ep_dir="`echo $MCRYPT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MCRYPT_SHARED_LIBADD"

  
  ext_builddir=ext/mcrypt
  ext_srcdir=$abs_srcdir/ext/mcrypt

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MCRYPT_SHARED=no
    
  
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mcrypt"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MCRYPT_SHARED=yes
      
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mcrypt="$shared_objects_mcrypt $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmcrypt.so '$ext_builddir'/phpmcrypt.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMCRYPT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmcrypt.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmcrypt.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmcrypt.$suffix: $ext_builddir/phpmcrypt.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmcrypt.$suffix \$(phplibdir)

$ext_builddir/phpmcrypt.$suffix: \$(shared_objects_mcrypt) \$(PHPMCRYPT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mcrypt.so '$ext_builddir'/mcrypt.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MCRYPT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mcrypt.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mcrypt.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mcrypt.$suffix: $ext_builddir/mcrypt.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mcrypt.$suffix \$(phplibdir)

$ext_builddir/mcrypt.$suffix: \$(shared_objects_mcrypt) \$(MCRYPT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_MCRYPT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MCRYPT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mcrypt"
        ;;
      *)
        
  
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mcrypt
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_with_mssql=no

echo $ac_n "checking for MSSQL support via FreeTDS""... $ac_c" 1>&6
echo "configure:59812: checking for MSSQL support via FreeTDS" >&5
# Check whether --with-mssql or --without-mssql was given.
if test "${with_mssql+set}" = set; then
  withval="$with_mssql"
  PHP_MSSQL=$withval
else
  
  PHP_MSSQL=no
  test "$PHP_ENABLE_ALL" && PHP_MSSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MSSQL in
shared,*)
  PHP_MSSQL=`echo "$PHP_MSSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MSSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MSSQL" != "no"; then

  if test "$PHP_MSSQL" = "yes"; then
    for i in /usr/local /usr; do
      if test -f $i/include/sybdb.h; then
        FREETDS_INSTALLATION_DIR=$i
        FREETDS_INCLUDE_DIR=$i/include
        break
      elif test -f $i/include/freetds/sybdb.h; then
        FREETDS_INSTALLATION_DIR=$i
        FREETDS_INCLUDE_DIR=$i/include/freetds
        break
      fi
    done

    if test -z "$FREETDS_INSTALLATION_DIR"; then
      { echo "configure: error: Cannot find FreeTDS in known installation directories" 1>&2; exit 1; }
    fi

  elif test "$PHP_MSSQL" != "no"; then

    if test -f $PHP_MSSQL/include/sybdb.h; then
      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include
    elif test -f $PHP_MSSQL/include/freetds/sybdb.h; then
      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include/freetds
    else
      { echo "configure: error: Directory $PHP_MSSQL is not a FreeTDS installation directory" 1>&2; exit 1; }
    fi
  fi  

  if test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
     { echo "configure: error: Could not find $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" 1>&2; exit 1; }
  fi

  
  if test "$FREETDS_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$FREETDS_INCLUDE_DIR" || echo "$FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETDS_INCLUDE_DIR
  else
    
    ep_dir="`echo $FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETDS_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    MSSQL_SHARED_LIBADD="-lsybdb $MSSQL_SHARED_LIBADD"
    if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
      
  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
    
  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sybdb in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybdb $LIBS" 
   ;;
  esac




  fi



  
  ext_builddir=ext/mssql
  ext_srcdir=$abs_srcdir/ext/mssql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MSSQL_SHARED=no
    
  
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mssql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MSSQL_SHARED=yes
      
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mssql="$shared_objects_mssql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmssql.so '$ext_builddir'/phpmssql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMSSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmssql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmssql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmssql.$suffix: $ext_builddir/phpmssql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmssql.$suffix \$(phplibdir)

$ext_builddir/phpmssql.$suffix: \$(shared_objects_mssql) \$(PHPMSSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mssql.so '$ext_builddir'/mssql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MSSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mssql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mssql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mssql.$suffix: $ext_builddir/mssql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mssql.$suffix \$(phplibdir)

$ext_builddir/mssql.$suffix: \$(shared_objects_mssql) \$(MSSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_MSSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MSSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mssql"
        ;;
      *)
        
  
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mssql
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
echo "configure:60310: checking for dnet_addr in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet_stub  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 60318 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_addr();

int main() {
dnet_addr()
; return 0; }
EOF
if { (eval echo configure:60329: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   

  if test "$ext_shared" = "yes"; then
    MSSQL_SHARED_LIBADD="-ldnet_stub $MSSQL_SHARED_LIBADD"
    if test -n ""; then
      
  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n ""; then
    
  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case dnet_stub in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldnet_stub $LIBS" 
   ;;
  esac




  fi


        cat >> confdefs.h <<\EOF
#define HAVE_LIBDNET_STUB 1
EOF

     
else
  echo "$ac_t""no" 1>&6
fi

  cat >> confdefs.h <<\EOF
#define HAVE_MSSQL 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_FREETDS 1
EOF

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MSSQL_SHARED_LIBADD"

fi








php_with_mysql=no

echo $ac_n "checking for MySQL support""... $ac_c" 1>&6
echo "configure:60473: checking for MySQL support" >&5
# Check whether --with-mysql or --without-mysql was given.
if test "${with_mysql+set}" = set; then
  withval="$with_mysql"
  PHP_MYSQL=$withval
else
  
  PHP_MYSQL=no
  test "$PHP_ENABLE_ALL" && PHP_MYSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MYSQL in
shared,*)
  PHP_MYSQL=`echo "$PHP_MYSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MYSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_mysql_sock=no

echo $ac_n "checking for specified location of the MySQL UNIX socket""... $ac_c" 1>&6
echo "configure:60517: checking for specified location of the MySQL UNIX socket" >&5
# Check whether --with-mysql-sock or --without-mysql-sock was given.
if test "${with_mysql_sock+set}" = set; then
  withval="$with_mysql_sock"
  PHP_MYSQL_SOCK=$withval
else
  
  PHP_MYSQL_SOCK=no
  

fi


ext_output=$PHP_MYSQL_SOCK
echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_ZLIB_DIR"; then
  
php_with_zlib_dir=no

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:60541: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no
  

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_MYSQL" = "mysqlnd"; then
    PHP_MYSQLND_ENABLED=yes

elif test "$PHP_MYSQL" != "no"; then
  MYSQL_DIR=
  MYSQL_INC_DIR=

  for i in $PHP_MYSQL /usr/local /usr; do
    if test -r $i/include/mysql/mysql.h; then
      MYSQL_DIR=$i
      MYSQL_INC_DIR=$i/include/mysql
      break
    elif test -r $i/include/mysql.h; then
      MYSQL_DIR=$i
      MYSQL_INC_DIR=$i/include
      break
    fi
  done

  if test -z "$MYSQL_DIR"; then
    { echo "configure: error: Cannot find MySQL header files under $PHP_MYSQL.
Note that the MySQL client library is not bundled anymore!" 1>&2; exit 1; }
  fi

  if test "$enable_maintainer_zts" = "yes"; then
    MYSQL_LIBNAME=mysqlclient_r
  else
    MYSQL_LIBNAME=mysqlclient
  fi
  case $host_alias in
    *netware*)
      MYSQL_LIBNAME=mysql
      ;;
  esac

    if test -z "$PHP_LIBDIR"; then
    PHP_LIBDIR=lib
  fi

  for i in $PHP_LIBDIR $PHP_LIBDIR/mysql; do
    
  str="$MYSQL_DIR/$i/lib$MYSQL_LIBNAME.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR=$MYSQL_DIR/$i
      break 2
    fi
  done

  done

  if test -z "$MYSQL_LIB_DIR"; then
    
  str="$MYSQL_DIR/lib/x86_64-linux-gnu/lib$MYSQL_LIBNAME.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR=$MYSQL_DIR/lib/x86_64-linux-gnu
      break 2
    fi
  done

  fi
  if test -z "$MYSQL_LIB_DIR"; then
    
  str="$MYSQL_DIR/lib/i386-linux-gnu/lib$MYSQL_LIBNAME.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR=$MYSQL_DIR/lib/i386-linux-gnu
      break 2
    fi
  done

  fi

  if test -z "$MYSQL_LIB_DIR"; then
    { echo "configure: error: Cannot find lib$MYSQL_LIBNAME under $MYSQL_DIR.
Note that the MySQL client library is not bundled anymore!" 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$MYSQL_LIB_DIR 
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_close in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
echo "configure:60738: checking for mysql_close in -l$MYSQL_LIBNAME" >&5
ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_close | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 60746 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_close();

int main() {
mysql_close()
; return 0; }
EOF
if { (eval echo configure:60757: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
     
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_close
    
    if test "$PHP_ZLIB_DIR" != "no"; then
      

  if test "$ext_shared" = "yes"; then
    MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR"; then
      
  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR"; then
    
  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$MYSQL_LIB_DIR 
      "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_error in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
echo "configure:60980: checking for mysql_error in -l$MYSQL_LIBNAME" >&5
ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_error | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 60988 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_error();

int main() {
mysql_error()
; return 0; }
EOF
if { (eval echo configure:60999: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_error
    
        { echo "configure: error: mysql configure failed. Please check config.log for more information." 1>&2; exit 1; }
      
  
fi
  
      MYSQL_LIBS="-L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
    else
      
  
  case z in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD" 
    else
      
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$MYSQL_LIB_DIR
      "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_errno in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
echo "configure:61154: checking for mysql_errno in -l$MYSQL_LIBNAME" >&5
ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_errno | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61162 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_errno();

int main() {
mysql_errno()
; return 0; }
EOF
if { (eval echo configure:61173: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_errno
    
        { echo "configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." 1>&2; exit 1; }
      
  
fi
   
      MYSQL_LIBS="-lz"
    fi
  
  
fi


  

  if test "$ext_shared" = "yes"; then
    MYSQL_SHARED_LIBADD="-l$MYSQL_LIBNAME $MYSQL_SHARED_LIBADD"
    if test -n "$MYSQL_LIB_DIR"; then
      
  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_LIB_DIR
  else
    
    ep_dir="`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MYSQL_LIB_DIR"; then
    
  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_LIB_DIR
  else
    
    ep_dir="`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $MYSQL_LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$MYSQL_LIBNAME $LIBS" 
   ;;
  esac




  fi


  
  if test "$MYSQL_INC_DIR" != "/usr/include"; then
    
  if test -z "$MYSQL_INC_DIR" || echo "$MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_INC_DIR
  else
    
    ep_dir="`echo $MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  MYSQL_MODULE_TYPE=external
  MYSQL_LIBS="-L$MYSQL_LIB_DIR -l$MYSQL_LIBNAME $MYSQL_LIBS"
  MYSQL_INCLUDE=-I$MYSQL_INC_DIR
 
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_MODULE_TYPE"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_LIBS"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_INCLUDE"

  

fi

if test "$PHP_MYSQL" != "no"; then
  echo $ac_n "checking for MySQL UNIX socket location""... $ac_c" 1>&6
echo "configure:61367: checking for MySQL UNIX socket location" >&5
  if test "$PHP_MYSQL_SOCK" != "no" && test "$PHP_MYSQL_SOCK" != "yes"; then
    MYSQL_SOCK=$PHP_MYSQL_SOCK
    cat >> confdefs.h <<EOF
#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
EOF

    echo "$ac_t""$MYSQL_SOCK" 1>&6
  elif test "$PHP_MYSQL" = "yes" || test "$PHP_MYSQL_SOCK" = "yes"; then
    
  for i in  \
    /var/run/mysqld/mysqld.sock \
    /var/tmp/mysql.sock \
    /var/run/mysql/mysql.sock \
    /var/lib/mysql/mysql.sock \
    /var/mysql/mysql.sock \
    /usr/local/mysql/var/mysql.sock \
    /Private/tmp/mysql.sock \
    /private/tmp/mysql.sock \
    /tmp/mysql.sock \
  ; do
    if test -r $i; then
      MYSQL_SOCK=$i
      break 2
    fi
  done

  if test -n "$MYSQL_SOCK"; then
    cat >> confdefs.h <<EOF
#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
EOF

    echo "$ac_t""$MYSQL_SOCK" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  else
    echo "$ac_t""no" 1>&6
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_MYSQL 1
EOF

  
  ext_builddir=ext/mysql
  ext_srcdir=$abs_srcdir/ext/mysql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MYSQL_SHARED=no
    
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MYSQL_SHARED=yes
      
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mysql="$shared_objects_mysql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysql.so '$ext_builddir'/phpmysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMYSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmysql.$suffix: $ext_builddir/phpmysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysql.$suffix \$(phplibdir)

$ext_builddir/phpmysql.$suffix: \$(shared_objects_mysql) \$(PHPMYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysql.so '$ext_builddir'/mysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MYSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysql.$suffix: $ext_builddir/mysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysql.$suffix \$(phplibdir)

$ext_builddir/mysql.$suffix: \$(shared_objects_mysql) \$(MYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_MYSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MYSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mysql"
        ;;
      *)
        
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mysql
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_SHARED_LIBADD"


  if test "$PHP_MYSQL" = "mysqlnd"; then
    
  am_i_shared=$PHP_MYSQL_SHARED
  is_it_shared=$PHP_MYSQLND_SHARED
  is_it_enabled=$PHP_MYSQLND
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension mysql to build statically, but it
depends on extension mysqlnd, which you've configured to build shared.
You either need to build mysql shared or build mysqlnd statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension mysql, which depends on extension mysqlnd,
but you've either not enabled mysqlnd, or have disabled it.
" 1>&2; exit 1; }
  fi
  
    cat >> confdefs.h <<\EOF
#define MYSQL_USE_MYSQLND 1
EOF

  fi
fi



php_with_mysqli=no

echo $ac_n "checking for MySQLi support""... $ac_c" 1>&6
echo "configure:61740: checking for MySQLi support" >&5
# Check whether --with-mysqli or --without-mysqli was given.
if test "${with_mysqli+set}" = set; then
  withval="$with_mysqli"
  PHP_MYSQLI=$withval
else
  
  PHP_MYSQLI=no
  test "$PHP_ENABLE_ALL" && PHP_MYSQLI=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MYSQLI in
shared,*)
  PHP_MYSQLI=`echo "$PHP_MYSQLI"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MYSQLI=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_enable_embedded_mysqli=no

echo $ac_n "checking whether to enable embedded MySQLi support""... $ac_c" 1>&6
echo "configure:61784: checking whether to enable embedded MySQLi support" >&5
# Check whether --enable-embedded_mysqli or --disable-embedded_mysqli was given.
if test "${enable_embedded_mysqli+set}" = set; then
  enableval="$enable_embedded_mysqli"
  PHP_EMBEDDED_MYSQLI=$enableval
else
  
  PHP_EMBEDDED_MYSQLI=no
  

fi


ext_output=$PHP_EMBEDDED_MYSQLI
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MYSQLI" = "mysqlnd"; then
    PHP_MYSQLND_ENABLED=yes

elif test "$PHP_MYSQLI" != "no"; then

  if test "$PHP_MYSQLI" = "yes"; then
    MYSQL_CONFIG=`$php_shtool path mysql_config`
  else
    MYSQL_CONFIG=$PHP_MYSQLI
  fi

  MYSQL_LIB_NAME='mysqlclient'
  if test "$PHP_EMBEDDED_MYSQLI" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_EMBEDDED_MYSQLI 1
EOF

    MYSQL_LIB_CFG='--libmysqld-libs'
        mysqli_extra_sources="mysqli_embedded.c"
  elif test "$enable_maintainer_zts" = "yes"; then
    MYSQL_LIB_CFG='--libs_r'
    MYSQL_LIB_NAME='mysqlclient_r'
  else
    MYSQL_LIB_CFG='--libs'
  fi
  
  if test -x "$MYSQL_CONFIG" && $MYSQL_CONFIG $MYSQL_LIB_CFG > /dev/null 2>&1; then
    MYSQLI_INCLINE=`$MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
    MYSQLI_LIBLINE=`$MYSQL_CONFIG $MYSQL_LIB_CFG | $SED -e "s/'//g"`
  else
    echo "$ac_t""mysql_config not found" 1>&6
    { echo "configure: error: Please reinstall the mysql distribution" 1>&2; exit 1; }
  fi

        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $MYSQLI_LIBLINE
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_set_server_option in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
echo "configure:61935: checking for mysql_set_server_option in -l$MYSQL_LIB_NAME" >&5
ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_server_option | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$MYSQL_LIB_NAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61943 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_set_server_option();

int main() {
mysql_set_server_option()
; return 0; }
EOF
if { (eval echo configure:61954: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    
  for ac_i in $MYSQLI_INCLINE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    
  for ac_i in $MYSQLI_LIBLINE; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MYSQLI_SHARED_LIBADD="-L$ai_p $MYSQLI_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQLI_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQLI_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    cat >> confdefs.h <<\EOF
#define HAVE_MYSQLILIB 1
EOF

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="$MYSQLI_LIBLINE"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_set_character_set in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
echo "configure:62202: checking for mysql_set_character_set in -l$MYSQL_LIB_NAME" >&5
ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_character_set | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$MYSQL_LIB_NAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62210 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_set_character_set();

int main() {
mysql_set_character_set()
; return 0; }
EOF
if { (eval echo configure:62221: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
     
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_character_set
    
      { echo "configure: error: MySQLI doesn't support versions < 4.1.13 (for MySQL 4.1.x) and < 5.0.7 for (MySQL 5.0.x) anymore. Please update your libraries." 1>&2; exit 1; }
    
  
fi

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_server_option
    
    { echo "configure: error: wrong mysql library version or lib not found. Check config.log for more information." 1>&2; exit 1; }
  
  
fi

        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $MYSQLI_LIBLINE
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
echo "configure:62365: checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME" >&5
ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_stmt_next_result | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$MYSQL_LIB_NAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62373 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_stmt_next_result();

int main() {
mysql_stmt_next_result()
; return 0; }
EOF
if { (eval echo configure:62384: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_STMT_NEXT_RESULT 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_stmt_next_result
    
  
  
fi

fi

if test "$PHP_MYSQLI" != "no"; then
  mysqli_sources="mysqli.c mysqli_api.c mysqli_prop.c mysqli_nonapi.c \
                  mysqli_fe.c mysqli_report.c mysqli_driver.c mysqli_warning.c \
                  mysqli_exception.c $mysqli_extra_sources"
  
  ext_builddir=ext/mysqli
  ext_srcdir=$abs_srcdir/ext/mysqli

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MYSQLI_SHARED=no
    
  
  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysqli"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MYSQLI_SHARED=yes
      
  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mysqli="$shared_objects_mysqli $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysqli.so '$ext_builddir'/phpmysqli.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMYSQLI, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysqli.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysqli.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmysqli.$suffix: $ext_builddir/phpmysqli.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysqli.$suffix \$(phplibdir)

$ext_builddir/phpmysqli.$suffix: \$(shared_objects_mysqli) \$(PHPMYSQLI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysqli.so '$ext_builddir'/mysqli.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MYSQLI, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysqli.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysqli.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysqli.$suffix: $ext_builddir/mysqli.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysqli.$suffix \$(phplibdir)

$ext_builddir/mysqli.$suffix: \$(shared_objects_mysqli) \$(MYSQLI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_MYSQLI 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MYSQLI_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mysqli"
        ;;
      *)
        
  
  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mysqli
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQLI_SHARED_LIBADD"

  
  
    for header_file in ext/mysqli/php_mysqli_structs.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  


  if test "$PHP_MYSQLI" = "mysqlnd"; then
    
  am_i_shared=$PHP_MYSQLI_SHARED
  is_it_shared=$PHP_MYSQLND_SHARED
  is_it_enabled=$PHP_MYSQLND
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension mysqli to build statically, but it
depends on extension mysqlnd, which you've configured to build shared.
You either need to build mysqli shared or build mysqlnd statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension mysqli, which depends on extension mysqlnd,
but you've either not enabled mysqlnd, or have disabled it.
" 1>&2; exit 1; }
  fi
  
    cat >> confdefs.h <<\EOF
#define MYSQLI_USE_MYSQLND 1
EOF

  fi
fi


if test -z "$SED"; then
  PHP_OCI8_SED="sed";
else
  PHP_OCI8_SED="$SED";
fi

PHP_OCI8_TAIL1=`echo a | tail -n1 2>/dev/null`
if test "$PHP_OCI8_TAIL1" = "a"; then
    PHP_OCI8_TAIL1="tail -n1"
else
    PHP_OCI8_TAIL1="tail -1"
fi











php_with_oci8=no

echo $ac_n "checking for Oracle Database OCI8 support""... $ac_c" 1>&6
echo "configure:62794: checking for Oracle Database OCI8 support" >&5
# Check whether --with-oci8 or --without-oci8 was given.
if test "${with_oci8+set}" = set; then
  withval="$with_oci8"
  PHP_OCI8=$withval
else
  
  PHP_OCI8=no
  test "$PHP_ENABLE_ALL" && PHP_OCI8=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OCI8 in
shared,*)
  PHP_OCI8=`echo "$PHP_OCI8"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_OCI8=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_OCI8" != "no"; then 

  if test -z "$PHP_OCI8"; then
        { echo "configure: error: Empty parameter value passed to --with-oci8" 1>&2; exit 1; }
  fi

  
  echo $ac_n "checking PHP version""... $ac_c" 1>&6
echo "configure:62842: checking PHP version" >&5

  tmp_version=$PHP_VERSION
  if test -z "$tmp_version"; then
    if test -z "$PHP_CONFIG"; then
      { echo "configure: error: php-config not found" 1>&2; exit 1; }
    fi
    php_version=`$PHP_CONFIG --version 2>/dev/null|head -n 1|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
  else
    php_version=`echo "$tmp_version"|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
  fi

  if test -z "$php_version"; then
    { echo "configure: error: failed to detect PHP version, please report" 1>&2; exit 1; }
  fi

  ac_IFS=$IFS
  IFS="."
  set $php_version
  IFS=$ac_IFS
  oci8_php_version=`expr $1 \* 1000000 + $2 \* 1000 + $3`

  if test "$oci8_php_version" -lt "4003009"; then
    { echo "configure: error: You need at least PHP 4.3.9 to be able to use this version of OCI8. PHP $php_version found" 1>&2; exit 1; }
  elif test "$oci8_php_version" -ge "6000000"; then
    { echo "configure: error: This version of OCI8 is not compatible with PHP 6 or higher" 1>&2; exit 1; }
  else
    echo "$ac_t""$php_version, ok" 1>&6
  fi

  
  echo $ac_n "checking size of long int""... $ac_c" 1>&6
echo "configure:62874: checking size of long int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 62882 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long int));
  exit(0);
}
EOF
if { (eval echo configure:62893: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
EOF


  echo $ac_n "checking checking if we're on a 64-bit platform""... $ac_c" 1>&6
echo "configure:62913: checking checking if we're on a 64-bit platform" >&5
  if test "$ac_cv_sizeof_long_int" = "4"; then
    echo "$ac_t""no" 1>&6
    PHP_OCI8_OH_LIBDIR=lib32 
    PHP_OCI8_IC_LIBDIR_SUFFIX=""
  else
    echo "$ac_t""yes" 1>&6
    PHP_OCI8_OH_LIBDIR=lib
    PHP_OCI8_IC_LIBDIR_SUFFIX=64
  fi

  
  PHP_OCI8_INSTANT_CLIENT="no"

            if test "$PHP_OCI8" = "yes" && test -z "$ORACLE_HOME"; then
    echo "configure: warning: OCI8 extension: ORACLE_HOME is not set, looking for default Oracle Instant Client instead" 1>&2
    PHP_OCI8=instantclient
  fi

  if test "`echo $PHP_OCI8`" = "instantclient"; then
    PHP_OCI8_INSTANT_CLIENT="yes"
  elif test "`echo $PHP_OCI8 | cut -d, -f2`" = "instantclient"; then
    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f3`"
    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f1,4`"
    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
	PHP_OCI8_INSTANT_CLIENT="yes"
    fi
    if test -z "$PHP_OCI8"; then
	PHP_OCI8=yes
    fi
  elif test "`echo $PHP_OCI8 | cut -d, -f1`" = "instantclient"; then
    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f2`"
    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f3,4`"
    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
	PHP_OCI8_INSTANT_CLIENT="yes"
    fi
    if test -z "$PHP_OCI8"; then
	PHP_OCI8=yes
    fi
  fi

  if test "$PHP_OCI8_INSTANT_CLIENT" = "no"; then
            
    echo $ac_n "checking Oracle ORACLE_HOME install directory""... $ac_c" 1>&6
echo "configure:62957: checking Oracle ORACLE_HOME install directory" >&5

    if test "$PHP_OCI8" = "yes"; then
      OCI8_DIR=$ORACLE_HOME
    else
      OCI8_DIR=$PHP_OCI8
    fi
    echo "$ac_t""$OCI8_DIR" 1>&6

    
  echo $ac_n "checking ORACLE_HOME library validity""... $ac_c" 1>&6
echo "configure:62968: checking ORACLE_HOME library validity" >&5
  if test ! -d "$OCI8_DIR"; then
    { echo "configure: error: ${OCI8_DIR} is not a directory" 1>&2; exit 1; }
  fi
  if test -d "$OCI8_DIR/lib" && test ! -d "$OCI8_DIR/lib32"; then
    OCI8_LIB_DIR=lib
  elif test ! -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
    OCI8_LIB_DIR=lib32
  elif test -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
    OCI8_LIB_DIR=$PHP_OCI8_OH_LIBDIR
  else
        if test -f "$OCI8_DIR/libociei.$SHLIB_SUFFIX_NAME"; then
      { echo "configure: error: Expected an ORACLE_HOME top level directory but ${OCI8_DIR} appears to be an Instant Client directory. Try --with-oci8=instantclient,${OCI8_DIR}" 1>&2; exit 1; }
    else
      { echo "configure: error: Oracle library directory not found in ${OCI8_DIR}" 1>&2; exit 1; }
    fi
  fi
  echo "$ac_t""$OCI8_LIB_DIR" 1>&6


    if test -d "$OCI8_DIR/rdbms/public"; then
      
  if test "$OCI8_DIR/rdbms/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/rdbms/public" || echo "$OCI8_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/rdbms/public
  else
    
    ep_dir="`echo $OCI8_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/public\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public"
    fi
    if test -d "$OCI8_DIR/rdbms/demo"; then
      
  if test "$OCI8_DIR/rdbms/demo" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/rdbms/demo" || echo "$OCI8_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/rdbms/demo
  else
    
    ep_dir="`echo $OCI8_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/demo\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo"
    fi
    if test -d "$OCI8_DIR/network/public"; then
      
  if test "$OCI8_DIR/network/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/network/public" || echo "$OCI8_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/network/public
  else
    
    ep_dir="`echo $OCI8_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/network/public\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/network/public"
    fi
    if test -d "$OCI8_DIR/plsql/public"; then
      
  if test "$OCI8_DIR/plsql/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/plsql/public" || echo "$OCI8_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/plsql/public
  else
    
    ep_dir="`echo $OCI8_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/plsql/public\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/plsql/public"
    fi

    if test -f "$OCI8_DIR/$OCI8_LIB_DIR/sysliblist"; then
      
  for ac_i in `cat $OCI8_DIR/$OCI8_LIB_DIR/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    elif test -f "$OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist"; then
      
  for ac_i in `cat $OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    fi

    
  echo $ac_n "checking Oracle library version compatibility""... $ac_c" 1>&6
echo "configure:63309: checking Oracle library version compatibility" >&5
  OCI8_LCS_BASE=$OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME
  OCI8_LCS=`ls $OCI8_LCS_BASE.*.1 2> /dev/null | $PHP_OCI8_TAIL1`  # Oracle 10g, 11g etc
  if test -s "$OCI8_DIR/orainst/unix.rgs"; then
    OCI8_ORACLE_VERSION=`grep '"ocommon"' $OCI8_DIR/orainst/unix.rgs | $PHP_OCI8_SED 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
    test -z "$OCI8_ORACLE_VERSION" && OCI8_ORACLE_VERSION=7.3
  elif test -f "$OCI8_LCS"; then
        OCI8_ORACLE_VERSION=`echo $OCI8_LCS | $PHP_OCI8_SED -e 's/.*\.\(.*\)\.1$/\1.1/'`
  elif test -f $OCI8_LCS_BASE.9.0; then
        OCI8_ORACLE_VERSION=9.0
  elif test -f $OCI8_LCS_BASE.8.0; then
    OCI8_ORACLE_VERSION=8.1
  elif test -f $OCI8_LCS_BASE.1.0; then
    OCI8_ORACLE_VERSION=8.0
  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.a; then 
    if test -f $OCI8_DIR/$OCI8_LIB_DIR/libcore4.a; then 
      OCI8_ORACLE_VERSION=8.0
    else
      OCI8_ORACLE_VERSION=8.1
    fi
  else
    { echo "configure: error: Oracle libclntsh.$SHLIB_SUFFIX_NAME client library not found" 1>&2; exit 1; }
  fi
  echo "$ac_t""$OCI8_ORACLE_VERSION" 1>&6


    case $OCI8_ORACLE_VERSION in
      7.3|8.0|8.1)
	{ echo "configure: error: Oracle client libraries < 9.2 are not supported" 1>&2; exit 1; }
	;;

      9.0)
	
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
	  -L$OCI8_DIR/$OCI8_LIB_DIR $OCI8_SHARED_LIBADD
	"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
echo "configure:63439: checking for OCIEnvNlsCreate in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 63447 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCIEnvNlsCreate();

int main() {
OCIEnvNlsCreate()
; return 0; }
EOF
if { (eval echo configure:63458: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
	  OCI8_ORACLE_VERSION=9.2
	
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIEnvNlsCreate
    
	  { echo "configure: error: Oracle client libraries < 9.2 are not supported" 1>&2; exit 1; }
	
  
fi

	;;

      *)
	cat >> confdefs.h <<\EOF
#define HAVE_OCI_LOB_READ2 1
EOF

	;;
    esac

    
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
    else
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lclntsh" 
   ;;
  esac


    fi
   ;;
  esac


    
  if test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/$OCI8_LIB_DIR" || echo "$OCI8_DIR/$OCI8_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/$OCI8_LIB_DIR
  else
    
    ep_dir="`echo $OCI8_DIR/$OCI8_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/$OCI8_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    
  ext_builddir=ext/oci8
  ext_srcdir=$abs_srcdir/ext/oci8

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_OCI8_SHARED=no
    
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC oci8"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_OCI8_SHARED=yes
      
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPOCI8, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)

$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(OCI8, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)

$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_OCI8 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_OCI8_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC oci8"
        ;;
      *)
        
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=oci8
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    cat >> confdefs.h <<\EOF
#define HAVE_OCI8 1
EOF


    
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"

  

    
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"

  

    
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"

  


        cat >> confdefs.h <<EOF
#define PHP_OCI8_DEF_DIR "$OCI8_DIR"
EOF

    cat >> confdefs.h <<EOF
#define PHP_OCI8_DEF_SHARED_LIBADD "$OCI8_SHARED_LIBADD"
EOF


  else
            
    echo $ac_n "checking Oracle Instant Client directory""... $ac_c" 1>&6
echo "configure:63891: checking Oracle Instant Client directory" >&5

    if test "$PHP_OCI8_INSTANT_CLIENT" = "yes"; then
                                    PHP_OCI8_INSTANT_CLIENT=`ls -d /usr/lib/oracle/*/client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib/libclntsh.* 2> /dev/null | $PHP_OCI8_TAIL1 | $PHP_OCI8_SED -e 's#/libclntsh[^/]*##'`
      if test -z "$PHP_OCI8_INSTANT_CLIENT"; then
	{ echo "configure: error: Oracle Instant Client directory /usr/lib/oracle/.../client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib libraries not found. Try --with-oci8=instantclient,DIR" 1>&2; exit 1; }
      fi
    fi
    echo "$ac_t""$PHP_OCI8_INSTANT_CLIENT" 1>&6

    OCI8_DIR=$PHP_OCI8_INSTANT_CLIENT

    echo $ac_n "checking Oracle Instant Client SDK header directory""... $ac_c" 1>&6
echo "configure:63904: checking Oracle Instant Client SDK header directory" >&5

        OCISDKRPMINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!^/usr/lib/oracle/\(.*\)/client\('${PHP_OCI8_IC_LIBDIR_SUFFIX}'\)*/lib/*$!/usr/include/oracle/\1/client\2!'`

        OCISDKZIPINC=$PHP_OCI8_INSTANT_CLIENT/sdk/include

        OCISDKMANINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!\(.*\)/lib/*$!\1/include!'`

    if test -f "$OCISDKRPMINC/oci.h"; then
      echo "$ac_t""$OCISDKRPMINC" 1>&6
      
  if test "$OCISDKRPMINC" != "/usr/include"; then
    
  if test -z "$OCISDKRPMINC" || echo "$OCISDKRPMINC" | grep '^/' >/dev/null ; then
    ai_p=$OCISDKRPMINC
  else
    
    ep_dir="`echo $OCISDKRPMINC|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCISDKRPMINC\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      OCI8INCDIR=$OCISDKRPMINC
    elif test -f "$OCISDKZIPINC/oci.h"; then
      echo "$ac_t""$OCISDKZIPINC" 1>&6
      
  if test "$OCISDKZIPINC" != "/usr/include"; then
    
  if test -z "$OCISDKZIPINC" || echo "$OCISDKZIPINC" | grep '^/' >/dev/null ; then
    ai_p=$OCISDKZIPINC
  else
    
    ep_dir="`echo $OCISDKZIPINC|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCISDKZIPINC\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      OCI8INCDIR=$OCISDKZIPINC
    elif test -f "$OCISDKMANINC/oci.h"; then
      echo "$ac_t""$OCISDKMANINC" 1>&6
      
  if test "$OCISDKMANINC" != "/usr/include"; then
    
  if test -z "$OCISDKMANINC" || echo "$OCISDKMANINC" | grep '^/' >/dev/null ; then
    ai_p=$OCISDKMANINC
  else
    
    ep_dir="`echo $OCISDKMANINC|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCISDKMANINC\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      OCI8INCDIR=$OCISDKMANINC
    else
      { echo "configure: error: Oracle Instant Client SDK header files not found" 1>&2; exit 1; }
    fi

    OCISYSLIBLIST=`echo "$OCI8INCDIR" | $PHP_OCI8_SED -e 's!\(.*\)/include$!\1/demo/sysliblist!'`
    if test -f "$OCISYSLIBLIST"; then
      
  for ac_i in `cat $OCISYSLIBLIST`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    fi

    
  echo $ac_n "checking Oracle Instant Client library version compatibility""... $ac_c" 1>&6
echo "configure:64113: checking Oracle Instant Client library version compatibility" >&5
  OCI8_LCS_BASE=$PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME
  OCI8_LCS=`ls $OCI8_LCS_BASE.*.1 2> /dev/null | $PHP_OCI8_TAIL1`  # Oracle 10g, 11g etc
  OCI8_NNZ=`ls $PHP_OCI8_INSTANT_CLIENT/libnnz*.$SHLIB_SUFFIX_NAME 2> /dev/null | $PHP_OCI8_TAIL1`
  if test -f "$OCI8_NNZ" && test -f "$OCI8_LCS"; then
    if test ! -f "$OCI8_LCS_BASE"; then
      { echo "configure: error: Link from $OCI8_LCS_BASE to $OCI8_LCS_BASE.*.1 not found" 1>&2; exit 1; }
    fi
    OCI8_ORACLE_VERSION=`echo $OCI8_LCS | $PHP_OCI8_SED -e 's/.*\.\(.*\)\.1$/\1.1/'`
  else
    { echo "configure: error: Oracle Instant Client libraries libnnz.$SHLIB_SUFFIX_NAME and libclntsh.$SHLIB_SUFFIX_NAME not found" 1>&2; exit 1; }
  fi
  echo "$ac_t""$OCI8_ORACLE_VERSION" 1>&6

    
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
    else
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lclntsh" 
   ;;
  esac


    fi
   ;;
  esac


    
  if test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/$PHP_LIBDIR" && test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/lib"; then
    
  if test -z "$PHP_OCI8_INSTANT_CLIENT" || echo "$PHP_OCI8_INSTANT_CLIENT" | grep '^/' >/dev/null ; then
    ai_p=$PHP_OCI8_INSTANT_CLIENT
  else
    
    ep_dir="`echo $PHP_OCI8_INSTANT_CLIENT|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_OCI8_INSTANT_CLIENT\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi


    cat >> confdefs.h <<\EOF
#define HAVE_OCI_INSTANT_CLIENT 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_OCI_LOB_READ2 1
EOF


    
  ext_builddir=ext/oci8
  ext_srcdir=$abs_srcdir/ext/oci8

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_OCI8_SHARED=no
    
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC oci8"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_OCI8_SHARED=yes
      
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPOCI8, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)

$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(OCI8, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)

$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_OCI8 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_OCI8_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC oci8"
        ;;
      *)
        
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=oci8
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    cat >> confdefs.h <<\EOF
#define HAVE_OCI8 1
EOF


    
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"

  

    
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"

  

    
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"

  


  fi
fi












if test -z "$ODBC_TYPE"; then

php_with_adabas=no


# Check whether --with-adabas or --without-adabas was given.
if test "${with_adabas+set}" = set; then
  withval="$with_adabas"
  PHP_ADABAS=$withval
else
  
  PHP_ADABAS=no
  test "$PHP_ENABLE_ALL" && PHP_ADABAS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ADABAS in
shared,*)
  PHP_ADABAS=`echo "$PHP_ADABAS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ADABAS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_ADABAS" != "no"; then
    echo $ac_n "checking for Adabas support""... $ac_c" 1>&6
echo "configure:64574: checking for Adabas support" >&5
    if test "$PHP_ADABAS" = "yes"; then
      PHP_ADABAS=/usr/local
    fi
    
  if test "$PHP_ADABAS/incl" != "/usr/include"; then
    
  if test -z "$PHP_ADABAS/incl" || echo "$PHP_ADABAS/incl" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ADABAS/incl
  else
    
    ep_dir="`echo $PHP_ADABAS/incl|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ADABAS/incl\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  if test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ADABAS/$PHP_LIBDIR" || echo "$PHP_ADABAS/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ADABAS/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ADABAS/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ADABAS/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

    ODBC_OBJS="$PHP_ADABAS/$PHP_LIBDIR/odbclib.a"
    ODBC_LIB="$abs_builddir/ext/odbc/libodbc_adabas.a"
    $srcdir/build/shtool mkdir -f -p ext/odbc
    rm -f "$ODBC_LIB"
    cp "$ODBC_OBJS" "$ODBC_LIB"
    
  
  case sqlptc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlptc $LIBS" 
   ;;
  esac


    
  
  case sqlrte in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlrte $LIBS" 
   ;;
  esac


    

  if test -n "$abs_builddir/ext/odbc"; then
    
  if test "$abs_builddir/ext/odbc" != "/usr/$PHP_LIBDIR" && test "$abs_builddir/ext/odbc" != "/usr/lib"; then
    
  if test -z "$abs_builddir/ext/odbc" || echo "$abs_builddir/ext/odbc" | grep '^/' >/dev/null ; then
    ai_p=$abs_builddir/ext/odbc
  else
    
    ep_dir="`echo $abs_builddir/ext/odbc|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$abs_builddir/ext/odbc\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case odbc_adabas in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lodbc_adabas $LIBS" 
   ;;
  esac




    ODBC_TYPE=adabas
    ODBC_INCDIR=$PHP_ADABAS/incl
    
if ! test -f "$ODBC_INCDIR/sqlext.h"; then
  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" 1>&2; exit 1; }
fi

    cat >> confdefs.h <<\EOF
#define HAVE_ADABAS 1
EOF

    echo "$ac_t""$ext_output" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_sapdb=no


# Check whether --with-sapdb or --without-sapdb was given.
if test "${with_sapdb+set}" = set; then
  withval="$with_sapdb"
  PHP_SAPDB=$withval
else
  
  PHP_SAPDB=no
  test "$PHP_ENABLE_ALL" && PHP_SAPDB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SAPDB in
shared,*)
  PHP_SAPDB=`echo "$PHP_SAPDB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SAPDB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_SAPDB" != "no"; then
    echo $ac_n "checking for SAP DB support""... $ac_c" 1>&6
echo "configure:64777: checking for SAP DB support" >&5
    if test "$PHP_SAPDB" = "yes"; then
      PHP_SAPDB=/usr/local
    fi
    
  if test "$PHP_SAPDB/incl" != "/usr/include"; then
    
  if test -z "$PHP_SAPDB/incl" || echo "$PHP_SAPDB/incl" | grep '^/' >/dev/null ; then
    ai_p=$PHP_SAPDB/incl
  else
    
    ep_dir="`echo $PHP_SAPDB/incl|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_SAPDB/incl\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  if test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_SAPDB/$PHP_LIBDIR" || echo "$PHP_SAPDB/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_SAPDB/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_SAPDB/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_SAPDB/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

    
  
  case sqlod in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlod $LIBS" 
   ;;
  esac


    ODBC_TYPE=sapdb
    cat >> confdefs.h <<\EOF
#define HAVE_SAPDB 1
EOF

    echo "$ac_t""$ext_output" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_solid=no


# Check whether --with-solid or --without-solid was given.
if test "${with_solid+set}" = set; then
  withval="$with_solid"
  PHP_SOLID=$withval
else
  
  PHP_SOLID=no
  test "$PHP_ENABLE_ALL" && PHP_SOLID=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SOLID in
shared,*)
  PHP_SOLID=`echo "$PHP_SOLID"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SOLID=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_SOLID" != "no"; then
    echo $ac_n "checking for Solid support""... $ac_c" 1>&6
echo "configure:64910: checking for Solid support" >&5
    if test "$PHP_SOLID" = "yes"; then
      PHP_SOLID=/usr/local/solid
    fi
    ODBC_INCDIR=$PHP_SOLID/include
    ODBC_LIBDIR=$PHP_SOLID/$PHP_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=solid
    if test -f $ODBC_LIBDIR/soc*35.a; then
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID_35 1
EOF

    elif test -f $ODBC_LIBDIR/scl*30.a; then
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID_30 1
EOF

    elif test -f $ODBC_LIBDIR/scl*23.a; then
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID 1
EOF

    fi
    echo "$ac_t""$ext_output" 1>&6
    
  echo $ac_n "checking Solid library file""... $ac_c" 1>&6
echo "configure:64937: checking Solid library file" >&5  
  ac_solid_uname_r=`uname -r 2>/dev/null`
  ac_solid_uname_s=`uname -s 2>/dev/null`
  case $ac_solid_uname_s in
    AIX) ac_solid_os=a3x;;   # a4x for AIX4/ Solid 2.3/3.0 only
    HP-UX) ac_solid_os=h9x;; # h1x for hpux11, h0x for hpux10
    IRIX) ac_solid_os=irx;;  # Solid 2.3(?)/ 3.0 only
    Linux) 
      if ldd -v /bin/sh | grep GLIBC > /dev/null; then
        cat >> confdefs.h <<\EOF
#define SS_LINUX 1
EOF

        ac_solid_os=l2x
      else
        cat >> confdefs.h <<\EOF
#define SS_LINUX 1
EOF

        ac_solid_os=lux
      fi;; 
    SunOS) 
      ac_solid_os=ssx;; # should we deal with SunOS 4?
    FreeBSD) 
      if test `expr $ac_solid_uname_r : '\(.\)'` -gt "2"; then
        cat >> confdefs.h <<\EOF
#define SS_FBX 1
EOF

        ac_solid_os=fex
      else 
        cat >> confdefs.h <<\EOF
#define SS_FBX 1
EOF

        ac_solid_os=fbx
      fi;;
  esac

  if test -f $ODBC_LIBDIR/soc${ac_solid_os}35.a; then
    ac_solid_version=35
    ac_solid_prefix=soc
  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}30.a; then
    ac_solid_version=30
    ac_solid_prefix=scl
  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}23.a; then
    ac_solid_version=23
    ac_solid_prefix=scl
  fi

#
# Check for the library files, and setup the ODBC_LIBS path...
#
if test ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -a \
  ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a; then
  #
  # we have an error and should bail out, as we can't find the libs!
  #
  echo ""
  echo "*********************************************************************"
  echo "* Unable to locate $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so or $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
  echo "* Please correct this by creating the following links and reconfiguring:"
  echo "* $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
  echo "* $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so"
  echo "*********************************************************************"
else
  ODBC_LFLAGS=-L$ODBC_LIBDIR
  ODBC_LIBS=-l${ac_solid_prefix}${ac_solid_os}${ac_solid_version}
fi

  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6

  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_ibm_db2=no


# Check whether --with-ibm-db2 or --without-ibm-db2 was given.
if test "${with_ibm_db2+set}" = set; then
  withval="$with_ibm_db2"
  PHP_IBM_DB2=$withval
else
  
  PHP_IBM_DB2=no
  test "$PHP_ENABLE_ALL" && PHP_IBM_DB2=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IBM_DB2 in
shared,*)
  PHP_IBM_DB2=`echo "$PHP_IBM_DB2"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_IBM_DB2=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_IBM_DB2" != "no"; then
    echo $ac_n "checking for IBM DB2 support""... $ac_c" 1>&6
echo "configure:65058: checking for IBM DB2 support" >&5
    if test "$PHP_IBM_DB2" = "yes"; then
      ODBC_INCDIR=/home/db2inst1/sqllib/include
      ODBC_LIBDIR=/home/db2inst1/sqllib/lib
    else
      ODBC_INCDIR=$PHP_IBM_DB2/include
      ODBC_LIBDIR=$PHP_IBM_DB2/$PHP_LIBDIR
    fi

    
if ! test -f "$ODBC_INCDIR/sqlcli1.h"; then
  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlcli1.h' not found!" 1>&2; exit 1; }
fi


    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_TYPE=ibm-db2
    ODBC_LIBS=-ldb2

    
  old_LIBS=$LIBS
  LIBS="
      $ODBC_LFLAGS $ODBC_LIBS
     $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 65089 "configure"
#include "confdefs.h"

    
    char SQLExecute();
    int main() {
      SQLExecute();
      return 0;
    }
  
EOF
if { (eval echo configure:65100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
      cat >> confdefs.h <<\EOF
#define HAVE_IBMDB2 1
EOF

      echo "$ac_t""$ext_output" 1>&6
    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
      echo "$ac_t""no" 1>&6
      { echo "configure: error: 
build test failed. Please check the config.log for details.
You need to source your DB2 environment before running PHP configure:
# . \$IBM_DB2/db2profile
" 1>&2; exit 1; }
    
  
fi
rm -fr conftest*
fi


  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_odbcrouter=no


# Check whether --with-ODBCRouter or --without-ODBCRouter was given.
if test "${with_ODBCRouter+set}" = set; then
  withval="$with_ODBCRouter"
  PHP_ODBCROUTER=$withval
else
  
  PHP_ODBCROUTER=no
  test "$PHP_ENABLE_ALL" && PHP_ODBCROUTER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ODBCROUTER in
shared,*)
  PHP_ODBCROUTER=`echo "$PHP_ODBCROUTER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ODBCROUTER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_ODBCROUTER" != "no"; then
    echo $ac_n "checking for ODBCRouter.com support""... $ac_c" 1>&6
echo "configure:65181: checking for ODBCRouter.com support" >&5
    if test "$PHP_ODBCROUTER" = "yes"; then
      PHP_ODBCROUTER=/usr
    fi
    ODBC_INCDIR=$PHP_ODBCROUTER/include
    ODBC_LIBDIR=$PHP_ODBCROUTER/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lodbcsdk
    ODBC_TYPE=ODBCRouter
    cat >> confdefs.h <<\EOF
#define HAVE_ODBC_ROUTER 1
EOF

    echo "$ac_t""$ext_output" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_empress=no


# Check whether --with-empress or --without-empress was given.
if test "${with_empress+set}" = set; then
  withval="$with_empress"
  PHP_EMPRESS=$withval
else
  
  PHP_EMPRESS=no
  test "$PHP_ENABLE_ALL" && PHP_EMPRESS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_EMPRESS in
shared,*)
  PHP_EMPRESS=`echo "$PHP_EMPRESS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_EMPRESS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_EMPRESS" != "no"; then
    echo $ac_n "checking for Empress support""... $ac_c" 1>&6
echo "configure:65245: checking for Empress support" >&5
    if test "$PHP_EMPRESS" = "yes"; then
      ODBC_INCDIR=$EMPRESSPATH/include/odbc
      ODBC_LIBDIR=$EMPRESSPATH/shlib
    else
      ODBC_INCDIR=$PHP_EMPRESS/include/odbc
      ODBC_LIBDIR=$PHP_EMPRESS/shlib
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_TYPE=empress
    cat >> confdefs.h <<\EOF
#define HAVE_EMPRESS 1
EOF

    echo "$ac_t""$ext_output" 1>&6
    
  echo $ac_n "checking Empress library file""... $ac_c" 1>&6
echo "configure:65263: checking Empress library file" >&5
  ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
  if test ! -f $ODBC_LIBS; then
    ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
  fi
  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6

  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_empress_bcs=no


# Check whether --with-empress-bcs or --without-empress-bcs was given.
if test "${with_empress_bcs+set}" = set; then
  withval="$with_empress_bcs"
  PHP_EMPRESS_BCS=$withval
else
  
  PHP_EMPRESS_BCS=no
  test "$PHP_ENABLE_ALL" && PHP_EMPRESS_BCS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_EMPRESS_BCS in
shared,*)
  PHP_EMPRESS_BCS=`echo "$PHP_EMPRESS_BCS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_EMPRESS_BCS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_EMPRESS_BCS" != "no"; then
    echo $ac_n "checking for Empress local access support""... $ac_c" 1>&6
echo "configure:65319: checking for Empress local access support" >&5
    if test "$PHP_EMPRESS_BCS" = "yes"; then
      ODBC_INCDIR=$EMPRESSPATH/include/odbc
      ODBC_LIBDIR=$EMPRESSPATH/shlib
    else
      ODBC_INCDIR=$PHP_EMPRESS_BCS/include/odbc
      ODBC_LIBDIR=$PHP_EMPRESS_BCS/shlib
    fi
    CC="empocc -bcs";export CC;
    LD="empocc -bcs";export LD;
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    LIST=`empocc -listlines -bcs -o a a.c`

    NEWLIST=
    for I in $LIST
    do
      case $I in
        $EMPRESSPATH/odbccl/lib/* | \
        $EMPRESSPATH/rdbms/lib/* | \
        $EMPRESSPATH/common/lib/*)
              NEWLIST="$NEWLIST $I"
              ;;
      esac
    done
    ODBC_LIBS="-lempphpbcs -lms -lmscfg -lbasic -lbasic_os -lnlscstab -lnlsmsgtab -lm -ldl -lcrypt"
    ODBC_TYPE=empress-bcs
    cat >> confdefs.h <<\EOF
#define HAVE_EMPRESS 1
EOF

    echo "$ac_t""$ext_output" 1>&6
    
  echo $ac_n "checking Empress local access library file""... $ac_c" 1>&6
echo "configure:65353: checking Empress local access library file" >&5
  ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
  if test ! -f $ODBCBCS_LIBS; then
    ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
  fi
  echo "$ac_t""`echo $ODBCBCS_LIBS | sed -e 's!.*/!!'`" 1>&6

  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_birdstep=no


# Check whether --with-birdstep or --without-birdstep was given.
if test "${with_birdstep+set}" = set; then
  withval="$with_birdstep"
  PHP_BIRDSTEP=$withval
else
  
  PHP_BIRDSTEP=no
  test "$PHP_ENABLE_ALL" && PHP_BIRDSTEP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BIRDSTEP in
shared,*)
  PHP_BIRDSTEP=`echo "$PHP_BIRDSTEP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_BIRDSTEP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac







  
  if test "$PHP_BIRDSTEP" != "no"; then
    echo $ac_n "checking for Birdstep support""... $ac_c" 1>&6
echo "configure:65409: checking for Birdstep support" >&5
    if test "$PHP_BIRDSTEP" = "yes"; then
        ODBC_INCDIR=/usr/local/birdstep/include
        ODBC_LIBDIR=/usr/local/birdstep/lib
    else
        ODBC_INCDIR=$PHP_BIRDSTEP/include
        ODBC_LIBDIR=$PHP_BIRDSTEP/$PHP_LIBDIR
    fi
   
    case $host_alias in
      *aix*)
        cat >> confdefs.h <<\EOF
#define AIX 1
EOF
;;
      *hpux*)
        cat >> confdefs.h <<\EOF
#define HPUX 1
EOF
;;
      *linux*)
        cat >> confdefs.h <<\EOF
#define LINUX 1
EOF
;;
      *qnx*)
        cat >> confdefs.h <<\EOF
#define NEUTRINO 1
EOF
;;
      i?86-*-solaris*)
        cat >> confdefs.h <<\EOF
#define ISOLARIS 1
EOF
;;
      sparc-*-solaris*)
        cat >> confdefs.h <<\EOF
#define SOLARIS 1
EOF
;;
      *unixware*)
        cat >> confdefs.h <<\EOF
#define UNIXWARE 1
EOF
;;
    esac

    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=birdstep
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_LIBS="-lCadm -lCdict -lCenc -lCrdm -lCrpc -lCrdbc -lCrm -lCuapi -lutil"

    if test -f "$ODBC_LIBDIR/libCrdbc32.$SHLIB_SUFFIX_NAME"; then
      ODBC_LIBS="-lCrdbc32 -lCadm32 -lCncp32 -lCrm32 -lCsql32 -lCdict32 -lCrdm32 -lCrpc32 -lutil"
    elif test -f "$ODBC_LIBDIR/libCrdbc.$SHLIB_SUFFIX_NAME"; then
      ODBC_LIBS="-lCrdbc -lCadm -lCncp -lCrm -lCsql -lCdict -lCrdm -lCrpc -lutil"
    fi

    cat >> confdefs.h <<\EOF
#define HAVE_BIRDSTEP 1
EOF

    echo "$ac_t""$ext_output" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_custom_odbc=no


# Check whether --with-custom-odbc or --without-custom-odbc was given.
if test "${with_custom_odbc+set}" = set; then
  withval="$with_custom_odbc"
  PHP_CUSTOM_ODBC=$withval
else
  
  PHP_CUSTOM_ODBC=no
  test "$PHP_ENABLE_ALL" && PHP_CUSTOM_ODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CUSTOM_ODBC in
shared,*)
  PHP_CUSTOM_ODBC=`echo "$PHP_CUSTOM_ODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CUSTOM_ODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_CUSTOM_ODBC" != "no"; then
    echo $ac_n "checking for a custom ODBC support""... $ac_c" 1>&6
echo "configure:65521: checking for a custom ODBC support" >&5
    if test "$PHP_CUSTOM_ODBC" = "yes"; then
      PHP_CUSTOM_ODBC=/usr/local
    fi
    ODBC_INCDIR=$PHP_CUSTOM_ODBC/include
    ODBC_LIBDIR=$PHP_CUSTOM_ODBC/$PHP_LIBDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=$CUSTOM_ODBC_LIBS
    ODBC_TYPE=custom-odbc
    cat >> confdefs.h <<\EOF
#define HAVE_CODBC 1
EOF

    echo "$ac_t""$ext_ouput" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_iodbc=no


# Check whether --with-iodbc or --without-iodbc was given.
if test "${with_iodbc+set}" = set; then
  withval="$with_iodbc"
  PHP_IODBC=$withval
else
  
  PHP_IODBC=no
  test "$PHP_ENABLE_ALL" && PHP_IODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IODBC in
shared,*)
  PHP_IODBC=`echo "$PHP_IODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_IODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_IODBC" != "no"; then
    echo $ac_n "checking for iODBC support""... $ac_c" 1>&6
echo "configure:65585: checking for iODBC support" >&5
    if test "$PHP_IODBC" = "yes"; then
      PHP_IODBC=/usr/local
    fi
    

  if test -n "$PHP_IODBC/$PHP_LIBDIR"; then
    
  if test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_IODBC/$PHP_LIBDIR" || echo "$PHP_IODBC/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IODBC/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_IODBC/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_IODBC/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case iodbc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-liodbc $LIBS" 
   ;;
  esac




    
  if test "$PHP_IODBC/include" != "/usr/include"; then
    
  if test -z "$PHP_IODBC/include" || echo "$PHP_IODBC/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IODBC/include
  else
    
    ep_dir="`echo $PHP_IODBC/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_IODBC/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test "1"; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ODBC_TYPE=iodbc
    ODBC_INCLUDE=-I$PHP_IODBC/include
    ODBC_LFLAGS=-L$PHP_IODBC/$PHP_LIBDIR
    ODBC_LIBS=-liodbc
    cat >> confdefs.h <<\EOF
#define HAVE_IODBC 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_ODBC2 1
EOF

    echo "$ac_t""$ext_output" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_esoob=no


# Check whether --with-esoob or --without-esoob was given.
if test "${with_esoob+set}" = set; then
  withval="$with_esoob"
  PHP_ESOOB=$withval
else
  
  PHP_ESOOB=no
  test "$PHP_ENABLE_ALL" && PHP_ESOOB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ESOOB in
shared,*)
  PHP_ESOOB=`echo "$PHP_ESOOB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ESOOB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_ESOOB" != "no"; then
    echo $ac_n "checking for Easysoft ODBC-ODBC Bridge support""... $ac_c" 1>&6
echo "configure:65731: checking for Easysoft ODBC-ODBC Bridge support" >&5
    if test "$PHP_ESOOB" = "yes"; then
      PHP_ESOOB=/usr/local/easysoft/oob/client
    fi
    ODBC_INCDIR=$PHP_ESOOB/include
    ODBC_LIBDIR=$PHP_ESOOB/$PHP_LIBDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lesoobclient
    ODBC_TYPE=esoob
    cat >> confdefs.h <<\EOF
#define HAVE_ESOOB 1
EOF

    echo "$ac_t""$ext_output" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_unixodbc=no


# Check whether --with-unixODBC or --without-unixODBC was given.
if test "${with_unixODBC+set}" = set; then
  withval="$with_unixODBC"
  PHP_UNIXODBC=$withval
else
  
  PHP_UNIXODBC=no
  test "$PHP_ENABLE_ALL" && PHP_UNIXODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_UNIXODBC in
shared,*)
  PHP_UNIXODBC=`echo "$PHP_UNIXODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_UNIXODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_UNIXODBC" != "no"; then
    echo $ac_n "checking for unixODBC support""... $ac_c" 1>&6
echo "configure:65795: checking for unixODBC support" >&5
    if test "$PHP_UNIXODBC" = "yes"; then
      PHP_UNIXODBC=/usr/local
    fi
    ODBC_INCDIR=$PHP_UNIXODBC/include
    ODBC_LIBDIR=$PHP_UNIXODBC/$PHP_LIBDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lodbc
    ODBC_TYPE=unixODBC
    
if ! test -f "$ODBC_INCDIR/sqlext.h"; then
  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" 1>&2; exit 1; }
fi

    cat >> confdefs.h <<\EOF
#define HAVE_UNIXODBC 1
EOF

    echo "$ac_t""$ext_output" 1>&6
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_dbmaker=no


# Check whether --with-dbmaker or --without-dbmaker was given.
if test "${with_dbmaker+set}" = set; then
  withval="$with_dbmaker"
  PHP_DBMAKER=$withval
else
  
  PHP_DBMAKER=no
  test "$PHP_ENABLE_ALL" && PHP_DBMAKER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DBMAKER in
shared,*)
  PHP_DBMAKER=`echo "$PHP_DBMAKER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_DBMAKER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_DBMAKER" != "no"; then
    echo $ac_n "checking for DBMaker support""... $ac_c" 1>&6
echo "configure:65864: checking for DBMaker support" >&5
    if test "$PHP_DBMAKER" = "yes"; then
      # find dbmaker's home directory
      DBMAKER_HOME=`grep "^dbmaker:" /etc/passwd | $AWK -F: '{print $6}'`

      # check DBMaker version (from 5.0 to 2.0)
      DBMAKER_VERSION=5.0

      while test ! -d $DBMAKER_HOME/$DBMAKER_VERSION -a "$DBMAKER_VERSION" != "2.9"; do
        DM_VER=`echo $DBMAKER_VERSION | sed -e 's/\.//' | $AWK '{ print $1-1;}'`
        MAJOR_V=`echo $DM_VER | $AWK '{ print $1/10; }'  | $AWK -F. '{ print $1; }'`
        MINOR_V=`echo $DM_VER | $AWK '{ print $1%10; }'`
        DBMAKER_VERSION=$MAJOR_V.$MINOR_V
      done

      if test "$DBMAKER_VERSION" = "2.9"; then
        PHP_DBMAKER=$DBMAKER_HOME
      else
        PHP_DBMAKER=$DBMAKER_HOME/$DBMAKER_VERSION
      fi
    fi

    ODBC_INCDIR=$PHP_DBMAKER/include
    ODBC_LIBDIR=$PHP_DBMAKER/$PHP_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS="-ldmapic -lc"
    ODBC_TYPE=dbmaker

    cat >> confdefs.h <<\EOF
#define HAVE_DBMAKER 1
EOF


    if test "$ext_shared" = "yes"; then
      echo "$ac_t""yes (shared)" 1>&6
      ODBC_LIBS="-ldmapic -lc -lm"
      ODBC_SHARED="odbc.la"
    else
      echo "$ac_t""yes (static)" 1>&6
      

  if test -n "$ODBC_LIBDIR"; then
    
  if test "$ODBC_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ODBC_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ODBC_LIBDIR" || echo "$ODBC_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ODBC_LIBDIR
  else
    
    ep_dir="`echo $ODBC_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ODBC_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case dmapic in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldmapic $LIBS" 
   ;;
  esac




      
  if test "$ODBC_INCDIR" != "/usr/include"; then
    
  if test -z "$ODBC_INCDIR" || echo "$ODBC_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ODBC_INCDIR
  else
    
    ep_dir="`echo $ODBC_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ODBC_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      ODBC_STATIC="libphpext_odbc.la"
    fi
  fi
fi

if test -n "$ODBC_TYPE"; then
  if test "$ODBC_TYPE" != "dbmaker"; then
    
  for ac_i in $ODBC_LFLAGS $ODBC_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="-L$ai_p $ODBC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $ODBC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    if test "$ODBC_TYPE" != "birdstep" && test "$ODBC_TYPE" != "solid"; then
      cat >> confdefs.h <<\EOF
#define HAVE_SQLDATASOURCES 1
EOF

    fi
  fi
  
  cat >> confdefs.h <<\EOF
#define HAVE_UODBC 1
EOF

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_SHARED_LIBADD"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCDIR"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBDIR"

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCLUDE"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBS"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LFLAGS"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_TYPE"

  


  
  ext_builddir=ext/odbc
  ext_srcdir=$abs_srcdir/ext/odbc

  ac_extra=`echo "$ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ODBC_SHARED=no
    
  
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC odbc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ODBC_SHARED=yes
      
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_odbc="$shared_objects_odbc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpodbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpodbc.so '$ext_builddir'/phpodbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPODBC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpodbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpodbc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpodbc.$suffix: $ext_builddir/phpodbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpodbc.$suffix \$(phplibdir)

$ext_builddir/phpodbc.$suffix: \$(shared_objects_odbc) \$(PHPODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/odbc.so '$ext_builddir'/odbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ODBC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/odbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/odbc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/odbc.$suffix: $ext_builddir/odbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/odbc.$suffix \$(phplibdir)

$ext_builddir/odbc.$suffix: \$(shared_objects_odbc) \$(ODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_ODBC 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ODBC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC odbc"
        ;;
      *)
        
  
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=odbc
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_pcntl=no

echo $ac_n "checking whether to enable pcntl support""... $ac_c" 1>&6
echo "configure:66426: checking whether to enable pcntl support" >&5
# Check whether --enable-pcntl or --disable-pcntl was given.
if test "${enable_pcntl+set}" = set; then
  enableval="$enable_pcntl"
  PHP_PCNTL=$enableval
else
  
  PHP_PCNTL=no
  test "$PHP_ENABLE_ALL" && PHP_PCNTL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PCNTL in
shared,*)
  PHP_PCNTL=`echo "$PHP_PCNTL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PCNTL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PCNTL" != "no"; then
  for ac_func in fork
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:66470: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 66475 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:66498: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
  cat >> confdefs.h <<\EOF
#define HAVE_FORK 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pcntl: fork() not supported by this platform" 1>&2; exit 1; } 
fi
done

  for ac_func in waitpid
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:66529: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 66534 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:66557: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
  cat >> confdefs.h <<\EOF
#define HAVE_WAITPID 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pcntl: waitpid() not supported by this platform" 1>&2; exit 1; } 
fi
done

  for ac_func in sigaction
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:66588: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 66593 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:66616: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
  cat >> confdefs.h <<\EOF
#define HAVE_SIGACTION 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pcntl: sigaction() not supported by this platform" 1>&2; exit 1; } 
fi
done

  for ac_func in getpriority setpriority wait3 sigprocmask sigwaitinfo sigtimedwait
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:66647: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 66652 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:66675: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  
  ext_builddir=ext/pcntl
  ext_srcdir=$abs_srcdir/ext/pcntl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
    PHP_PCNTL_SHARED=no
    
  
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcntl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PCNTL_SHARED=yes
      
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pcntl="$shared_objects_pcntl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcntl.so '$ext_builddir'/phppcntl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPCNTL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcntl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcntl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppcntl.$suffix: $ext_builddir/phppcntl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcntl.$suffix \$(phplibdir)

$ext_builddir/phppcntl.$suffix: \$(shared_objects_pcntl) \$(PHPPCNTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcntl.so '$ext_builddir'/pcntl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PCNTL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcntl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcntl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcntl.$suffix: $ext_builddir/pcntl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcntl.$suffix \$(phplibdir)

$ext_builddir/pcntl.$suffix: \$(shared_objects_pcntl) \$(PCNTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PCNTL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    PHP_PCNTL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pcntl"
        ;;
      *)
        
  
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pcntl
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi





php_enable_pdo=yes

echo $ac_n "checking whether to enable PDO support""... $ac_c" 1>&6
echo "configure:67000: checking whether to enable PDO support" >&5
# Check whether --enable-pdo or --disable-pdo was given.
if test "${enable_pdo+set}" = set; then
  enableval="$enable_pdo"
  PHP_PDO=$enableval
else
  
  PHP_PDO=yes
  test "$PHP_ENABLE_ALL" && PHP_PDO=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO in
shared,*)
  PHP_PDO=`echo "$PHP_PDO"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PDO" != "no"; then

    PHP_PDO=yes

  
  pdo_running_under_pear=0
  case `pwd` in
    /var/tmp/pear-build-*)
      pdo_running_under_pear=1
      ;;
  esac

  if test "$pdo_running_under_pear$PHP_PEAR_VERSION" = "1"; then
    # we're running in an environment that smells like pear,
    # and the PHP_PEAR_VERSION env var is not set.  That implies
    # that we're running under a slightly broken pear installer
    { echo "configure: error: 
PDO requires that you upgrade your PEAR installer tools. Please
do so now by running:

  % sudo pear upgrade pear

or by manually downloading and installing PEAR version 1.3.5 or higher.

Once you've upgraded, please re-try your PDO install.
    " 1>&2; exit 1; }
  fi


  if test "$ext_shared" = "yes" ; then
    case $host_alias in
      *darwin*)
          { echo "configure: error: 
Due to the way that loadable modules work on OSX/Darwin, you need to
compile the PDO package statically into the PHP core.

Please follow the instructions at: http://netevil.org/node.php?nid=202
for more detail on this issue.
          " 1>&2; exit 1; }
        ext_shared=no
        ;;
    esac
  fi
  
  ext_builddir=ext/pdo
  ext_srcdir=$abs_srcdir/ext/pdo

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_SHARED=no
    
  
  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_SHARED=yes
      
  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo="$shared_objects_pdo $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo.so '$ext_builddir'/phppdo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo.$suffix: $ext_builddir/phppdo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo.$suffix \$(phplibdir)

$ext_builddir/phppdo.$suffix: \$(shared_objects_pdo) \$(PHPPDO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo.so '$ext_builddir'/pdo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo.$suffix: $ext_builddir/pdo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo.$suffix \$(phplibdir)

$ext_builddir/pdo.$suffix: \$(shared_objects_pdo) \$(PDO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo"
        ;;
      *)
        
  
  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
    
  am_i_shared=$PHP_PDO_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build pdo shared or build spl statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  
  
        
  
    header_path=ext/pdo
    for header_file in php_pdo.h php_pdo_driver.h; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

  

    
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi




php_with_pdo_dblib=no

echo $ac_n "checking for PDO_DBLIB support via FreeTDS""... $ac_c" 1>&6
echo "configure:67434: checking for PDO_DBLIB support via FreeTDS" >&5
# Check whether --with-pdo-dblib or --without-pdo-dblib was given.
if test "${with_pdo_dblib+set}" = set; then
  withval="$with_pdo_dblib"
  PHP_PDO_DBLIB=$withval
else
  
  PHP_PDO_DBLIB=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_DBLIB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_DBLIB in
shared,*)
  PHP_PDO_DBLIB=`echo "$PHP_PDO_DBLIB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_DBLIB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PDO_DBLIB" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
  fi

  if test "$PHP_PDO_DBLIB" = "yes"; then

    for i in /usr/local /usr; do
      if test -f $i/include/sybdb.h; then
        PDO_FREETDS_INSTALLATION_DIR=$i
        PDO_FREETDS_INCLUDE_DIR=$i/include
        break
      elif test -f $i/include/freetds/sybdb.h; then
        PDO_FREETDS_INSTALLATION_DIR=$i
        PDO_FREETDS_INCLUDE_DIR=$i/include/freetds
        break;
      fi
    done

    if test -z "$PDO_FREETDS_INSTALLATION_DIR"; then
      { echo "configure: error: Cannot find FreeTDS in known installation directories" 1>&2; exit 1; }
    fi

  elif test "$PHP_PDO_DBLIB" != "no"; then

    if test -f $PHP_PDO_DBLIB/include/sybdb.h; then
      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include
    elif test -f $PHP_PDO_DBLIB/include/freetds/sybdb.h; then
      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include/freetds
    else
      { echo "configure: error: Directory $PHP_PDO_DBLIB is not a FreeTDS installation directory" 1>&2; exit 1; }
    fi
  fi  

  if test "x$PHP_LIBDIR" = "x" ; then
    PHP_LIBDIR=lib
  fi

  if test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
     { echo "configure: error: Could not find $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" 1>&2; exit 1; }
  fi

  
  if test "$PDO_FREETDS_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$PDO_FREETDS_INCLUDE_DIR" || echo "$PDO_FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_FREETDS_INCLUDE_DIR
  else
    
    ep_dir="`echo $PDO_FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    PDO_DBLIB_SHARED_LIBADD="-lsybdb $PDO_DBLIB_SHARED_LIBADD"
    if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
      
  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
    
  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sybdb in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybdb $LIBS" 
   ;;
  esac




  fi



  
    
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:67651: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:67657: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
  fi

  

  PDO_DBLIB_DEFS="-DPDO_DBLIB_FLAVOUR=\\\"freetds\\\""
  
  ext_builddir=ext/pdo_dblib
  ext_srcdir=$abs_srcdir/ext/pdo_dblib

  ac_extra=`echo "-I$pdo_inc_path $PDO_DBLIB_DEFS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_DBLIB_SHARED=no
    
  
  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_dblib"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_DBLIB_SHARED=yes
      
  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_dblib="$shared_objects_pdo_dblib $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_dblib.so '$ext_builddir'/phppdo_dblib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_DBLIB, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_dblib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_dblib.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_dblib.$suffix: $ext_builddir/phppdo_dblib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_dblib.$suffix \$(phplibdir)

$ext_builddir/phppdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PHPPDO_DBLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_dblib.so '$ext_builddir'/pdo_dblib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_DBLIB, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_dblib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_dblib.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_dblib.$suffix: $ext_builddir/pdo_dblib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_dblib.$suffix \$(phplibdir)

$ext_builddir/pdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PDO_DBLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_DBLIB 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_DBLIB_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_dblib"
        ;;
      *)
        
  
  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_dblib
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
echo "configure:67971: checking for dnet_addr in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet_stub  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 67979 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_addr();

int main() {
dnet_addr()
; return 0; }
EOF
if { (eval echo configure:67990: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   

  if test "$ext_shared" = "yes"; then
    PDO_DBLIB_SHARED_LIBADD="-ldnet_stub $PDO_DBLIB_SHARED_LIBADD"
    if test -n ""; then
      
  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n ""; then
    
  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case dnet_stub in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldnet_stub $LIBS" 
   ;;
  esac




  fi


        cat >> confdefs.h <<\EOF
#define HAVE_LIBDNET_STUB 1
EOF

     
else
  echo "$ac_t""no" 1>&6
fi

  cat >> confdefs.h <<\EOF
#define HAVE_PDO_DBLIB 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_FREETDS 1
EOF

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_DBLIB_SHARED_LIBADD"


  
    
  am_i_shared=$PHP_PDO_DBLIB_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_dblib to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_dblib shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_dblib, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
fi



php_with_pdo_firebird=no

echo $ac_n "checking for Firebird support for PDO""... $ac_c" 1>&6
echo "configure:68151: checking for Firebird support for PDO" >&5
# Check whether --with-pdo-firebird or --without-pdo-firebird was given.
if test "${with_pdo_firebird+set}" = set; then
  withval="$with_pdo_firebird"
  PHP_PDO_FIREBIRD=$withval
else
  
  PHP_PDO_FIREBIRD=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_FIREBIRD=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_FIREBIRD in
shared,*)
  PHP_PDO_FIREBIRD=`echo "$PHP_PDO_FIREBIRD"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_FIREBIRD=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PDO_FIREBIRD" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
  fi

  if test "$PHP_PDO_FIREBIRD" = "yes"; then
    FIREBIRD_INCDIR=
    FIREBIRD_LIBDIR=
    FIREBIRD_LIBDIR_FLAG=
  else
    FIREBIRD_INCDIR=$PHP_PDO_FIREBIRD/include
    FIREBIRD_LIBDIR=$PHP_PDO_FIREBIRD/$PHP_LIBDIR
    FIREBIRD_LIBDIR_FLAG=-L$FIREBIRD_LIBDIR
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $FIREBIRD_LIBDIR_FLAG
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for isc_detach_database in -lfbclient""... $ac_c" 1>&6
echo "configure:68305: checking for isc_detach_database in -lfbclient" >&5
ac_lib_var=`echo fbclient'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lfbclient  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 68313 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:68324: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    FIREBIRD_LIBNAME=fbclient
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_fbclient_isc_detach_database
    
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      $FIREBIRD_LIBDIR_FLAG
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
echo "configure:68451: checking for isc_detach_database in -lgds" >&5
ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgds  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 68459 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:68470: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      FIREBIRD_LIBNAME=gds
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gds_isc_detach_database
    
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        $FIREBIRD_LIBDIR_FLAG
      "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
echo "configure:68597: checking for isc_detach_database in -lib_util" >&5
ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lib_util  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 68605 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:68616: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        FIREBIRD_LIBNAME=ib_util
      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ib_util_isc_detach_database
    
        { echo "configure: error: libfbclient, libgds or libib_util not found! Check config.log for more information." 1>&2; exit 1; }
      
  
fi

    
  
fi

  
  
fi

 
  
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:68661: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:68667: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
  fi


  

  if test "$ext_shared" = "yes"; then
    PDO_FIREBIRD_SHARED_LIBADD="-l$FIREBIRD_LIBNAME $PDO_FIREBIRD_SHARED_LIBADD"
    if test -n "$FIREBIRD_LIBDIR"; then
      
  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FIREBIRD_LIBDIR
  else
    
    ep_dir="`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FIREBIRD_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_FIREBIRD_SHARED_LIBADD="-L$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_FIREBIRD_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FIREBIRD_LIBDIR"; then
    
  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then
    
  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FIREBIRD_LIBDIR
  else
    
    ep_dir="`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FIREBIRD_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $FIREBIRD_LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$FIREBIRD_LIBNAME $LIBS" 
   ;;
  esac




  fi


  
  if test "$FIREBIRD_INCDIR" != "/usr/include"; then
    
  if test -z "$FIREBIRD_INCDIR" || echo "$FIREBIRD_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$FIREBIRD_INCDIR
  else
    
    ep_dir="`echo $FIREBIRD_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FIREBIRD_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_PDO_FIREBIRD 1
EOF

  
  ext_builddir=ext/pdo_firebird
  ext_srcdir=$abs_srcdir/ext/pdo_firebird

  ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_FIREBIRD_SHARED=no
    
  
  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_firebird"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_FIREBIRD_SHARED=yes
      
  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_firebird="$shared_objects_pdo_firebird $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_firebird.so '$ext_builddir'/phppdo_firebird.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_FIREBIRD, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_firebird.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_firebird.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_firebird.$suffix: $ext_builddir/phppdo_firebird.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_firebird.$suffix \$(phplibdir)

$ext_builddir/phppdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PHPPDO_FIREBIRD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_firebird.so '$ext_builddir'/pdo_firebird.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_FIREBIRD, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_firebird.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_firebird.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_firebird.$suffix: $ext_builddir/pdo_firebird.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_firebird.$suffix \$(phplibdir)

$ext_builddir/pdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PDO_FIREBIRD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_FIREBIRD 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_FIREBIRD_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_firebird"
        ;;
      *)
        
  
  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_firebird
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_FIREBIRD_SHARED_LIBADD"

  
  am_i_shared=$PHP_PDO_FIREBIRD_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_firebird to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_firebird shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_firebird, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
  
fi



php_with_pdo_mysql=no

echo $ac_n "checking for MySQL support for PDO""... $ac_c" 1>&6
echo "configure:69139: checking for MySQL support for PDO" >&5
# Check whether --with-pdo-mysql or --without-pdo-mysql was given.
if test "${with_pdo_mysql+set}" = set; then
  withval="$with_pdo_mysql"
  PHP_PDO_MYSQL=$withval
else
  
  PHP_PDO_MYSQL=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_MYSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_MYSQL in
shared,*)
  PHP_PDO_MYSQL=`echo "$PHP_PDO_MYSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_MYSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_ZLIB_DIR"; then
  
php_with_zlib_dir=no

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:69184: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no
  

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_PDO_MYSQL" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
  fi

  

  if test -f $PHP_PDO_MYSQL && test -x $PHP_PDO_MYSQL ; then
    PDO_MYSQL_CONFIG=$PHP_PDO_MYSQL
  elif test "$PHP_PDO_MYSQL" != "yes"; then
    if test -d "$PHP_PDO_MYSQL" ; then
      if test -x "$PHP_PDO_MYSQL/bin/mysql_config" ; then
        PDO_MYSQL_CONFIG="$PHP_PDO_MYSQL/bin/mysql_config"
      else
        PDO_MYSQL_DIR="$PHP_PDO_MYSQL"
      fi
    fi
  else
    for i in /usr/local /usr ; do
      if test -x "$i/bin/mysql_config" ; then
        PDO_MYSQL_CONFIG="$i/bin/mysql_config"
        break;
      fi
      if test -r $i/include/mysql/mysql.h || test -r $i/include/mysql.h ; then
        PDO_MYSQL_DIR="$i"
        break;
      fi
    done
  fi

  if test "$PHP_PDO_MYSQL" = "mysqlnd"; then
        PHP_MYSQLND_ENABLED=yes
    cat >> confdefs.h <<\EOF
#define PDO_USE_MYSQLND 1
EOF

  else
    cat >> confdefs.h <<\EOF
#define HAVE_MYSQL 1
EOF


    echo $ac_n "checking for mysql_config""... $ac_c" 1>&6
echo "configure:69248: checking for mysql_config" >&5
    if test -n "$PDO_MYSQL_CONFIG"; then
      echo "$ac_t""$PDO_MYSQL_CONFIG" 1>&6
      if test "x$SED" = "x"; then
        # Extract the first word of "sed", so it can be a program name with args.
set dummy sed; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:69255: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_SED'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$SED" in
  /*)
  ac_cv_path_SED="$SED" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_SED="$SED" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_SED="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
SED="$ac_cv_path_SED"
if test -n "$SED"; then
  echo "$ac_t""$SED" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

      fi
      if test "$enable_maintainer_zts" = "yes"; then
        PDO_MYSQL_LIBNAME=mysqlclient_r
        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs_r | $SED -e "s/'//g"`
      else
        PDO_MYSQL_LIBNAME=mysqlclient
        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs | $SED -e "s/'//g"`
      fi
      PDO_MYSQL_INCLUDE=`$PDO_MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
    elif test -n "$PDO_MYSQL_DIR"; then
      echo "$ac_t""not found" 1>&6
      echo $ac_n "checking for mysql install under $PDO_MYSQL_DIR""... $ac_c" 1>&6
echo "configure:69299: checking for mysql install under $PDO_MYSQL_DIR" >&5
      if test -r $PDO_MYSQL_DIR/include/mysql; then
        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include/mysql
      else
        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include
      fi
      if test -r $PDO_MYSQL_DIR/$PHP_LIBDIR/mysql; then
        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR/mysql
      else
        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR
      fi

      if test -r "$PDO_MYSQL_LIB_DIR"; then
        echo "$ac_t""libs under $PDO_MYSQL_LIB_DIR; seems promising" 1>&6
      else
        echo "$ac_t""can not find it" 1>&6
        { echo "configure: error: Unable to find your mysql installation" 1>&2; exit 1; }
      fi

      
  if test "$PDO_MYSQL_INC_DIR" != "/usr/include"; then
    
  if test -z "$PDO_MYSQL_INC_DIR" || echo "$PDO_MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_MYSQL_INC_DIR
  else
    
    ep_dir="`echo $PDO_MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_MYSQL_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      PDO_MYSQL_INCLUDE=-I$PDO_MYSQL_INC_DIR
    else
      echo "$ac_t""not found" 1>&6
      { echo "configure: error: Unable to find your mysql installation" 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      $PDO_MYSQL_LIBS
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
echo "configure:69453: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 69461 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_query();

int main() {
mysql_query()
; return 0; }
EOF
if { (eval echo configure:69472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  for ac_i in $PDO_MYSQL_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

      
  for ac_i in $PDO_MYSQL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
    
      if test "$PHP_ZLIB_DIR" != "no"; then
        

  if test "$ext_shared" = "yes"; then
    PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR"; then
      
  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR"; then
    
  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$PDO_MYSQL_LIB_DIR 
        "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
echo "configure:69825: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 69833 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_query();

int main() {
mysql_query()
; return 0; }
EOF
if { (eval echo configure:69844: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
    
          { echo "configure: error: PDO_MYSQL configure failed. Please check config.log for more information." 1>&2; exit 1; }
        
  
fi
  
        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
      else
        
  
  case z in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD" 
    else
      
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$PDO_MYSQL_LIB_DIR
        "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
echo "configure:69999: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 70007 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_query();

int main() {
mysql_query()
; return 0; }
EOF
if { (eval echo configure:70018: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
    
          { echo "configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." 1>&2; exit 1; }
        
  
fi
   
        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -lz"
      fi

      
  for ac_i in $PDO_MYSQL_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

      
  for ac_i in $PDO_MYSQL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    
  
fi


    _SAVE_LIBS=$LIBS
    LIBS="$LIBS $PDO_MYSQL_LIBS"
    for ac_func in mysql_commit mysql_stmt_prepare mysql_next_result mysql_sqlstate
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:70192: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 70197 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:70220: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done
 
    LIBS=$_SAVE_LIBS
  fi

  
    
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:70250: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:70256: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
  fi

  

  if test -n "$PDO_MYSQL_CONFIG"; then
    PDO_MYSQL_SOCKET=`$PDO_MYSQL_CONFIG --socket`
    cat >> confdefs.h <<EOF
#define PDO_MYSQL_UNIX_ADDR "$PDO_MYSQL_SOCKET"
EOF

  fi

    
  ext_builddir=ext/pdo_mysql
  ext_srcdir=$abs_srcdir/ext/pdo_mysql

  ac_extra=`echo "-I$pdo_inc_path -I"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_MYSQL_SHARED=no
    
  
  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_mysql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_MYSQL_SHARED=yes
      
  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_mysql="$shared_objects_pdo_mysql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_mysql.so '$ext_builddir'/phppdo_mysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_MYSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_mysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_mysql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_mysql.$suffix: $ext_builddir/phppdo_mysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_mysql.$suffix \$(phplibdir)

$ext_builddir/phppdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PHPPDO_MYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_mysql.so '$ext_builddir'/pdo_mysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_MYSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_mysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_mysql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_mysql.$suffix: $ext_builddir/pdo_mysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_mysql.$suffix \$(phplibdir)

$ext_builddir/pdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PDO_MYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_MYSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_MYSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_mysql"
        ;;
      *)
        
  
  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_mysql
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
    
  am_i_shared=$PHP_PDO_MYSQL_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_mysql to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_mysql shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_mysql, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
  
    if test "$PHP_MYSQL" = "mysqlnd"; then
      
  am_i_shared=$PHP_PDO_MYSQL_SHARED
  is_it_shared=$PHP_MYSQLND_SHARED
  is_it_enabled=$PHP_MYSQLND
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_mysql to build statically, but it
depends on extension mysqlnd, which you've configured to build shared.
You either need to build pdo_mysql shared or build mysqlnd statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_mysql, which depends on extension mysqlnd,
but you've either not enabled mysqlnd, or have disabled it.
" 1>&2; exit 1; }
  fi
  
    fi
  
  PDO_MYSQL_MODULE_TYPE=external

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_SHARED_LIBADD"

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_MODULE_TYPE"

  

fi


SUPPORTED_LIB_VERS="9.0 10.1 11.1"  # This caters for all Oracle 9.x, 10.x and 11.1 installs
                                                                                                                                                                




php_with_pdo_oci=no

echo $ac_n "checking Oracle OCI support for PDO""... $ac_c" 1>&6
echo "configure:70641: checking Oracle OCI support for PDO" >&5
# Check whether --with-pdo-oci or --without-pdo-oci was given.
if test "${with_pdo_oci+set}" = set; then
  withval="$with_pdo_oci"
  PHP_PDO_OCI=$withval
else
  
  PHP_PDO_OCI=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_OCI=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_OCI in
shared,*)
  PHP_PDO_OCI=`echo "$PHP_PDO_OCI"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_OCI=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PDO_OCI" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
  fi

  echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
echo "configure:70688: checking Oracle Install-Dir" >&5
  if test "$PHP_PDO_OCI" = "yes" || test -z "$PHP_PDO_OCI"; then
    PDO_OCI_DIR=$ORACLE_HOME
  else
    PDO_OCI_DIR=$PHP_PDO_OCI
  fi
  echo "$ac_t""$PHP_PDO_OCI" 1>&6

  echo $ac_n "checking if that is sane""... $ac_c" 1>&6
echo "configure:70697: checking if that is sane" >&5
  if test -z "$PDO_OCI_DIR"; then
    { echo "configure: error: 
You need to tell me where to find your Oracle Instant Client SDK, or set ORACLE_HOME.
" 1>&2; exit 1; }
  else
    echo "$ac_t""yes" 1>&6
  fi

  if test "instantclient" = "`echo $PDO_OCI_DIR | cut -d, -f1`" ; then
    echo $ac_n "checking size of long int""... $ac_c" 1>&6
echo "configure:70708: checking size of long int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 70716 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long int));
  exit(0);
}
EOF
if { (eval echo configure:70727: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
EOF


    if test "$ac_cv_sizeof_long_int" = "4" ; then
      PDO_OCI_CLIENT_DIR="client"
    else
      PDO_OCI_CLIENT_DIR="client64"
    fi
    PDO_OCI_IC_PREFIX="`echo $PDO_OCI_DIR | cut -d, -f2`"
    PDO_OCI_IC_VERS="`echo $PDO_OCI_DIR | cut -d, -f3`"
    if test -n "$PDO_OCI_IC_VERS"; then
      PDO_OCI_IC_MAJ_VER="`echo $PDO_OCI_IC_VERS | cut -d. -f1`"
      if test "$PDO_OCI_IC_MAJ_VER" -ge 11; then
        # From 11.1.0.7 the RPM path only has an X.Y component
        PDO_OCI_IC_VERS="`echo $PDO_OCI_IC_VERS | cut -d. -f1-2`"
      fi
    fi
    echo $ac_n "checking for oci.h""... $ac_c" 1>&6
echo "configure:70761: checking for oci.h" >&5
    if test -f $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/oci.h ; then
      
  if test "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" != "/usr/include"; then
    
  if test -z "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" || echo "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR
  else
    
    ep_dir="`echo $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      echo "$ac_t""$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" 1>&6
    elif test -f $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include/oci.h ; then
      
  if test "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" != "/usr/include"; then
    
  if test -z "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" || echo "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include
  else
    
    ep_dir="`echo $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      echo "$ac_t""$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" 1>&6
    elif test -f $PDO_OCI_IC_PREFIX/sdk/include/oci.h ; then
      
  if test "$PDO_OCI_IC_PREFIX/sdk/include" != "/usr/include"; then
    
  if test -z "$PDO_OCI_IC_PREFIX/sdk/include" || echo "$PDO_OCI_IC_PREFIX/sdk/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/sdk/include
  else
    
    ep_dir="`echo $PDO_OCI_IC_PREFIX/sdk/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/sdk/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      echo "$ac_t""$PDO_OCI_IC_PREFIX/sdk/include" 1>&6
    elif test -f $PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include/oci.h ; then
      
  if test "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" != "/usr/include"; then
    
  if test -z "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" || echo "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include
  else
    
    ep_dir="`echo $PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      echo "$ac_t""$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" 1>&6
    else
      { echo "configure: error: I'm too dumb to figure out where the include dir is in your Instant Client install" 1>&2; exit 1; }
    fi
    if test -f "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME" ; then
    PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/lib"
    elif test -f "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME" ; then
      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/lib"
    elif test -f "$PDO_OCI_IC_PREFIX/libclntsh.$SHLIB_SUFFIX_NAME" ; then
      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX"
    else
      { echo "configure: error: I'm too dumb to figure out where the libraries are in your Instant Client install" 1>&2; exit 1; }
    fi
    PDO_OCI_VERSION="`echo $PDO_OCI_IC_VERS | cut -d. -f1-2`"
  else
    
  echo $ac_n "checking size of long int""... $ac_c" 1>&6
echo "configure:70910: checking size of long int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 70918 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long int));
  exit(0);
}
EOF
if { (eval echo configure:70929: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
EOF


  echo $ac_n "checking if we're on a 64-bit platform""... $ac_c" 1>&6
echo "configure:70949: checking if we're on a 64-bit platform" >&5
  if test "$ac_cv_sizeof_long_int" = "4" ; then
    echo "$ac_t""no" 1>&6
    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
  else
    echo "$ac_t""yes" 1>&6
    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
  fi

  echo $ac_n "checking OCI8 libraries dir""... $ac_c" 1>&6
echo "configure:70959: checking OCI8 libraries dir" >&5
  if test -d "$PDO_OCI_DIR/lib" && test ! -d "$PDO_OCI_DIR/lib32"; then
    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
  elif test ! -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
  elif test -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
    PDO_OCI_LIB_DIR=$TMP_PDO_OCI_LIB_DIR
  else
    { echo "configure: error: Oracle required OCI8 libraries not found" 1>&2; exit 1; }
  fi
  echo "$ac_t""$PDO_OCI_LIB_DIR" 1>&6


    if test -d "$PDO_OCI_DIR/rdbms/public"; then
      
  if test "$PDO_OCI_DIR/rdbms/public" != "/usr/include"; then
    
  if test -z "$PDO_OCI_DIR/rdbms/public" || echo "$PDO_OCI_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/rdbms/public
  else
    
    ep_dir="`echo $PDO_OCI_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/rdbms/public\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/public"
    fi
    if test -d "$PDO_OCI_DIR/rdbms/demo"; then
      
  if test "$PDO_OCI_DIR/rdbms/demo" != "/usr/include"; then
    
  if test -z "$PDO_OCI_DIR/rdbms/demo" || echo "$PDO_OCI_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/rdbms/demo
  else
    
    ep_dir="`echo $PDO_OCI_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/rdbms/demo\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/demo"
    fi
    if test -d "$PDO_OCI_DIR/network/public"; then
      
  if test "$PDO_OCI_DIR/network/public" != "/usr/include"; then
    
  if test -z "$PDO_OCI_DIR/network/public" || echo "$PDO_OCI_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/network/public
  else
    
    ep_dir="`echo $PDO_OCI_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/network/public\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/network/public"
    fi
    if test -d "$PDO_OCI_DIR/plsql/public"; then
      
  if test "$PDO_OCI_DIR/plsql/public" != "/usr/include"; then
    
  if test -z "$PDO_OCI_DIR/plsql/public" || echo "$PDO_OCI_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/plsql/public
  else
    
    ep_dir="`echo $PDO_OCI_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/plsql/public\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/plsql/public"
    fi
    if test -d "$PDO_OCI_DIR/include"; then
      
  if test "$PDO_OCI_DIR/include" != "/usr/include"; then
    
  if test -z "$PDO_OCI_DIR/include" || echo "$PDO_OCI_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/include
  else
    
    ep_dir="`echo $PDO_OCI_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/include"
    fi

    if test -f "$PDO_OCI_LIB_DIR/sysliblist"; then
      
  for ac_i in `cat $PDO_OCI_LIB_DIR/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    elif test -f "$PDO_OCI_DIR/rdbms/lib/sysliblist"; then
      
  for ac_i in `cat $PDO_OCI_DIR/rdbms/lib/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    fi
    
  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
echo "configure:71326: checking Oracle version" >&5
  for OCI_VER in $SUPPORTED_LIB_VERS; do
    if test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.$OCI_VER; then
      PDO_OCI_VERSION="$OCI_VER"
    fi
  done
  if test -z "$PDO_OCI_VERSION"; then
    { echo "configure: error: Oracle required OCI8 libraries not found under $PDO_OCI_DIR" 1>&2; exit 1; }
  fi
  echo "$ac_t""$PDO_OCI_VERSION" 1>&6

  fi

  case $PDO_OCI_VERSION in
    9.0|10.1|10.2|11.1|11.2)
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -lclntsh" 
    else
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lclntsh" 
   ;;
  esac


    fi
   ;;
  esac


      ;;

    *)
      { echo "configure: error: Unsupported Oracle version $PDO_OCI_VERSION" 1>&2; exit 1; }
      ;;
  esac

  
  if test "$PDO_OCI_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PDO_OCI_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$PDO_OCI_LIB_DIR" || echo "$PDO_OCI_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_LIB_DIR
  else
    
    ep_dir="`echo $PDO_OCI_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_OCI_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_OCI_SHARED_LIBADD="-L$ai_p $PDO_OCI_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_OCI_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_OCI_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for OCIEnvCreate in -lclntsh""... $ac_c" 1>&6
echo "configure:71508: checking for OCIEnvCreate in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCIEnvCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 71516 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCIEnvCreate();

int main() {
OCIEnvCreate()
; return 0; }
EOF
if { (eval echo configure:71527: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_OCIENVCREATE 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIEnvCreate
    
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
echo "configure:71661: checking for OCIEnvNlsCreate in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 71669 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCIEnvNlsCreate();

int main() {
OCIEnvNlsCreate()
; return 0; }
EOF
if { (eval echo configure:71680: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_OCIENVNLSCREATE 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIEnvNlsCreate
    
  
fi


        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for OCILobIsTemporary in -lclntsh""... $ac_c" 1>&6
echo "configure:71814: checking for OCILobIsTemporary in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 71822 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCILobIsTemporary();

int main() {
OCILobIsTemporary()
; return 0; }
EOF
if { (eval echo configure:71833: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_OCILOBISTEMPORARY 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCILobIsTemporary
    
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for OCILobIsTemporary in -locijdbc8""... $ac_c" 1>&6
echo "configure:71963: checking for OCILobIsTemporary in -locijdbc8" >&5
ac_lib_var=`echo ocijdbc8'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-locijdbc8  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 71971 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCILobIsTemporary();

int main() {
OCILobIsTemporary()
; return 0; }
EOF
if { (eval echo configure:71982: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case ocijdbc8 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -locijdbc8" 
    else
      
  
  case ocijdbc8 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -locijdbc8" 
   ;;
  esac


    fi
   ;;
  esac


      cat >> confdefs.h <<\EOF
#define HAVE_OCILOBISTEMPORARY 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ocijdbc8_OCILobIsTemporary
    
  
fi

  
  
fi


        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for OCICollAssign in -lclntsh""... $ac_c" 1>&6
echo "configure:72143: checking for OCICollAssign in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCICollAssign | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 72151 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCICollAssign();

int main() {
OCICollAssign()
; return 0; }
EOF
if { (eval echo configure:72162: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_OCICOLLASSIGN 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCICollAssign
    
  
fi


    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for OCIStmtFetch2 in -lclntsh""... $ac_c" 1>&6
echo "configure:72296: checking for OCIStmtFetch2 in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCIStmtFetch2 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 72304 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCIStmtFetch2();

int main() {
OCIStmtFetch2()
; return 0; }
EOF
if { (eval echo configure:72315: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
     cat >> confdefs.h <<\EOF
#define HAVE_OCISTMTFETCH2 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIStmtFetch2
    
  
fi


  
    
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:72354: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:72360: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
  fi

  

  
  ext_builddir=ext/pdo_oci
  ext_srcdir=$abs_srcdir/ext/pdo_oci

  ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_OCI_SHARED=no
    
  
  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_oci"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_OCI_SHARED=yes
      
  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_oci="$shared_objects_pdo_oci $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_oci.so '$ext_builddir'/phppdo_oci.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_OCI, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_oci.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_oci.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_oci.$suffix: $ext_builddir/phppdo_oci.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_oci.$suffix \$(phplibdir)

$ext_builddir/phppdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PHPPDO_OCI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_oci.so '$ext_builddir'/pdo_oci.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_OCI, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_oci.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_oci.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_oci.$suffix: $ext_builddir/pdo_oci.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_oci.$suffix \$(phplibdir)

$ext_builddir/pdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PDO_OCI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_OCI 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_OCI_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_oci"
        ;;
      *)
        
  
  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_oci
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_SHARED_LIBADD"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_DIR"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_VERSION"

  


  
    
  am_i_shared=$PHP_PDO_OCI_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_oci to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_oci shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_oci, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  

  cat >> confdefs.h <<EOF
#define PHP_PDO_OCI_CLIENT_VERSION "$PDO_OCI_VERSION"
EOF

fi






php_with_pdo_odbc=no

echo $ac_n "checking for ODBC v3 support for PDO""... $ac_c" 1>&6
echo "configure:72728: checking for ODBC v3 support for PDO" >&5
# Check whether --with-pdo-odbc or --without-pdo-odbc was given.
if test "${with_pdo_odbc+set}" = set; then
  withval="$with_pdo_odbc"
  PHP_PDO_ODBC=$withval
else
  
  PHP_PDO_ODBC=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_ODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_ODBC in
shared,*)
  PHP_PDO_ODBC=`echo "$PHP_PDO_ODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_ODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






                                  
if test "$PHP_PDO_ODBC" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
  fi

  
    
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:72780: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:72786: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
  fi

  

  echo $ac_n "checking for selected PDO ODBC flavour""... $ac_c" 1>&6
echo "configure:72807: checking for selected PDO ODBC flavour" >&5

  pdo_odbc_flavour="`echo $PHP_PDO_ODBC | cut -d, -f1`"
  pdo_odbc_dir="`echo $PHP_PDO_ODBC | cut -d, -f2`"

  if test "$pdo_odbc_dir" = "$PHP_PDO_ODBC" ; then
    pdo_odbc_dir=
  fi

  case $pdo_odbc_flavour in
    ibm-db2)
        pdo_odbc_def_libdir=/home/db2inst1/sqllib/lib
        pdo_odbc_def_incdir=/home/db2inst1/sqllib/include
        pdo_odbc_def_lib=db2
        ;;

    iODBC|iodbc)
        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
        pdo_odbc_def_incdir=/usr/local/include
        pdo_odbc_def_lib=iodbc
        ;;

    unixODBC|unixodbc)
        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
        pdo_odbc_def_incdir=/usr/local/include
        pdo_odbc_def_lib=odbc
        ;;

    ODBCRouter|odbcrouter)
        pdo_odbc_def_libdir=/usr/$PHP_LIBDIR
        pdo_odbc_def_incdir=/usr/include
        pdo_odbc_def_lib=odbcsdk
        ;;

    generic)
        pdo_odbc_def_lib="`echo $PHP_PDO_ODBC | cut -d, -f3`"
        pdo_odbc_def_ldflags="`echo $PHP_PDO_ODBC | cut -d, -f4`"
        pdo_odbc_def_cflags="`echo $PHP_PDO_ODBC | cut -d, -f5`"
        pdo_odbc_flavour="generic-$pdo_odbc_def_lib"
        ;;

      *)
        { echo "configure: error: Unknown ODBC flavour $pdo_odbc_flavour
                            include and lib dirs are looked for under 'dir'.
                            
                            'flavour' can be one of:  ibm-db2, iODBC, unixODBC, generic
                            If ',dir' part is omitted, default for the flavour 
                            you have selected will used. e.g.:
                            
                              --with-pdo-odbc=unixODBC
                              
                            will check for unixODBC under /usr/local. You may attempt 
                            to use an otherwise unsupported driver using the \"generic\" 
                            flavour.  The syntax for generic ODBC support is:
                            
                              --with-pdo-odbc=generic,dir,libname,ldflags,cflags

                            When build as shared the extension filename is always pdo_odbc.so" 1>&2; exit 1; }
        ;;
  esac

  if test -n "$pdo_odbc_dir"; then
    PDO_ODBC_INCDIR="$pdo_odbc_dir/include"
    PDO_ODBC_LIBDIR="$pdo_odbc_dir/$PHP_LIBDIR"
  else
    PDO_ODBC_INCDIR="$pdo_odbc_def_incdir"
    PDO_ODBC_LIBDIR="$pdo_odbc_def_libdir"
  fi
  
  echo "$ac_t""$pdo_odbc_flavour
          libs       $PDO_ODBC_LIBDIR,
          headers    $PDO_ODBC_INCDIR" 1>&6

  if test ! -d "$PDO_ODBC_LIBDIR" ; then
    echo "configure: warning: library dir $PDO_ODBC_LIBDIR does not exist" 1>&2
  fi

  
  echo $ac_n "checking for odbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72886: checking for odbc.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/odbc.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_ODBC_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for odbcsdk.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72900: checking for odbcsdk.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/odbcsdk.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_ODBCSDK_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for iodbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72914: checking for iodbc.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/iodbc.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_IODBC_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for sqlunix.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72928: checking for sqlunix.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/sqlunix.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_SQLUNIX_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for sqltypes.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72942: checking for sqltypes.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/sqltypes.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_SQLTYPES_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for sqlucode.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72956: checking for sqlucode.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/sqlucode.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_SQLUCODE_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for sql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72970: checking for sql.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/sql.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_SQL_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for isql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72984: checking for isql.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/isql.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_ISQL_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for sqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:72998: checking for sqlext.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/sqlext.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_SQLEXT_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for isqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73012: checking for isqlext.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/isqlext.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_ISQLEXT_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for udbcext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73026: checking for udbcext.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/udbcext.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_UDBCEXT_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for sqlcli1.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73040: checking for sqlcli1.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/sqlcli1.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_SQLCLI1_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for LibraryManager.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73054: checking for LibraryManager.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/LibraryManager.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_LIBRARYMANAGER_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for cli0core.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73068: checking for cli0core.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/cli0core.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_CLI0CORE_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for cli0ext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73082: checking for cli0ext.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/cli0ext.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_CLI0EXT_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for cli0cli.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73096: checking for cli0cli.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/cli0cli.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_CLI0CLI_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for cli0defs.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73110: checking for cli0defs.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/cli0defs.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_CLI0DEFS_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  
  echo $ac_n "checking for cli0env.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
echo "configure:73124: checking for cli0env.h in $PDO_ODBC_INCDIR" >&5
  if test -f "$PDO_ODBC_INCDIR/cli0env.h"; then
    php_pdo_have_header=yes
    cat >> confdefs.h <<\EOF
#define HAVE_CLI0ENV_H 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi


  if test "$php_pdo_have_header" != "yes"; then
    { echo "configure: error: Cannot find header file(s) for pdo_odbc" 1>&2; exit 1; }
  fi

  PDO_ODBC_INCLUDE="$pdo_odbc_def_cflags -I$PDO_ODBC_INCDIR -DPDO_ODBC_TYPE=\\\"$pdo_odbc_flavour\\\""
  PDO_ODBC_LDFLAGS="$pdo_odbc_def_ldflags -L$PDO_ODBC_LIBDIR -l$pdo_odbc_def_lib"

  
  for ac_i in $PDO_ODBC_LDFLAGS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_ODBC_SHARED_LIBADD="-L$ai_p $PDO_ODBC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_ODBC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done


    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="$PDO_ODBC_LDFLAGS"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for SQLBindCol in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
echo "configure:73330: checking for SQLBindCol in -l$pdo_odbc_def_lib" >&5
ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLBindCol | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$pdo_odbc_def_lib  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 73338 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SQLBindCol();

int main() {
SQLBindCol()
; return 0; }
EOF
if { (eval echo configure:73349: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
            
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="$PDO_ODBC_LDFLAGS"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for SQLAllocHandle in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
echo "configure:73464: checking for SQLAllocHandle in -l$pdo_odbc_def_lib" >&5
ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLAllocHandle | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$pdo_odbc_def_lib  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 73472 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SQLAllocHandle();

int main() {
SQLAllocHandle()
; return 0; }
EOF
if { (eval echo configure:73483: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$pdo_odbc_def_lib_SQLAllocHandle
    
      { echo "configure: error: 
Your ODBC library does not appear to be ODBC 3 compatible.
You should consider using iODBC or unixODBC instead, and loading your
libraries as a driver in that environment; it will emulate the
functions required for PDO support.
" 1>&2; exit 1; }
  
fi

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$pdo_odbc_def_lib_SQLBindCol
    
    { echo "configure: error: Your ODBC library does not exist or there was an error. Check config.log for more information" 1>&2; exit 1; }
  
  
fi


  
  ext_builddir=ext/pdo_odbc
  ext_srcdir=$abs_srcdir/ext/pdo_odbc

  ac_extra=`echo "-I$pdo_inc_path $PDO_ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_ODBC_SHARED=no
    
  
  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_odbc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_ODBC_SHARED=yes
      
  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_odbc="$shared_objects_pdo_odbc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_odbc.so '$ext_builddir'/phppdo_odbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_ODBC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_odbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_odbc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_odbc.$suffix: $ext_builddir/phppdo_odbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_odbc.$suffix \$(phplibdir)

$ext_builddir/phppdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PHPPDO_ODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_odbc.so '$ext_builddir'/pdo_odbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_ODBC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_odbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_odbc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_odbc.$suffix: $ext_builddir/pdo_odbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_odbc.$suffix \$(phplibdir)

$ext_builddir/pdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PDO_ODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_ODBC 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_ODBC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_odbc"
        ;;
      *)
        
  
  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_odbc
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_ODBC_SHARED_LIBADD"

  
    
  am_i_shared=$PHP_PDO_ODBC_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_odbc to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_odbc shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_odbc, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
fi



php_with_pdo_pgsql=no

echo $ac_n "checking for PostgreSQL support for PDO""... $ac_c" 1>&6
echo "configure:73857: checking for PostgreSQL support for PDO" >&5
# Check whether --with-pdo-pgsql or --without-pdo-pgsql was given.
if test "${with_pdo_pgsql+set}" = set; then
  withval="$with_pdo_pgsql"
  PHP_PDO_PGSQL=$withval
else
  
  PHP_PDO_PGSQL=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_PGSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_PGSQL in
shared,*)
  PHP_PDO_PGSQL=`echo "$PHP_PDO_PGSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_PGSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PDO_PGSQL" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
  fi

  
  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    PGSQL_INCLUDE=$PGSQL_INCLUDE
  else
    
    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    PGSQL_INCLUDE="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
  fi


  echo $ac_n "checking for pg_config""... $ac_c" 1>&6
echo "configure:73916: checking for pg_config" >&5
  for i in $PHP_PDO_PGSQL $PHP_PDO_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
    if test -x $i/pg_config; then
      PG_CONFIG="$i/pg_config"
      break;
    fi
  done

  if test -n "$PG_CONFIG"; then
    echo "$ac_t""$PG_CONFIG" 1>&6
    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
    PGSQL_LIBDIR=`$PG_CONFIG --libdir`
    cat >> confdefs.h <<\EOF
#define HAVE_PG_CONFIG_H 1
EOF

  else
    echo "$ac_t""not found" 1>&6
    if test "$PHP_PDO_PGSQL" = "yes"; then
      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
    else
      PGSQL_SEARCH_PATHS=$PHP_PDO_PGSQL
    fi
  
    for i in $PGSQL_SEARCH_PATHS; do
      for j in include include/pgsql include/postgres include/postgresql ""; do
        if test -r "$i/$j/libpq-fe.h"; then
          PGSQL_INC_BASE=$i
          PGSQL_INCLUDE=$i/$j
          if test -r "$i/$j/pg_config.h"; then
            cat >> confdefs.h <<\EOF
#define HAVE_PG_CONFIG_H 1
EOF

          fi
        fi
      done

      for j in $PHP_LIBDIR $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
          PGSQL_LIBDIR=$i/$j
        fi
      done
    done
  fi

  if test -z "$PGSQL_INCLUDE"; then
    { echo "configure: error: Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
  fi

  if test -z "$PGSQL_LIBDIR"; then
    { echo "configure: error: Cannot find libpq.so. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
  fi

  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
    { echo "configure: error: Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_PDO_PGSQL 1
EOF


  echo $ac_n "checking for openssl dependencies""... $ac_c" 1>&6
echo "configure:73980: checking for openssl dependencies" >&5
  grep openssl $PGSQL_INCLUDE/libpq-fe.h >/dev/null 2>&1
  if test $? -eq 0 ; then
    echo "$ac_t""yes" 1>&6
        # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:73987: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

    if test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
      PDO_PGSQL_CFLAGS=`$PKG_CONFIG openssl --cflags`
    fi
  else
    echo "$ac_t""no" 1>&6
  fi

  old_LIBS=$LIBS
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
  echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
echo "configure:74031: checking for PQparameterStatus in -lpq" >&5
ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 74039 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQparameterStatus();

int main() {
PQparameterStatus()
; return 0; }
EOF
if { (eval echo configure:74050: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQPARAMETERSTATUS 1
EOF

else
  echo "$ac_t""no" 1>&6

    echo "Unable to build the PDO PostgreSQL driver: libpq 7.4+ is required"
    exit 1
  
fi


  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
echo "configure:74079: checking for PQprepare in -lpq" >&5
ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 74087 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQprepare();

int main() {
PQprepare()
; return 0; }
EOF
if { (eval echo configure:74098: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQPREPARE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
echo "configure:74122: checking for PQescapeStringConn in -lpq" >&5
ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 74130 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQescapeStringConn();

int main() {
PQescapeStringConn()
; return 0; }
EOF
if { (eval echo configure:74141: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQESCAPE_CONN 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
echo "configure:74165: checking for PQescapeByteaConn in -lpq" >&5
ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 74173 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQescapeByteaConn();

int main() {
PQescapeByteaConn()
; return 0; }
EOF
if { (eval echo configure:74184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQESCAPE_BYTEA_CONN 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
echo "configure:74209: checking for pg_encoding_to_char in -lpq" >&5
ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 74217 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pg_encoding_to_char();

int main() {
pg_encoding_to_char()
; return 0; }
EOF
if { (eval echo configure:74228: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  

  LIBS=$old_LIBS
  LDFLAGS=$old_LDFLAGS

  

  if test "$ext_shared" = "yes"; then
    PDO_PGSQL_SHARED_LIBADD="-lpq $PDO_PGSQL_SHARED_LIBADD"
    if test -n "$PGSQL_LIBDIR"; then
      
  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_PGSQL_SHARED_LIBADD="-L$ai_p $PDO_PGSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_PGSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PGSQL_LIBDIR"; then
    
  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pq in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpq $LIBS" 
   ;;
  esac




  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_PGSQL_SHARED_LIBADD"


  
  if test "$PGSQL_INCLUDE" != "/usr/include"; then
    
  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_INCLUDE
  else
    
    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
    
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:74392: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:74398: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
  fi

  

  
  ext_builddir=ext/pdo_pgsql
  ext_srcdir=$abs_srcdir/ext/pdo_pgsql

  ac_extra=`echo "-I$pdo_inc_path $PDO_PGSQL_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_PGSQL_SHARED=no
    
  
  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_pgsql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_PGSQL_SHARED=yes
      
  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_pgsql="$shared_objects_pdo_pgsql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_pgsql.so '$ext_builddir'/phppdo_pgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_PGSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_pgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_pgsql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_pgsql.$suffix: $ext_builddir/phppdo_pgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_pgsql.$suffix \$(phplibdir)

$ext_builddir/phppdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PHPPDO_PGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_pgsql.so '$ext_builddir'/pdo_pgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_PGSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_pgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_pgsql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_pgsql.$suffix: $ext_builddir/pdo_pgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_pgsql.$suffix \$(phplibdir)

$ext_builddir/pdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PDO_PGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_PGSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_PGSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_pgsql"
        ;;
      *)
        
  
  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_pgsql
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
    
  am_i_shared=$PHP_PDO_PGSQL_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_pgsql to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_pgsql shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_pgsql, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
   
  
fi



php_with_pdo_sqlite=$PHP_PDO

echo $ac_n "checking for sqlite 3 support for PDO""... $ac_c" 1>&6
echo "configure:74738: checking for sqlite 3 support for PDO" >&5
# Check whether --with-pdo-sqlite or --without-pdo-sqlite was given.
if test "${with_pdo_sqlite+set}" = set; then
  withval="$with_pdo_sqlite"
  PHP_PDO_SQLITE=$withval
else
  
  PHP_PDO_SQLITE=$PHP_PDO
  test "$PHP_ENABLE_ALL" && PHP_PDO_SQLITE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_SQLITE in
shared,*)
  PHP_PDO_SQLITE=`echo "$PHP_PDO_SQLITE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_SQLITE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PDO_SQLITE" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
  fi

  
    
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:74787: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:74793: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
  fi

  

  php_pdo_sqlite_sources_core="pdo_sqlite.c sqlite_driver.c sqlite_statement.c"

  if test "$PHP_PDO_SQLITE" != "yes"; then
    SEARCH_PATH="$PHP_PDO_SQLITE /usr/local /usr"     # you might want to change this
    SEARCH_FOR="/include/sqlite3.h"  # you most likely want to change this
    if test -r $PHP_PDO_SQLITE/$SEARCH_FOR; then # path given as parameter
      PDO_SQLITE_DIR=$PHP_PDO_SQLITE
    else # search default path list
      echo $ac_n "checking for sqlite3 files in default path""... $ac_c" 1>&6
echo "configure:74822: checking for sqlite3 files in default path" >&5
      for i in $SEARCH_PATH ; do
        if test -r $i/$SEARCH_FOR; then
          PDO_SQLITE_DIR=$i
          echo "$ac_t""found in $i" 1>&6
        fi
      done
    fi
    if test -z "$PDO_SQLITE_DIR"; then
      echo "$ac_t""not found" 1>&6
      { echo "configure: error: Please reinstall the sqlite3 distribution" 1>&2; exit 1; }
    fi

    
  if test "$PDO_SQLITE_DIR/include" != "/usr/include"; then
    
  if test -z "$PDO_SQLITE_DIR/include" || echo "$PDO_SQLITE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_SQLITE_DIR/include
  else
    
    ep_dir="`echo $PDO_SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


    LIBNAME=sqlite3
    LIBSYMBOL=sqlite3_open

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PDO_SQLITE_DIR/$PHP_LIBDIR -lm
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for $LIBSYMBOL in -l$LIBNAME""... $ac_c" 1>&6
echo "configure:74968: checking for $LIBSYMBOL in -l$LIBNAME" >&5
ac_lib_var=`echo $LIBNAME'_'$LIBSYMBOL | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 74976 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $LIBSYMBOL();

int main() {
$LIBSYMBOL()
; return 0; }
EOF
if { (eval echo configure:74987: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      

  if test "$ext_shared" = "yes"; then
    PDO_SQLITE_SHARED_LIBADD="-l$LIBNAME $PDO_SQLITE_SHARED_LIBADD"
    if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then
      
  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDO_SQLITE_SHARED_LIBADD="-L$ai_p $PDO_SQLITE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_SQLITE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then
    
  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LIBNAME $LIBS" 
   ;;
  esac




  fi


      cat >> confdefs.h <<\EOF
#define HAVE_PDO_SQLITELIB 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIBNAME_$LIBSYMBOL
    
      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
    
  
fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for sqlite3_key in -lsqlite3""... $ac_c" 1>&6
echo "configure:75217: checking for sqlite3_key in -lsqlite3" >&5
ac_lib_var=`echo sqlite3'_'sqlite3_key | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsqlite3  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 75225 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqlite3_key();

int main() {
sqlite3_key()
; return 0; }
EOF
if { (eval echo configure:75236: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      cat >> confdefs.h <<\EOF
#define HAVE_SQLITE3_KEY 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_key
    
  
fi


    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"

    
  ext_builddir=ext/pdo_sqlite
  ext_srcdir=$abs_srcdir/ext/pdo_sqlite

  ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_SQLITE_SHARED=no
    
  
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_sqlite"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_SQLITE_SHARED=yes
      
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_SQLITE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_SQLITE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_SQLITE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_SQLITE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_sqlite"
        ;;
      *)
        
  
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_sqlite
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  else
      # use bundled libs
      if test "$enable_maintainer_zts" = "yes"; then
        threadsafe_flags="-DSQLITE_THREADSAFE=1"
      else
        threadsafe_flags="-DSQLITE_THREADSAFE=0"
      fi

      other_flags="-DSQLITE_ENABLE_FTS3=1 -DSQLITE_CORE=1 -DSQLITE_ENABLE_COLUMN_METADATA=1"

	        if test "$PHP_INTL" = "yes" && test "$PHP_INTL_SHARED" != "yes"; then
        other_flags="$other_flags -DSQLITE_ENABLE_ICU=1"
      fi

      if test "$PHP_SQLITE3" != "yes"; then
        
  
  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libsqlite/sqlite3.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      fi

      
  ext_builddir=ext/pdo_sqlite
  ext_srcdir=$abs_srcdir/ext/pdo_sqlite

  ac_extra=`echo "-DPDO_SQLITE_BUNDLED=1 $other_flags $threadsafe_flags -I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_SQLITE_SHARED=no
    
  
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_sqlite"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_SQLITE_SHARED=yes
      
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_SQLITE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_SQLITE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDO_SQLITE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_SQLITE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_sqlite"
        ;;
      *)
        
  
  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_sqlite
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


      
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"

      
  am_i_shared=$PHP_PDO_SQLITE_SHARED
  is_it_shared=$PHP_SQLITE3_SHARED
  is_it_enabled=$PHP_SQLITE3
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_sqlite to build statically, but it
depends on extension sqlite3, which you've configured to build shared.
You either need to build pdo_sqlite shared or build sqlite3 statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_sqlite, which depends on extension sqlite3,
but you've either not enabled sqlite3, or have disabled it.
" 1>&2; exit 1; }
  fi
  
      
  if test "$abs_srcdir/ext/sqlite3/libsqlite" != "/usr/include"; then
    
  if test -z "$abs_srcdir/ext/sqlite3/libsqlite" || echo "$abs_srcdir/ext/sqlite3/libsqlite" | grep '^/' >/dev/null ; then
    ai_p=$abs_srcdir/ext/sqlite3/libsqlite
  else
    
    ep_dir="`echo $abs_srcdir/ext/sqlite3/libsqlite|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$abs_srcdir/ext/sqlite3/libsqlite\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


      for ac_func in usleep nanosleep
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:75977: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 75982 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:76005: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

      for ac_hdr in time.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:76033: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 76038 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:76043: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for fdatasync in -lrt""... $ac_c" 1>&6
echo "configure:76167: checking for fdatasync in -lrt" >&5
ac_lib_var=`echo rt'_'fdatasync | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lrt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76175 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char fdatasync();

int main() {
fdatasync()
; return 0; }
EOF
if { (eval echo configure:76186: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
  case rt in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDO_SQLITE_SHARED_LIBADD="-lrt $PDO_SQLITE_SHARED_LIBADD" 
    else
      
  
  case rt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lrt $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_rt_fdatasync
    
  
fi


  
    
  am_i_shared=$PHP_PDO_SQLITE_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension pdo_sqlite to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_sqlite shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension pdo_sqlite, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
fi



php_with_pgsql=no

echo $ac_n "checking for PostgreSQL support""... $ac_c" 1>&6
echo "configure:76267: checking for PostgreSQL support" >&5
# Check whether --with-pgsql or --without-pgsql was given.
if test "${with_pgsql+set}" = set; then
  withval="$with_pgsql"
  PHP_PGSQL=$withval
else
  
  PHP_PGSQL=no
  test "$PHP_ENABLE_ALL" && PHP_PGSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PGSQL in
shared,*)
  PHP_PGSQL=`echo "$PHP_PGSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PGSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PGSQL" != "no"; then
  
  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    PGSQL_INCLUDE=$PGSQL_INCLUDE
  else
    
    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    PGSQL_INCLUDE="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
  fi


  echo $ac_n "checking for pg_config""... $ac_c" 1>&6
echo "configure:76321: checking for pg_config" >&5
  for i in $PHP_PGSQL $PHP_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
	if test -x $i/pg_config; then
      PG_CONFIG="$i/pg_config"
      break;
    fi
  done

  if test -n "$PG_CONFIG"; then
    echo "$ac_t""$PG_CONFIG" 1>&6
    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
    PGSQL_LIBDIR=`$PG_CONFIG --libdir`
    if test -r "$PGSQL_INCLUDE/pg_config.h"; then
      cat >> confdefs.h <<\EOF
#define HAVE_PG_CONFIG_H 1
EOF

    fi
  else
    echo "$ac_t""not found" 1>&6
    if test "$PHP_PGSQL" = "yes"; then
      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
    else
      PGSQL_SEARCH_PATHS=$PHP_PGSQL
    fi
  
    for i in $PGSQL_SEARCH_PATHS; do
      for j in include include/pgsql include/postgres include/postgresql ""; do
        if test -r "$i/$j/libpq-fe.h"; then
          PGSQL_INC_BASE=$i
          PGSQL_INCLUDE=$i/$j
          if test -r "$i/$j/pg_config.h"; then
            cat >> confdefs.h <<\EOF
#define HAVE_PG_CONFIG_H 1
EOF

          fi
        fi
      done

      for j in lib $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
          PGSQL_LIBDIR=$i/$j
        fi
      done
    done
  fi

  if test -z "$PGSQL_INCLUDE"; then
    { echo "configure: error: Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
  fi

  if test -z "$PGSQL_LIBDIR"; then
    { echo "configure: error: Cannot find libpq.so. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
  fi

  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
    { echo "configure: error: Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_PGSQL 1
EOF

  old_LIBS=$LIBS
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
  echo $ac_n "checking for PQescapeString in -lpq""... $ac_c" 1>&6
echo "configure:76389: checking for PQescapeString in -lpq" >&5
ac_lib_var=`echo pq'_'PQescapeString | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76397 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQescapeString();

int main() {
PQescapeString()
; return 0; }
EOF
if { (eval echo configure:76408: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQESCAPE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQunescapeBytea in -lpq""... $ac_c" 1>&6
echo "configure:76432: checking for PQunescapeBytea in -lpq" >&5
ac_lib_var=`echo pq'_'PQunescapeBytea | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76440 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQunescapeBytea();

int main() {
PQunescapeBytea()
; return 0; }
EOF
if { (eval echo configure:76451: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQUNESCAPEBYTEA 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQsetnonblocking in -lpq""... $ac_c" 1>&6
echo "configure:76475: checking for PQsetnonblocking in -lpq" >&5
ac_lib_var=`echo pq'_'PQsetnonblocking | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76483 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQsetnonblocking();

int main() {
PQsetnonblocking()
; return 0; }
EOF
if { (eval echo configure:76494: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQSETNONBLOCKING 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQcmdTuples in -lpq""... $ac_c" 1>&6
echo "configure:76518: checking for PQcmdTuples in -lpq" >&5
ac_lib_var=`echo pq'_'PQcmdTuples | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76526 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQcmdTuples();

int main() {
PQcmdTuples()
; return 0; }
EOF
if { (eval echo configure:76537: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQCMDTUPLES 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQoidValue in -lpq""... $ac_c" 1>&6
echo "configure:76561: checking for PQoidValue in -lpq" >&5
ac_lib_var=`echo pq'_'PQoidValue | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76569 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQoidValue();

int main() {
PQoidValue()
; return 0; }
EOF
if { (eval echo configure:76580: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQOIDVALUE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQclientEncoding in -lpq""... $ac_c" 1>&6
echo "configure:76604: checking for PQclientEncoding in -lpq" >&5
ac_lib_var=`echo pq'_'PQclientEncoding | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76612 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQclientEncoding();

int main() {
PQclientEncoding()
; return 0; }
EOF
if { (eval echo configure:76623: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQCLIENTENCODING 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
echo "configure:76647: checking for PQparameterStatus in -lpq" >&5
ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76655 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQparameterStatus();

int main() {
PQparameterStatus()
; return 0; }
EOF
if { (eval echo configure:76666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQPARAMETERSTATUS 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQprotocolVersion in -lpq""... $ac_c" 1>&6
echo "configure:76690: checking for PQprotocolVersion in -lpq" >&5
ac_lib_var=`echo pq'_'PQprotocolVersion | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76698 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQprotocolVersion();

int main() {
PQprotocolVersion()
; return 0; }
EOF
if { (eval echo configure:76709: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQPROTOCOLVERSION 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQtransactionStatus in -lpq""... $ac_c" 1>&6
echo "configure:76733: checking for PQtransactionStatus in -lpq" >&5
ac_lib_var=`echo pq'_'PQtransactionStatus | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76741 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQtransactionStatus();

int main() {
PQtransactionStatus()
; return 0; }
EOF
if { (eval echo configure:76752: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PGTRANSACTIONSTATUS 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQexecParams in -lpq""... $ac_c" 1>&6
echo "configure:76776: checking for PQexecParams in -lpq" >&5
ac_lib_var=`echo pq'_'PQexecParams | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76784 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQexecParams();

int main() {
PQexecParams()
; return 0; }
EOF
if { (eval echo configure:76795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQEXECPARAMS 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
echo "configure:76819: checking for PQprepare in -lpq" >&5
ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76827 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQprepare();

int main() {
PQprepare()
; return 0; }
EOF
if { (eval echo configure:76838: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQPREPARE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQexecPrepared in -lpq""... $ac_c" 1>&6
echo "configure:76862: checking for PQexecPrepared in -lpq" >&5
ac_lib_var=`echo pq'_'PQexecPrepared | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76870 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQexecPrepared();

int main() {
PQexecPrepared()
; return 0; }
EOF
if { (eval echo configure:76881: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQEXECPREPARED 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQresultErrorField in -lpq""... $ac_c" 1>&6
echo "configure:76905: checking for PQresultErrorField in -lpq" >&5
ac_lib_var=`echo pq'_'PQresultErrorField | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76913 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQresultErrorField();

int main() {
PQresultErrorField()
; return 0; }
EOF
if { (eval echo configure:76924: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQRESULTERRORFIELD 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQsendQueryParams in -lpq""... $ac_c" 1>&6
echo "configure:76948: checking for PQsendQueryParams in -lpq" >&5
ac_lib_var=`echo pq'_'PQsendQueryParams | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76956 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQsendQueryParams();

int main() {
PQsendQueryParams()
; return 0; }
EOF
if { (eval echo configure:76967: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQSENDQUERYPARAMS 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQsendPrepare in -lpq""... $ac_c" 1>&6
echo "configure:76991: checking for PQsendPrepare in -lpq" >&5
ac_lib_var=`echo pq'_'PQsendPrepare | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76999 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQsendPrepare();

int main() {
PQsendPrepare()
; return 0; }
EOF
if { (eval echo configure:77010: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQSENDPREPARE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQsendQueryPrepared in -lpq""... $ac_c" 1>&6
echo "configure:77034: checking for PQsendQueryPrepared in -lpq" >&5
ac_lib_var=`echo pq'_'PQsendQueryPrepared | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77042 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQsendQueryPrepared();

int main() {
PQsendQueryPrepared()
; return 0; }
EOF
if { (eval echo configure:77053: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQSENDQUERYPREPARED 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQputCopyData in -lpq""... $ac_c" 1>&6
echo "configure:77077: checking for PQputCopyData in -lpq" >&5
ac_lib_var=`echo pq'_'PQputCopyData | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77085 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQputCopyData();

int main() {
PQputCopyData()
; return 0; }
EOF
if { (eval echo configure:77096: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQPUTCOPYDATA 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQputCopyEnd in -lpq""... $ac_c" 1>&6
echo "configure:77120: checking for PQputCopyEnd in -lpq" >&5
ac_lib_var=`echo pq'_'PQputCopyEnd | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77128 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQputCopyEnd();

int main() {
PQputCopyEnd()
; return 0; }
EOF
if { (eval echo configure:77139: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQPUTCOPYEND 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQgetCopyData in -lpq""... $ac_c" 1>&6
echo "configure:77163: checking for PQgetCopyData in -lpq" >&5
ac_lib_var=`echo pq'_'PQgetCopyData | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77171 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQgetCopyData();

int main() {
PQgetCopyData()
; return 0; }
EOF
if { (eval echo configure:77182: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQGETCOPYDATA 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQfreemem in -lpq""... $ac_c" 1>&6
echo "configure:77206: checking for PQfreemem in -lpq" >&5
ac_lib_var=`echo pq'_'PQfreemem | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77214 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQfreemem();

int main() {
PQfreemem()
; return 0; }
EOF
if { (eval echo configure:77225: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQFREEMEM 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQsetErrorVerbosity in -lpq""... $ac_c" 1>&6
echo "configure:77249: checking for PQsetErrorVerbosity in -lpq" >&5
ac_lib_var=`echo pq'_'PQsetErrorVerbosity | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77257 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQsetErrorVerbosity();

int main() {
PQsetErrorVerbosity()
; return 0; }
EOF
if { (eval echo configure:77268: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQSETERRORVERBOSITY 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQftable in -lpq""... $ac_c" 1>&6
echo "configure:77292: checking for PQftable in -lpq" >&5
ac_lib_var=`echo pq'_'PQftable | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77300 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQftable();

int main() {
PQftable()
; return 0; }
EOF
if { (eval echo configure:77311: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQFTABLE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
echo "configure:77335: checking for PQescapeStringConn in -lpq" >&5
ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77343 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQescapeStringConn();

int main() {
PQescapeStringConn()
; return 0; }
EOF
if { (eval echo configure:77354: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQESCAPE_CONN 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
echo "configure:77378: checking for PQescapeByteaConn in -lpq" >&5
ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77386 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQescapeByteaConn();

int main() {
PQescapeByteaConn()
; return 0; }
EOF
if { (eval echo configure:77397: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQESCAPE_BYTEA_CONN 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
echo "configure:77421: checking for pg_encoding_to_char in -lpq" >&5
ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77429 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pg_encoding_to_char();

int main() {
pg_encoding_to_char()
; return 0; }
EOF
if { (eval echo configure:77440: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for lo_create in -lpq""... $ac_c" 1>&6
echo "configure:77464: checking for lo_create in -lpq" >&5
ac_lib_var=`echo pq'_'lo_create | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77472 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char lo_create();

int main() {
lo_create()
; return 0; }
EOF
if { (eval echo configure:77483: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PG_LO_CREATE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for lo_import_with_oid in -lpq""... $ac_c" 1>&6
echo "configure:77507: checking for lo_import_with_oid in -lpq" >&5
ac_lib_var=`echo pq'_'lo_import_with_oid | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77515 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char lo_import_with_oid();

int main() {
lo_import_with_oid()
; return 0; }
EOF
if { (eval echo configure:77526: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PG_LO_IMPORT_WITH_OID 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  LIBS=$old_LIBS
  LDFLAGS=$old_LDFLAGS

  

  if test "$ext_shared" = "yes"; then
    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
    if test -n "$PGSQL_LIBDIR"; then
      
  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PGSQL_SHARED_LIBADD="-L$ai_p $PGSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PGSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PGSQL_LIBDIR"; then
    
  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pq in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpq $LIBS" 
   ;;
  esac




  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"


  
  if test "$PGSQL_INCLUDE" != "/usr/include"; then
    
  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_INCLUDE
  else
    
    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  ext_builddir=ext/pgsql
  ext_srcdir=$abs_srcdir/ext/pgsql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PGSQL_SHARED=no
    
  
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pgsql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PGSQL_SHARED=yes
      
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pgsql="$shared_objects_pgsql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppgsql.so '$ext_builddir'/phppgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPGSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppgsql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppgsql.$suffix: $ext_builddir/phppgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppgsql.$suffix \$(phplibdir)

$ext_builddir/phppgsql.$suffix: \$(shared_objects_pgsql) \$(PHPPGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pgsql.so '$ext_builddir'/pgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PGSQL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pgsql.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pgsql.$suffix: $ext_builddir/pgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pgsql.$suffix \$(phplibdir)

$ext_builddir/pgsql.$suffix: \$(shared_objects_pgsql) \$(PGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PGSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PGSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pgsql"
        ;;
      *)
        
  
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pgsql
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi





php_enable_phar=yes

echo $ac_n "checking for phar archive support""... $ac_c" 1>&6
echo "configure:77986: checking for phar archive support" >&5
# Check whether --enable-phar or --disable-phar was given.
if test "${enable_phar+set}" = set; then
  enableval="$enable_phar"
  PHP_PHAR=$enableval
else
  
  PHP_PHAR=yes
  test "$PHP_ENABLE_ALL" && PHP_PHAR=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PHAR in
shared,*)
  PHP_PHAR=`echo "$PHP_PHAR"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PHAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PHAR" != "no"; then
  
  ext_builddir=ext/phar
  ext_srcdir=$abs_srcdir/ext/phar

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PHAR_SHARED=no
    
  
  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC phar"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PHAR_SHARED=yes
      
  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_phar="$shared_objects_phar $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpphar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpphar.so '$ext_builddir'/phpphar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPHAR, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpphar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpphar.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpphar.$suffix: $ext_builddir/phpphar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpphar.$suffix \$(phplibdir)

$ext_builddir/phpphar.$suffix: \$(shared_objects_phar) \$(PHPPHAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phar.so '$ext_builddir'/phar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHAR, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phar.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phar.$suffix: $ext_builddir/phar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phar.$suffix \$(phplibdir)

$ext_builddir/phar.$suffix: \$(shared_objects_phar) \$(PHAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PHAR 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PHAR_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC phar"
        ;;
      *)
        
  
  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=phar
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  echo $ac_n "checking for phar openssl support""... $ac_c" 1>&6
echo "configure:78320: checking for phar openssl support" >&5
  if test "$PHP_HASH_SHARED" != "yes"; then
    if test "$PHP_HASH" != "no"; then
      cat >> confdefs.h <<\EOF
#define PHAR_HASH_OK 1
EOF

    fi
  else
    echo "configure: warning: Phar: sha256/sha512 signature support disabled if ext/hash is built shared" 1>&2
  fi
  if test "$PHP_OPENSSL_SHARED" = "yes"; then
    echo "$ac_t""no (shared openssl)" 1>&6
  else
    if test "$PHP_OPENSSL" = "yes"; then
      echo "$ac_t""yes" 1>&6
      cat >> confdefs.h <<\EOF
#define PHAR_HAVE_OPENSSL 1
EOF

    else
      echo "$ac_t""no" 1>&6
    fi
  fi
  
  am_i_shared=$PHP_PHAR_SHARED
  is_it_shared=$PHP_HASH_SHARED
  is_it_enabled=$PHP_HASH
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension phar to build statically, but it
depends on extension hash, which you've configured to build shared.
You either need to build phar shared or build hash statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension phar, which depends on extension hash,
but you've either not enabled hash, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  am_i_shared=$PHP_PHAR_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension phar to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build phar shared or build spl statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension phar, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi



php_enable_posix=yes

echo $ac_n "checking whether to enable POSIX-like functions""... $ac_c" 1>&6
echo "configure:78395: checking whether to enable POSIX-like functions" >&5
# Check whether --enable-posix or --disable-posix was given.
if test "${enable_posix+set}" = set; then
  enableval="$enable_posix"
  PHP_POSIX=$enableval
else
  
  PHP_POSIX=yes
  test "$PHP_ENABLE_ALL" && PHP_POSIX=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_POSIX in
shared,*)
  PHP_POSIX=`echo "$PHP_POSIX"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_POSIX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_POSIX" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_POSIX 1
EOF

  
  ext_builddir=ext/posix
  ext_srcdir=$abs_srcdir/ext/posix

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_POSIX_SHARED=no
    
  
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC posix"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_POSIX_SHARED=yes
      
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_posix="$shared_objects_posix $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpposix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpposix.so '$ext_builddir'/phpposix.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPOSIX, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpposix.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpposix.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpposix.$suffix: $ext_builddir/phpposix.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpposix.$suffix \$(phplibdir)

$ext_builddir/phpposix.$suffix: \$(shared_objects_posix) \$(PHPPOSIX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/posix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/posix.so '$ext_builddir'/posix.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(POSIX, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/posix.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/posix.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/posix.$suffix: $ext_builddir/posix.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/posix.$suffix \$(phplibdir)

$ext_builddir/posix.$suffix: \$(shared_objects_posix) \$(POSIX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_POSIX 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_POSIX_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC posix"
        ;;
      *)
        
  
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=posix
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  for ac_hdr in sys/mkdev.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:78737: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78742 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:78747: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  for ac_func in seteuid setegid setsid getsid setpgid getpgid ctermid mkfifo mknod getrlimit getlogin getgroups makedev initgroups getpwuid_r getgrgid_r
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:78777: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78782 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:78805: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  echo $ac_n "checking for working ttyname_r() implementation""... $ac_c" 1>&6
echo "configure:78831: checking for working ttyname_r() implementation" >&5
  if test "$cross_compiling" = yes; then
  
    echo "$ac_t""no, cannot detect working ttyname_r() when cross compiling. posix_ttyname() will be thread-unsafe" 1>&6
  
else
  cat > conftest.$ac_ext <<EOF
#line 78838 "configure"
#include "confdefs.h"

#include <unistd.h>

int main(int argc, char *argv[])
{
	char buf[64];

	return ttyname_r(0, buf, 64) ? 1 : 0;
}
  
EOF
if { (eval echo configure:78851: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    echo "$ac_t""yes" 1>&6
    cat >> confdefs.h <<\EOF
#define HAVE_TTYNAME_R 1
EOF

  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    echo "$ac_t""no, posix_ttyname() will be thread-unsafe" 1>&6
  
fi
rm -fr conftest*
fi


  echo $ac_n "checking for utsname.domainname""... $ac_c" 1>&6
echo "configure:78873: checking for utsname.domainname" >&5
if eval "test \"`echo '$''{'ac_cv_have_utsname_domainname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 78879 "configure"
#include "confdefs.h"

      #define _GNU_SOURCE
      #include <sys/utsname.h>
    
int main() {

      return sizeof(((struct utsname *)0)->domainname);
    
; return 0; }
EOF
if { (eval echo configure:78891: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
      ac_cv_have_utsname_domainname=yes
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      ac_cv_have_utsname_domainname=no
    
fi
rm -f conftest*
  
fi

echo "$ac_t""$ac_cv_have_utsname_domainname" 1>&6
  if test "$ac_cv_have_utsname_domainname" = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_UTSNAME_DOMAINNAME 1
EOF

  fi
fi



php_with_pspell=no

echo $ac_n "checking for PSPELL support""... $ac_c" 1>&6
echo "configure:78922: checking for PSPELL support" >&5
# Check whether --with-pspell or --without-pspell was given.
if test "${with_pspell+set}" = set; then
  withval="$with_pspell"
  PHP_PSPELL=$withval
else
  
  PHP_PSPELL=no
  test "$PHP_ENABLE_ALL" && PHP_PSPELL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PSPELL in
shared,*)
  PHP_PSPELL=`echo "$PHP_PSPELL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PSPELL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PSPELL" != "no"; then
	
  ext_builddir=ext/pspell
  ext_srcdir=$abs_srcdir/ext/pspell

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PSPELL_SHARED=no
    
  
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pspell"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PSPELL_SHARED=yes
      
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pspell="$shared_objects_pspell $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppspell.so '$ext_builddir'/phppspell.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPSPELL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppspell.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppspell.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppspell.$suffix: $ext_builddir/phppspell.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppspell.$suffix \$(phplibdir)

$ext_builddir/phppspell.$suffix: \$(shared_objects_pspell) \$(PHPPSPELL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pspell.so '$ext_builddir'/pspell.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PSPELL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pspell.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pspell.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pspell.$suffix: $ext_builddir/pspell.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pspell.$suffix \$(phplibdir)

$ext_builddir/pspell.$suffix: \$(shared_objects_pspell) \$(PSPELL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_PSPELL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PSPELL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pspell"
        ;;
      *)
        
  
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pspell
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

	if test "$PHP_PSPELL" != "yes"; then
	    PSPELL_SEARCH_DIRS=$PHP_PSPELL
	else
	    PSPELL_SEARCH_DIRS="/usr/local /usr"
	fi
	for i in $PSPELL_SEARCH_DIRS; do
		if test -f $i/include/pspell/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i/include/pspell
		elif test -f $i/include/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i/include
		fi
	done

	if test -z "$PSPELL_DIR"; then
		{ echo "configure: error: Cannot find pspell" 1>&2; exit 1; }
	fi

	PSPELL_LIBDIR=$PSPELL_DIR/$PHP_LIBDIR

	

  if test "$ext_shared" = "yes"; then
    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
    if test -n "$PSPELL_LIBDIR"; then
      
  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PSPELL_LIBDIR"; then
    
  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pspell in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpspell $LIBS" 
   ;;
  esac




  fi



		
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
		-L$PSPELL_LIBDIR
	"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for new_aspell_config in -laspell""... $ac_c" 1>&6
echo "configure:79472: checking for new_aspell_config in -laspell" >&5
ac_lib_var=`echo aspell'_'new_aspell_config | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-laspell  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 79480 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char new_aspell_config();

int main() {
new_aspell_config()
; return 0; }
EOF
if { (eval echo configure:79491: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
		

  if test "$ext_shared" = "yes"; then
    PSPELL_SHARED_LIBADD="-laspell $PSPELL_SHARED_LIBADD"
    if test -n "$PSPELL_LIBDIR"; then
      
  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PSPELL_LIBDIR"; then
    
  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case aspell in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-laspell $LIBS" 
   ;;
  esac




  fi


	
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_aspell_new_aspell_config
    
  
fi


	
  if test "$PSPELL_INCDIR" != "/usr/include"; then
    
  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_INCDIR
  else
    
    ep_dir="`echo $PSPELL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	
  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"

	cat >> confdefs.h <<\EOF
#define HAVE_PSPELL 1
EOF

fi



php_with_libedit=no

echo $ac_n "checking for libedit readline replacement""... $ac_c" 1>&6
echo "configure:79665: checking for libedit readline replacement" >&5
# Check whether --with-libedit or --without-libedit was given.
if test "${with_libedit+set}" = set; then
  withval="$with_libedit"
  PHP_LIBEDIT=$withval
else
  
  PHP_LIBEDIT=no
  test "$PHP_ENABLE_ALL" && PHP_LIBEDIT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LIBEDIT in
shared,*)
  PHP_LIBEDIT=`echo "$PHP_LIBEDIT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LIBEDIT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_LIBEDIT" = "no"; then
  
php_with_readline=no

echo $ac_n "checking for readline support""... $ac_c" 1>&6
echo "configure:79710: checking for readline support" >&5
# Check whether --with-readline or --without-readline was given.
if test "${with_readline+set}" = set; then
  withval="$with_readline"
  PHP_READLINE=$withval
else
  
  PHP_READLINE=no
  test "$PHP_ENABLE_ALL" && PHP_READLINE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_READLINE in
shared,*)
  PHP_READLINE=`echo "$PHP_READLINE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_READLINE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6



else
    php_with_readline=no
fi

if test "$PHP_READLINE" && test "$PHP_READLINE" != "no"; then
  for i in $PHP_READLINE /usr/local /usr; do
    test -f $i/include/readline/readline.h && READLINE_DIR=$i && break
  done

  if test -z "$READLINE_DIR"; then
    { echo "configure: error: Please reinstall readline - I cannot find readline.h" 1>&2; exit 1; }
  fi

  
  if test "$READLINE_DIR/include" != "/usr/include"; then
    
  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/include
  else
    
    ep_dir="`echo $READLINE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  PHP_READLINE_LIBS=""
  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
echo "configure:79796: checking for tgetent in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lncurses  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 79804 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:79815: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
    else
      
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lncurses $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    PHP_READLINE_LIBS="$PHP_READLINE_LIBS -lncurses"
  
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
echo "configure:79860: checking for tgetent in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltermcap  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 79868 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:79879: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
    else
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltermcap $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


      PHP_READLINE_LIBS="$PHP_READLINE_LIBS -ltermcap"
    
else
  echo "$ac_t""no" 1>&6
fi

  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for readline in -lreadline""... $ac_c" 1>&6
echo "configure:80026: checking for readline in -lreadline" >&5
ac_lib_var=`echo readline'_'readline | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lreadline  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 80034 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char readline();

int main() {
readline()
; return 0; }
EOF
if { (eval echo configure:80045: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
    if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
      
  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
    
  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case readline in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lreadline $LIBS" 
   ;;
  esac




  fi


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_readline_readline
    
    { echo "configure: error: readline library not found" 1>&2; exit 1; }
  
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for rl_pending_input in -lreadline""... $ac_c" 1>&6
echo "configure:80274: checking for rl_pending_input in -lreadline" >&5
ac_lib_var=`echo readline'_'rl_pending_input | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lreadline  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 80282 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char rl_pending_input();

int main() {
rl_pending_input()
; return 0; }
EOF
if { (eval echo configure:80293: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_readline_rl_pending_input
    
    { echo "configure: error: invalid readline installation detected. Try --with-libedit instead." 1>&2; exit 1; }
  
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for rl_callback_read_char in -lreadline""... $ac_c" 1>&6
echo "configure:80424: checking for rl_callback_read_char in -lreadline" >&5
ac_lib_var=`echo readline'_'rl_callback_read_char | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lreadline  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 80432 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char rl_callback_read_char();

int main() {
rl_callback_read_char()
; return 0; }
EOF
if { (eval echo configure:80443: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_RL_CALLBACK_READ_CHAR 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_readline_rl_callback_read_char
    
  
fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBREADLINE 1
EOF


elif test "$PHP_LIBEDIT" != "no"; then

  for i in $PHP_LIBEDIT /usr/local /usr; do
    test -f $i/include/editline/readline.h && LIBEDIT_DIR=$i && break
  done

  if test -z "$LIBEDIT_DIR"; then
    { echo "configure: error: Please reinstall libedit - I cannot find readline.h" 1>&2; exit 1; }
  fi

  
  if test "$LIBEDIT_DIR/include" != "/usr/include"; then
    
  if test -z "$LIBEDIT_DIR/include" || echo "$LIBEDIT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/include
  else
    
    ep_dir="`echo $LIBEDIT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
echo "configure:80527: checking for tgetent in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lncurses  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 80535 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:80546: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
    else
      
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lncurses $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
echo "configure:80590: checking for tgetent in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltermcap  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 80598 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:80609: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
    else
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltermcap $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
else
  echo "$ac_t""no" 1>&6
fi

  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR 
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for readline in -ledit""... $ac_c" 1>&6
echo "configure:80755: checking for readline in -ledit" >&5
ac_lib_var=`echo edit'_'readline | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ledit  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 80763 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char readline();

int main() {
readline()
; return 0; }
EOF
if { (eval echo configure:80774: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-ledit $READLINE_SHARED_LIBADD"
    if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
      
  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
    
  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case edit in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ledit $LIBS" 
   ;;
  esac




  fi

  
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_edit_readline
    
    { echo "configure: error: edit library required by readline not found" 1>&2; exit 1; }
  
  
fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBEDIT 1
EOF

fi

if test "$PHP_READLINE" != "no" || test "$PHP_LIBEDIT" != "no"; then
  for ac_func in rl_completion_matches
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:80915: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 80920 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:80943: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  
  ext_builddir=ext/readline
  ext_srcdir=$abs_srcdir/ext/readline

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
    PHP_READLINE_SHARED=no
    
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC readline"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_READLINE_SHARED=yes
      
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreadline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreadline.so '$ext_builddir'/phpreadline.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREADLINE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreadline.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreadline.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpreadline.$suffix: $ext_builddir/phpreadline.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreadline.$suffix \$(phplibdir)

$ext_builddir/phpreadline.$suffix: \$(shared_objects_readline) \$(PHPREADLINE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/readline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/readline.so '$ext_builddir'/readline.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(READLINE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/readline.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/readline.$suffix: $ext_builddir/readline.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.$suffix \$(phplibdir)

$ext_builddir/readline.$suffix: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_READLINE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    PHP_READLINE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC readline"
        ;;
      *)
        
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=readline
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"

fi



php_with_recode=no

echo $ac_n "checking for recode support""... $ac_c" 1>&6
echo "configure:81269: checking for recode support" >&5
# Check whether --with-recode or --without-recode was given.
if test "${with_recode+set}" = set; then
  withval="$with_recode"
  PHP_RECODE=$withval
else
  
  PHP_RECODE=no
  test "$PHP_ENABLE_ALL" && PHP_RECODE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_RECODE in
shared,*)
  PHP_RECODE=`echo "$PHP_RECODE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_RECODE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_RECODE" != "no"; then
  RECODE_LIST="$PHP_RECODE /usr/local /usr /opt"

  for i in $RECODE_LIST; do
    if test -f $i/include/recode.h; then
      RECODE_DIR=$i
      RECODE_INC=include
      RECODE_LIB=$PHP_LIBDIR
    fi
    if test -f $i/include/recode/recode.h; then
      RECODE_DIR=$i
      RECODE_INC=include/recode
      RECODE_LIB=$PHP_LIBDIR/recode
    fi
    if test -f $i/recode/include/recode.h; then
      RECODE_DIR=$i/recode
      RECODE_INC=include
      RECODE_LIB=$PHP_LIBDIR
    fi
    test -n "$RECODE_DIR" && break
  done

  if test -z "$RECODE_DIR"; then
    { echo "configure: error: Can not find recode.h anywhere under $RECODE_LIST." 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$RECODE_DIR/$RECODE_LIB
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for recode_format_table in -lrecode""... $ac_c" 1>&6
echo "configure:81433: checking for recode_format_table in -lrecode" >&5
ac_lib_var=`echo recode'_'recode_format_table | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lrecode  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 81441 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char recode_format_table();

int main() {
recode_format_table()
; return 0; }
EOF
if { (eval echo configure:81452: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    

  if test "$ext_shared" = "yes"; then
    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
    if test -n "$RECODE_DIR/$RECODE_LIB"; then
      
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$RECODE_DIR/$RECODE_LIB"; then
    
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case recode in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lrecode $LIBS" 
   ;;
  esac




  fi


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_recode_recode_format_table
    
    old_LDFLAGS=$LDFLAGS
    old_LIBS=$LIBS
    LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
    LIBS="$LIBS -lrecode"
    cat > conftest.$ac_ext <<EOF
#line 81582 "configure"
#include "confdefs.h"

char *program_name;
    
int main() {

recode_format_table();
    
; return 0; }
EOF
if { (eval echo configure:81593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
      

  if test "$ext_shared" = "yes"; then
    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
    if test -n "$RECODE_DIR/$RECODE_LIB"; then
      
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$RECODE_DIR/$RECODE_LIB"; then
    
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case recode in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="-lrecode $DLIBS" 
   ;;
  esac




  fi


      cat >> confdefs.h <<\EOF
#define HAVE_BROKEN_RECODE 1
EOF

    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      { echo "configure: error: I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" 1>&2; exit 1; }
    
fi
rm -f conftest*
    LIBS=$old_LIBS
    LDFLAGS=$old_LDFLAGS
  
  
fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBRECODE 1
EOF

  
  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then
    
  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_INC
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_INC|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_INC\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"

  for ac_hdr in stdbool.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:81756: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 81761 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:81766: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  
  ext_builddir=ext/recode
  ext_srcdir=$abs_srcdir/ext/recode

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_RECODE_SHARED=no
    
  
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC recode"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_RECODE_SHARED=yes
      
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_recode="$shared_objects_recode $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phprecode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phprecode.so '$ext_builddir'/phprecode.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPRECODE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phprecode.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phprecode.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phprecode.$suffix: $ext_builddir/phprecode.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phprecode.$suffix \$(phplibdir)

$ext_builddir/phprecode.$suffix: \$(shared_objects_recode) \$(PHPRECODE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/recode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/recode.so '$ext_builddir'/recode.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(RECODE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/recode.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/recode.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/recode.$suffix: $ext_builddir/recode.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/recode.$suffix \$(phplibdir)

$ext_builddir/recode.$suffix: \$(shared_objects_recode) \$(RECODE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_RECODE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_RECODE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC recode"
        ;;
      *)
        
  
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=recode
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi


cat >> confdefs.h <<\EOF
#define HAVE_REFLECTION 1
EOF


  ext_builddir=ext/reflection
  ext_srcdir=$abs_srcdir/ext/reflection

  ac_extra=

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_REFLECTION_SHARED=no
    
  
  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC reflection"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_REFLECTION_SHARED=yes
      
  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_reflection="$shared_objects_reflection $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreflection.so '$ext_builddir'/phpreflection.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREFLECTION, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreflection.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreflection.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpreflection.$suffix: $ext_builddir/phpreflection.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreflection.$suffix \$(phplibdir)

$ext_builddir/phpreflection.$suffix: \$(shared_objects_reflection) \$(PHPREFLECTION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/reflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/reflection.so '$ext_builddir'/reflection.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(REFLECTION, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/reflection.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/reflection.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/reflection.$suffix: $ext_builddir/reflection.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/reflection.$suffix \$(phplibdir)

$ext_builddir/reflection.$suffix: \$(shared_objects_reflection) \$(REFLECTION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_REFLECTION 1
EOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_REFLECTION_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC reflection"
        ;;
      *)
        
  
  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=reflection
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi




php_enable_session=yes

echo $ac_n "checking whether to enable PHP sessions""... $ac_c" 1>&6
echo "configure:82389: checking whether to enable PHP sessions" >&5
# Check whether --enable-session or --disable-session was given.
if test "${enable_session+set}" = set; then
  enableval="$enable_session"
  PHP_SESSION=$enableval
else
  
  PHP_SESSION=yes
  test "$PHP_ENABLE_ALL" && PHP_SESSION=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SESSION in
shared,*)
  PHP_SESSION=`echo "$PHP_SESSION"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SESSION=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_mm=no

echo $ac_n "checking for mm support""... $ac_c" 1>&6
echo "configure:82433: checking for mm support" >&5
# Check whether --with-mm or --without-mm was given.
if test "${with_mm+set}" = set; then
  withval="$with_mm"
  PHP_MM=$withval
else
  
  PHP_MM=no
  

fi


ext_output=$PHP_MM
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SESSION" != "no"; then
  
  echo $ac_n "checking whether pwrite works""... $ac_c" 1>&6
echo "configure:82455: checking whether pwrite works" >&5
if eval "test \"`echo '$''{'ac_cv_pwrite'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    
  if test "$cross_compiling" = yes; then
  
    ac_cv_pwrite=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 82467 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>

    main() {
    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);

    if (fd < 0) exit(1);
    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }

  
EOF
if { (eval echo configure:82488: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pwrite=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pwrite=no
  
fi
rm -fr conftest*
fi


    if test "$ac_cv_pwrite" = "no"; then
      
  if test "$cross_compiling" = yes; then
  
    ac_cv_pwrite=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 82513 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>
ssize_t pwrite(int, void *, size_t, off64_t);
    main() {
    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);

    if (fd < 0) exit(1);
    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }

  
EOF
if { (eval echo configure:82534: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pwrite=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pwrite=no
  
fi
rm -fr conftest*
fi


      if test "$ac_cv_pwrite" = "yes"; then
        ac_cv_pwrite=64
      fi
    fi
  
fi

echo "$ac_t""$ac_cv_pwrite" 1>&6

  if test "$ac_cv_pwrite" != "no"; then
    cat >> confdefs.h <<\EOF
#define HAVE_PWRITE 1
EOF

    if test "$ac_cv_pwrite" = "64"; then
      cat >> confdefs.h <<\EOF
#define PHP_PWRITE_64 1
EOF

    fi
  fi  

  
  echo $ac_n "checking whether pread works""... $ac_c" 1>&6
echo "configure:82575: checking whether pread works" >&5
if eval "test \"`echo '$''{'ac_cv_pread'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    
  echo test > conftest_in
  if test "$cross_compiling" = yes; then
  
    ac_cv_pread=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 82588 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>

    main() {
    char buf[3]; 
    int fd = open("conftest_in", O_RDONLY);
    if (fd < 0) exit(1);
    if (pread(fd, buf, 2, 0) != 2) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }
  
EOF
if { (eval echo configure:82608: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pread=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pread=no
  
fi
rm -fr conftest*
fi

  rm -f conftest_in

    if test "$ac_cv_pread" = "no"; then
      
  echo test > conftest_in
  if test "$cross_compiling" = yes; then
  
    ac_cv_pread=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 82635 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>
ssize_t pread(int, void *, size_t, off64_t);
    main() {
    char buf[3]; 
    int fd = open("conftest_in", O_RDONLY);
    if (fd < 0) exit(1);
    if (pread(fd, buf, 2, 0) != 2) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }
  
EOF
if { (eval echo configure:82655: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pread=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pread=no
  
fi
rm -fr conftest*
fi

  rm -f conftest_in

      if test "$ac_cv_pread" = "yes"; then
        ac_cv_pread=64
      fi
    fi
  
fi

echo "$ac_t""$ac_cv_pread" 1>&6

  if test "$ac_cv_pread" != "no"; then
    cat >> confdefs.h <<\EOF
#define HAVE_PREAD 1
EOF

    if test "$ac_cv_pread" = "64"; then
      cat >> confdefs.h <<\EOF
#define PHP_PREAD_64 1
EOF

    fi
  fi  

  
  ext_builddir=ext/session
  ext_srcdir=$abs_srcdir/ext/session

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SESSION_SHARED=no
    
  
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC session"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC session"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SESSION_SHARED=yes
      
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_session="$shared_objects_session $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsession.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsession.so '$ext_builddir'/phpsession.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSESSION, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsession.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsession.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsession.$suffix: $ext_builddir/phpsession.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsession.$suffix \$(phplibdir)

$ext_builddir/phpsession.$suffix: \$(shared_objects_session) \$(PHPSESSION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/session.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/session.so '$ext_builddir'/session.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SESSION, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/session.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/session.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/session.$suffix: $ext_builddir/session.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/session.$suffix \$(phplibdir)

$ext_builddir/session.$suffix: \$(shared_objects_session) \$(SESSION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SESSION 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SESSION_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC session"
        ;;
      *)
        
  
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC session"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=session
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  am_i_shared=$PHP_SESSION_SHARED
  is_it_shared=$PHP_HASH_SHARED
  is_it_enabled=$PHP_HASH
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension session to build statically, but it
depends on extension hash, which you've configured to build shared.
You either need to build session shared or build hash statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension session, which depends on extension hash,
but you've either not enabled hash, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  am_i_shared=$PHP_SESSION_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension session to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build session shared or build spl statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension session, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"

  
  
    header_path=ext/session
    for header_file in php_session.h mod_files.h mod_user.h; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

  cat >> confdefs.h <<\EOF
#define HAVE_PHP_SESSION 1
EOF

fi

if test "$PHP_MM" != "no"; then
  for i in $PHP_MM /usr/local /usr; do
    test -f "$i/include/mm.h" && MM_DIR=$i && break
  done

  if test -z "$MM_DIR" ; then
    { echo "configure: error: cannot find mm library" 1>&2; exit 1; }
  fi
  
  

  if test "$ext_shared" = "yes"; then
    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
    if test -n "$MM_DIR/$PHP_LIBDIR"; then
      
  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SESSION_SHARED_LIBADD="-L$ai_p $SESSION_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SESSION_SHARED_LIBADD="$ld_runpath_switch$ai_p $SESSION_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MM_DIR/$PHP_LIBDIR"; then
    
  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mm in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmm $LIBS" 
   ;;
  esac




  fi


  
  if test "$MM_DIR/include" != "/usr/include"; then
    
  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/include
  else
    
    ep_dir="`echo $MM_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  
    for header_file in ext/session/mod_mm.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  cat >> confdefs.h <<\EOF
#define HAVE_LIBMM 1
EOF

fi


php_enable_shmop=no

echo $ac_n "checking whether to enable shmop support""... $ac_c" 1>&6
echo "configure:83219: checking whether to enable shmop support" >&5
# Check whether --enable-shmop or --disable-shmop was given.
if test "${enable_shmop+set}" = set; then
  enableval="$enable_shmop"
  PHP_SHMOP=$enableval
else
  
  PHP_SHMOP=no
  test "$PHP_ENABLE_ALL" && PHP_SHMOP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SHMOP in
shared,*)
  PHP_SHMOP=`echo "$PHP_SHMOP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SHMOP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SHMOP" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SHMOP 1
EOF

  
  ext_builddir=ext/shmop
  ext_srcdir=$abs_srcdir/ext/shmop

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SHMOP_SHARED=no
    
  
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC shmop"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SHMOP_SHARED=yes
      
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_shmop="$shared_objects_shmop $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpshmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpshmop.so '$ext_builddir'/phpshmop.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSHMOP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpshmop.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpshmop.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpshmop.$suffix: $ext_builddir/phpshmop.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpshmop.$suffix \$(phplibdir)

$ext_builddir/phpshmop.$suffix: \$(shared_objects_shmop) \$(PHPSHMOP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/shmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/shmop.so '$ext_builddir'/shmop.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SHMOP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/shmop.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/shmop.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/shmop.$suffix: $ext_builddir/shmop.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/shmop.$suffix \$(phplibdir)

$ext_builddir/shmop.$suffix: \$(shared_objects_shmop) \$(SHMOP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SHMOP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SHMOP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC shmop"
        ;;
      *)
        
  
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=shmop
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_simplexml=yes

echo $ac_n "checking whether to enable SimpleXML support""... $ac_c" 1>&6
echo "configure:83563: checking whether to enable SimpleXML support" >&5
# Check whether --enable-simplexml or --disable-simplexml was given.
if test "${enable_simplexml+set}" = set; then
  enableval="$enable_simplexml"
  PHP_SIMPLEXML=$enableval
else
  
  PHP_SIMPLEXML=yes
  test "$PHP_ENABLE_ALL" && PHP_SIMPLEXML=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SIMPLEXML in
shared,*)
  PHP_SIMPLEXML=`echo "$PHP_SIMPLEXML"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SIMPLEXML=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:83608: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_SIMPLEXML" != "no"; then

  if test "$PHP_LIBXML" = "no"; then   
    { echo "configure: error: SimpleXML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
  fi

  
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:83636: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SIMPLEXML_SHARED_LIBADD="-L$ai_p $SIMPLEXML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SIMPLEXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $SIMPLEXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:83794: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $SIMPLEXML_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 83810 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:83821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
    cat >> confdefs.h <<\EOF
#define HAVE_SIMPLEXML 1
EOF

    
  ext_builddir=ext/simplexml
  ext_srcdir=$abs_srcdir/ext/simplexml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SIMPLEXML_SHARED=no
    
  
  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC simplexml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SIMPLEXML_SHARED=yes
      
  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_simplexml="$shared_objects_simplexml $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsimplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsimplexml.so '$ext_builddir'/phpsimplexml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSIMPLEXML, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsimplexml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsimplexml.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsimplexml.$suffix: $ext_builddir/phpsimplexml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsimplexml.$suffix \$(phplibdir)

$ext_builddir/phpsimplexml.$suffix: \$(shared_objects_simplexml) \$(PHPSIMPLEXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/simplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/simplexml.so '$ext_builddir'/simplexml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SIMPLEXML, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/simplexml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/simplexml.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/simplexml.$suffix: $ext_builddir/simplexml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/simplexml.$suffix \$(phplibdir)

$ext_builddir/simplexml.$suffix: \$(shared_objects_simplexml) \$(SIMPLEXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SIMPLEXML 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SIMPLEXML_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC simplexml"
        ;;
      *)
        
  
  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=simplexml
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST SIMPLEXML_SHARED_LIBADD"

  
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
  
  fi

  
  am_i_shared=$PHP_SIMPLEXML_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension simplexml to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build simplexml shared or build libxml statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension simplexml, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  am_i_shared=$PHP_SIMPLEXML_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension simplexml to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build simplexml shared or build spl statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension simplexml, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" 1>&2; exit 1; }
  fi
  
fi



php_with_snmp=no

echo $ac_n "checking for SNMP support""... $ac_c" 1>&6
echo "configure:84209: checking for SNMP support" >&5
# Check whether --with-snmp or --without-snmp was given.
if test "${with_snmp+set}" = set; then
  withval="$with_snmp"
  PHP_SNMP=$withval
else
  
  PHP_SNMP=no
  test "$PHP_ENABLE_ALL" && PHP_SNMP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SNMP in
shared,*)
  PHP_SNMP=`echo "$PHP_SNMP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SNMP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_with_openssl_dir=no

echo $ac_n "checking OpenSSL dir for SNMP""... $ac_c" 1>&6
echo "configure:84253: checking OpenSSL dir for SNMP" >&5
# Check whether --with-openssl-dir or --without-openssl-dir was given.
if test "${with_openssl_dir+set}" = set; then
  withval="$with_openssl_dir"
  PHP_OPENSSL_DIR=$withval
else
  
  PHP_OPENSSL_DIR=no
  

fi


ext_output=$PHP_OPENSSL_DIR
echo "$ac_t""$ext_output" 1>&6





php_enable_ucd_snmp_hack=no

echo $ac_n "checking whether to enable UCD SNMP hack""... $ac_c" 1>&6
echo "configure:84276: checking whether to enable UCD SNMP hack" >&5
# Check whether --enable-ucd-snmp-hack or --disable-ucd-snmp-hack was given.
if test "${enable_ucd_snmp_hack+set}" = set; then
  enableval="$enable_ucd_snmp_hack"
  PHP_UCD_SNMP_HACK=$enableval
else
  
  PHP_UCD_SNMP_HACK=no
  

fi


ext_output=$PHP_UCD_SNMP_HACK
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SNMP" != "no"; then

        if test "$PHP_SNMP" = "yes"; then
    # Extract the first word of "net-snmp-config", so it can be a program name with args.
set dummy net-snmp-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:84301: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_SNMP_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$SNMP_CONFIG" in
  /*)
  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="/usr/local/bin:$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_SNMP_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
SNMP_CONFIG="$ac_cv_path_SNMP_CONFIG"
if test -n "$SNMP_CONFIG"; then
  echo "$ac_t""$SNMP_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    SNMP_CONFIG="$PHP_SNMP/bin/net-snmp-config"
  fi

  if test -x "$SNMP_CONFIG"; then
    SNMP_LIBS=`$SNMP_CONFIG --netsnmp-libs`
    SNMP_LIBS="$SNMP_LIBS `$SNMP_CONFIG --external-libs`"
    SNMP_PREFIX=`$SNMP_CONFIG --prefix`

    if test -n "$SNMP_LIBS" && test -n "$SNMP_PREFIX"; then
      
  if test "${SNMP_PREFIX}/include" != "/usr/include"; then
    
  if test -z "${SNMP_PREFIX}/include" || echo "${SNMP_PREFIX}/include" | grep '^/' >/dev/null ; then
    ai_p=${SNMP_PREFIX}/include
  else
    
    ep_dir="`echo $SNMP_PREFIX/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"${SNMP_PREFIX}/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      
  for ac_i in $SNMP_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      cat >> confdefs.h <<\EOF
#define HAVE_NET_SNMP 1
EOF

      SNMP_LIBNAME=netsnmp
    else
      { echo "configure: error: Could not find the required paths. Please check your net-snmp installation." 1>&2; exit 1; }
    fi
  else 

            
    if test "$PHP_SNMP" = "yes"; then
      for i in /usr/include /usr/local/include; do
        test -f $i/snmp.h                       && SNMP_INCDIR=$i
        test -f $i/ucd-snmp/snmp.h              && SNMP_INCDIR=$i/ucd-snmp
        test -f $i/snmp/snmp.h                  && SNMP_INCDIR=$i/snmp
        test -f $i/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=$i/snmp/include/ucd-snmp
      done
      for i in /usr/$PHP_LIBDIR /usr/snmp/lib /usr/local/$PHP_LIBDIR /usr/local/lib /usr/local/snmp/lib; do
        test -f $i/libsnmp.a || test -f $i/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i
      done
    else
      SNMP_INCDIR=$PHP_SNMP/include
      test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$PHP_SNMP/include/ucd-snmp
      SNMP_LIBDIR=$PHP_SNMP/lib
    fi

    if test -z "$SNMP_INCDIR"; then
      { echo "configure: error: snmp.h not found. Check your SNMP installation." 1>&2; exit 1; }
    elif test -z "$SNMP_LIBDIR"; then
      { echo "configure: error: libsnmp not found. Check your SNMP installation." 1>&2; exit 1; }
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$SNMP_INCDIR
    for ac_hdr in default_store.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:84502: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 84507 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:84512: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    if test "$ac_cv_header_default_store_h" = "yes"; then
      echo $ac_n "checking for OpenSSL support in SNMP libraries""... $ac_c" 1>&6
echo "configure:84540: checking for OpenSSL support in SNMP libraries" >&5
      cat > conftest.$ac_ext <<EOF
#line 84542 "configure"
#include "confdefs.h"

#include <ucd-snmp-config.h>
#if USE_OPENSSL
        yes
#endif
      
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
        SNMP_SSL=yes
      
else
  rm -rf conftest*
  
        SNMP_SSL=no
      
fi
rm -f conftest*

    fi
    CPPFLAGS=$old_CPPFLAGS
    echo "$ac_t""$SNMP_SSL" 1>&6
  
    if test "$SNMP_SSL" = "yes"; then
      if test "$PHP_OPENSSL_DIR" != "no"; then
        PHP_OPENSSL=$PHP_OPENSSL_DIR
      fi
      
      if test "$PHP_OPENSSL" = "no"; then
        { echo "configure: error: The UCD-SNMP in this system is built with SSL support. 

        Add --with-openssl-dir=DIR to your configure line." 1>&2; exit 1; }
      else
        
  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:84597: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PKG_CONFIG" in
  /*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
if test -n "$PKG_CONFIG"; then
  echo "$ac_t""$PKG_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    fi

    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
      
  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then
  
    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
echo "configure:84802: checking for OpenSSL version" >&5
    cat > conftest.$ac_ext <<EOF
#line 84804 "configure"
#include "confdefs.h"

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t"">= 0.9.6" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
    
fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS

    
  if test "$OPENSSL_INCDIR" != "/usr/include"; then
    
  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else
    
    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
echo "configure:84959: checking for CRYPTO_free in -lcrypto" >&5
ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 84967 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char CRYPTO_free();

int main() {
CRYPTO_free()
; return 0; }
EOF
if { (eval echo configure:84978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free
    
      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
    
  
fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
echo "configure:85135: checking for SSL_CTX_set_ssl_version in -lssl" >&5
ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lssl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 85143 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSL_CTX_set_ssl_version();

int main() {
SSL_CTX_set_ssl_version()
; return 0; }
EOF
if { (eval echo configure:85154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      found_openssl=yes
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
    
      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
    
  
fi

    LIBS=$old_LIBS
    
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-lssl $SNMP_SHARED_LIBADD" 
    else
      
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


    fi
   ;;
  esac



    
  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else
    
    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
  

:
else 
          { echo "configure: error: SNMP: OpenSSL check failed. Please check config.log for more information." 1>&2; exit 1; }
        
  fi

      fi
    fi

    echo $ac_n "checking for kstat_read in -lkstat""... $ac_c" 1>&6
echo "configure:85290: checking for kstat_read in -lkstat" >&5
ac_lib_var=`echo kstat'_'kstat_read | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lkstat  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 85298 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kstat_read();

int main() {
kstat_read()
; return 0; }
EOF
if { (eval echo configure:85309: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   
  
  case kstat in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-lkstat $SNMP_SHARED_LIBADD" 
    else
      
  
  case kstat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lkstat $LIBS" 
   ;;
  esac


    fi
   ;;
  esac

 
else
  echo "$ac_t""no" 1>&6
fi

    
  if test "$SNMP_INCDIR" != "/usr/include"; then
    
  if test -z "$SNMP_INCDIR" || echo "$SNMP_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$SNMP_INCDIR
  else
    
    ep_dir="`echo $SNMP_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    SNMP_SHARED_LIBADD="-lsnmp $SNMP_SHARED_LIBADD"
    if test -n "$SNMP_LIBDIR"; then
      
  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SNMP_LIBDIR
  else
    
    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$SNMP_LIBDIR"; then
    
  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SNMP_LIBDIR
  else
    
    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case snmp in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsnmp $LIBS" 
   ;;
  esac




  fi


    SNMP_LIBNAME=snmp
  fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $SNMP_SHARED_LIBADD
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for snmp_parse_oid in -l$SNMP_LIBNAME""... $ac_c" 1>&6
echo "configure:85580: checking for snmp_parse_oid in -l$SNMP_LIBNAME" >&5
ac_lib_var=`echo $SNMP_LIBNAME'_'snmp_parse_oid | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$SNMP_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 85588 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char snmp_parse_oid();

int main() {
snmp_parse_oid()
; return 0; }
EOF
if { (eval echo configure:85599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_SNMP_PARSE_OID 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$SNMP_LIBNAME_snmp_parse_oid
    
  
fi


    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $SNMP_SHARED_LIBADD
  "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for init_snmp in -l$SNMP_LIBNAME""... $ac_c" 1>&6
echo "configure:85733: checking for init_snmp in -l$SNMP_LIBNAME" >&5
ac_lib_var=`echo $SNMP_LIBNAME'_'init_snmp | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$SNMP_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 85741 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char init_snmp();

int main() {
init_snmp()
; return 0; }
EOF
if { (eval echo configure:85752: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
    cat >> confdefs.h <<\EOF
#define HAVE_SNMP 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$SNMP_LIBNAME_init_snmp
    
    { echo "configure: error: SNMP sanity check failed. Please check config.log for more information." 1>&2; exit 1; }
  
  
fi


  if test "$PHP_UCD_SNMP_HACK" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define UCD_SNMP_HACK 1
EOF

  fi
  
  
  ext_builddir=ext/snmp
  ext_srcdir=$abs_srcdir/ext/snmp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SNMP_SHARED=no
    
  
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC snmp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SNMP_SHARED=yes
      
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_snmp="$shared_objects_snmp $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsnmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsnmp.so '$ext_builddir'/phpsnmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSNMP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsnmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsnmp.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsnmp.$suffix: $ext_builddir/phpsnmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsnmp.$suffix \$(phplibdir)

$ext_builddir/phpsnmp.$suffix: \$(shared_objects_snmp) \$(PHPSNMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/snmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/snmp.so '$ext_builddir'/snmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SNMP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/snmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/snmp.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/snmp.$suffix: $ext_builddir/snmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/snmp.$suffix \$(phplibdir)

$ext_builddir/snmp.$suffix: \$(shared_objects_snmp) \$(SNMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SNMP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SNMP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC snmp"
        ;;
      *)
        
  
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=snmp
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"

fi



php_enable_soap=no

echo $ac_n "checking whether to enable SOAP support""... $ac_c" 1>&6
echo "configure:86099: checking whether to enable SOAP support" >&5
# Check whether --enable-soap or --disable-soap was given.
if test "${enable_soap+set}" = set; then
  enableval="$enable_soap"
  PHP_SOAP=$enableval
else
  
  PHP_SOAP=no
  test "$PHP_ENABLE_ALL" && PHP_SOAP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SOAP in
shared,*)
  PHP_SOAP=`echo "$PHP_SOAP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SOAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:86144: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_SOAP" != "no"; then

  if test "$PHP_LIBXML" = "no"; then   
    { echo "configure: error: SOAP extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
  fi

  
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:86172: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SOAP_SHARED_LIBADD="-L$ai_p $SOAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SOAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SOAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:86330: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $SOAP_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 86346 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:86357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
    cat >> confdefs.h <<\EOF
#define HAVE_SOAP 1
EOF

    
  ext_builddir=ext/soap
  ext_srcdir=$abs_srcdir/ext/soap

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SOAP_SHARED=no
    
  
  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC soap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SOAP_SHARED=yes
      
  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_soap="$shared_objects_soap $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsoap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsoap.so '$ext_builddir'/phpsoap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOAP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsoap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsoap.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsoap.$suffix: $ext_builddir/phpsoap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsoap.$suffix \$(phplibdir)

$ext_builddir/phpsoap.$suffix: \$(shared_objects_soap) \$(PHPSOAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/soap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/soap.so '$ext_builddir'/soap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOAP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/soap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/soap.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/soap.$suffix: $ext_builddir/soap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/soap.$suffix \$(phplibdir)

$ext_builddir/soap.$suffix: \$(shared_objects_soap) \$(SOAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SOAP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SOAP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC soap"
        ;;
      *)
        
  
  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=soap
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST SOAP_SHARED_LIBADD"

  
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
  
  fi

fi



php_enable_sockets=no

echo $ac_n "checking whether to enable sockets support""... $ac_c" 1>&6
echo "configure:86707: checking whether to enable sockets support" >&5
# Check whether --enable-sockets or --disable-sockets was given.
if test "${enable_sockets+set}" = set; then
  enableval="$enable_sockets"
  PHP_SOCKETS=$enableval
else
  
  PHP_SOCKETS=no
  test "$PHP_ENABLE_ALL" && PHP_SOCKETS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SOCKETS in
shared,*)
  PHP_SOCKETS=`echo "$PHP_SOCKETS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SOCKETS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SOCKETS" != "no"; then
    echo $ac_n "checking for struct cmsghdr""... $ac_c" 1>&6
echo "configure:86749: checking for struct cmsghdr" >&5
if eval "test \"`echo '$''{'ac_cv_cmsghdr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 86755 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>
int main() {
struct cmsghdr s; s
; return 0; }
EOF
if { (eval echo configure:86764: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cmsghdr=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cmsghdr=no
fi
rm -f conftest*
  
fi

echo "$ac_t""$ac_cv_cmsghdr" 1>&6

  if test "$ac_cv_cmsghdr" = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_CMSGHDR 1
EOF

  fi 

  for ac_func in hstrerror socketpair
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:86789: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 86794 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:86817: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in netdb.h netinet/tcp.h sys/un.h errno.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:86845: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 86850 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:86855: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  cat > conftest.$ac_ext <<EOF
#line 86882 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>
  
int main() {
static struct msghdr tp; int n = (int) tp.msg_flags; return n
; return 0; }
EOF
if { (eval echo configure:86892: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  cat >> confdefs.h <<\EOF
#define MISSING_MSGHDR_MSGFLAGS 1
EOF

  
fi
rm -f conftest*
  cat >> confdefs.h <<\EOF
#define HAVE_SOCKETS 1
EOF


  
  ext_builddir=ext/sockets
  ext_srcdir=$abs_srcdir/ext/sockets

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SOCKETS_SHARED=no
    
  
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sockets"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SOCKETS_SHARED=yes
      
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sockets="$shared_objects_sockets $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsockets.so '$ext_builddir'/phpsockets.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOCKETS, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsockets.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsockets.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsockets.$suffix: $ext_builddir/phpsockets.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsockets.$suffix \$(phplibdir)

$ext_builddir/phpsockets.$suffix: \$(shared_objects_sockets) \$(PHPSOCKETS_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sockets.so '$ext_builddir'/sockets.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOCKETS, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sockets.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sockets.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sockets.$suffix: $ext_builddir/sockets.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sockets.$suffix \$(phplibdir)

$ext_builddir/sockets.$suffix: \$(shared_objects_sockets) \$(SOCKETS_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SOCKETS 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SOCKETS_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sockets"
        ;;
      *)
        
  
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sockets
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    header_path=ext/sockets/
    for header_file in php_sockets.h; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

fi


  echo $ac_n "checking whether zend_object_value is packed""... $ac_c" 1>&6
echo "configure:87226: checking whether zend_object_value is packed" >&5
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS="$INCLUDES -I$abs_srcdir $CPPFLAGS"
  if test "$cross_compiling" = yes; then
  
    ac_result=0
    echo "$ac_t""no" 1>&6
  
else
  cat > conftest.$ac_ext <<EOF
#line 87236 "configure"
#include "confdefs.h"

#include "Zend/zend_types.h"
int main(int argc, char **argv) {
	return ((sizeof(zend_object_handle) + sizeof(zend_object_handlers*)) == sizeof(zend_object_value)) ? 0 : 1;
}
  
EOF
if { (eval echo configure:87245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_result=1
    echo "$ac_t""yes" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_result=0
    echo "$ac_t""no" 1>&6
  
fi
rm -fr conftest*
fi

  CPPFLAGS=$old_CPPFLAGS
  cat >> confdefs.h <<EOF
#define HAVE_PACKED_OBJECT_VALUE $ac_result
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_SPL 1
EOF
 
  
  ext_builddir=ext/spl
  ext_srcdir=$abs_srcdir/ext/spl

  ac_extra=

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_SPL_SHARED=no
    
  
  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC spl"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_SPL_SHARED=yes
      
  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_spl="$shared_objects_spl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpspl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpspl.so '$ext_builddir'/phpspl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSPL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpspl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpspl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpspl.$suffix: $ext_builddir/phpspl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpspl.$suffix \$(phplibdir)

$ext_builddir/phpspl.$suffix: \$(shared_objects_spl) \$(PHPSPL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/spl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/spl.so '$ext_builddir'/spl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SPL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/spl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/spl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/spl.$suffix: $ext_builddir/spl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/spl.$suffix \$(phplibdir)

$ext_builddir/spl.$suffix: \$(shared_objects_spl) \$(SPL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SPL 1
EOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_SPL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC spl"
        ;;
      *)
        
  
  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=spl
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    header_path=ext/spl
    for header_file in php_spl.h spl_array.h spl_directory.h spl_engine.h spl_exceptions.h spl_functions.h spl_iterators.h spl_observer.h spl_dllist.h spl_heap.h spl_fixedarray.h; do
      hp_hf="$header_path/$header_file"
      
  
  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
      
  fi

    done 
  

  
  am_i_shared=$PHP_SPL_SHARED
  is_it_shared=$PHP_PCRE_SHARED
  is_it_enabled=$PHP_PCRE
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension spl to build statically, but it
depends on extension pcre, which you've configured to build shared.
You either need to build spl shared or build pcre statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension spl, which depends on extension pcre,
but you've either not enabled pcre, or have disabled it.
" 1>&2; exit 1; }
  fi
  



php_with_sqlite=yes

echo $ac_n "checking for sqlite support""... $ac_c" 1>&6
echo "configure:87609: checking for sqlite support" >&5
# Check whether --with-sqlite or --without-sqlite was given.
if test "${with_sqlite+set}" = set; then
  withval="$with_sqlite"
  PHP_SQLITE=$withval
else
  
  PHP_SQLITE=yes
  test "$PHP_ENABLE_ALL" && PHP_SQLITE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SQLITE in
shared,*)
  PHP_SQLITE=`echo "$PHP_SQLITE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SQLITE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_enable_sqlite_utf8=no

echo $ac_n "checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)""... $ac_c" 1>&6
echo "configure:87653: checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)" >&5
# Check whether --enable-sqlite-utf8 or --disable-sqlite-utf8 was given.
if test "${enable_sqlite_utf8+set}" = set; then
  enableval="$enable_sqlite_utf8"
  PHP_SQLITE_UTF8=$enableval
else
  
  PHP_SQLITE_UTF8=no
  

fi


ext_output=$PHP_SQLITE_UTF8
echo "$ac_t""$ext_output" 1>&6









if test "$PHP_SQLITE" != "no"; then
  if test "$PHP_PDO" != "no"; then
    
  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:87681: checking for PDO includes" >&5
if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
echo "configure:87687: checking for PDO includes" >&5
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_inc_path=$prefix/include/php/ext
    fi
  
fi

echo "$ac_t""$pdo_inc_path" 1>&6
  if test -n "$pdo_inc_path"; then
:
  else
echo "configure: warning: Cannot find php_pdo_driver.h." 1>&2
  fi

    if test -n "$pdo_inc_path"; then
      cat >> confdefs.h <<\EOF
#define PHP_SQLITE2_HAVE_PDO 1
EOF

      pdo_inc_path="-I$pdo_inc_path"
    fi
  fi  

  if test "$PHP_SQLITE" != "yes"; then
    SEARCH_PATH="/usr/local /usr"
    SEARCH_FOR="/include/sqlite.h"
    if test -r $PHP_SQLITE/; then # path given as parameter
      SQLITE_DIR=$PHP_SQLITE
    else # search default path list
      echo $ac_n "checking for sqlite files in default path""... $ac_c" 1>&6
echo "configure:87721: checking for sqlite files in default path" >&5
      for i in $SEARCH_PATH ; do
        if test -r $i/$SEARCH_FOR; then
          SQLITE_DIR=$i
          echo "$ac_t""found in $i" 1>&6
        fi
      done
    fi
  
    if test -z "$SQLITE_DIR"; then
      echo "$ac_t""not found" 1>&6
      { echo "configure: error: Please reinstall the sqlite distribution from http://www.sqlite.org" 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$SQLITE_DIR/$PHP_LIBDIR -lm
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for sqlite_open in -lsqlite""... $ac_c" 1>&6
echo "configure:87833: checking for sqlite_open in -lsqlite" >&5
ac_lib_var=`echo sqlite'_'sqlite_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsqlite  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 87841 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqlite_open();

int main() {
sqlite_open()
; return 0; }
EOF
if { (eval echo configure:87852: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      

  if test "$ext_shared" = "yes"; then
    SQLITE_SHARED_LIBADD="-lsqlite $SQLITE_SHARED_LIBADD"
    if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
      
  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SQLITE_SHARED_LIBADD="-L$ai_p $SQLITE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $SQLITE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
    
  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlite in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlite $LIBS" 
   ;;
  esac




  fi


      
  if test "$SQLITE_DIR/include" != "/usr/include"; then
    
  if test -z "$SQLITE_DIR/include" || echo "$SQLITE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE_DIR/include
  else
    
    ep_dir="`echo $SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite_sqlite_open
    
      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
    
  
fi

    SQLITE_MODULE_TYPE=external
    PHP_SQLITE_CFLAGS=$pdo_inc_path
    sqlite_extra_sources="libsqlite/src/encode.c"
  else
    # use bundled library
    
  # we only support certain lemon versions
  lemon_version_list="1.0"

  # Extract the first word of "lemon", so it can be a program name with args.
set dummy lemon; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:88025: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LEMON'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LEMON"; then
  ac_cv_prog_LEMON="$LEMON" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LEMON="lemon"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LEMON="$ac_cv_prog_LEMON"
if test -n "$LEMON"; then
  echo "$ac_t""$LEMON" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$LEMON"; then
    echo $ac_n "checking for lemon version""... $ac_c" 1>&6
echo "configure:88053: checking for lemon version" >&5
if eval "test \"`echo '$''{'php_cv_lemon_version'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
      lemon_version=`$LEMON -x 2>/dev/null | $SED -e 's/^.* //'`
      php_cv_lemon_version=invalid
      for lemon_check_version in $lemon_version_list; do
        if test "$lemon_version" = "$lemon_check_version"; then
          php_cv_lemon_version="$lemon_check_version (ok)"
        fi
      done
    
fi

echo "$ac_t""$php_cv_lemon_version" 1>&6
  else
    lemon_version=none
  fi
  case $php_cv_lemon_version in
    ""|invalid)
      lemon_msg="lemon versions supported for regeneration of libsqlite parsers: $lemon_version_list (found: $lemon_version)."
      echo "configure: warning: $lemon_msg" 1>&2
      LEMON="exit 0;"
      ;;
  esac
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST LEMON"


    SQLITE_MODULE_TYPE=builtin
    PHP_SQLITE_CFLAGS="-I@ext_srcdir@/libsqlite/src -I@ext_builddir@/libsqlite/src $pdo_inc_path"
    sqlite_extra_sources="libsqlite/src/opcodes.c \
        libsqlite/src/parse.c libsqlite/src/encode.c \
        libsqlite/src/auth.c libsqlite/src/btree.c libsqlite/src/build.c \
        libsqlite/src/delete.c libsqlite/src/expr.c libsqlite/src/func.c \
        libsqlite/src/hash.c libsqlite/src/insert.c libsqlite/src/main.c \
        libsqlite/src/os.c libsqlite/src/pager.c \
        libsqlite/src/printf.c libsqlite/src/random.c \
        libsqlite/src/select.c libsqlite/src/table.c libsqlite/src/tokenize.c \
        libsqlite/src/update.c libsqlite/src/util.c libsqlite/src/vdbe.c \
        libsqlite/src/attach.c libsqlite/src/btree_rb.c libsqlite/src/pragma.c \
        libsqlite/src/vacuum.c libsqlite/src/copy.c \
        libsqlite/src/vdbeaux.c libsqlite/src/date.c \
        libsqlite/src/where.c libsqlite/src/trigger.c"
  fi
        sqlite_sources="sqlite.c sess_sqlite.c pdo_sqlite2.c $sqlite_extra_sources" 
  
  ext_builddir=ext/sqlite
  ext_srcdir=$abs_srcdir/ext/sqlite

  ac_extra=`echo "$PHP_SQLITE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SQLITE_SHARED=no
    
  
  case ext/sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sqlite"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SQLITE_SHARED=yes
      
  case ext/sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $sqlite_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sqlite="$shared_objects_sqlite $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsqlite.so '$ext_builddir'/phpsqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSQLITE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsqlite.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsqlite.$suffix: $ext_builddir/phpsqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsqlite.$suffix \$(phplibdir)

$ext_builddir/phpsqlite.$suffix: \$(shared_objects_sqlite) \$(PHPSQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sqlite.so '$ext_builddir'/sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SQLITE, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sqlite.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sqlite.$suffix: $ext_builddir/sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sqlite.$suffix \$(phplibdir)

$ext_builddir/sqlite.$suffix: \$(shared_objects_sqlite) \$(SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SQLITE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SQLITE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sqlite"
        ;;
      *)
        
  
  case ext/sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sqlite
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  am_i_shared=$PHP_SQLITE_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension sqlite to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build sqlite shared or build spl statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension sqlite, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  am_i_shared=$PHP_SQLITE_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension sqlite to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build sqlite shared or build pdo statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension sqlite, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" 1>&2; exit 1; }
  fi
  

  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_SHARED_LIBADD"

  
  
    for header_file in $ext_builddir/libsqlite/src/sqlite.h; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  
  if test "$SQLITE_MODULE_TYPE" = "builtin"; then
    
  
    $php_shtool mkdir -p $ext_builddir/libsqlite/src
  

    echo $ac_n "checking size of char *""... $ac_c" 1>&6
echo "configure:88466: checking size of char *" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_char_p'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_char_p=4
else
  cat > conftest.$ac_ext <<EOF
#line 88474 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(char *));
  exit(0);
}
EOF
if { (eval echo configure:88485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_char_p=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_char_p=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_char_p" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_CHAR_P $ac_cv_sizeof_char_p
EOF


    cat >> confdefs.h <<\EOF
#define SQLITE_PTR_SZ SIZEOF_CHAR_P
EOF

                if test "$PHP_SQLITE_UTF8" = "yes"; then
      SQLITE_ENCODING="UTF8"
      cat >> confdefs.h <<\EOF
#define SQLITE_UTF8 1
EOF

    else
      SQLITE_ENCODING="ISO8859"
    fi
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_ENCODING"


    SQLITE_VERSION=`cat $ext_srcdir/libsqlite/VERSION`
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_VERSION"


    sed -e s/--VERS--/$SQLITE_VERSION/ -e s/--ENCODING--/$SQLITE_ENCODING/ $ext_srcdir/libsqlite/src/sqlite.h.in > $ext_builddir/libsqlite/src/sqlite.h

    if test "$ext_shared" = "no" || test "$ext_srcdir" != "$abs_srcdir"; then
      echo '#include <php_config.h>' > $ext_builddir/libsqlite/src/config.h
    else
      echo "#include \"$abs_builddir/config.h\"" > $ext_builddir/libsqlite/src/config.h
    fi
    
    cat >> $ext_builddir/libsqlite/src/config.h <<EOF
#if ZTS
# define THREADSAFE 1
#endif
#if !ZEND_DEBUG
# define NDEBUG
#endif
EOF
  fi
  
  for ac_func in usleep nanosleep
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:88547: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 88552 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:88575: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in time.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:88603: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 88608 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:88613: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi



echo $ac_n "checking whether flush should be called explicitly after a buffered io""... $ac_c" 1>&6
echo "configure:88644: checking whether flush should be called explicitly after a buffered io" >&5
if eval "test \"`echo '$''{'ac_cv_flush_io'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_flush_io=no

else
  cat > conftest.$ac_ext <<EOF
#line 88655 "configure"
#include "confdefs.h"

#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
	char *filename = tmpnam(NULL);
	char buffer[64];
	int result = 0;
	
	FILE *fp = fopen(filename, "wb");
	if (NULL == fp)
		return 0;
	fputs("line 1\n", fp);
	fputs("line 2\n", fp);
	fclose(fp);
	
	fp = fopen(filename, "rb+");
	if (NULL == fp)
		return 0;
	fgets(buffer, sizeof(buffer), fp);
	fputs("line 3\n", fp);
	rewind(fp);
	fgets(buffer, sizeof(buffer), fp);
	if (0 != strcmp(buffer, "line 1\n"))
		result = 1;
	fgets(buffer, sizeof(buffer), fp);
	if (0 != strcmp(buffer, "line 3\n"))
		result = 1;
	fclose(fp);
	unlink(filename);

	exit(result);
}

EOF
if { (eval echo configure:88693: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_flush_io=no

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_flush_io=yes

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_flush_io" 1>&6
if test "$ac_cv_flush_io" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_FLUSHIO 1
EOF

fi

if test "$ac_cv_func_crypt" = "no"; then
  echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
echo "configure:88721: checking for crypt in -lcrypt" >&5
ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 88729 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char crypt();

int main() {
crypt()
; return 0; }
EOF
if { (eval echo configure:88740: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LIBS="-lcrypt $LIBS -lcrypt"
    cat >> confdefs.h <<\EOF
#define HAVE_CRYPT 1
EOF

  
else
  echo "$ac_t""no" 1>&6
fi

fi
  
echo $ac_n "checking for standard DES crypt""... $ac_c" 1>&6
echo "configure:88769: checking for standard DES crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_des'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
  ac_cv_crypt_des=yes

else
  cat > conftest.$ac_ext <<EOF
#line 88780 "configure"
#include "confdefs.h"

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:88799: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_crypt_des=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_crypt_des=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_crypt_des" 1>&6

echo $ac_n "checking for extended DES crypt""... $ac_c" 1>&6
echo "configure:88820: checking for extended DES crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_ext_des'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
  ac_cv_crypt_ext_des=no

else
  cat > conftest.$ac_ext <<EOF
#line 88831 "configure"
#include "confdefs.h"

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
  exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
#else
  exit(0);
#endif
}
EOF
if { (eval echo configure:88850: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_crypt_ext_des=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_crypt_ext_des=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_crypt_ext_des" 1>&6

echo $ac_n "checking for MD5 crypt""... $ac_c" 1>&6
echo "configure:88871: checking for MD5 crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_md5'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_crypt_md5=no

else
  cat > conftest.$ac_ext <<EOF
#line 88882 "configure"
#include "confdefs.h"

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[15], answer[40];

    salt[0]='$'; salt[1]='1'; salt[2]='$'; 
    salt[3]='r'; salt[4]='a'; salt[5]='s';
    salt[6]='m'; salt[7]='u'; salt[8]='s';
    salt[9]='l'; salt[10]='e'; salt[11]='$';
    salt[12]='\0';
    strcpy(answer,salt);
    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:88910: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_crypt_md5=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_crypt_md5=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_crypt_md5" 1>&6

echo $ac_n "checking for Blowfish crypt""... $ac_c" 1>&6
echo "configure:88931: checking for Blowfish crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_blowfish'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_crypt_blowfish=no

else
  cat > conftest.$ac_ext <<EOF
#line 88942 "configure"
#include "confdefs.h"

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[30], answer[70];
    
    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
    strcat(salt,"rasmuslerd............");
    strcpy(answer,salt);
    strcpy(&answer[29],"nIdrcHdxcUxWomQX9j6kvERCFjTg7Ra");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:88967: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_crypt_blowfish=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_crypt_blowfish=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_crypt_blowfish" 1>&6

echo $ac_n "checking for SHA512 crypt""... $ac_c" 1>&6
echo "configure:88988: checking for SHA512 crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_SHA512'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_crypt_SHA512=no

else
  cat > conftest.$ac_ext <<EOF
#line 88999 "configure"
#include "confdefs.h"

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[30], answer[80];
    
    salt[0]='$'; salt[1]='6'; salt[2]='$'; salt[3]='$'; salt[4]='b'; salt[5]='a'; salt[6]='r'; salt[7]='\0';
    strcpy(answer, salt);
    strcpy(&answer[29],"$6$$QMXjqd7rHQZPQ1yHsXkQqC1FBzDiVfTHXL.LaeDAeVV.IzMaV9VU4MQ8kPuZa2SOP1A0RPm772EaFYjpEJtdu.");
    exit (strcmp((char *)crypt("foo",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:89023: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_crypt_SHA512=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_crypt_SHA512=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_crypt_SHA512" 1>&6

echo $ac_n "checking for SHA256 crypt""... $ac_c" 1>&6
echo "configure:89044: checking for SHA256 crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_SHA256'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_crypt_SHA256=no

else
  cat > conftest.$ac_ext <<EOF
#line 89055 "configure"
#include "confdefs.h"

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[30], answer[80];
    salt[0]='$'; salt[1]='5'; salt[2]='$'; salt[3]='$'; salt[4]='s'; salt[5]='a'; salt[6]='l'; salt[7]='t';  salt[8]='s'; salt[9]='t'; salt[10]='r'; salt[11]='i'; salt[12]='n'; salt[13]='g'; salt[14]='\0';    
    strcat(salt,"");
    strcpy(answer, salt);
    strcpy(&answer[29], "$5$saltstring$5B8vYYiY.CVt1RlTTf8KbXBH3hsxY/GNooZaBBGWEc5");
    exit (strcmp((char *)crypt("foo",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:89079: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_crypt_SHA256=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_crypt_SHA256=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_crypt_SHA256" 1>&6


if test "$ac_cv_crypt_blowfish" = "no" || test "$ac_cv_crypt_des" = "no" || test "$ac_cv_crypt_ext_des" = "no" || test "x$php_crypt_r" = "x0"; then

        echo $ac_n "checking whether the compiler supports __alignof__""... $ac_c" 1>&6
echo "configure:89103: checking whether the compiler supports __alignof__" >&5
if eval "test \"`echo '$''{'ac_cv_alignof_exists'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  cat > conftest.$ac_ext <<EOF
#line 89109 "configure"
#include "confdefs.h"

  
int main() {

    int align = __alignof__(int);
  
; return 0; }
EOF
if { (eval echo configure:89119: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    ac_cv_alignof_exists=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    ac_cv_alignof_exists=no
  
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_alignof_exists" 1>&6
  if test "$ac_cv_alignof_exists" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_ALIGNOF 1
EOF

  fi

        echo $ac_n "checking whether the compiler supports aligned attribute""... $ac_c" 1>&6
echo "configure:89144: checking whether the compiler supports aligned attribute" >&5
if eval "test \"`echo '$''{'ac_cv_attribute_aligned'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  cat > conftest.$ac_ext <<EOF
#line 89150 "configure"
#include "confdefs.h"

  
int main() {

    unsigned char test[32] __attribute__ ((__aligned__ (__alignof__ (int))));
  
; return 0; }
EOF
if { (eval echo configure:89160: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    ac_cv_attribute_aligned=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    ac_cv_attribute_aligned=no
  
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_attribute_aligned" 1>&6
  if test "$ac_cv_attribute_aligned" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_ATTRIBUTE_ALIGNED 1
EOF

  fi
    

  cat >> confdefs.h <<EOF
#define PHP_USE_PHP_CRYPT_R 1
EOF

  cat >> confdefs.h <<EOF
#define PHP_STD_DES_CRYPT 1
EOF

  cat >> confdefs.h <<EOF
#define PHP_BLOWFISH_CRYPT 1
EOF

  cat >> confdefs.h <<EOF
#define PHP_EXT_DES_CRYPT 1
EOF

  cat >> confdefs.h <<EOF
#define PHP_MD5_CRYPT 1
EOF

  cat >> confdefs.h <<EOF
#define PHP_SHA512_CRYPT 1
EOF

  cat >> confdefs.h <<EOF
#define PHP_SHA256_CRYPT 1
EOF


  
  
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in crypt_freesec.c crypt_blowfish.c crypt_sha512.c crypt_sha256.c php_crypt_r.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


else
  if test "$ac_cv_crypt_des" = "yes"; then
    ac_result=1
    ac_crypt_des=1
  else
    ac_result=0
    ac_crypt_des=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_STD_DES_CRYPT $ac_result
EOF


  if test "$ac_cv_crypt_blowfish" = "yes"; then
    ac_result=1
    ac_crypt_blowfish=1
  else
    ac_result=0
    ac_crypt_blowfish=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_BLOWFISH_CRYPT $ac_result
EOF


  if test "$ac_cv_crypt_ext_des" = "yes"; then
    ac_result=1
    ac_crypt_edes=1
  else
    ac_result=0
    ac_crypt_edes=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_EXT_DES_CRYPT $ac_result
EOF


  if test "$ac_cv_crypt_md5" = "yes"; then
    ac_result=1
    ac_crypt_md5=1
  else
    ac_result=0
    ac_crypt_md5=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_MD5_CRYPT $ac_result
EOF
  
  
  if test "$ac_cv_crypt_sha512" = "yes"; then
    ac_result=1
    ac_crypt_sha512=1
  else
    ac_result=0
    ac_crypt_sha512=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_SHA512_CRYPT $ac_result
EOF


  if test "$ac_cv_crypt_sha256" = "yes"; then
    ac_result=1
    ac_crypt_sha256=1
  else
    ac_result=0
    ac_crypt_sha256=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_SHA256_CRYPT $ac_result
EOF


  cat >> confdefs.h <<EOF
#define PHP_USE_PHP_CRYPT_R 0
EOF

fi

for ac_func in getcwd getwd asinh acosh atanh log1p hypot glob strfmon nice fpclass isinf isnan mempcpy strpncpy
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:89339: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 89344 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:89367: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for working fnmatch""... $ac_c" 1>&6
echo "configure:89392: checking for working fnmatch" >&5
if eval "test \"`echo '$''{'ac_cv_func_fnmatch_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # Some versions of Solaris or SCO have a broken fnmatch function.
# So we run a test program.  If we are cross-compiling, take no chance.
# Thanks to John Oleynick and Franc,ois Pinard for this test.
if test "$cross_compiling" = yes; then
  ac_cv_func_fnmatch_works=no
else
  cat > conftest.$ac_ext <<EOF
#line 89403 "configure"
#include "confdefs.h"
main() { exit (fnmatch ("a*", "abc", 0) != 0); }
EOF
if { (eval echo configure:89407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_fnmatch_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_fnmatch_works=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_fnmatch_works" 1>&6
if test $ac_cv_func_fnmatch_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_FNMATCH 1
EOF

fi
	


for ac_func in fork CreateProcess
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:89434: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 89439 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:89462: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
  php_can_support_proc_open=yes
  break

else
  echo "$ac_t""no" 1>&6
php_can_support_proc_open=no

fi
done

echo $ac_n "checking if your OS can spawn processes with inherited handles""... $ac_c" 1>&6
echo "configure:89492: checking if your OS can spawn processes with inherited handles" >&5
if test "$php_can_support_proc_open" = "yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define PHP_CAN_SUPPORT_PROC_OPEN 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$PHP_SAPI" = "cgi" || test "$PHP_SAPI" = "cli" || test "$PHP_SAPI" = "embed"; then
  cat >> confdefs.h <<\EOF
#define ENABLE_CHROOT_FUNC 1
EOF

fi


  unset ac_cv_func_res_nsearch
  unset ac_cv_func___res_nsearch
  unset found
  
  echo $ac_n "checking for res_nsearch""... $ac_c" 1>&6
echo "configure:89516: checking for res_nsearch" >&5
if eval "test \"`echo '$''{'ac_cv_func_res_nsearch'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 89521 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char res_nsearch(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_nsearch();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_res_nsearch) || defined (__stub___res_nsearch)
choke me
#else
res_nsearch();
#endif

; return 0; }
EOF
if { (eval echo configure:89544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_res_nsearch=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_res_nsearch=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'res_nsearch`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __res_nsearch""... $ac_c" 1>&6
echo "configure:89562: checking for __res_nsearch" >&5
if eval "test \"`echo '$''{'ac_cv_func___res_nsearch'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 89567 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __res_nsearch(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_nsearch();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___res_nsearch) || defined (__stub_____res_nsearch)
choke me
#else
__res_nsearch();
#endif

; return 0; }
EOF
if { (eval echo configure:89590: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___res_nsearch=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___res_nsearch=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__res_nsearch`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_RES_NSEARCH 1
EOF

    ac_cv_func_res_nsearch=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_res_nsearch
  unset ac_cv_lib_resolv___res_nsearch
  unset found
  echo $ac_n "checking for res_nsearch in -lresolv""... $ac_c" 1>&6
echo "configure:89628: checking for res_nsearch in -lresolv" >&5
ac_lib_var=`echo resolv'_'res_nsearch | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 89636 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_nsearch();

int main() {
res_nsearch()
; return 0; }
EOF
if { (eval echo configure:89647: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_nsearch in -lresolv""... $ac_c" 1>&6
echo "configure:89667: checking for __res_nsearch in -lresolv" >&5
ac_lib_var=`echo resolv'_'__res_nsearch | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 89675 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_nsearch();

int main() {
__res_nsearch()
; return 0; }
EOF
if { (eval echo configure:89686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 89718 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:89722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_NSEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_res_nsearch=yes
  else
    
  
  unset ac_cv_lib_bind_res_nsearch
  unset ac_cv_lib_bind___res_nsearch
  unset found
  echo $ac_n "checking for res_nsearch in -lbind""... $ac_c" 1>&6
echo "configure:89764: checking for res_nsearch in -lbind" >&5
ac_lib_var=`echo bind'_'res_nsearch | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 89772 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_nsearch();

int main() {
res_nsearch()
; return 0; }
EOF
if { (eval echo configure:89783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_nsearch in -lbind""... $ac_c" 1>&6
echo "configure:89803: checking for __res_nsearch in -lbind" >&5
ac_lib_var=`echo bind'_'__res_nsearch | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 89811 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_nsearch();

int main() {
__res_nsearch()
; return 0; }
EOF
if { (eval echo configure:89822: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 89854 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:89858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_NSEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_res_nsearch=yes
  else
    
  
  unset ac_cv_lib_socket_res_nsearch
  unset ac_cv_lib_socket___res_nsearch
  unset found
  echo $ac_n "checking for res_nsearch in -lsocket""... $ac_c" 1>&6
echo "configure:89900: checking for res_nsearch in -lsocket" >&5
ac_lib_var=`echo socket'_'res_nsearch | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 89908 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_nsearch();

int main() {
res_nsearch()
; return 0; }
EOF
if { (eval echo configure:89919: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_nsearch in -lsocket""... $ac_c" 1>&6
echo "configure:89939: checking for __res_nsearch in -lsocket" >&5
ac_lib_var=`echo socket'_'__res_nsearch | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 89947 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_nsearch();

int main() {
__res_nsearch()
; return 0; }
EOF
if { (eval echo configure:89958: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 89990 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:89994: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_NSEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_res_nsearch=yes
  else
    
  :

  fi
  

  fi
  

  fi
  
 ;;
  
  esac


  unset ac_cv_func_dns_search
  unset ac_cv_func___dns_search
  unset found
  
  echo $ac_n "checking for dns_search""... $ac_c" 1>&6
echo "configure:90051: checking for dns_search" >&5
if eval "test \"`echo '$''{'ac_cv_func_dns_search'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 90056 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dns_search(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dns_search();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dns_search) || defined (__stub___dns_search)
choke me
#else
dns_search();
#endif

; return 0; }
EOF
if { (eval echo configure:90079: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dns_search=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dns_search=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dns_search`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __dns_search""... $ac_c" 1>&6
echo "configure:90097: checking for __dns_search" >&5
if eval "test \"`echo '$''{'ac_cv_func___dns_search'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 90102 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __dns_search(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dns_search();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___dns_search) || defined (__stub_____dns_search)
choke me
#else
__dns_search();
#endif

; return 0; }
EOF
if { (eval echo configure:90125: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___dns_search=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___dns_search=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__dns_search`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_DNS_SEARCH 1
EOF

    ac_cv_func_dns_search=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_dns_search
  unset ac_cv_lib_resolv___dns_search
  unset found
  echo $ac_n "checking for dns_search in -lresolv""... $ac_c" 1>&6
echo "configure:90163: checking for dns_search in -lresolv" >&5
ac_lib_var=`echo resolv'_'dns_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90171 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dns_search();

int main() {
dns_search()
; return 0; }
EOF
if { (eval echo configure:90182: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dns_search in -lresolv""... $ac_c" 1>&6
echo "configure:90202: checking for __dns_search in -lresolv" >&5
ac_lib_var=`echo resolv'_'__dns_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90210 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dns_search();

int main() {
__dns_search()
; return 0; }
EOF
if { (eval echo configure:90221: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 90253 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:90257: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DNS_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_dns_search=yes
  else
    
  
  unset ac_cv_lib_bind_dns_search
  unset ac_cv_lib_bind___dns_search
  unset found
  echo $ac_n "checking for dns_search in -lbind""... $ac_c" 1>&6
echo "configure:90299: checking for dns_search in -lbind" >&5
ac_lib_var=`echo bind'_'dns_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90307 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dns_search();

int main() {
dns_search()
; return 0; }
EOF
if { (eval echo configure:90318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dns_search in -lbind""... $ac_c" 1>&6
echo "configure:90338: checking for __dns_search in -lbind" >&5
ac_lib_var=`echo bind'_'__dns_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90346 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dns_search();

int main() {
__dns_search()
; return 0; }
EOF
if { (eval echo configure:90357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 90389 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:90393: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DNS_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_dns_search=yes
  else
    
  
  unset ac_cv_lib_socket_dns_search
  unset ac_cv_lib_socket___dns_search
  unset found
  echo $ac_n "checking for dns_search in -lsocket""... $ac_c" 1>&6
echo "configure:90435: checking for dns_search in -lsocket" >&5
ac_lib_var=`echo socket'_'dns_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90443 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dns_search();

int main() {
dns_search()
; return 0; }
EOF
if { (eval echo configure:90454: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dns_search in -lsocket""... $ac_c" 1>&6
echo "configure:90474: checking for __dns_search in -lsocket" >&5
ac_lib_var=`echo socket'_'__dns_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90482 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dns_search();

int main() {
__dns_search()
; return 0; }
EOF
if { (eval echo configure:90493: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 90525 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:90529: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DNS_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_dns_search=yes
  else
    
  :

  fi
  

  fi
  

  fi
  
 ;;
  
  esac


  unset ac_cv_func_dn_expand
  unset ac_cv_func___dn_expand
  unset found
  
  echo $ac_n "checking for dn_expand""... $ac_c" 1>&6
echo "configure:90586: checking for dn_expand" >&5
if eval "test \"`echo '$''{'ac_cv_func_dn_expand'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 90591 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dn_expand(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_expand();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dn_expand) || defined (__stub___dn_expand)
choke me
#else
dn_expand();
#endif

; return 0; }
EOF
if { (eval echo configure:90614: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dn_expand=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dn_expand=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dn_expand`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __dn_expand""... $ac_c" 1>&6
echo "configure:90632: checking for __dn_expand" >&5
if eval "test \"`echo '$''{'ac_cv_func___dn_expand'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 90637 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __dn_expand(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_expand();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___dn_expand) || defined (__stub_____dn_expand)
choke me
#else
__dn_expand();
#endif

; return 0; }
EOF
if { (eval echo configure:90660: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___dn_expand=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___dn_expand=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__dn_expand`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_DN_EXPAND 1
EOF

    ac_cv_func_dn_expand=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_dn_expand
  unset ac_cv_lib_resolv___dn_expand
  unset found
  echo $ac_n "checking for dn_expand in -lresolv""... $ac_c" 1>&6
echo "configure:90698: checking for dn_expand in -lresolv" >&5
ac_lib_var=`echo resolv'_'dn_expand | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90706 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_expand();

int main() {
dn_expand()
; return 0; }
EOF
if { (eval echo configure:90717: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_expand in -lresolv""... $ac_c" 1>&6
echo "configure:90737: checking for __dn_expand in -lresolv" >&5
ac_lib_var=`echo resolv'_'__dn_expand | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90745 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_expand();

int main() {
__dn_expand()
; return 0; }
EOF
if { (eval echo configure:90756: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 90788 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:90792: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_EXPAND 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_dn_expand=yes
  else
    
  
  unset ac_cv_lib_bind_dn_expand
  unset ac_cv_lib_bind___dn_expand
  unset found
  echo $ac_n "checking for dn_expand in -lbind""... $ac_c" 1>&6
echo "configure:90834: checking for dn_expand in -lbind" >&5
ac_lib_var=`echo bind'_'dn_expand | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90842 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_expand();

int main() {
dn_expand()
; return 0; }
EOF
if { (eval echo configure:90853: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_expand in -lbind""... $ac_c" 1>&6
echo "configure:90873: checking for __dn_expand in -lbind" >&5
ac_lib_var=`echo bind'_'__dn_expand | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90881 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_expand();

int main() {
__dn_expand()
; return 0; }
EOF
if { (eval echo configure:90892: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 90924 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:90928: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_EXPAND 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_dn_expand=yes
  else
    
  
  unset ac_cv_lib_socket_dn_expand
  unset ac_cv_lib_socket___dn_expand
  unset found
  echo $ac_n "checking for dn_expand in -lsocket""... $ac_c" 1>&6
echo "configure:90970: checking for dn_expand in -lsocket" >&5
ac_lib_var=`echo socket'_'dn_expand | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 90978 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_expand();

int main() {
dn_expand()
; return 0; }
EOF
if { (eval echo configure:90989: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_expand in -lsocket""... $ac_c" 1>&6
echo "configure:91009: checking for __dn_expand in -lsocket" >&5
ac_lib_var=`echo socket'_'__dn_expand | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91017 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_expand();

int main() {
__dn_expand()
; return 0; }
EOF
if { (eval echo configure:91028: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 91060 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:91064: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_EXPAND 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_dn_expand=yes
  else
    
  :

  fi
  

  fi
  

  fi
  
 ;;
  
  esac


  unset ac_cv_func_dn_skipname
  unset ac_cv_func___dn_skipname
  unset found
  
  echo $ac_n "checking for dn_skipname""... $ac_c" 1>&6
echo "configure:91121: checking for dn_skipname" >&5
if eval "test \"`echo '$''{'ac_cv_func_dn_skipname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 91126 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dn_skipname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dn_skipname) || defined (__stub___dn_skipname)
choke me
#else
dn_skipname();
#endif

; return 0; }
EOF
if { (eval echo configure:91149: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dn_skipname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dn_skipname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dn_skipname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __dn_skipname""... $ac_c" 1>&6
echo "configure:91167: checking for __dn_skipname" >&5
if eval "test \"`echo '$''{'ac_cv_func___dn_skipname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 91172 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __dn_skipname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___dn_skipname) || defined (__stub_____dn_skipname)
choke me
#else
__dn_skipname();
#endif

; return 0; }
EOF
if { (eval echo configure:91195: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___dn_skipname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___dn_skipname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__dn_skipname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_DN_SKIPNAME 1
EOF

    ac_cv_func_dn_skipname=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_dn_skipname
  unset ac_cv_lib_resolv___dn_skipname
  unset found
  echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:91233: checking for dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91241 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {
dn_skipname()
; return 0; }
EOF
if { (eval echo configure:91252: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:91272: checking for __dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91280 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {
__dn_skipname()
; return 0; }
EOF
if { (eval echo configure:91291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 91323 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:91327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_SKIPNAME 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_dn_skipname=yes
  else
    
  
  unset ac_cv_lib_bind_dn_skipname
  unset ac_cv_lib_bind___dn_skipname
  unset found
  echo $ac_n "checking for dn_skipname in -lbind""... $ac_c" 1>&6
echo "configure:91369: checking for dn_skipname in -lbind" >&5
ac_lib_var=`echo bind'_'dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91377 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {
dn_skipname()
; return 0; }
EOF
if { (eval echo configure:91388: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_skipname in -lbind""... $ac_c" 1>&6
echo "configure:91408: checking for __dn_skipname in -lbind" >&5
ac_lib_var=`echo bind'_'__dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91416 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {
__dn_skipname()
; return 0; }
EOF
if { (eval echo configure:91427: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 91459 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:91463: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_SKIPNAME 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_dn_skipname=yes
  else
    
  
  unset ac_cv_lib_socket_dn_skipname
  unset ac_cv_lib_socket___dn_skipname
  unset found
  echo $ac_n "checking for dn_skipname in -lsocket""... $ac_c" 1>&6
echo "configure:91505: checking for dn_skipname in -lsocket" >&5
ac_lib_var=`echo socket'_'dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91513 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {
dn_skipname()
; return 0; }
EOF
if { (eval echo configure:91524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_skipname in -lsocket""... $ac_c" 1>&6
echo "configure:91544: checking for __dn_skipname in -lsocket" >&5
ac_lib_var=`echo socket'_'__dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91552 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {
__dn_skipname()
; return 0; }
EOF
if { (eval echo configure:91563: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 91595 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:91599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_SKIPNAME 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_dn_skipname=yes
  else
    
  :

  fi
  

  fi
  

  fi
  
 ;;
  
  esac




  unset ac_cv_func_res_search
  unset ac_cv_func___res_search
  unset found
  
  echo $ac_n "checking for res_search""... $ac_c" 1>&6
echo "configure:91658: checking for res_search" >&5
if eval "test \"`echo '$''{'ac_cv_func_res_search'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 91663 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char res_search(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_res_search) || defined (__stub___res_search)
choke me
#else
res_search();
#endif

; return 0; }
EOF
if { (eval echo configure:91686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_res_search=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_res_search=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'res_search`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __res_search""... $ac_c" 1>&6
echo "configure:91704: checking for __res_search" >&5
if eval "test \"`echo '$''{'ac_cv_func___res_search'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 91709 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __res_search(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___res_search) || defined (__stub_____res_search)
choke me
#else
__res_search();
#endif

; return 0; }
EOF
if { (eval echo configure:91732: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___res_search=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___res_search=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__res_search`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    ac_cv_func_res_search=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_res_search
  unset ac_cv_lib_resolv___res_search
  unset found
  echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
echo "configure:91770: checking for res_search in -lresolv" >&5
ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91778 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:91789: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_search in -lresolv""... $ac_c" 1>&6
echo "configure:91809: checking for __res_search in -lresolv" >&5
ac_lib_var=`echo resolv'_'__res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91817 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {
__res_search()
; return 0; }
EOF
if { (eval echo configure:91828: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 91860 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:91864: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_res_search=yes
  else
    
  
  unset ac_cv_lib_bind_res_search
  unset ac_cv_lib_bind___res_search
  unset found
  echo $ac_n "checking for res_search in -lbind""... $ac_c" 1>&6
echo "configure:91906: checking for res_search in -lbind" >&5
ac_lib_var=`echo bind'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91914 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:91925: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_search in -lbind""... $ac_c" 1>&6
echo "configure:91945: checking for __res_search in -lbind" >&5
ac_lib_var=`echo bind'_'__res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 91953 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {
__res_search()
; return 0; }
EOF
if { (eval echo configure:91964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 91996 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:92000: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_res_search=yes
  else
    
  
  unset ac_cv_lib_socket_res_search
  unset ac_cv_lib_socket___res_search
  unset found
  echo $ac_n "checking for res_search in -lsocket""... $ac_c" 1>&6
echo "configure:92042: checking for res_search in -lsocket" >&5
ac_lib_var=`echo socket'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 92050 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:92061: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_search in -lsocket""... $ac_c" 1>&6
echo "configure:92081: checking for __res_search in -lsocket" >&5
ac_lib_var=`echo socket'_'__res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 92089 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {
__res_search()
; return 0; }
EOF
if { (eval echo configure:92100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 92132 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:92136: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_res_search=yes
  else
    
  :

  fi
  

  fi
  

  fi
  
 ;;
  
  esac


echo $ac_n "checking whether atof() accepts NAN""... $ac_c" 1>&6
echo "configure:92189: checking whether atof() accepts NAN" >&5
if eval "test \"`echo '$''{'ac_cv_atof_accept_nan'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_atof_accept_nan=no

else
  cat > conftest.$ac_ext <<EOF
#line 92200 "configure"
#include "confdefs.h"

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISNAN
#define zend_isnan(a) isnan(a)
#elif defined(HAVE_FPCLASS)
#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
#else
#define zend_isnan(a) 0
#endif

int main(int argc, char** argv)
{
	return zend_isnan(atof("NAN")) ? 0 : 1;
}

EOF
if { (eval echo configure:92220: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_atof_accept_nan=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_atof_accept_nan=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_atof_accept_nan" 1>&6
if test "$ac_cv_atof_accept_nan" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_ATOF_ACCEPTS_NAN 1
EOF

fi

echo $ac_n "checking whether atof() accepts INF""... $ac_c" 1>&6
echo "configure:92247: checking whether atof() accepts INF" >&5
if eval "test \"`echo '$''{'ac_cv_atof_accept_inf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_atof_accept_inf=no

else
  cat > conftest.$ac_ext <<EOF
#line 92258 "configure"
#include "confdefs.h"

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISINF
#define zend_isinf(a) isinf(a)
#elif defined(INFINITY)
/* Might not work, but is required by ISO C99 */
#define zend_isinf(a) (((a)==INFINITY)?1:0)
#elif defined(HAVE_FPCLASS)
#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
#else
#define zend_isinf(a) 0
#endif

int main(int argc, char** argv)
{
	return zend_isinf(atof("INF")) && zend_isinf(atof("-INF")) ? 0 : 1;
}

EOF
if { (eval echo configure:92281: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_atof_accept_inf=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_atof_accept_inf=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_atof_accept_inf" 1>&6
if test "$ac_cv_atof_accept_inf" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_ATOF_ACCEPTS_INF 1
EOF

fi

echo $ac_n "checking whether HUGE_VAL == INF""... $ac_c" 1>&6
echo "configure:92308: checking whether HUGE_VAL == INF" >&5
if eval "test \"`echo '$''{'ac_cv_huge_val_inf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_huge_val_inf=yes

else
  cat > conftest.$ac_ext <<EOF
#line 92319 "configure"
#include "confdefs.h"

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISINF
#define zend_isinf(a) isinf(a)
#elif defined(INFINITY)
/* Might not work, but is required by ISO C99 */
#define zend_isinf(a) (((a)==INFINITY)?1:0)
#elif defined(HAVE_FPCLASS)
#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
#else
#define zend_isinf(a) 0
#endif

int main(int argc, char** argv)
{
	return zend_isinf(HUGE_VAL) ? 0 : 1;
}

EOF
if { (eval echo configure:92342: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_huge_val_inf=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_huge_val_inf=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_huge_val_inf" 1>&6
if test "$ac_cv_huge_val_inf" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_HUGE_VAL_INF 1
EOF

fi

echo $ac_n "checking whether HUGE_VAL + -HUGEVAL == NAN""... $ac_c" 1>&6
echo "configure:92369: checking whether HUGE_VAL + -HUGEVAL == NAN" >&5
if eval "test \"`echo '$''{'ac_cv_huge_val_nan'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_huge_val_nan=yes

else
  cat > conftest.$ac_ext <<EOF
#line 92380 "configure"
#include "confdefs.h"

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISNAN
#define zend_isnan(a) isnan(a)
#elif defined(HAVE_FPCLASS)
#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
#else
#define zend_isnan(a) 0
#endif

int main(int argc, char** argv)
{
#if defined(__sparc__) && !(__GNUC__ >= 3)
	/* prevent bug #27830 */
	return 1;
#else
	return zend_isnan(HUGE_VAL + -HUGE_VAL) ? 0 : 1;
#endif
}

EOF
if { (eval echo configure:92405: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_huge_val_nan=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_huge_val_nan=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_huge_val_nan" 1>&6
if test "$ac_cv_huge_val_nan" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_HUGE_VAL_NAN 1
EOF

fi

echo $ac_n "checking whether strptime() declaration fails""... $ac_c" 1>&6
echo "configure:92432: checking whether strptime() declaration fails" >&5
if eval "test \"`echo '$''{'ac_cv_strptime_decl_fails'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
cat > conftest.$ac_ext <<EOF
#line 92438 "configure"
#include "confdefs.h"

#include <time.h>

int main() {

#ifndef HAVE_STRPTIME
#error no strptime() on this platform
#else
/* use invalid strptime() declaration to see if it fails to compile */
int strptime(const char *s, const char *format, struct tm *tm);
#endif

; return 0; }
EOF
if { (eval echo configure:92454: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_strptime_decl_fails=no

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_strptime_decl_fails=yes

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_strptime_decl_fails" 1>&6
if test "$ac_cv_strptime_decl_fails" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_STRPTIME_DECL_FAILS 1
EOF

fi

for ac_hdr in wchar.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:92482: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 92487 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:92492: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_func in mblen
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:92521: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 92526 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:92549: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_func in mbrlen mbsinit
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:92576: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 92581 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:92604: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for mbstate_t""... $ac_c" 1>&6
echo "configure:92629: checking for mbstate_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_mbstate_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
cat > conftest.$ac_ext <<EOF
#line 92635 "configure"
#include "confdefs.h"

#ifdef HAVE_WCHAR_H
# include <wchar.h>
#endif

int main() {

int __tmp__() { mbstate_t a; }

; return 0; }
EOF
if { (eval echo configure:92648: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_type_mbstate_t=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_type_mbstate_t=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_mbstate_t" 1>&6
if test "$ac_cv_type_mbstate_t" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_MBSTATE_T 1
EOF

fi

for ac_hdr in atomic.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:92676: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 92681 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:92686: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



  ext_builddir=ext/standard
  ext_srcdir=$abs_srcdir/ext/standard

  ac_extra=

  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then
    PHP_STANDARD_SHARED=no
    
  
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC standard"
    if test "" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
    fi
  else
    if test "" = "shared" || test "" = "yes"; then
      PHP_STANDARD_SHARED=yes
      
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_standard="$shared_objects_standard $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpstandard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpstandard.so '$ext_builddir'/phpstandard.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSTANDARD, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpstandard.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpstandard.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpstandard.$suffix: $ext_builddir/phpstandard.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpstandard.$suffix \$(phplibdir)

$ext_builddir/phpstandard.$suffix: \$(shared_objects_standard) \$(PHPSTANDARD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/standard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/standard.so '$ext_builddir'/standard.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(STANDARD, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/standard.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/standard.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/standard.$suffix: $ext_builddir/standard.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/standard.$suffix \$(phplibdir)

$ext_builddir/standard.$suffix: \$(shared_objects_standard) \$(STANDARD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_STANDARD 1
EOF

    fi
  fi

  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
    PHP_STANDARD_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC standard"
        ;;
      *)
        
  
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=standard
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  
    for header_file in ext/standard/; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  




php_with_sybase_ct=no

echo $ac_n "checking for Sybase-CT support""... $ac_c" 1>&6
echo "configure:93076: checking for Sybase-CT support" >&5
# Check whether --with-sybase-ct or --without-sybase-ct was given.
if test "${with_sybase_ct+set}" = set; then
  withval="$with_sybase_ct"
  PHP_SYBASE_CT=$withval
else
  
  PHP_SYBASE_CT=no
  test "$PHP_ENABLE_ALL" && PHP_SYBASE_CT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYBASE_CT in
shared,*)
  PHP_SYBASE_CT=`echo "$PHP_SYBASE_CT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYBASE_CT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYBASE_CT" != "no"; then

  if test "$PHP_SYBASE" && test "$PHP_SYBASE" != "no" && test "$ext_shared" = "no"; then
    { echo "configure: error: You can not use both --with-sybase and --with-sybase-ct in same build!" 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_SYBASE_CT 1
EOF

  
  ext_builddir=ext/sybase_ct
  ext_srcdir=$abs_srcdir/ext/sybase_ct

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYBASE_CT_SHARED=no
    
  
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sybase_ct"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYBASE_CT_SHARED=yes
      
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sybase_ct="$shared_objects_sybase_ct $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsybase_ct.so '$ext_builddir'/phpsybase_ct.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYBASE_CT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsybase_ct.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsybase_ct.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsybase_ct.$suffix: $ext_builddir/phpsybase_ct.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsybase_ct.$suffix \$(phplibdir)

$ext_builddir/phpsybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(PHPSYBASE_CT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sybase_ct.so '$ext_builddir'/sybase_ct.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYBASE_CT, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sybase_ct.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase_ct.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sybase_ct.$suffix: $ext_builddir/sybase_ct.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase_ct.$suffix \$(phplibdir)

$ext_builddir/sybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYBASE_CT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYBASE_CT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sybase_ct"
        ;;
      *)
        
  
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sybase_ct
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SYBASE_CT_SHARED_LIBADD"

 
  if test "$PHP_SYBASE_CT" = "yes"; then
    SYBASE_CT_INCDIR=/home/sybase/include
    SYBASE_CT_LIBDIR=/home/sybase/lib
  else
    SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
  fi

    echo $ac_n "checking size of long int""... $ac_c" 1>&6
echo "configure:93431: checking size of long int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 93439 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long int));
  exit(0);
}
EOF
if { (eval echo configure:93450: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
EOF


  echo $ac_n "checking checking if we're on a 64-bit platform""... $ac_c" 1>&6
echo "configure:93470: checking checking if we're on a 64-bit platform" >&5
  if test "$ac_cv_sizeof_long_int" = "4"; then
    echo "$ac_t""no" 1>&6
    PHP_SYBASE_64=no
  else
    echo "$ac_t""yes" 1>&6
    PHP_SYBASE_64=yes
  fi


  echo $ac_n "checking Checking for ctpublic.h""... $ac_c" 1>&6
echo "configure:93481: checking Checking for ctpublic.h" >&5
  if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
    echo "$ac_t""found in $SYBASE_CT_INCDIR" 1>&6
    
  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then
    
  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_CT_INCDIR
  else
    
    ep_dir="`echo $SYBASE_CT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_CT_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  else
    { echo "configure: error: ctpublic.h missing!" 1>&2; exit 1; }
  fi
 
  echo $ac_n "checking Checking Sybase libdir""... $ac_c" 1>&6
echo "configure:93520: checking Checking Sybase libdir" >&5
  echo "$ac_t""Have $SYBASE_CT_LIBDIR" 1>&6
 
  echo $ac_n "checking Checking for Sybase platform libraries""... $ac_c" 1>&6
echo "configure:93524: checking Checking for Sybase platform libraries" >&5

  
  if test "$SYBASE_CT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_CT_LIBDIR
  else
    
    ep_dir="`echo $SYBASE_CT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_CT_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-L$ai_p $SYBASE_CT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SYBASE_CT_SHARED_LIBADD="$ld_runpath_switch$ai_p $SYBASE_CT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  if test -f $SYBASE_CT_INCDIR/tds.h || test -f $SYBASE_CT_INCDIR/tds_sysdep_public.h; then
    
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lct $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lct"
    echo "$ac_t""FreeTDS: $SYBASE_CT_LIBS" 1>&6
  elif test -f $SYBASE_CT_LIBDIR/libsybct64.so && test $PHP_SYBASE_64 = "yes"; then
    
  
  case sybcs64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcs64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybcs64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybcs64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case sybct64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybct64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybct64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybct64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case sybcomn64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcomn64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybcomn64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybcomn64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case sybintl64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybintl64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybintl64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybintl64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac



    ac_solid_uname_s=`uname -s 2>/dev/null`
    case $ac_solid_uname_s in
      *OSF*)                            ;; # Tru64/DEC OSF does NOT use the SYB_LP64 define
      *) CFLAGS="${CFLAGS} -DSYB_LP64"  ;; # 
    esac
    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs64 -lsybct64 -lsybcomn64 -lsybintl64"
    echo "$ac_t""Sybase64: $SYBASE_CT_LIBS" 1>&6
  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" 
      $SYBASE_CT_LIBS 
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for netg_errstr in -lsybtcl64""... $ac_c" 1>&6
echo "configure:93790: checking for netg_errstr in -lsybtcl64" >&5
ac_lib_var=`echo sybtcl64'_'netg_errstr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsybtcl64  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 93798 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char netg_errstr();

int main() {
netg_errstr()
; return 0; }
EOF
if { (eval echo configure:93809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case sybtcl64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybtcl64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybtcl64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sybtcl64_netg_errstr
     
      
  
  case sybtcl64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybtcl64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybtcl64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for insck__getVdate in -linsck64""... $ac_c" 1>&6
echo "configure:93984: checking for insck__getVdate in -linsck64" >&5
ac_lib_var=`echo insck64'_'insck__getVdate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck64  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 93992 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char insck__getVdate();

int main() {
insck__getVdate()
; return 0; }
EOF
if { (eval echo configure:94003: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
  case insck64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck64_insck__getVdate
    
  
fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for bsd_tcp in -linsck64""... $ac_c" 1>&6
echo "configure:94151: checking for bsd_tcp in -linsck64" >&5
ac_lib_var=`echo insck64'_'bsd_tcp | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck64  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 94159 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bsd_tcp();

int main() {
bsd_tcp()
; return 0; }
EOF
if { (eval echo configure:94170: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
  case insck64 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck64 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck64 $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck64_bsd_tcp
    
  
fi

  elif test -f $SYBASE_CT_LIBDIR/libsybct.so; then
    
  
  case sybcs in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcs $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybcs in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybcs $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case sybct in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybct $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybct in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybct $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case sybcomn in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcomn $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybcomn in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybcomn $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case sybintl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybintl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybintl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybintl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs -lsybct -lsybcomn -lsybintl"
    echo "$ac_t""Sybase32 syb-prefix: $SYBASE_CT_LIBS" 1>&6
  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" 
      $SYBASE_CT_LIBS 
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for netg_errstr in -lsybtcl""... $ac_c" 1>&6
echo "configure:94417: checking for netg_errstr in -lsybtcl" >&5
ac_lib_var=`echo sybtcl'_'netg_errstr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsybtcl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 94425 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char netg_errstr();

int main() {
netg_errstr()
; return 0; }
EOF
if { (eval echo configure:94436: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybtcl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sybtcl_netg_errstr
     
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybtcl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
echo "configure:94611: checking for insck__getVdate in -linsck" >&5
ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 94619 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char insck__getVdate();

int main() {
insck__getVdate()
; return 0; }
EOF
if { (eval echo configure:94630: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_insck__getVdate
    
  
fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
echo "configure:94778: checking for bsd_tcp in -linsck" >&5
ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 94786 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bsd_tcp();

int main() {
bsd_tcp()
; return 0; }
EOF
if { (eval echo configure:94797: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_bsd_tcp
    
  
fi

  else
    
  
  case cs in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lcs $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case cs in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcs $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lct $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case comn in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lcomn $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case comn in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcomn $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case intl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lintl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case intl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lintl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lcs -lct -lcomn -lintl"
    echo "$ac_t""Sybase32 default: $SYBASE_CT_LIBS" 1>&6
  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" 
      $SYBASE_CT_LIBS 
    "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for netg_errstr in -ltcl""... $ac_c" 1>&6
echo "configure:95044: checking for netg_errstr in -ltcl" >&5
ac_lib_var=`echo tcl'_'netg_errstr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltcl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 95052 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char netg_errstr();

int main() {
netg_errstr()
; return 0; }
EOF
if { (eval echo configure:95063: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      
  
  case tcl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-ltcl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case tcl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltcl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_tcl_netg_errstr
     
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybtcl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
echo "configure:95238: checking for insck__getVdate in -linsck" >&5
ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 95246 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char insck__getVdate();

int main() {
insck__getVdate()
; return 0; }
EOF
if { (eval echo configure:95257: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_insck__getVdate
    
  
fi

    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
echo "configure:95405: checking for bsd_tcp in -linsck" >&5
ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 95413 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bsd_tcp();

int main() {
bsd_tcp()
; return 0; }
EOF
if { (eval echo configure:95424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_bsd_tcp
    
  
fi

  fi
fi



php_enable_sysvmsg=no

echo $ac_n "checking whether to enable System V IPC support""... $ac_c" 1>&6
echo "configure:95484: checking whether to enable System V IPC support" >&5
# Check whether --enable-sysvmsg or --disable-sysvmsg was given.
if test "${enable_sysvmsg+set}" = set; then
  enableval="$enable_sysvmsg"
  PHP_SYSVMSG=$enableval
else
  
  PHP_SYSVMSG=no
  test "$PHP_ENABLE_ALL" && PHP_SYSVMSG=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVMSG in
shared,*)
  PHP_SYSVMSG=`echo "$PHP_SYSVMSG"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYSVMSG=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVMSG" != "no"; then
  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
echo "configure:95527: checking for sys/msg.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 95532 "configure"
#include "confdefs.h"
#include <sys/msg.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:95537: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Cannot enable System V IPC support, sys/msg.h is missing" 1>&2; exit 1; }
  
fi


  cat >> confdefs.h <<\EOF
#define HAVE_SYSVMSG 1
EOF

  
  ext_builddir=ext/sysvmsg
  ext_srcdir=$abs_srcdir/ext/sysvmsg

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYSVMSG_SHARED=no
    
  
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvmsg"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYSVMSG_SHARED=yes
      
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sysvmsg="$shared_objects_sysvmsg $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvmsg.so '$ext_builddir'/phpsysvmsg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVMSG, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvmsg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvmsg.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsysvmsg.$suffix: $ext_builddir/phpsysvmsg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvmsg.$suffix \$(phplibdir)

$ext_builddir/phpsysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(PHPSYSVMSG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvmsg.so '$ext_builddir'/sysvmsg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVMSG, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvmsg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvmsg.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvmsg.$suffix: $ext_builddir/sysvmsg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvmsg.$suffix \$(phplibdir)

$ext_builddir/sysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVMSG 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYSVMSG_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sysvmsg"
        ;;
      *)
        
  
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sysvmsg
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_sysvsem=no

echo $ac_n "checking whether to enable System V semaphore support""... $ac_c" 1>&6
echo "configure:95864: checking whether to enable System V semaphore support" >&5
# Check whether --enable-sysvsem or --disable-sysvsem was given.
if test "${enable_sysvsem+set}" = set; then
  enableval="$enable_sysvsem"
  PHP_SYSVSEM=$enableval
else
  
  PHP_SYSVSEM=no
  test "$PHP_ENABLE_ALL" && PHP_SYSVSEM=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVSEM in
shared,*)
  PHP_SYSVSEM=`echo "$PHP_SYSVSEM"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYSVSEM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVSEM" != "no"; then
 
  ext_builddir=ext/sysvsem
  ext_srcdir=$abs_srcdir/ext/sysvsem

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYSVSEM_SHARED=no
    
  
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvsem"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYSVSEM_SHARED=yes
      
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sysvsem="$shared_objects_sysvsem $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvsem.so '$ext_builddir'/phpsysvsem.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSEM, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvsem.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvsem.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsysvsem.$suffix: $ext_builddir/phpsysvsem.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvsem.$suffix \$(phplibdir)

$ext_builddir/phpsysvsem.$suffix: \$(shared_objects_sysvsem) \$(PHPSYSVSEM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvsem.so '$ext_builddir'/sysvsem.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSEM, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvsem.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvsem.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvsem.$suffix: $ext_builddir/sysvsem.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvsem.$suffix \$(phplibdir)

$ext_builddir/sysvsem.$suffix: \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVSEM 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYSVSEM_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sysvsem"
        ;;
      *)
        
  
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sysvsem
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

 cat >> confdefs.h <<\EOF
#define HAVE_SYSVSEM 1
EOF

 echo $ac_n "checking for union semun""... $ac_c" 1>&6
echo "configure:96202: checking for union semun" >&5
if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 96207 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/sem.h>
   
int main() {
union semun x;
; return 0; }
EOF
if { (eval echo configure:96218: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
     php_cv_semun=yes
   
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
     php_cv_semun=no
   
fi
rm -f conftest*
 
fi

echo "$ac_t""$php_cv_semun" 1>&6
 if test "$php_cv_semun" = "yes"; then
   cat >> confdefs.h <<\EOF
#define HAVE_SEMUN 1
EOF

 else
   cat >> confdefs.h <<\EOF
#define HAVE_SEMUN 0
EOF

 fi
fi



php_enable_sysvshm=no

echo $ac_n "checking whether to enable System V shared memory support""... $ac_c" 1>&6
echo "configure:96254: checking whether to enable System V shared memory support" >&5
# Check whether --enable-sysvshm or --disable-sysvshm was given.
if test "${enable_sysvshm+set}" = set; then
  enableval="$enable_sysvshm"
  PHP_SYSVSHM=$enableval
else
  
  PHP_SYSVSHM=no
  test "$PHP_ENABLE_ALL" && PHP_SYSVSHM=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVSHM in
shared,*)
  PHP_SYSVSHM=`echo "$PHP_SYSVSHM"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYSVSHM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVSHM" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SYSVSHM 1
EOF

  
  ext_builddir=ext/sysvshm
  ext_srcdir=$abs_srcdir/ext/sysvshm

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYSVSHM_SHARED=no
    
  
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvshm"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYSVSHM_SHARED=yes
      
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sysvshm="$shared_objects_sysvshm $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvshm.so '$ext_builddir'/phpsysvshm.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSHM, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvshm.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvshm.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsysvshm.$suffix: $ext_builddir/phpsysvshm.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvshm.$suffix \$(phplibdir)

$ext_builddir/phpsysvshm.$suffix: \$(shared_objects_sysvshm) \$(PHPSYSVSHM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvshm.so '$ext_builddir'/sysvshm.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSHM, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvshm.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvshm.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvshm.$suffix: $ext_builddir/sysvshm.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvshm.$suffix \$(phplibdir)

$ext_builddir/sysvshm.$suffix: \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVSHM 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYSVSHM_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sysvshm"
        ;;
      *)
        
  
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sysvshm
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_with_tidy=no

echo $ac_n "checking for TIDY support""... $ac_c" 1>&6
echo "configure:96598: checking for TIDY support" >&5
# Check whether --with-tidy or --without-tidy was given.
if test "${with_tidy+set}" = set; then
  withval="$with_tidy"
  PHP_TIDY=$withval
else
  
  PHP_TIDY=no
  test "$PHP_ENABLE_ALL" && PHP_TIDY=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_TIDY in
shared,*)
  PHP_TIDY=`echo "$PHP_TIDY"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_TIDY=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_TIDY" != "no"; then

  if test "$PHP_TIDY" != "yes"; then
    TIDY_SEARCH_DIRS=$PHP_TIDY
  else
    TIDY_SEARCH_DIRS="/usr/local /usr"
  fi

  for i in $TIDY_SEARCH_DIRS; do
    if test -f $i/include/tidy/tidy.h; then
      TIDY_DIR=$i
      TIDY_INCDIR=$i/include/tidy
    elif test -f $i/include/tidy.h; then
      TIDY_DIR=$i
      TIDY_INCDIR=$i/include
    fi
  done

  if test -z "$TIDY_DIR"; then
    { echo "configure: error: Cannot find libtidy" 1>&2; exit 1; }
  fi

  TIDY_LIBDIR=$TIDY_DIR/$PHP_LIBDIR

  

  if test "$ext_shared" = "yes"; then
    TIDY_SHARED_LIBADD="-ltidy $TIDY_SHARED_LIBADD"
    if test -n "$TIDY_LIBDIR"; then
      
  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
    
  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$TIDY_LIBDIR
  else
    
    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        TIDY_SHARED_LIBADD="-L$ai_p $TIDY_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && TIDY_SHARED_LIBADD="$ld_runpath_switch$ai_p $TIDY_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$TIDY_LIBDIR"; then
    
  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
    
  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$TIDY_LIBDIR
  else
    
    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case tidy in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltidy $LIBS" 
   ;;
  esac




  fi


  
  if test "$TIDY_INCDIR" != "/usr/include"; then
    
  if test -z "$TIDY_INCDIR" || echo "$TIDY_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$TIDY_INCDIR
  else
    
    ep_dir="`echo $TIDY_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TIDY_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for tidyOptGetDoc in -ltidy""... $ac_c" 1>&6
echo "configure:96887: checking for tidyOptGetDoc in -ltidy" >&5
ac_lib_var=`echo tidy'_'tidyOptGetDoc | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltidy  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 96895 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tidyOptGetDoc();

int main() {
tidyOptGetDoc()
; return 0; }
EOF
if { (eval echo configure:96906: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
  cat >> confdefs.h <<\EOF
#define HAVE_TIDYOPTGETDOC 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_tidy_tidyOptGetDoc
    
  
fi



  
  ext_builddir=ext/tidy
  ext_srcdir=$abs_srcdir/ext/tidy

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_TIDY_SHARED=no
    
  
  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC tidy"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_TIDY_SHARED=yes
      
  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_tidy="$shared_objects_tidy $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptidy.so '$ext_builddir'/phptidy.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTIDY, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptidy.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptidy.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phptidy.$suffix: $ext_builddir/phptidy.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phptidy.$suffix \$(phplibdir)

$ext_builddir/phptidy.$suffix: \$(shared_objects_tidy) \$(PHPTIDY_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tidy.so '$ext_builddir'/tidy.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TIDY, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tidy.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tidy.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/tidy.$suffix: $ext_builddir/tidy.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/tidy.$suffix \$(phplibdir)

$ext_builddir/tidy.$suffix: \$(shared_objects_tidy) \$(TIDY_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_TIDY 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_TIDY_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC tidy"
        ;;
      *)
        
  
  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=tidy
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST TIDY_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_TIDY 1
EOF

fi




php_enable_tokenizer=yes

echo $ac_n "checking whether to enable tokenizer support""... $ac_c" 1>&6
echo "configure:97250: checking whether to enable tokenizer support" >&5
# Check whether --enable-tokenizer or --disable-tokenizer was given.
if test "${enable_tokenizer+set}" = set; then
  enableval="$enable_tokenizer"
  PHP_TOKENIZER=$enableval
else
  
  PHP_TOKENIZER=yes
  test "$PHP_ENABLE_ALL" && PHP_TOKENIZER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_TOKENIZER in
shared,*)
  PHP_TOKENIZER=`echo "$PHP_TOKENIZER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_TOKENIZER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_TOKENIZER" != "no"; then
  
  ext_builddir=ext/tokenizer
  ext_srcdir=$abs_srcdir/ext/tokenizer

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_TOKENIZER_SHARED=no
    
  
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC tokenizer"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_TOKENIZER_SHARED=yes
      
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_tokenizer="$shared_objects_tokenizer $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptokenizer.so '$ext_builddir'/phptokenizer.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTOKENIZER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptokenizer.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptokenizer.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phptokenizer.$suffix: $ext_builddir/phptokenizer.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phptokenizer.$suffix \$(phplibdir)

$ext_builddir/phptokenizer.$suffix: \$(shared_objects_tokenizer) \$(PHPTOKENIZER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tokenizer.so '$ext_builddir'/tokenizer.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TOKENIZER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tokenizer.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tokenizer.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/tokenizer.$suffix: $ext_builddir/tokenizer.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/tokenizer.$suffix \$(phplibdir)

$ext_builddir/tokenizer.$suffix: \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_TOKENIZER 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_TOKENIZER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC tokenizer"
        ;;
      *)
        
  
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=tokenizer
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi



php_enable_wddx=no

echo $ac_n "checking whether to enable WDDX support""... $ac_c" 1>&6
echo "configure:97596: checking whether to enable WDDX support" >&5
# Check whether --enable-wddx or --disable-wddx was given.
if test "${enable_wddx+set}" = set; then
  enableval="$enable_wddx"
  PHP_WDDX=$enableval
else
  
  PHP_WDDX=no
  test "$PHP_ENABLE_ALL" && PHP_WDDX=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_WDDX in
shared,*)
  PHP_WDDX=`echo "$PHP_WDDX"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_WDDX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:97641: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi


php_with_libexpat_dir=no

echo $ac_n "checking libexpat dir for WDDX""... $ac_c" 1>&6
echo "configure:97665: checking libexpat dir for WDDX" >&5
# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
if test "${with_libexpat_dir+set}" = set; then
  withval="$with_libexpat_dir"
  PHP_LIBEXPAT_DIR=$withval
else
  
  PHP_LIBEXPAT_DIR=no
  

fi


ext_output=$PHP_LIBEXPAT_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_WDDX" != "no"; then

        if test "$PHP_LIBEXPAT_DIR" = "no"; then
    if test "$PHP_LIBXML" = "no"; then
      { echo "configure: error: WDDX extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
    fi

    
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:97693: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:97851: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $WDDX_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 97867 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:97878: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
      if test "$PHP_XML" = "no"; then
        
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in compat.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        
  
    BUILD_DIR="$BUILD_DIR ext/xml"
  

      fi
    
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
    
  fi

  fi

        if test "$PHP_LIBEXPAT_DIR" != "no"; then
    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
        EXPAT_DIR=$i
        break
      fi
    done

    if test -z "$EXPAT_DIR"; then
      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
    fi

    
  if test "$EXPAT_DIR/include" != "/usr/include"; then
    
  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/include
  else
    
    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    WDDX_SHARED_LIBADD="-lexpat $WDDX_SHARED_LIBADD"
    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
      
  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
    
  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case expat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexpat $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT 1
EOF

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_WDDX 1
EOF

  
  ext_builddir=ext/wddx
  ext_srcdir=$abs_srcdir/ext/wddx

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_WDDX_SHARED=no
    
  
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC wddx"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_WDDX_SHARED=yes
      
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_wddx="$shared_objects_wddx $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpwddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpwddx.so '$ext_builddir'/phpwddx.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPWDDX, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpwddx.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpwddx.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpwddx.$suffix: $ext_builddir/phpwddx.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpwddx.$suffix \$(phplibdir)

$ext_builddir/phpwddx.$suffix: \$(shared_objects_wddx) \$(PHPWDDX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/wddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/wddx.so '$ext_builddir'/wddx.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(WDDX, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/wddx.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/wddx.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/wddx.$suffix: $ext_builddir/wddx.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/wddx.$suffix \$(phplibdir)

$ext_builddir/wddx.$suffix: \$(shared_objects_wddx) \$(WDDX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_WDDX 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_WDDX_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC wddx"
        ;;
      *)
        
  
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=wddx
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  am_i_shared=$PHP_WDDX_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension wddx to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build wddx shared or build libxml statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension wddx, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"

fi



php_enable_xml=yes

echo $ac_n "checking whether to enable XML support""... $ac_c" 1>&6
echo "configure:98445: checking whether to enable XML support" >&5
# Check whether --enable-xml or --disable-xml was given.
if test "${enable_xml+set}" = set; then
  enableval="$enable_xml"
  PHP_XML=$enableval
else
  
  PHP_XML=yes
  test "$PHP_ENABLE_ALL" && PHP_XML=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XML in
shared,*)
  PHP_XML=`echo "$PHP_XML"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XML=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:98490: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi


php_with_libexpat_dir=no

echo $ac_n "checking libexpat install dir""... $ac_c" 1>&6
echo "configure:98514: checking libexpat install dir" >&5
# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
if test "${with_libexpat_dir+set}" = set; then
  withval="$with_libexpat_dir"
  PHP_LIBEXPAT_DIR=$withval
else
  
  PHP_LIBEXPAT_DIR=no
  

fi


ext_output=$PHP_LIBEXPAT_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_XML" != "no"; then

        if test "$PHP_LIBEXPAT_DIR" = "no"; then

    if test "$PHP_LIBXML" = "no"; then
      { echo "configure: error: XML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
    fi

    
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:98543: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:98701: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $XML_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 98717 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:98728: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
      xml_extra_sources="compat.c"
      
  am_i_shared=$PHP_XML_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension xml to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build xml shared or build libxml statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension xml, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" 1>&2; exit 1; }
  fi
  
    
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
    
  fi

  fi
  
        if test "$PHP_LIBEXPAT_DIR" != "no"; then
    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
        EXPAT_DIR=$i
        break
      fi
    done

    if test -z "$EXPAT_DIR"; then
      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
    fi

    
  if test "$EXPAT_DIR/include" != "/usr/include"; then
    
  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/include
  else
    
    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    XML_SHARED_LIBADD="-lexpat $XML_SHARED_LIBADD"
    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
      
  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
    
  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case expat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexpat $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT 1
EOF

  fi

  
  ext_builddir=ext/xml
  ext_srcdir=$abs_srcdir/ext/xml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XML_SHARED=no
    
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XML_SHARED=yes
      
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxml.so '$ext_builddir'/phpxml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXML, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxml.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxml.$suffix: $ext_builddir/phpxml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxml.$suffix \$(phplibdir)

$ext_builddir/phpxml.$suffix: \$(shared_objects_xml) \$(PHPXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xml.so '$ext_builddir'/xml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XML, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xml.$suffix: $ext_builddir/xml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.$suffix \$(phplibdir)

$ext_builddir/xml.$suffix: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_XML 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XML_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xml"
        ;;
      *)
        
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xml
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST XML_SHARED_LIBADD"

  
  
    for header_file in ext/xml/; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

  cat >> confdefs.h <<\EOF
#define HAVE_XML 1
EOF

fi



php_enable_xmlreader=yes

echo $ac_n "checking whether to enable XMLReader support""... $ac_c" 1>&6
echo "configure:99264: checking whether to enable XMLReader support" >&5
# Check whether --enable-xmlreader or --disable-xmlreader was given.
if test "${enable_xmlreader+set}" = set; then
  enableval="$enable_xmlreader"
  PHP_XMLREADER=$enableval
else
  
  PHP_XMLREADER=yes
  test "$PHP_ENABLE_ALL" && PHP_XMLREADER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XMLREADER in
shared,*)
  PHP_XMLREADER=`echo "$PHP_XMLREADER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XMLREADER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:99309: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_XMLREADER" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    { echo "configure: error: XMLReader extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
  fi

  
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:99337: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLREADER_SHARED_LIBADD="-L$ai_p $XMLREADER_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLREADER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLREADER_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:99495: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $XMLREADER_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 99511 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:99522: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
    cat >> confdefs.h <<\EOF
#define HAVE_XMLREADER 1
EOF

    
  ext_builddir=ext/xmlreader
  ext_srcdir=$abs_srcdir/ext/xmlreader

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLREADER_SHARED=no
    
  
  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlreader"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLREADER_SHARED=yes
      
  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xmlreader="$shared_objects_xmlreader $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlreader.so '$ext_builddir'/phpxmlreader.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLREADER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlreader.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlreader.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlreader.$suffix: $ext_builddir/phpxmlreader.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlreader.$suffix \$(phplibdir)

$ext_builddir/phpxmlreader.$suffix: \$(shared_objects_xmlreader) \$(PHPXMLREADER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlreader.so '$ext_builddir'/xmlreader.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLREADER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlreader.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlreader.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlreader.$suffix: $ext_builddir/xmlreader.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlreader.$suffix \$(phplibdir)

$ext_builddir/xmlreader.$suffix: \$(shared_objects_xmlreader) \$(XMLREADER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_XMLREADER 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLREADER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlreader"
        ;;
      *)
        
  
  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlreader
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  am_i_shared=$PHP_XMLREADER_SHARED
  is_it_shared=$PHP_DOM_SHARED
  is_it_enabled=$PHP_DOM
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension xmlreader to build statically, but it
depends on extension dom, which you've configured to build shared.
You either need to build xmlreader shared or build dom statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    { echo "configure: error: 
You've configured extension xmlreader, which depends on extension dom,
but you've either not enabled dom, or have disabled it.
" 1>&2; exit 1; }
  fi
  
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLREADER_SHARED_LIBADD"

  
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
  
  fi

fi


# Local macros for automake & autoconf













php_with_xmlrpc=no

echo $ac_n "checking for XMLRPC-EPI support""... $ac_c" 1>&6
echo "configure:99904: checking for XMLRPC-EPI support" >&5
# Check whether --with-xmlrpc or --without-xmlrpc was given.
if test "${with_xmlrpc+set}" = set; then
  withval="$with_xmlrpc"
  PHP_XMLRPC=$withval
else
  
  PHP_XMLRPC=no
  test "$PHP_ENABLE_ALL" && PHP_XMLRPC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XMLRPC in
shared,*)
  PHP_XMLRPC=`echo "$PHP_XMLRPC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XMLRPC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:99949: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi


php_with_libexpat_dir=no

echo $ac_n "checking libexpat dir for XMLRPC-EPI""... $ac_c" 1>&6
echo "configure:99973: checking libexpat dir for XMLRPC-EPI" >&5
# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
if test "${with_libexpat_dir+set}" = set; then
  withval="$with_libexpat_dir"
  PHP_LIBEXPAT_DIR=$withval
else
  
  PHP_LIBEXPAT_DIR=no
  

fi


ext_output=$PHP_LIBEXPAT_DIR
echo "$ac_t""$ext_output" 1>&6





php_with_iconv_dir=no

echo $ac_n "checking iconv dir for XMLRPC-EPI""... $ac_c" 1>&6
echo "configure:99996: checking iconv dir for XMLRPC-EPI" >&5
# Check whether --with-iconv-dir or --without-iconv-dir was given.
if test "${with_iconv_dir+set}" = set; then
  withval="$with_iconv_dir"
  PHP_ICONV_DIR=$withval
else
  
  PHP_ICONV_DIR=no
  

fi


ext_output=$PHP_ICONV_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_XMLRPC" != "no"; then

  
  am_i_shared=$PHP_XMLRPC_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension xmlrpc to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build xmlrpc shared or build libxml statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension xmlrpc, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" 1>&2; exit 1; }
  fi
  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_XMLRPC 1
EOF


        if test "$PHP_LIBEXPAT_DIR" = "no"; then

    if test "$PHP_LIBXML" = "no"; then
      { echo "configure: error: XML-RPC extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
    fi

    
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:100052: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:100210: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $XMLRPC_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 100226 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:100237: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
      if test "$PHP_XML" = "no"; then
        
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in compat.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        
  
    BUILD_DIR="$BUILD_DIR ext/xml"
  

      fi
    
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
    
  fi

  else
    testval=no
    for i in $PHP_LIBEXPAT_DIR $XMLRPC_DIR /usr/local /usr; do
      if test -f $i/$PHP_LIBDIR/libexpat.a || test -f $i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT 1
EOF

        

  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-lexpat $XMLRPC_SHARED_LIBADD"
    if test -n "$i/$PHP_LIBDIR"; then
      
  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$i/$PHP_LIBDIR
  else
    
    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/$PHP_LIBDIR"; then
    
  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$i/$PHP_LIBDIR
  else
    
    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case expat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexpat $LIBS" 
   ;;
  esac




  fi


        
  if test "$i/include" != "/usr/include"; then
    
  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
    ai_p=$i/include
  else
    
    ep_dir="`echo $i/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

        testval=yes
        break
      fi
    done

    if test "$testval" = "no"; then
      { echo "configure: error: XML-RPC support requires libexpat. Use --with-libexpat-dir=<DIR> (deprecated!)" 1>&2; exit 1; }
    fi
  fi

    if test "$PHP_ICONV_SHARED" = "yes" || test "$PHP_ICONV" = "no"; then

    if test "$PHP_ICONV_DIR" != "no"; then
      PHP_ICONV=$PHP_ICONV_DIR
    fi
  
    if test -z "$PHP_ICONV" || test "$PHP_ICONV" = "no"; then
      PHP_ICONV=yes
    fi
  
    
  found_iconv=no
  unset ICONV_DIR

  # Create the directories for a VPATH build:
  $php_shtool mkdir -p ext/iconv

  echo > ext/iconv/php_have_bsd_iconv.h
  echo > ext/iconv/php_have_ibm_iconv.h
  echo > ext/iconv/php_have_glibc_iconv.h
  echo > ext/iconv/php_have_libiconv.h
  echo > ext/iconv/php_have_iconv.h
  echo > ext/iconv/php_php_iconv_impl.h
  echo > ext/iconv/php_iconv_aliased_libiconv.h
  echo > ext/iconv/php_php_iconv_h_path.h
  echo > ext/iconv/php_iconv_supports_errno.h

      
  if test "$PHP_ICONV" = "yes"; then
            LIBS_save="$LIBS"
    LIBS=
    echo $ac_n "checking for iconv""... $ac_c" 1>&6
echo "configure:100509: checking for iconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 100514 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char iconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_iconv) || defined (__stub___iconv)
choke me
#else
iconv();
#endif

; return 0; }
EOF
if { (eval echo configure:100537: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_iconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_iconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      found_iconv=yes
    
else
  echo "$ac_t""no" 1>&6

      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
echo "configure:100558: checking for libiconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 100563 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char libiconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_libiconv) || defined (__stub___libiconv)
choke me
#else
libiconv();
#endif

; return 0; }
EOF
if { (eval echo configure:100586: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_libiconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_libiconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        
  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_LIBICONV 1
EOF

        found_iconv=yes
      
else
  echo "$ac_t""no" 1>&6
fi

    
fi

    LIBS="$LIBS_save"
  fi

        if test "$found_iconv" = "no"; then

    for i in $PHP_ICONV /usr/local /usr; do
      if test -r $i/include/giconv.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_GICONV_H 1
EOF

        ICONV_DIR=$i
        iconv_lib_name=giconv
        break
      elif test -r $i/include/iconv.h; then
        ICONV_DIR=$i
        iconv_lib_name=iconv
        break
      fi
    done

    if test -z "$ICONV_DIR"; then
      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
    fi
  
    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
    then
      
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$ICONV_DIR/$PHP_LIBDIR
      "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:100743: checking for libiconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 100751 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {
libiconv()
; return 0; }
EOF
if { (eval echo configure:100762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
        found_iconv=yes
        
  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_LIBICONV 1
EOF

        
  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h

        cat >> confdefs.h <<\EOF
#define ICONV_ALIASED_LIBICONV 1
EOF

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_libiconv
    
        
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$ICONV_DIR/$PHP_LIBDIR
        "
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:100903: checking for iconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 100911 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:100922: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
          found_iconv=yes
        
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_iconv
    
  
fi

      
  
fi

    fi
  fi

  if test "$found_iconv" = "yes"; then
    
  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h

    cat >> confdefs.h <<\EOF
#define HAVE_ICONV 1
EOF

    if test -n "$ICONV_DIR"; then
      

  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-l$iconv_lib_name $XMLRPC_SHARED_LIBADD"
    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
      
  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
    
  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $iconv_lib_name in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$iconv_lib_name $LIBS" 
   ;;
  esac




  fi


      
  if test "$ICONV_DIR/include" != "/usr/include"; then
    
  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/include
  else
    
    ep_dir="`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi
    
else 
      { echo "configure: error: iconv not found, in order to build xmlrpc you need the iconv library" 1>&2; exit 1; }
    
  fi

  fi
fi

if test "$PHP_XMLRPC" = "yes"; then
  # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:101112: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:101140: checking for inline" >&5
if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 101147 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:101154: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done

fi

echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) cat >> confdefs.h <<\EOF
#define inline 
EOF
 ;;
  *)  cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
 ;;
esac

	





cat >> confdefs.h <<\EOF
#define UNDEF_THREADS_HACK 
EOF



echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:101192: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 101197 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:101205: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 101222 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 101240 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 101261 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:101272: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

for ac_hdr in xmlparse.h xmltok.h stdlib.h strings.h string.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:101299: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 101304 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:101309: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done






echo $ac_n "checking size of char""... $ac_c" 1>&6
echo "configure:101341: checking size of char" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_char=1
else
  cat > conftest.$ac_ext <<EOF
#line 101349 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(char));
  exit(0);
}
EOF
if { (eval echo configure:101360: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_char=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_char=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_char" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_CHAR $ac_cv_sizeof_char
EOF



echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:101381: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 101389 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:101400: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:101420: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=4
else
  cat > conftest.$ac_ext <<EOF
#line 101428 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:101439: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:101459: checking size of long long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 101467 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long long));
  exit(0);
}
EOF
if { (eval echo configure:101478: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:101498: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 101503 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:101531: checking whether time.h and sys/time.h may both be included" >&5
if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 101536 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:101545: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:101566: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 101571 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi






# Standard XMLRPC list
for ac_func in \
 strtoul strtoull snprintf \
 strstr strpbrk strerror\
 memcpy memmove
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:101611: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 101616 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:101639: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




  
  ext_builddir=ext/xmlrpc
  ext_srcdir=$abs_srcdir/ext/xmlrpc

  ac_extra=`echo "-I@ext_srcdir@/libxmlrpc -DVERSION="0.50""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLRPC_SHARED=no
    
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlrpc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLRPC_SHARED=yes
      
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)

$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)

$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_XMLRPC 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLRPC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlrpc"
        ;;
      *)
        
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlrpc
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir/libxmlrpc"
  

  XMLRPC_MODULE_TYPE=builtin

elif test "$PHP_XMLRPC" != "no"; then

  if test -r $PHP_XMLRPC/include/xmlrpc.h; then
    XMLRPC_DIR=$PHP_XMLRPC/include
  elif test -r $PHP_XMLRPC/include/xmlrpc-epi/xmlrpc.h; then
    XMLRPC_DIR=$PHP_XMLRPC/include/xmlrpc-epi
  else
    echo $ac_n "checking for XMLRPC-EPI in default path""... $ac_c" 1>&6
echo "configure:101993: checking for XMLRPC-EPI in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/xmlrpc.h; then
        XMLRPC_DIR=$i/include
        echo "$ac_t""found in $i" 1>&6
        break
      fi
    done
  fi

  if test -z "$XMLRPC_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the XMLRPC-EPI distribution" 1>&2; exit 1; }
  fi

  
  if test "$XMLRPC_DIR" != "/usr/include"; then
    
  if test -z "$XMLRPC_DIR" || echo "$XMLRPC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR
  else
    
    ep_dir="`echo $XMLRPC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-lxmlrpc $XMLRPC_SHARED_LIBADD"
    if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
      
  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
    
  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case xmlrpc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lxmlrpc $LIBS" 
   ;;
  esac




  fi


  
  ext_builddir=ext/xmlrpc
  ext_srcdir=$abs_srcdir/ext/xmlrpc

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLRPC_SHARED=no
    
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlrpc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLRPC_SHARED=yes
      
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)

$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)

$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_XMLRPC 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLRPC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlrpc"
        ;;
      *)
        
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlrpc
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  XMLRPC_MODULE_TYPE=external
fi



php_enable_xmlwriter=yes

echo $ac_n "checking whether to enable XMLWriter support""... $ac_c" 1>&6
echo "configure:102436: checking whether to enable XMLWriter support" >&5
# Check whether --enable-xmlwriter or --disable-xmlwriter was given.
if test "${enable_xmlwriter+set}" = set; then
  enableval="$enable_xmlwriter"
  PHP_XMLWRITER=$enableval
else
  
  PHP_XMLWRITER=yes
  test "$PHP_ENABLE_ALL" && PHP_XMLWRITER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XMLWRITER in
shared,*)
  PHP_XMLWRITER=`echo "$PHP_XMLWRITER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XMLWRITER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_LIBXML_DIR"; then
  
php_with_libxml_dir=no

echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
echo "configure:102481: checking libxml2 install dir" >&5
# Check whether --with-libxml-dir or --without-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then
  withval="$with_libxml_dir"
  PHP_LIBXML_DIR=$withval
else
  
  PHP_LIBXML_DIR=no
  

fi


ext_output=$PHP_LIBXML_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_XMLWRITER" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    { echo "configure: error: XMLWriter extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
  fi

  
echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
echo "configure:102509: checking for xml2-config path" >&5
if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi

echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`
      
  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLWRITER_SHARED_LIBADD="-L$ai_p $XMLWRITER_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLWRITER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLWRITER_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done


            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
echo "configure:102667: checking whether libxml build works" >&5
if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
        
  old_LIBS=$LIBS
  LIBS="
          $XMLWRITER_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then
  
    LIBS=$old_LIBS
  
else
  cat > conftest.$ac_ext <<EOF
#line 102683 "configure"
#include "confdefs.h"

    
    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }
  
EOF
if { (eval echo configure:102694: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
          php_cv_libxml_build_works=yes
        
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
          echo "$ac_t""no" 1>&6
          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
        
  
fi
rm -fr conftest*
fi


      
fi

echo "$ac_t""$php_cv_libxml_build_works" 1>&6
      if test "$php_cv_libxml_build_works" = "yes"; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBXML 1
EOF

      fi
      
    cat >> confdefs.h <<\EOF
#define HAVE_XMLWRITER 1
EOF

    
  ext_builddir=ext/xmlwriter
  ext_srcdir=$abs_srcdir/ext/xmlwriter

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLWRITER_SHARED=no
    
  
  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlwriter"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLWRITER_SHARED=yes
      
  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xmlwriter="$shared_objects_xmlwriter $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlwriter.so '$ext_builddir'/phpxmlwriter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLWRITER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlwriter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlwriter.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlwriter.$suffix: $ext_builddir/phpxmlwriter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlwriter.$suffix \$(phplibdir)

$ext_builddir/phpxmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(PHPXMLWRITER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlwriter.so '$ext_builddir'/xmlwriter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLWRITER, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlwriter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlwriter.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlwriter.$suffix: $ext_builddir/xmlwriter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlwriter.$suffix \$(phplibdir)

$ext_builddir/xmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(XMLWRITER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_XMLWRITER 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLWRITER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlwriter"
        ;;
      *)
        
  
  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlwriter
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLWRITER_SHARED_LIBADD"

  
    else
      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
    fi
else 
    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
  
  fi

fi



php_with_xsl=no

echo $ac_n "checking for XSL support""... $ac_c" 1>&6
echo "configure:103044: checking for XSL support" >&5
# Check whether --with-xsl or --without-xsl was given.
if test "${with_xsl+set}" = set; then
  withval="$with_xsl"
  PHP_XSL=$withval
else
  
  PHP_XSL=no
  test "$PHP_ENABLE_ALL" && PHP_XSL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XSL in
shared,*)
  PHP_XSL=`echo "$PHP_XSL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XSL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_XSL" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    { echo "configure: error: XSL extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
  fi
  
  if test "$PHP_DOM" = "no"; then
    { echo "configure: error: XSL extension requires DOM extension, add --enable-dom" 1>&2; exit 1; }
  fi

  for i in $PHP_XSL /usr/local /usr; do
    if test -x "$i/bin/xslt-config"; then
      XSLT_CONFIG=$i/bin/xslt-config
      break
    fi
  done

  if test -z "$XSLT_CONFIG"; then
    { echo "configure: error: xslt-config not found. Please reinstall the libxslt >= 1.1.0 distribution" 1>&2; exit 1; }
  else
    libxslt_full_version=`$XSLT_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxslt_full_version
    IFS=$ac_IFS
    LIBXSLT_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXSLT_VERSION" -ge "1001000"; then
      XSL_LIBS=`$XSLT_CONFIG --libs`
      XSL_INCS=`$XSLT_CONFIG --cflags`
      
  for ac_i in $XSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      
  for ac_i in $XSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

      
      echo $ac_n "checking for EXSLT support""... $ac_c" 1>&6
echo "configure:103244: checking for EXSLT support" >&5
      for i in $PHP_XSL /usr/local /usr; do
        if test -r "$i/include/libexslt/exslt.h"; then
          PHP_XSL_EXSL_DIR=$i
          break
        fi
      done
      if test -z "$PHP_XSL_EXSL_DIR"; then
        echo "$ac_t""not found" 1>&6
      else 
        echo "$ac_t""found" 1>&6
        

  if test "$ext_shared" = "yes"; then
    XSL_SHARED_LIBADD="-lexslt $XSL_SHARED_LIBADD"
    if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
      
  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
    
  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case exslt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexslt $LIBS" 
   ;;
  esac




  fi


        
  if test "$PHP_XSL_EXSL_DIR/include" != "/usr/include"; then
    
  if test -z "$PHP_XSL_EXSL_DIR/include" || echo "$PHP_XSL_EXSL_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_XSL_EXSL_DIR/include
  else
    
    ep_dir="`echo $PHP_XSL_EXSL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

        cat >> confdefs.h <<\EOF
#define HAVE_XSL_EXSLT 1
EOF

      fi
    else
      { echo "configure: error: libxslt version 1.1.0 or greater required." 1>&2; exit 1; }
    fi
    
  
  fi
  
  cat >> confdefs.h <<\EOF
#define HAVE_XSL 1
EOF

  
  ext_builddir=ext/xsl
  ext_srcdir=$abs_srcdir/ext/xsl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XSL_SHARED=no
    
  
  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xsl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XSL_SHARED=yes
      
  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xsl="$shared_objects_xsl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxsl.so '$ext_builddir'/phpxsl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXSL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxsl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxsl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxsl.$suffix: $ext_builddir/phpxsl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxsl.$suffix \$(phplibdir)

$ext_builddir/phpxsl.$suffix: \$(shared_objects_xsl) \$(PHPXSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xsl.so '$ext_builddir'/xsl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XSL, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xsl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xsl.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xsl.$suffix: $ext_builddir/xsl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xsl.$suffix \$(phplibdir)

$ext_builddir/xsl.$suffix: \$(shared_objects_xsl) \$(XSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_XSL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XSL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xsl"
        ;;
      *)
        
  
  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xsl
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST XSL_SHARED_LIBADD"

  
  am_i_shared=$PHP_XSL_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    { echo "configure: error: 
You've configured extension xsl to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build xsl shared or build libxml statically for the
build to be successful.
" 1>&2; exit 1; }
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    { echo "configure: error: 
You've configured extension xsl, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" 1>&2; exit 1; }
  fi
  
fi



php_enable_zip=no

echo $ac_n "checking for zip archive read/writesupport""... $ac_c" 1>&6
echo "configure:103720: checking for zip archive read/writesupport" >&5
# Check whether --enable-zip or --disable-zip was given.
if test "${enable_zip+set}" = set; then
  enableval="$enable_zip"
  PHP_ZIP=$enableval
else
  
  PHP_ZIP=no
  test "$PHP_ENABLE_ALL" && PHP_ZIP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ZIP in
shared,*)
  PHP_ZIP=`echo "$PHP_ZIP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ZIP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_ZLIB_DIR"; then
  
php_with_zlib_dir=no

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:103765: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no
  

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi


php_with_pcre_dir=no

echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
echo "configure:103789: checking pcre install prefix" >&5
# Check whether --with-pcre-dir or --without-pcre-dir was given.
if test "${with_pcre_dir+set}" = set; then
  withval="$with_pcre_dir"
  PHP_PCRE_DIR=$withval
else
  
  PHP_PCRE_DIR=no
  

fi


ext_output=$PHP_PCRE_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ZIP" != "no"; then

  if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
    if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
    elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
    else
      { echo "configure: error: Can not find zlib headers under "$PHP_ZLIB_DIR"" 1>&2; exit 1; }
    fi
  else
    for i in /usr/local /usr; do
      if test -f "$i/include/zlib/zlib.h"; then
        PHP_ZLIB_DIR="$i"
        PHP_ZLIB_INCDIR="$i/include/zlib"
      elif test -f "$i/include/zlib.h"; then
        PHP_ZLIB_DIR="$i"
        PHP_ZLIB_INCDIR="$i/include"
      fi
    done
  fi

    echo $ac_n "checking for the location of zlib""... $ac_c" 1>&6
echo "configure:103833: checking for the location of zlib" >&5
  if test "$PHP_ZLIB_DIR" = "no"; then
    { echo "configure: error: zip support requires ZLIB. Use --with-zlib-dir=<DIR> to specify prefix where ZLIB include and library are located" 1>&2; exit 1; }
  else
    echo "$ac_t""$PHP_ZLIB_DIR" 1>&6
    

  if test "$ext_shared" = "yes"; then
    ZIP_SHARED_LIBADD="-lz $ZIP_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
      
  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ZIP_SHARED_LIBADD="-L$ai_p $ZIP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ZIP_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZIP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
    
  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


    
  if test "$PHP_ZLIB_INCDIR" != "/usr/include"; then
    
  if test -z "$PHP_ZLIB_INCDIR" || echo "$PHP_ZLIB_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_INCDIR
  else
    
    ep_dir="`echo $PHP_ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  fi

    old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=$INCLUDES
  cat > conftest.$ac_ext <<EOF
#line 103971 "configure"
#include "confdefs.h"

#include <main/php_config.h>
#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif
  
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
    PHP_PCRE_REGEX=yes
  
else
  rm -rf conftest*
  
    cat > conftest.$ac_ext <<EOF
#line 103990 "configure"
#include "confdefs.h"

#include <main/php_config.h>
#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      PHP_PCRE_REGEX=pecl
    
else
  rm -rf conftest*
  
      PHP_PCRE_REGEX=no
    
fi
rm -f conftest*

  
fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS

  PHP_ZIP_SOURCES="$PHP_ZIP_SOURCES lib/zip_add.c lib/zip_error.c lib/zip_fclose.c \
                         lib/zip_fread.c lib/zip_open.c lib/zip_source_filep.c  \
                         lib/zip_strerror.c lib/zip_close.c lib/zip_error_get.c \
                         lib/zip_file_error_get.c lib/zip_free.c lib/zip_rename.c \
                         lib/zip_source_free.c lib/zip_unchange_all.c lib/zip_delete.c \
                         lib/zip_error_get_sys_type.c lib/zip_file_get_offset.c \
                         lib/zip_get_name.c lib/zip_replace.c lib/zip_source_function.c \
                         lib/zip_unchange.c lib/zip_dirent.c lib/zip_error_strerror.c \
                         lib/zip_filerange_crc.c lib/zip_file_strerror.c lib/zip_get_num_files.c \
                         lib/zip_get_archive_flag.c lib/zip_set_archive_flag.c \
                         lib/zip_set_name.c lib/zip_source_zip.c lib/zip_unchange_data.c \
                         lib/zip_entry_free.c lib/zip_error_to_str.c lib/zip_fopen.c \
                         lib/zip_name_locate.c lib/zip_source_buffer.c lib/zip_stat.c \
                         lib/zip_entry_new.c lib/zip_err_str.c lib/zip_fopen_index.c \
                         lib/zip_get_archive_comment.c lib/zip_get_file_comment.c \
                         lib/zip_new.c lib/zip_source_file.c lib/zip_stat_index.c \
                         lib/zip_set_archive_comment.c lib/zip_set_file_comment.c \
                         lib/zip_unchange_archive.c lib/zip_memdup.c lib/zip_stat_init.c lib/zip_add_dir.c \
                         lib/zip_error_clear.c lib/zip_file_error_clear.c \
						 lib/zip_fdopen.c lib/zip_fopen_encrypted.c lib/zip_fopen_index_encrypted.c \
						 lib/zip_get_compression_implementation.c lib/zip_get_encryption_implementation.c \
						 lib/zip_get_file_extra.c lib/zip_get_num_entries.c lib/zip_set_default_password.c \
						 lib/zip_set_file_extra.c lib/zip_source_close.c lib/zip_source_crc.c \
						 lib/zip_source_deflate.c lib/zip_source_error.c lib/zip_source_layered.c \
						 lib/zip_source_open.c lib/zip_source_pkware.c lib/zip_source_pop.c \
						 lib/zip_source_read.c lib/zip_source_stat.c"

  cat >> confdefs.h <<\EOF
#define HAVE_ZIP 1
EOF

  
  ext_builddir=ext/zip
  ext_srcdir=$abs_srcdir/ext/zip

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ZIP_SHARED=no
    
  
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC zip"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ZIP_SHARED=yes
      
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_zip="$shared_objects_zip $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzip.so '$ext_builddir'/phpzip.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPZIP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzip.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzip.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpzip.$suffix: $ext_builddir/phpzip.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzip.$suffix \$(phplibdir)

$ext_builddir/phpzip.$suffix: \$(shared_objects_zip) \$(PHPZIP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zip.so '$ext_builddir'/zip.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ZIP, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zip.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zip.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/zip.$suffix: $ext_builddir/zip.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/zip.$suffix \$(phplibdir)

$ext_builddir/zip.$suffix: \$(shared_objects_zip) \$(ZIP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_ZIP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ZIP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC zip"
        ;;
      *)
        
  
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=zip
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    $php_shtool mkdir -p $ext_builddir/lib
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ZIP_SHARED_LIBADD"


    
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi



php_enable_mysqlnd=no

echo $ac_n "checking whether to enable mysqlnd""... $ac_c" 1>&6
echo "configure:104364: checking whether to enable mysqlnd" >&5
# Check whether --enable-mysqlnd or --disable-mysqlnd was given.
if test "${enable_mysqlnd+set}" = set; then
  enableval="$enable_mysqlnd"
  PHP_MYSQLND=$enableval
else
  
  PHP_MYSQLND=no
  test "$PHP_ENABLE_ALL" && PHP_MYSQLND=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MYSQLND in
shared,*)
  PHP_MYSQLND=`echo "$PHP_MYSQLND"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MYSQLND=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





php_enable_mysqlnd_compression_support=yes

echo $ac_n "checking whether to disable compressed protocol support in mysqlnd""... $ac_c" 1>&6
echo "configure:104408: checking whether to disable compressed protocol support in mysqlnd" >&5
# Check whether --enable-mysqlnd_compression_support or --disable-mysqlnd_compression_support was given.
if test "${enable_mysqlnd_compression_support+set}" = set; then
  enableval="$enable_mysqlnd_compression_support"
  PHP_MYSQLND_COMPRESSION_SUPPORT=$enableval
else
  
  PHP_MYSQLND_COMPRESSION_SUPPORT=yes
  

fi


ext_output=$PHP_MYSQLND_COMPRESSION_SUPPORT
echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_ZLIB_DIR"; then
  
php_with_zlib_dir=no

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:104432: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no
  

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_MYSQLND" != "no" || test "$PHP_MYSQLND_ENABLED" = "yes"; then
  mysqlnd_ps_sources="mysqlnd_ps.c mysqlnd_ps_codec.c"
  mysqlnd_base_sources="mysqlnd.c mysqlnd_charset.c mysqlnd_wireprotocol.c \
                   mysqlnd_loaddata.c mysqlnd_net.c mysqlnd_statistics.c \
				   mysqlnd_result.c mysqlnd_result_meta.c mysqlnd_debug.c\
				   mysqlnd_block_alloc.c php_mysqlnd.c"


  if test "$PHP_MYSQLND_COMPRESSION_SUPPORT" != "no"; then
    cat >> confdefs.h <<\EOF
#define MYSQLND_COMPRESSION_WANTED 1
EOF

  fi
  cat >> confdefs.h <<\EOF
#define MYSQLND_SSL_SUPPORTED 1
EOF


  mysqlnd_sources="$mysqlnd_base_sources $mysqlnd_ps_sources"
  
  ext_builddir=ext/mysqlnd
  ext_srcdir=$abs_srcdir/ext/mysqlnd

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MYSQLND_SHARED=no
    
  
  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysqlnd"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysqlnd"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MYSQLND_SHARED=yes
      
  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mysqlnd="$shared_objects_mysqlnd $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysqlnd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(PHPMYSQLND_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysqlnd.so '$ext_builddir'/phpmysqlnd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMYSQLND, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(PHPMYSQLND_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysqlnd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysqlnd.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqlnd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmysqlnd.$suffix: $ext_builddir/phpmysqlnd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysqlnd.$suffix \$(phplibdir)

$ext_builddir/phpmysqlnd.$suffix: \$(shared_objects_mysqlnd) \$(PHPMYSQLND_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)
          
  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysqlnd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(MYSQLND_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysqlnd.so '$ext_builddir'/mysqlnd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MYSQLND, 3)_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(MYSQLND_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysqlnd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysqlnd.$suffix"
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqlnd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysqlnd.$suffix: $ext_builddir/mysqlnd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysqlnd.$suffix \$(phplibdir)

$ext_builddir/mysqlnd.$suffix: \$(shared_objects_mysqlnd) \$(MYSQLND_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac
      cat >> confdefs.h <<EOF
#define COMPILE_DL_MYSQLND 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MYSQLND_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)
        
  
  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mysqlnd"
        ;;
      *)
        
  
  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysqlnd"
  fi
  
  
    BUILD_DIR="$BUILD_DIR $ext_builddir"
  


  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mysqlnd
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  
  
    $php_shtool mkdir -p ext/mysqlnd
  

  
  
    for header_file in ext/mysqlnd/; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  

fi

if test "$PHP_MYSQLND" != "no" || test "$PHP_MYSQLND_ENABLED" = "yes" || test "$PHP_MYSQLI" != "no"; then
  
  
    $php_shtool mkdir -p ext/mysqlnd
  


    
  for php_typename in int8 uint8 int16 uint16 int32 uint32 uchar ulong int8_t uint8_t int16_t uint16_t int32_t uint32_t int64_t uint64_t; do
    echo $ac_n "checking whether $php_typename exists""... $ac_c" 1>&6
echo "configure:104799: checking whether $php_typename exists" >&5
    
  php_cache_value=php_cv_sizeof_$php_typename
  if eval "test \"`echo '$''{'php_cv_sizeof_$php_typename'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then
  
    eval $php_cache_value=0

else
  cat > conftest.$ac_ext <<EOF
#line 104816 "configure"
#include "confdefs.h"
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
#ifdef HAVE_SYS_TYPES_H
#include <sys/types.h>
#endif
#ifdef HAVE_STDINT_H
#include <stdint.h>
#endif
  

int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof($php_typename));
	return(0);
}
  
EOF
if { (eval echo configure:104846: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    eval $php_cache_value=`cat conftestval`
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    eval $php_cache_value=0
  
fi
rm -fr conftest*
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then

      
  php_def_have_what=HAVE_`echo $php_typename | tr 'abcdefghijklmnopqrstuvwxyz-' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ_' `
  echo "#define $php_def_have_what 1" >> ext/mysqlnd/php_mysqlnd_config.h
  

      echo "$ac_t""yes" 1>&6
    
else 
      echo "$ac_t""no" 1>&6
    
  fi

  done

fi


if test "$PHP_RECODE" != "no"; then
  test "$PHP_IMAP"  != "no" && recode_conflict="$recode_conflict imap"

  if test -n "$MYSQL_LIBNAME"; then
    
  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""
  
  save_ext_shared=$ext_shared
  ext_shared=yes
  
  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else
        
  
  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else
        
  
  
  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  echo $ac_n "checking for hash_insert in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
echo "configure:104986: checking for hash_insert in -l$MYSQL_LIBNAME" >&5
ac_lib_var=`echo $MYSQL_LIBNAME'_'hash_insert | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 104994 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char hash_insert();

int main() {
hash_insert()
; return 0; }
EOF
if { (eval echo configure:105005: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    
      recode_conflict="$recode_conflict mysql"
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_hash_insert
    
  
fi

  fi

  if test -n "$recode_conflict"; then
    { echo "configure: error: recode extension can not be configured together with:$recode_conflict" 1>&2; exit 1; }
  fi
fi




enable_shared=yes
enable_static=yes

case $php_build_target in
  program|static)
    standard_libtool_flag='-prefer-non-pic -static'
    if test -z "$PHP_MODULES" && test -z "$PHP_ZEND_EX"; then
        enable_shared=no
    fi
    ;;
  shared)
    enable_static=no
    case $with_pic in
      yes)
        standard_libtool_flag='-prefer-pic'
        ;;
      no)
        standard_libtool_flag='-prefer-non-pic'
        ;;
    esac
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -avoid-version -module"
    ;;
esac

EXTRA_LIBS="$EXTRA_LIBS $DLIBS $LIBS"

if test "$ac_cv_lib_crypt_crypt" = "yes"; then
  EXTRA_LIBS="-lcrypt $EXTRA_LIBS -lcrypt"
fi

unset LIBS LDFLAGS



# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring PEAR${T_ME}" 1>&6


# compatibility
if test -z "$with_pear" && test "$enable_pear" = "no"; then
  with_pear=no
fi

# If CLI is disabled -> disable PEAR
if test "$PHP_CLI" = "no"; then
  with_pear=no
fi


php_with_pear=DEFAULT

echo $ac_n "checking whether to install PEAR""... $ac_c" 1>&6
echo "configure:105107: checking whether to install PEAR" >&5
# Check whether --with-pear or --without-pear was given.
if test "${with_pear+set}" = set; then
  withval="$with_pear"
  PHP_PEAR=$withval
else
  
  PHP_PEAR=DEFAULT
  test "$PHP_ENABLE_ALL" && PHP_PEAR=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PEAR in
shared,*)
  PHP_PEAR=`echo "$PHP_PEAR"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PEAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PEAR" != "no"; then

        if test "$PHP_XML" = "no"; then
    pear_error_msg="$pear_error_msg 
                    PEAR requires XML to be enabled.     Add --enable-xml to the configure line. (or --without-pear)"
  fi


  if test "$pear_error_msg"; then
    { echo "configure: error: $pear_error_msg" 1>&2; exit 1; }
  fi

  install_pear="install-pear"
  PEAR_INSTALLDIR=$PHP_PEAR

  if test "$PHP_PEAR" = "DEFAULT" || test "$PHP_PEAR" = "yes"; then
    case $PHP_LAYOUT in
      GNU) PEAR_INSTALLDIR=$datadir/pear;;
      *)   PEAR_INSTALLDIR=$libdir/php;;
    esac
  fi

  
  src=$abs_srcdir/pear/Makefile.frag
  ac_srcdir=$abs_srcdir/pear
  ac_builddir=pear
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi




# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring Zend${T_ME}" 1>&6










  # we only support certain bison versions
  bison_version_list="1.28 1.35 1.75 1.875 2.0 2.1 2.2 2.3 2.4 2.4.1 2.4.2 2.4.3 2.5 2.5.1 2.6 2.6.1 2.6.2 2.6.4"

  # for standalone build of Zend Engine
  test -z "$SED" && SED=sed

  bison_version=none
  if test "$YACC"; then
    echo $ac_n "checking for bison version""... $ac_c" 1>&6
echo "configure:105209: checking for bison version" >&5
if eval "test \"`echo '$''{'php_cv_bison_version'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
      bison_version_vars=`bison --version 2> /dev/null | grep 'GNU Bison' | cut -d ' ' -f 4 | $SED -e 's/\./ /' | tr -d a-z`
      php_cv_bison_version=invalid
      if test -n "$bison_version_vars"; then
        set $bison_version_vars
        bison_version="${1}.${2}"
        for bison_check_version in $bison_version_list; do
          if test "$bison_version" = "$bison_check_version"; then
            php_cv_bison_version="$bison_check_version (ok)"
            break
          fi
        done
      fi
    
fi

echo "$ac_t""$php_cv_bison_version" 1>&6
  fi
  case $php_cv_bison_version in
    ""|invalid)
      bison_msg="bison versions supported for regeneration of the Zend/PHP parsers: $bison_version_list (found: $bison_version)."
      echo "configure: warning: $bison_msg" 1>&2
      YACC="exit 0;"
      ;;
  esac


if test "$CC" = "gcc" -a "$ac_cv_prog_cc_g" = "yes" -a \
   "`uname -sv`" = "AIX 4"; then
	CFLAGS=`echo $CFLAGS | sed -e 's/-g//'`
fi

if test "$ac_cv_prog_gcc" = "yes" -a "`uname -s`" = "Rhapsody"; then
        CPPFLAGS="$CPPFLAGS -traditional-cpp"
fi

for ac_hdr in inttypes.h \
stdint.h \
limits.h \
malloc.h \
string.h \
unistd.h \
stdarg.h \
sys/types.h \
sys/time.h \
signal.h \
unix.h \
stdlib.h \
dlfcn.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:105265: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105270 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:105275: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:105303: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105308 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:105336: checking return type of signal handlers" >&5
if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105341 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:105358: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_signal" 1>&6
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF







echo $ac_n "checking for uint""... $ac_c" 1>&6
echo "configure:105382: checking for uint" >&5
if eval "test \"`echo '$''{'ac_cv_type_uint'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105387 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])uint[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uint=yes
else
  rm -rf conftest*
  ac_cv_type_uint=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_uint" 1>&6
if test $ac_cv_type_uint = no; then
  cat >> confdefs.h <<\EOF
#define uint unsigned int 
EOF

fi

echo $ac_n "checking for ulong""... $ac_c" 1>&6
echo "configure:105415: checking for ulong" >&5
if eval "test \"`echo '$''{'ac_cv_type_ulong'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105420 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])ulong[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_ulong=yes
else
  rm -rf conftest*
  ac_cv_type_ulong=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_ulong" 1>&6
if test $ac_cv_type_ulong = no; then
  cat >> confdefs.h <<\EOF
#define ulong unsigned long 
EOF

fi



echo $ac_n "checking for int32_t""... $ac_c" 1>&6
echo "configure:105450: checking for int32_t" >&5
cat > conftest.$ac_ext <<EOF
#line 105452 "configure"
#include "confdefs.h"

#if HAVE_SYS_TYPES_H  
#include <sys/types.h>
#endif
#if HAVE_INTTYPES_H  
#include <inttypes.h>
#elif HAVE_STDINT_H
#include <stdint.h>
#endif
int main() {
if ((int32_t *) 0)
  return 0;
if (sizeof (int32_t))
  return 0;

; return 0; }
EOF
if { (eval echo configure:105471: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  cat >> confdefs.h <<EOF
#define HAVE_INT32_T 1
EOF

  echo "$ac_t""yes" 1>&6

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6

fi
rm -f conftest*

echo $ac_n "checking for uint32_t""... $ac_c" 1>&6
echo "configure:105490: checking for uint32_t" >&5
cat > conftest.$ac_ext <<EOF
#line 105492 "configure"
#include "confdefs.h"

#if HAVE_SYS_TYPES_H  
#include <sys/types.h>
#endif
#if HAVE_INTTYPES_H  
#include <inttypes.h>
#elif HAVE_STDINT_H
#include <stdint.h>
#endif
int main() {
if ((uint32_t *) 0)
  return 0;
if (sizeof (uint32_t))
  return 0;

; return 0; }
EOF
if { (eval echo configure:105511: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  cat >> confdefs.h <<EOF
#define HAVE_UINT32_T 1
EOF

  echo "$ac_t""yes" 1>&6

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6

fi
rm -f conftest*

echo $ac_n "checking for vprintf""... $ac_c" 1>&6
echo "configure:105530: checking for vprintf" >&5
if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105535 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vprintf(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vprintf();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vprintf) || defined (__stub___vprintf)
choke me
#else
vprintf();
#endif

; return 0; }
EOF
if { (eval echo configure:105558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_vprintf=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_vprintf=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'vprintf`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_VPRINTF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$ac_cv_func_vprintf" != yes; then
echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
echo "configure:105582: checking for _doprnt" >&5
if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105587 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char _doprnt(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _doprnt();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub__doprnt) || defined (__stub____doprnt)
choke me
#else
_doprnt();
#endif

; return 0; }
EOF
if { (eval echo configure:105610: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func__doprnt=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func__doprnt=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'_doprnt`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOPRNT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

fi

echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
echo "configure:105635: checking for 8-bit clean memcmp" >&5
if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_func_memcmp_clean=no
else
  cat > conftest.$ac_ext <<EOF
#line 105643 "configure"
#include "confdefs.h"

main()
{
  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
}

EOF
if { (eval echo configure:105653: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_memcmp_clean=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_memcmp_clean=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"

# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:105673: checking for working alloca.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105678 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:105685: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:105706: checking for alloca" >&5
if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105711 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:105739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:105771: checking whether alloca needs Cray hooks" >&5
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105776 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:105801: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105806 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:105829: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:105856: checking stack direction for C alloca" >&5
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
  cat > conftest.$ac_ext <<EOF
#line 105864 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:105883: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi

for ac_func in memcpy strdup getpid kill strtod strtol finite fpclass sigsetjmp
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:105907: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 105912 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:105935: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  echo $ac_n "checking whether sprintf is broken""... $ac_c" 1>&6
echo "configure:105961: checking whether sprintf is broken" >&5
if eval "test \"`echo '$''{'ac_cv_broken_sprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_broken_sprintf=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 105972 "configure"
#include "confdefs.h"
main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
EOF
if { (eval echo configure:105976: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_broken_sprintf=no
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_broken_sprintf=yes
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_broken_sprintf" 1>&6
  if test "$ac_cv_broken_sprintf" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define ZEND_BROKEN_SPRINTF $ac_result
EOF



for ac_func in finite isfinite isinf isnan
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:106010: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 106015 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:106038: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



  echo $ac_n "checking whether fp_except is defined""... $ac_c" 1>&6
echo "configure:106065: checking whether fp_except is defined" >&5
if eval "test \"`echo '$''{'ac_cv_type_fp_except'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 106071 "configure"
#include "confdefs.h"

#include <floatingpoint.h>

int main() {

fp_except x = (fp_except) 0;

; return 0; }
EOF
if { (eval echo configure:106082: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
     ac_cv_type_fp_except=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
     ac_cv_type_fp_except=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_fp_except" 1>&6
  if test "$ac_cv_type_fp_except" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_FP_EXCEPT 1
EOF

  fi



  echo $ac_n "checking for usable _FPU_SETCW""... $ac_c" 1>&6
echo "configure:106109: checking for usable _FPU_SETCW" >&5
  cat > conftest.$ac_ext <<EOF
#line 106111 "configure"
#include "confdefs.h"

    #include <fpu_control.h>
  
int main() {

    fpu_control_t fpu_oldcw, fpu_cw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    _FPU_GETCW(fpu_oldcw);
    fpu_cw = (fpu_oldcw & ~_FPU_EXTENDED & ~_FPU_SINGLE) | _FPU_DOUBLE;
    _FPU_SETCW(fpu_cw);
    result = a / b;
    _FPU_SETCW(fpu_oldcw);
  
; return 0; }
EOF
if { (eval echo configure:106131: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cfp_have__fpu_setcw=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cfp_have__fpu_setcw=no
fi
rm -f conftest*
  if test "$ac_cfp_have__fpu_setcw" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE__FPU_SETCW 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  
  echo $ac_n "checking for usable fpsetprec""... $ac_c" 1>&6
echo "configure:106152: checking for usable fpsetprec" >&5
  cat > conftest.$ac_ext <<EOF
#line 106154 "configure"
#include "confdefs.h"

    #include <machine/ieeefp.h>
  
int main() {

    fp_prec_t fpu_oldprec;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    fpu_oldprec = fpgetprec();
    fpsetprec(FP_PD);
    result = a / b;
    fpsetprec(fpu_oldprec);
  
; return 0; }
EOF
if { (eval echo configure:106173: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cfp_have_fpsetprec=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cfp_have_fpsetprec=no
fi
rm -f conftest*
  if test "$ac_cfp_have_fpsetprec" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE_FPSETPREC 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  echo $ac_n "checking for usable _controlfp""... $ac_c" 1>&6
echo "configure:106194: checking for usable _controlfp" >&5
  cat > conftest.$ac_ext <<EOF
#line 106196 "configure"
#include "confdefs.h"

    #include <float.h>
  
int main() {

    unsigned int fpu_oldcw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    fpu_oldcw = _controlfp(0, 0);
    _controlfp(_PC_53, _MCW_PC);
    result = a / b;
    _controlfp(fpu_oldcw, _MCW_PC);
  
; return 0; }
EOF
if { (eval echo configure:106215: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cfp_have__controlfp=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cfp_have__controlfp=no
fi
rm -f conftest*
  if test "$ac_cfp_have__controlfp" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE__CONTROLFP 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  echo $ac_n "checking for usable _controlfp_s""... $ac_c" 1>&6
echo "configure:106236: checking for usable _controlfp_s" >&5
  cat > conftest.$ac_ext <<EOF
#line 106238 "configure"
#include "confdefs.h"

   #include <float.h>
  
int main() {

    unsigned int fpu_oldcw, fpu_cw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    _controlfp_s(&fpu_cw, 0, 0);
    fpu_oldcw = fpu_cw;
    _controlfp_s(&fpu_cw, _PC_53, _MCW_PC);
    result = a / b;
    _controlfp_s(&fpu_cw, fpu_oldcw, _MCW_PC);
  
; return 0; }
EOF
if { (eval echo configure:106258: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cfp_have__controlfp_s=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cfp_have__controlfp_s=no
fi
rm -f conftest*
  if test "$ac_cfp_have__controlfp_s" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE__CONTROLFP_S 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  echo $ac_n "checking whether FPU control word can be manipulated by inline assembler""... $ac_c" 1>&6
echo "configure:106279: checking whether FPU control word can be manipulated by inline assembler" >&5
  cat > conftest.$ac_ext <<EOF
#line 106281 "configure"
#include "confdefs.h"

    /* nothing */
  
int main() {

    unsigned int oldcw, cw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    __asm__ __volatile__ ("fnstcw %0" : "=m" (*&oldcw));
    cw = (oldcw & ~0x0 & ~0x300) | 0x200;
    __asm__ __volatile__ ("fldcw %0" : : "m" (*&cw));

    result = a / b;

    __asm__ __volatile__ ("fldcw %0" : : "m" (*&oldcw));
  
; return 0; }
EOF
if { (eval echo configure:106303: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cfp_have_fpu_inline_asm_x86=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cfp_have_fpu_inline_asm_x86=no
fi
rm -f conftest*
  if test "$ac_cfp_have_fpu_inline_asm_x86" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE_FPU_INLINE_ASM_X86 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi


echo $ac_n "checking whether double cast to long preserves least significant bits""... $ac_c" 1>&6
echo "configure:106325: checking whether double cast to long preserves least significant bits" >&5

if test "$cross_compiling" = yes; then
  
  echo "$ac_t""no" 1>&6

else
  cat > conftest.$ac_ext <<EOF
#line 106333 "configure"
#include "confdefs.h"

#include <limits.h>

int main()
{
	if (sizeof(long) == 4) {
		double d = (double) LONG_MIN * LONG_MIN + 2e9;

		if ((long) d == 2e9 && (long) -d == -2e9) {
			exit(0);
		}
	} else if (sizeof(long) == 8) {
		double correct = 18e18 - ((double) LONG_MIN * -2); /* Subtract ULONG_MAX + 1 */

		if ((long) 18e18 == correct) { /* On 64-bit, only check between LONG_MAX and ULONG_MAX */
			exit(0);
		}
	}
	exit(1);
}

EOF
if { (eval echo configure:106357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  cat >> confdefs.h <<\EOF
#define ZEND_DVAL_TO_LVAL_CAST_OK 1
EOF

  echo "$ac_t""yes" 1>&6

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  echo "$ac_t""no" 1>&6

fi
rm -fr conftest*
fi

	

for ac_hdr in dlfcn.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:106383: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 106388 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:106393: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking whether dlsym() requires a leading underscore in symbol names""... $ac_c" 1>&6
echo "configure:106421: checking whether dlsym() requires a leading underscore in symbol names" >&5
if test "$cross_compiling" = yes; then :
  
else
  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 106428 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }
  else
    puts (dlerror ());

    exit (status);
}
EOF
  if { (eval echo configure:106491: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) >&5 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) 
  echo "$ac_t""no" 1>&6
 ;;
      x$lt_dlneed_uscore) 
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DLSYM_NEEDS_UNDERSCORE 1
EOF

 ;;
      x$lt_dlunknown|x*) 
  echo "$ac_t""no" 1>&6
 ;;
    esac
  else :
    # compilation failed
    
  echo "$ac_t""no" 1>&6

  fi
fi
rm -fr conftest*




# Check whether --with-zend-vm or --without-zend-vm was given.
if test "${with_zend_vm+set}" = set; then
  withval="$with_zend_vm"
  
  PHP_ZEND_VM=$withval

else
  
  PHP_ZEND_VM=CALL

fi


# Check whether --enable-maintainer-zts or --disable-maintainer-zts was given.
if test "${enable_maintainer_zts+set}" = set; then
  enableval="$enable_maintainer_zts"
  
  ZEND_MAINTAINER_ZTS=$enableval

else
  
  ZEND_MAINTAINER_ZTS=no

fi
  

# Check whether --enable-inline-optimization or --disable-inline-optimization was given.
if test "${enable_inline_optimization+set}" = set; then
  enableval="$enable_inline_optimization"
  
  ZEND_INLINE_OPTIMIZATION=$enableval

else
  
  ZEND_INLINE_OPTIMIZATION=yes

fi


# Check whether --enable-zend-multibyte or --disable-zend-multibyte was given.
if test "${enable_zend_multibyte+set}" = set; then
  enableval="$enable_zend_multibyte"
  
  ZEND_MULTIBYTE=$enableval

else
  
  ZEND_MULTIBYTE=no

fi


echo $ac_n "checking virtual machine dispatch method""... $ac_c" 1>&6
echo "configure:106574: checking virtual machine dispatch method" >&5
echo "$ac_t""$PHP_ZEND_VM" 1>&6

echo $ac_n "checking whether to enable thread-safety""... $ac_c" 1>&6
echo "configure:106578: checking whether to enable thread-safety" >&5
echo "$ac_t""$ZEND_MAINTAINER_ZTS" 1>&6

echo $ac_n "checking whether to enable inline optimization for GCC""... $ac_c" 1>&6
echo "configure:106582: checking whether to enable inline optimization for GCC" >&5
echo "$ac_t""$ZEND_INLINE_OPTIMIZATION" 1>&6

echo $ac_n "checking whether to enable Zend debugging""... $ac_c" 1>&6
echo "configure:106586: checking whether to enable Zend debugging" >&5
echo "$ac_t""$ZEND_DEBUG" 1>&6

echo $ac_n "checking whether to enable Zend multibyte""... $ac_c" 1>&6
echo "configure:106590: checking whether to enable Zend multibyte" >&5
echo "$ac_t""$ZEND_MULTIBYTE" 1>&6

case $PHP_ZEND_VM in
  SWITCH)
    cat >> confdefs.h <<\EOF
#define ZEND_VM_KIND ZEND_VM_KIND_SWITCH
EOF

    ;;
  GOTO)
    cat >> confdefs.h <<\EOF
#define ZEND_VM_KIND ZEND_VM_KIND_GOTO
EOF

    ;;
  *)
    PHP_ZEND_VM=CALL
    cat >> confdefs.h <<\EOF
#define ZEND_VM_KIND ZEND_VM_KIND_CALL
EOF

    ;;
esac

if test "$ZEND_DEBUG" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZEND_DEBUG 1
EOF

  echo " $CFLAGS" | grep ' -g' >/dev/null || DEBUG_CFLAGS="-g"
  if test "$CFLAGS" = "-g -O2"; then
  	CFLAGS=-g
  fi
  test -n "$GCC" && DEBUG_CFLAGS="$DEBUG_CFLAGS -Wall"
  test -n "$GCC" && test "$USE_MAINTAINER_MODE" = "yes" && \
    DEBUG_CFLAGS="$DEBUG_CFLAGS -Wmissing-prototypes -Wstrict-prototypes -Wmissing-declarations"
else
  cat >> confdefs.h <<\EOF
#define ZEND_DEBUG 0
EOF

fi

test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"

if test "$ZEND_MAINTAINER_ZTS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZTS 1
EOF

  CFLAGS="$CFLAGS -DZTS"
  


fi  

if test "$ZEND_MULTIBYTE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZEND_MULTIBYTE 1
EOF

fi


if test -n "$GCC" && test "$ZEND_INLINE_OPTIMIZATION" != "yes"; then
  INLINE_CFLAGS=`echo $ac_n "$CFLAGS $ac_c" | sed s/-O[0-9s]*//`
else
  INLINE_CFLAGS="$CFLAGS"
fi


echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:106663: checking for inline" >&5
if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 106670 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:106677: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done

fi

echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) cat >> confdefs.h <<\EOF
#define inline 
EOF
 ;;
  *)  cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
 ;;
esac




echo $ac_n "checking target system is Darwin""... $ac_c" 1>&6
echo "configure:106706: checking target system is Darwin" >&5
if echo "$target" | grep "darwin" > /dev/null; then
  cat >> confdefs.h <<\EOF
#define DARWIN 1
EOF

  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for MM alignment and log values""... $ac_c" 1>&6
echo "configure:106718: checking for MM alignment and log values" >&5

if test "$cross_compiling" = yes; then
  
    LIBZEND_MM_ALIGN=8

else
  cat > conftest.$ac_ext <<EOF
#line 106726 "configure"
#include "confdefs.h"

#include <stdio.h>

typedef union _mm_align_test {
  void *ptr;
  double dbl;
  long lng;
} mm_align_test;

#if (defined (__GNUC__) && __GNUC__ >= 2)
#define ZEND_MM_ALIGNMENT (__alignof__ (mm_align_test))
#else
#define ZEND_MM_ALIGNMENT (sizeof(mm_align_test))
#endif

int main()
{
  int i = ZEND_MM_ALIGNMENT;
  int zeros = 0;
  FILE *fp;

  while (i & ~0x1) {
    zeros++;
    i = i >> 1;
  }

  fp = fopen("conftest.zend", "w");
  fprintf(fp, "%d %d\n", ZEND_MM_ALIGNMENT, zeros);  
  fclose(fp);

  exit(0);
}

EOF
if { (eval echo configure:106762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  LIBZEND_MM_ALIGN=`cat conftest.zend | cut -d ' ' -f 1`
  LIBZEND_MM_ALIGN_LOG2=`cat conftest.zend | cut -d ' ' -f 2`
  cat >> confdefs.h <<EOF
#define ZEND_MM_ALIGNMENT $LIBZEND_MM_ALIGN
EOF

  cat >> confdefs.h <<EOF
#define ZEND_MM_ALIGNMENT_LOG2 $LIBZEND_MM_ALIGN_LOG2
EOF
 

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -fr conftest*
fi


echo "$ac_t""done" 1>&6

echo $ac_n "checking for memory allocation using mmap(MAP_ANON)""... $ac_c" 1>&6
echo "configure:106787: checking for memory allocation using mmap(MAP_ANON)" >&5

if test "$cross_compiling" = yes; then
  
    echo "$ac_t""no" 1>&6

else
  cat > conftest.$ac_ext <<EOF
#line 106795 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <stdlib.h>
#include <stdio.h>
#ifndef MAP_ANON
# ifdef MAP_ANONYMOUS
#  define MAP_ANON MAP_ANONYMOUS
# endif
#endif
#ifndef MREMAP_MAYMOVE
# define MREMAP_MAYMOVE 0
#endif
#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

#define SEG_SIZE (256*1024)

int main()
{
	void *seg = mmap(NULL, SEG_SIZE, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANON, -1, 0);
	if (seg == MAP_FAILED) {
		return 1;
	}
	if (munmap(seg, SEG_SIZE) != 0) {
		return 2;
	}
	return 0;
}

EOF
if { (eval echo configure:106831: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  cat >> confdefs.h <<\EOF
#define HAVE_MEM_MMAP_ANON 1
EOF

  echo "$ac_t""yes" 1>&6

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  echo "$ac_t""no" 1>&6

fi
rm -fr conftest*
fi


echo $ac_n "checking for memory allocation using mmap("/dev/zero")""... $ac_c" 1>&6
echo "configure:106853: checking for memory allocation using mmap("/dev/zero")" >&5

if test "$cross_compiling" = yes; then
  
    echo "$ac_t""no" 1>&6

else
  cat > conftest.$ac_ext <<EOF
#line 106861 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <stdlib.h>
#include <stdio.h>
#ifndef MAP_ANON
# ifdef MAP_ANONYMOUS
#  define MAP_ANON MAP_ANONYMOUS
# endif
#endif
#ifndef MREMAP_MAYMOVE
# define MREMAP_MAYMOVE 0
#endif
#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

#define SEG_SIZE (256*1024)

int main()
{
	int fd;
	void *seg;

	fd = open("/dev/zero", O_RDWR, S_IRUSR | S_IWUSR);
	if (fd < 0) {
		return 1;
	}
	seg = mmap(NULL, SEG_SIZE, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0);
	if (seg == MAP_FAILED) {
		return 2;
	}
	if (munmap(seg, SEG_SIZE) != 0) {
		return 3;
	}
	if (close(fd) != 0) {
		return 4;
	}
	return 0;
}

EOF
if { (eval echo configure:106907: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  cat >> confdefs.h <<\EOF
#define HAVE_MEM_MMAP_ZERO 1
EOF

  echo "$ac_t""yes" 1>&6

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  echo "$ac_t""no" 1>&6

fi
rm -fr conftest*
fi


for ac_func in mremap
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:106931: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 106936 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:106959: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




if test "$ZEND_MAINTAINER_ZTS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZTS 1
EOF

  PHP_THREAD_SAFETY=yes
else
  PHP_THREAD_SAFETY=no
fi

INCLUDES="$INCLUDES -I\$(top_builddir)/TSRM"
INCLUDES="$INCLUDES -I\$(top_builddir)/Zend"

if test "$abs_srcdir" != "$abs_builddir"; then
  INCLUDES="$INCLUDES -I\$(top_srcdir)/main -I\$(top_srcdir)/Zend"
  INCLUDES="$INCLUDES -I\$(top_srcdir)/TSRM -I\$(top_builddir)/"
fi

ZEND_EXTRA_LIBS="$LIBS"
unset LIBS LDFLAGS


# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring TSRM${T_ME}" 1>&6




for ac_hdr in stdarg.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:107026: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 107031 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:107036: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



if test "$PHP_THREAD_SAFETY" = "yes"; then
  


# Check whether --with-tsrm-pth or --without-tsrm-pth was given.
if test "${with_tsrm_pth+set}" = set; then
  withval="$with_tsrm_pth"
  
  TSRM_PTH=$withval

else
  
  TSRM_PTH=no

fi


# Check whether --with-tsrm-st or --without-tsrm-st was given.
if test "${with_tsrm_st+set}" = set; then
  withval="$with_tsrm_st"
  
  TSRM_ST=$withval

else
  
  TSRM_ST=no

fi


# Check whether --with-tsrm-pthreads or --without-tsrm-pthreads was given.
if test "${with_tsrm_pthreads+set}" = set; then
  withval="$with_tsrm_pthreads"
  
  TSRM_PTHREADS=$withval

else
  
  TSRM_PTHREADS=yes

fi


test "$TSRM_PTH" = "yes" && TSRM_PTH=pth-config

if test "$TSRM_PTH" != "no"; then
  

echo $ac_n "checking for GNU Pth""... $ac_c" 1>&6
echo "configure:107113: checking for GNU Pth" >&5
PTH_PREFIX="`$TSRM_PTH --prefix`"
if test -z "$PTH_PREFIX"; then
  echo "$ac_t""Please check your Pth installation" 1>&6
fi

CPPFLAGS="$CPPFLAGS `$TSRM_PTH --cflags`"
LDFLAGS="$LDFLAGS `$TSRM_PTH --ldflags`"
LIBS="$LIBS `$TSRM_PTH --libs`"

cat >> confdefs.h <<\EOF
#define GNUPTH 1
EOF

echo "$ac_t""yes - installed in $PTH_PREFIX" 1>&6


elif test "$TSRM_ST" != "no"; then
  
  if test -r "$TSRM_ST/include/st.h"; then
    CPPFLAGS="$CPPFLAGS -I$TSRM_ST/include"
    LDFLAGS="$LDFLAGS -L$TSRM_ST/lib"
  elif test -r "$TSRM_ST/st.h"; then
    CPPFLAGS="$CPPFLAGS -I$TSRM_ST"
    LDFLAGS="$LDFLAGS -L$TSRM_ST"
  fi
  for ac_hdr in st.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:107143: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 107148 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:107153: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Sorry, I was unable to locate the State Threads header file.  Please specify the prefix using --with-tsrm-st=/prefix" 1>&2; exit 1; }
  
fi
done

  LIBS="$LIBS -lst"
  echo $ac_n "checking for SGI's State Threads""... $ac_c" 1>&6
echo "configure:107183: checking for SGI's State Threads" >&5
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define TSRM_ST 1
EOF


elif test "$TSRM_PTHREADS" != "no"; then
  
		


if test "$beos_threads" = "1"; then
  pthreads_working="yes"
  ac_cv_pthreads_cflags=""
else
  save_CFLAGS=$CFLAGS
  save_LIBS=$LIBS
  
if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi

  
if test "$cross_compiling" = yes; then
  
    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat > conftest.$ac_ext <<EOF
#line 107222 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:107240: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
  LIBS=$save_LIBS
  CFLAGS=$save_CFLAGS

  echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
echo "configure:107260: checking for pthreads_cflags" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  ac_cv_pthreads_cflags=
  if test "$pthreads_working" != "yes"; then
    for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do 
      ac_save=$CFLAGS
      CFLAGS="$CFLAGS $flag"
      
if test "$cross_compiling" = yes; then
  
    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat > conftest.$ac_ext <<EOF
#line 107282 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:107300: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
      CFLAGS=$ac_save
      if test "$pthreads_working" = "yes"; then
        ac_cv_pthreads_cflags=$flag
        break
      fi
    done
  fi
fi

fi

echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6

echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
echo "configure:107330: checking for pthreads_lib" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_lib=
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save=$LIBS
    LIBS="$LIBS -l$lib"
    
if test "$cross_compiling" = yes; then
  
    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat > conftest.$ac_ext <<EOF
#line 107352 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:107370: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
    LIBS=$ac_save
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib=$lib
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_lib" 1>&6

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX-Threads found"
else
  threads_result="POSIX-Threads not found"
fi


if test "$beos_threads" = "1"; then 
  cat >> confdefs.h <<\EOF
#define BETHREADS 1
EOF

else		
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: Your system seems to lack POSIX threads." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define PTHREADS 1
EOF


  echo $ac_n "checking for POSIX threads""... $ac_c" 1>&6
echo "configure:107421: checking for POSIX threads" >&5
  echo "$ac_t""yes" 1>&6
fi

fi


fi

EXTRA_LDFLAGS="$EXTRA_LDFLAGS $LDFLAGS"
EXTRA_LDFLAGS_PROGRAM="$EXTRA_LDFLAGS_PROGRAM $LDFLAGS"
EXTRA_LIBS="$EXTRA_LIBS $LIBS"
unset LIBS LDFLAGS

test "$prefix" = "NONE" && prefix=/usr/local
test "$exec_prefix" = "NONE" && exec_prefix='${prefix}'
test "$program_prefix" = "NONE" && program_prefix=
test "$program_suffix" = "NONE" && program_suffix=

case $libdir in
  '${exec_prefix}/lib')
    libdir=$libdir/php
    ;;
esac
case $datadir in
  '${prefix}/share')
    datadir=$datadir/php
    ;;
esac

phplibdir=`pwd`/modules
$php_shtool mkdir -p $phplibdir
phptempdir=`pwd`/libs

old_exec_prefix=$exec_prefix
old_libdir=$libdir
old_datadir=$datadir
exec_prefix=`eval echo $exec_prefix`
libdir=`eval echo $libdir`
datadir=`eval echo $datadir`


ZEND_MODULE_API_NO=`$EGREP '#define ZEND_MODULE_API_NO ' $srcdir/Zend/zend_modules.h|$SED 's/#define ZEND_MODULE_API_NO //'`

if test -z "$EXTENSION_DIR"; then
  extbasedir=$ZEND_MODULE_API_NO
  if test "$oldstyleextdir" = "yes"; then
    if test "$PHP_DEBUG" = "1"; then
      part1=debug
    else
      part1=no-debug
    fi
    if test "$enable_maintainer_zts" = "yes"; then
      part2=zts
    else
      part2=non-zts
    fi
    extbasedir=$part1-$part2-$extbasedir
    EXTENSION_DIR=$libdir/extensions/$extbasedir
  else
    if test "$enable_maintainer_zts" = "yes"; then
      extbasedir=$extbasedir-zts
    fi
    
    if test "$PHP_DEBUG" = "1"; then
      extbasedir=$extbasedir-debug
    fi
    EXTENSION_DIR=$libdir/$extbasedir
  fi
fi

case $PHP_LAYOUT in
  GNU)
    datarootdir=$prefix/share
    ;;
  *)
    datarootdir=$prefix/php
    ;;
esac

EXPANDED_PEAR_INSTALLDIR=`eval echo $PEAR_INSTALLDIR`
EXPANDED_EXTENSION_DIR=`eval echo $EXTENSION_DIR`
EXPANDED_LOCALSTATEDIR=`eval echo $localstatedir`
EXPANDED_BINDIR=`eval echo $bindir`
EXPANDED_SBINDIR=`eval echo $sbindir`
EXPANDED_MANDIR=`eval echo $mandir`
EXPANDED_LIBDIR=$libdir
EXPANDED_SYSCONFDIR=`eval echo $sysconfdir`
EXPANDED_DATADIR=$datadir
EXPANDED_PHP_CONFIG_FILE_PATH=`eval echo "$PHP_CONFIG_FILE_PATH"`
EXPANDED_PHP_CONFIG_FILE_SCAN_DIR=`eval echo "$PHP_CONFIG_FILE_SCAN_DIR"`
INCLUDE_PATH=.:$EXPANDED_PEAR_INSTALLDIR

exec_prefix=$old_exec_prefix
libdir=$old_libdir
datadir=$old_datadir














if test -n "$php_ldflags_add_usr_lib"; then
  PHP_RPATHS="$PHP_RPATHS /usr/lib"
fi


  OLD_RPATHS=$PHP_RPATHS
  unset PHP_RPATHS

  for i in $OLD_RPATHS; do
    PHP_LDFLAGS="$PHP_LDFLAGS -L$i"
    PHP_RPATHS="$PHP_RPATHS -R $i"
    NATIVE_RPATHS="$NATIVE_RPATHS $ld_runpath_switch$i"
  done

  if test "$PHP_RPATH" = "no"; then
    unset PHP_RPATHS
    unset NATIVE_RPATHS
  fi


if test -z "$php_ldflags_add_usr_lib"; then
  
  unset ac_new_flags
  for i in $PHP_LDFLAGS; do
    case $i in
    -L/usr/$PHP_LIBDIR|-L/usr/$PHP_LIBDIR/) ;;
    *) ac_new_flags="$ac_new_flags $i" ;;
    esac
  done
  PHP_LDFLAGS=$ac_new_flags

  
  unset ac_new_flags
  for i in $LDFLAGS; do
    case $i in
    -L/usr/$PHP_LIBDIR|-L/usr/$PHP_LIBDIR/) ;;
    *) ac_new_flags="$ac_new_flags $i" ;;
    esac
  done
  LDFLAGS=$ac_new_flags

fi

EXTRA_LDFLAGS="$EXTRA_LDFLAGS $PHP_LDFLAGS"
EXTRA_LDFLAGS_PROGRAM="$EXTRA_LDFLAGS_PROGRAM $PHP_LDFLAGS"

PHP_BUILD_DATE=`date '+%Y-%m-%d'`
cat >> confdefs.h <<EOF
#define PHP_BUILD_DATE "$PHP_BUILD_DATE"
EOF


case $host_alias in
*netware*)
  PHP_OS="NetWare"
  PHP_UNAME="NetWare"
  cat >> confdefs.h <<EOF
#define PHP_OS "$PHP_OS"
EOF

  cat >> confdefs.h <<EOF
#define PHP_UNAME "$PHP_UNAME"
EOF

  ;;
*)
  PHP_UNAME=`uname -a | xargs`
  cat >> confdefs.h <<EOF
#define PHP_UNAME "$PHP_UNAME"
EOF

  PHP_OS=`uname | xargs`
  cat >> confdefs.h <<EOF
#define PHP_OS "$PHP_OS"
EOF

  ;;
esac

if test "$PHP_CLI" != "no"; then
  PHP_CLI_TARGET="\$(SAPI_CLI_PATH)"
  PHP_INSTALL_CLI_TARGET="install-cli"
  
  
  case sapi/cli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/cli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/cli/"; ac_bdir="sapi/cli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_cli.c php_cli_readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


  PHP_INSTALLED_SAPIS="cli $PHP_SAPI"
  PHP_EXECUTABLE="\$(top_builddir)/\$(SAPI_CLI_PATH)"
else
  PHP_INSTALLED_SAPIS="$PHP_SAPI"
fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_INSTALLED_SAPIS"

  



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_EXECUTABLE"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_CLI_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_SAPI_OBJS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_CLI_OBJS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_GLOBAL_OBJS"



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MODULES"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_ZEND_EX"



  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_LIBS"



  
  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_builddir"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_srcdir"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_abs_top_builddir"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_abs_top_srcdir"

  



  PHP_VAR_SUBST="$PHP_VAR_SUBST bindir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST sbindir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST exec_prefix"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST program_prefix"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST program_suffix"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST includedir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST libdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST mandir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST phplibdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST phptempdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST prefix"


  PHP_VAR_SUBST="$PHP_VAR_SUBST localstatedir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST datadir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST datarootdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST sysconfdir"



  PHP_VAR_SUBST="$PHP_VAR_SUBST EXEEXT"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CC"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CFLAGS_CLEAN"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPP"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPPFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXX"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXXFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXXFLAGS_CLEAN"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DEBUG_CFLAGS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTENSION_DIR"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LDFLAGS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LDFLAGS_PROGRAM"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LIBS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ZEND_EXTRA_LIBS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDES"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_INCLUDES"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDE_PATH"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_IT"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST LFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LIBTOOL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LN_S"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST NATIVE_RPATHS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PEAR_INSTALLDIR"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_BUILD_DATE"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LDFLAGS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LIBS"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST OVERALL_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_RPATHS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_SAPI"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_VERSION"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_VERSION_ID"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST SHELL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST SHARED_LIBTOOL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST WARNING_LEVEL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_FRAMEWORKS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_FRAMEWORKPATH"


  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_HEADERS"


old_CC=$CC

if test "$PHP_THREAD_SAFETY" = "yes" && test -n "$ac_cv_pthreads_cflags"; then
  CXXFLAGS="$CXXFLAGS $ac_cv_pthreads_cflags"
  INLINE_CFLAGS="$INLINE_CFLAGS $ac_cv_pthreads_cflags"
  cat >meta_ccld<<EOF
#! /bin/sh
exec $CC $ac_cv_pthreads_cflags \$@
EOF
  CC="$abs_builddir/meta_ccld"
  chmod +x meta_ccld
fi

if test "$PHP_THREAD_SAFETY" = "yes" && test "$PHP_MYSQL" = "yes"; then
  CPPFLAGS="$CPPFLAGS -DTHREAD=1"
fi

ZEND_EXT_TYPE="zend_extension"

  PHP_VAR_SUBST="$PHP_VAR_SUBST ZEND_EXT_TYPE"




# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring libtool${T_ME}" 1>&6


LDFLAGS="$LDFLAGS $PHP_AIX_LDFLAGS"

case $host_alias in
*darwin9*|*darwin10*|*darwin11*|*darwin12*)
  ac_cv_exeext=
  ;;
esac


# Check whether --enable-shared or --disable-shared was given.
if test "${enable_shared+set}" = set; then
  enableval="$enable_shared"
      p=${PACKAGE-default}
    case $enableval in
    yes) enable_shared=yes ;;
    no) enable_shared=no ;;
    *)
      enable_shared=no
      # Look at the argument we got.  We use all the common list separators.
      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
      for pkg in $enableval; do
	IFS="$lt_save_ifs"
	if test "X$pkg" = "X$p"; then
	  enable_shared=yes
	fi
      done
      IFS="$lt_save_ifs"
      ;;
    esac
else
  enable_shared=yes
fi


# Check whether --enable-static or --disable-static was given.
if test "${enable_static+set}" = set; then
  enableval="$enable_static"
      p=${PACKAGE-default}
    case $enableval in
    yes) enable_static=yes ;;
    no) enable_static=no ;;
    *)
     enable_static=no
      # Look at the argument we got.  We use all the common list separators.
      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
      for pkg in $enableval; do
	IFS="$lt_save_ifs"
	if test "X$pkg" = "X$p"; then
	  enable_static=yes
	fi
      done
      IFS="$lt_save_ifs"
      ;;
    esac
else
  enable_static=yes
fi


# Check whether --enable-fast-install or --disable-fast-install was given.
if test "${enable_fast_install+set}" = set; then
  enableval="$enable_fast_install"
      p=${PACKAGE-default}
    case $enableval in
    yes) enable_fast_install=yes ;;
    no) enable_fast_install=no ;;
    *)
      enable_fast_install=no
      # Look at the argument we got.  We use all the common list separators.
      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
      for pkg in $enableval; do
	IFS="$lt_save_ifs"
	if test "X$pkg" = "X$p"; then
	  enable_fast_install=yes
	fi
      done
      IFS="$lt_save_ifs"
      ;;
    esac
else
  enable_fast_install=yes
fi


echo $ac_n "checking build system type""... $ac_c" 1>&6
echo "configure:108057: checking build system type" >&5

build_alias=$build
case "$build_alias" in
NONE)
  case $nonopt in
  NONE) build_alias=$host_alias ;;
  *) build_alias=$nonopt ;;
  esac ;;
esac

build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$build" 1>&6

# Check whether --with-gnu-ld or --without-gnu-ld was given.
if test "${with_gnu_ld+set}" = set; then
  withval="$with_gnu_ld"
  test "$withval" = no || with_gnu_ld=yes
else
  with_gnu_ld=no
fi

ac_prog=ld
if test "$GCC" = yes; then
  # Check if gcc -print-prog-name=ld gives a path.
  echo $ac_n "checking for ld used by $CC""... $ac_c" 1>&6
echo "configure:108086: checking for ld used by $CC" >&5
  case $host in
  *-*-mingw*)
    # gcc leaves a trailing carriage return which upsets mingw
    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\015'` ;;
  *)
    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;
  esac
  case $ac_prog in
    # Accept absolute paths.
    [\\/]* | ?:[\\/]*)
      re_direlt='/[^/][^/]*/\.\./'
      # Canonicalize the pathname of ld
      ac_prog=`echo $ac_prog| $SED 's%\\\\%/%g'`
      while echo $ac_prog | grep "$re_direlt" > /dev/null 2>&1; do
	ac_prog=`echo $ac_prog| $SED "s%$re_direlt%/%"`
      done
      test -z "$LD" && LD="$ac_prog"
      ;;
  "")
    # If it fails, then pretend we aren't using GCC.
    ac_prog=ld
    ;;
  *)
    # If it is relative, then search for the first ld in PATH.
    with_gnu_ld=unknown
    ;;
  esac
elif test "$with_gnu_ld" = yes; then
  echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
echo "configure:108116: checking for GNU ld" >&5
else
  echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
echo "configure:108119: checking for non-GNU ld" >&5
fi
if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -z "$LD"; then
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for ac_dir in $PATH; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f "$ac_dir/$ac_prog" || test -f "$ac_dir/$ac_prog$ac_exeext"; then
      lt_cv_path_LD="$ac_dir/$ac_prog"
      # Check to see if the program is GNU ld.  I'd rather use --version,
      # but apparently some variants of GNU ld only accept -v.
      # Break only if it was the GNU/non-GNU ld that we prefer.
      case `"$lt_cv_path_LD" -v 2>&1 </dev/null` in
      *GNU* | *'with BFD'*)
	test "$with_gnu_ld" != no && break
	;;
      *)
	test "$with_gnu_ld" != yes && break
	;;
      esac
    fi
  done
  IFS="$lt_save_ifs"
else
  lt_cv_path_LD="$LD" # Let the user override the test with a path.
fi
fi

LD="$lt_cv_path_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
echo "configure:108158: checking if the linker ($LD) is GNU ld" >&5
if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # I'd rather use --version here, but apparently some GNU lds only accept -v.
case `$LD -v 2>&1 </dev/null` in
*GNU* | *'with BFD'*)
  lt_cv_prog_gnu_ld=yes
  ;;
*)
  lt_cv_prog_gnu_ld=no
  ;;
esac
fi

echo "$ac_t""$lt_cv_prog_gnu_ld" 1>&6
with_gnu_ld=$lt_cv_prog_gnu_ld


echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
echo "configure:108178: checking for $LD option to reload object files" >&5
if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_ld_reload_flag='-r'
fi

echo "$ac_t""$lt_cv_ld_reload_flag" 1>&6
reload_flag=$lt_cv_ld_reload_flag
case $reload_flag in
"" | " "*) ;;
*) reload_flag=" $reload_flag" ;;
esac
reload_cmds='$LD$reload_flag -o $output$reload_objs'
case $host_os in
  darwin*)
    if test "$GCC" = yes; then
      reload_cmds='$LTCC $LTCFLAGS -nostdlib ${wl}-r -o $output$reload_objs'
    else
      reload_cmds='$LD$reload_flag -o $output$reload_objs'
    fi
    ;;
esac

echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
echo "configure:108203: checking for BSD-compatible nm" >&5
if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$NM"; then
  # Let the user override the test.
  lt_cv_path_NM="$NM"
else
  lt_nm_to_check="${ac_tool_prefix}nm"
  if test -n "$ac_tool_prefix" && test "$build" = "$host"; then
    lt_nm_to_check="$lt_nm_to_check nm"
  fi
  for lt_tmp_nm in $lt_nm_to_check; do
    lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
    for ac_dir in $PATH /usr/ccs/bin/elf /usr/ccs/bin /usr/ucb /bin; do
      IFS="$lt_save_ifs"
      test -z "$ac_dir" && ac_dir=.
      tmp_nm="$ac_dir/$lt_tmp_nm"
      if test -f "$tmp_nm" || test -f "$tmp_nm$ac_exeext" ; then
	# Check to see if the nm accepts a BSD-compat flag.
	# Adding the `sed 1q' prevents false positives on HP-UX, which says:
	#   nm: unknown option "B" ignored
	# Tru64's nm complains that /dev/null is an invalid object file
	case `"$tmp_nm" -B /dev/null 2>&1 | sed '1q'` in
	*/dev/null* | *'Invalid file or object type'*)
	  lt_cv_path_NM="$tmp_nm -B"
	  break
	  ;;
	*)
	  case `"$tmp_nm" -p /dev/null 2>&1 | sed '1q'` in
	  */dev/null*)
	    lt_cv_path_NM="$tmp_nm -p"
	    break
	    ;;
	  *)
	    lt_cv_path_NM=${lt_cv_path_NM="$tmp_nm"} # keep the first match, but
	    continue # so that we can try to find one that supports BSD flags
	    ;;
	  esac
	  ;;
	esac
      fi
    done
    IFS="$lt_save_ifs"
  done
  test -z "$lt_cv_path_NM" && lt_cv_path_NM=nm
fi
fi

echo "$ac_t""$lt_cv_path_NM" 1>&6
NM="$lt_cv_path_NM"

echo $ac_n "checking how to recognize dependent libraries""... $ac_c" 1>&6
echo "configure:108256: checking how to recognize dependent libraries" >&5
if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_file_magic_cmd='$MAGIC_CMD'
lt_cv_file_magic_test_file=
lt_cv_deplibs_check_method='unknown'
# Need to set the preceding variable on all platforms that support
# interlibrary dependencies.
# 'none' -- dependencies not supported.
# `unknown' -- same as none, but documents that we really don't know.
# 'pass_all' -- all dependencies passed with no checks.
# 'test_compile' -- check by making test program.
# 'file_magic [[regex]]' -- check by looking for files in library path
# which responds to the $file_magic_cmd with a given extended regex.
# If you have `file' or equivalent on your system and you're not sure
# whether `pass_all' will *always* work, you probably want this one.

case $host_os in
aix[4-9]*)
  lt_cv_deplibs_check_method=pass_all
  ;;

beos*)
  lt_cv_deplibs_check_method=pass_all
  ;;

bsdi[45]*)
  lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib)'
  lt_cv_file_magic_cmd='/usr/bin/file -L'
  lt_cv_file_magic_test_file=/shlib/libc.so
  ;;

cygwin*)
  # func_win32_libid is a shell function defined in ltmain.sh
  lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
  lt_cv_file_magic_cmd='func_win32_libid'
  ;;

mingw* | pw32*)
  # Base MSYS/MinGW do not provide the 'file' command needed by
  # func_win32_libid shell function, so use a weaker test based on 'objdump',
  # unless we find 'file', for example because we are cross-compiling.
  if ( file / ) >/dev/null 2>&1; then
    lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
    lt_cv_file_magic_cmd='func_win32_libid'
  else
    lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'
    lt_cv_file_magic_cmd='$OBJDUMP -f'
  fi
  ;;

darwin* | rhapsody*)
  lt_cv_deplibs_check_method=pass_all
  ;;

freebsd* | dragonfly*)
  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
    case $host_cpu in
    i*86 )
      # Not sure whether the presence of OpenBSD here was a mistake.
      # Let's accept both of them until this is cleared up.
      lt_cv_deplibs_check_method='file_magic (FreeBSD|OpenBSD|DragonFly)/i[3-9]86 (compact )?demand paged shared library'
      lt_cv_file_magic_cmd=/usr/bin/file
      lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
      ;;
    esac
  else
    lt_cv_deplibs_check_method=pass_all
  fi
  ;;

gnu*)
  lt_cv_deplibs_check_method=pass_all
  ;;

hpux10.20* | hpux11*)
  lt_cv_file_magic_cmd=/usr/bin/file
  case $host_cpu in
  ia64*)
    lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - IA64'
    lt_cv_file_magic_test_file=/usr/lib/hpux32/libc.so
    ;;
  hppa*64*)
    lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - PA-RISC [0-9].[0-9]'
    lt_cv_file_magic_test_file=/usr/lib/pa20_64/libc.sl
    ;;
  *)
    lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|PA-RISC[0-9].[0-9]) shared library'
    lt_cv_file_magic_test_file=/usr/lib/libc.sl
    ;;
  esac
  ;;

interix[3-9]*)
  # PIC code is broken on Interix 3.x, that's why |\.a not |_pic\.a here
  lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so|\.a)$'
  ;;

irix5* | irix6* | nonstopux*)
  case $LD in
  *-32|*"-32 ") libmagic=32-bit;;
  *-n32|*"-n32 ") libmagic=N32;;
  *-64|*"-64 ") libmagic=64-bit;;
  *) libmagic=never-match;;
  esac
  lt_cv_deplibs_check_method=pass_all
  ;;

# This must be Linux ELF.
linux* | k*bsd*-gnu)
  lt_cv_deplibs_check_method=pass_all
  ;;

netbsd*)
  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|_pic\.a)$'
  else
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so|_pic\.a)$'
  fi
  ;;

newos6*)
  lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (executable|dynamic lib)'
  lt_cv_file_magic_cmd=/usr/bin/file
  lt_cv_file_magic_test_file=/usr/lib/libnls.so
  ;;

nto-qnx*)
  lt_cv_deplibs_check_method=unknown
  ;;

openbsd*)
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|\.so|_pic\.a)$'
  else
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|_pic\.a)$'
  fi
  ;;

osf3* | osf4* | osf5*)
  lt_cv_deplibs_check_method=pass_all
  ;;

rdos*)
  lt_cv_deplibs_check_method=pass_all
  ;;

solaris*)
  lt_cv_deplibs_check_method=pass_all
  ;;

sysv4 | sysv4.3*)
  case $host_vendor in
  motorola)
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib) M[0-9][0-9]* Version [0-9]'
    lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`
    ;;
  ncr)
    lt_cv_deplibs_check_method=pass_all
    ;;
  sequent)
    lt_cv_file_magic_cmd='/bin/file'
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB (shared object|dynamic lib )'
    ;;
  sni)
    lt_cv_file_magic_cmd='/bin/file'
    lt_cv_deplibs_check_method="file_magic ELF [0-9][0-9]*-bit [LM]SB dynamic lib"
    lt_cv_file_magic_test_file=/lib/libc.so
    ;;
  siemens)
    lt_cv_deplibs_check_method=pass_all
    ;;
  pc)
    lt_cv_deplibs_check_method=pass_all
    ;;
  esac
  ;;

sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
  lt_cv_deplibs_check_method=pass_all
  ;;
esac

fi

echo "$ac_t""$lt_cv_deplibs_check_method" 1>&6
file_magic_cmd=$lt_cv_file_magic_cmd
deplibs_check_method=$lt_cv_deplibs_check_method
test -z "$deplibs_check_method" && deplibs_check_method=unknown

echo $ac_n "checking for object suffix""... $ac_c" 1>&6
echo "configure:108448: checking for object suffix" >&5
if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftest*
echo 'int i = 1;' > conftest.$ac_ext
if { (eval echo configure:108454: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  for ac_file in conftest.*; do
    case $ac_file in
    *.c) ;;
    *) ac_cv_objext=`echo $ac_file | sed -e s/conftest.//` ;;
    esac
  done
else
  { echo "configure: error: installation or configuration problem; compiler does not work" 1>&2; exit 1; }
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_objext" 1>&6
OBJEXT=$ac_cv_objext
ac_objext=$ac_cv_objext



echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
echo "configure:108474: checking for executable suffix" >&5
if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$CYGWIN" = yes || test "$MINGW32" = yes; then
  ac_cv_exeext=.exe
else
  rm -f conftest*
  echo 'int main () { return 0; }' > conftest.$ac_ext
  ac_cv_exeext=
  if { (eval echo configure:108484: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
    for file in conftest.*; do
      case $file in
      *.c | *.o | *.obj) ;;
      *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
      esac
    done
  else
    { echo "configure: error: installation or configuration problem: compiler cannot create executables." 1>&2; exit 1; }
  fi
  rm -f conftest*
  test x"${ac_cv_exeext}" = x && ac_cv_exeext=no
fi
fi

EXEEXT=""
test x"${ac_cv_exeext}" != xno && EXEEXT=${ac_cv_exeext}
echo "$ac_t""${ac_cv_exeext}" 1>&6
ac_exeext=$EXEEXT


# If no C compiler was specified, use CC.
LTCC=${LTCC-"$CC"}

# If no C compiler flags were specified, use CFLAGS.
LTCFLAGS=${LTCFLAGS-"$CFLAGS"}

# Allow CC to be a program name with arguments.
compiler=$CC

if test $host != $build; then
  ac_tool_prefix=${host_alias}-
else
  ac_tool_prefix=
fi

#AC_ARG_ENABLE([libtool-lock],
#[  --disable-libtool-lock  avoid locking (might break parallel builds)])
#test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes

# Some flags need to be propagated to the compiler or linker for good
# libtool support.
case $host in
ia64-*-hpux*)
  # Find out which ABI we are using.
  echo 'int i;' > conftest.$ac_ext
  if { (eval echo configure:108530: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    case `/usr/bin/file conftest.$ac_objext` in
    *ELF-32*)
      HPUX_IA64_MODE="32"
      ;;
    *ELF-64*)
      HPUX_IA64_MODE="64"
      ;;
    esac
  fi
  rm -rf conftest*
  ;;
*-*-irix6*)
  # Find out which ABI we are using.
  echo '#line 108544 "configure"' > conftest.$ac_ext
  if { (eval echo configure:108545: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   if test "$lt_cv_prog_gnu_ld" = yes; then
    case `/usr/bin/file conftest.$ac_objext` in
    *32-bit*)
      LD="${LD-ld} -melf32bsmip"
      ;;
    *N32*)
      LD="${LD-ld} -melf32bmipn32"
      ;;
    *64-bit*)
      LD="${LD-ld} -melf64bmip"
      ;;
    esac
   else
    case `/usr/bin/file conftest.$ac_objext` in
    *32-bit*)
      LD="${LD-ld} -32"
      ;;
    *N32*)
      LD="${LD-ld} -n32"
      ;;
    *64-bit*)
      LD="${LD-ld} -64"
      ;;
    esac
   fi
  fi
  rm -rf conftest*
  ;;

x86_64-*kfreebsd*-gnu|x86_64-*linux*|ppc*-*linux*|powerpc*-*linux*| \
s390*-*linux*|sparc*-*linux*)
  # Find out which ABI we are using.
  echo 'int i;' > conftest.$ac_ext
  if { (eval echo configure:108579: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    case `/usr/bin/file conftest.o` in
    *32-bit*)
      case $host in
        x86_64-*kfreebsd*-gnu)
          LD="${LD-ld} -m elf_i386_fbsd"
          ;;
        x86_64-*linux*)
          LD="${LD-ld} -m elf_i386"
          ;;
        ppc64-*linux*|powerpc64-*linux*)
          LD="${LD-ld} -m elf32ppclinux"
          ;;
        s390x-*linux*)
          LD="${LD-ld} -m elf_s390"
          ;;
        sparc64-*linux*)
          LD="${LD-ld} -m elf32_sparc"
          ;;
      esac
      ;;
    *64-bit*)
      case $host in
        x86_64-*kfreebsd*-gnu)
          LD="${LD-ld} -m elf_x86_64_fbsd"
          ;;
        x86_64-*linux*)
          LD="${LD-ld} -m elf_x86_64"
          ;;
        ppc*-*linux*|powerpc*-*linux*)
          LD="${LD-ld} -m elf64ppc"
          ;;
        s390*-*linux*)
          LD="${LD-ld} -m elf64_s390"
          ;;
        sparc*-*linux*)
          LD="${LD-ld} -m elf64_sparc"
          ;;
      esac
      ;;
    esac
  fi
  rm -rf conftest*
  ;;

*-*-sco3.2v5*)
  # On SCO OpenServer 5, we need -belf to get full-featured binaries.
  SAVE_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -belf"
  echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
echo "configure:108629: checking whether the C compiler needs -belf" >&5
if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
     ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

     cat > conftest.$ac_ext <<EOF
#line 108642 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:108649: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  lt_cv_cc_needs_belf=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  lt_cv_cc_needs_belf=no
fi
rm -f conftest*
     ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi

echo "$ac_t""$lt_cv_cc_needs_belf" 1>&6
  if test x"$lt_cv_cc_needs_belf" != x"yes"; then
    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
    CFLAGS="$SAVE_CFLAGS"
  fi
  ;;
sparc*-*solaris*)
  # Find out which ABI we are using.
  echo 'int i;' > conftest.$ac_ext
  if { (eval echo configure:108677: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    case `/usr/bin/file conftest.o` in
    *64-bit*)
      case $lt_cv_prog_gnu_ld in
      yes*) LD="${LD-ld} -m elf64_sparc" ;;
      *)
        if ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then
	  LD="${LD-ld} -64"
	fi
	;;
      esac
      ;;
    esac
  fi
  rm -rf conftest*
  ;;


esac

need_locks="$enable_libtool_lock"




if test -n "$CXX" && ( test "X$CXX" != "Xno" &&
    ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
    (test "X$CXX" != "Xg++"))) ; then
  echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
echo "configure:108706: checking how to run the C++ preprocessor" >&5
if test -z "$CXXCPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross
  CXXCPP="${CXX-g++} -E"
  cat > conftest.$ac_ext <<EOF
#line 108719 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:108724: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CXXCPP=/lib/cpp
fi
rm -f conftest*
  ac_cv_prog_CXXCPP="$CXXCPP"
ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross
fi
fi
CXXCPP="$ac_cv_prog_CXXCPP"
echo "$ac_t""$CXXCPP" 1>&6

fi


# Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!
# find the maximum length of command line arguments
echo $ac_n "checking the maximum length of command line arguments""... $ac_c" 1>&6
echo "configure:108754: checking the maximum length of command line arguments" >&5
if eval "test \"`echo '$''{'lt_cv_sys_max_cmd_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    i=0
  teststring="ABCD"

  case $build_os in
  msdosdjgpp*)
    # On DJGPP, this test can blow up pretty badly due to problems in libc
    # (any single argument exceeding 2000 bytes causes a buffer overrun
    # during glob expansion).  Even if it were fixed, the result of this
    # check would be larger than it should be.
    lt_cv_sys_max_cmd_len=12288;    # 12K is about right
    ;;

  gnu*)
    # Under GNU Hurd, this test is not required because there is
    # no limit to the length of command line arguments.
    # Libtool will interpret -1 as no limit whatsoever
    lt_cv_sys_max_cmd_len=-1;
    ;;

  cygwin* | mingw*)
    # On Win9x/ME, this test blows up -- it succeeds, but takes
    # about 5 minutes as the teststring grows exponentially.
    # Worse, since 9x/ME are not pre-emptively multitasking,
    # you end up with a "frozen" computer, even though with patience
    # the test eventually succeeds (with a max line length of 256k).
    # Instead, let's just punt: use the minimum linelength reported by
    # all of the supported platforms: 8192 (on NT/2K/XP).
    lt_cv_sys_max_cmd_len=8192;
    ;;

  amigaos*)
    # On AmigaOS with pdksh, this test takes hours, literally.
    # So we just punt and use a minimum line length of 8192.
    lt_cv_sys_max_cmd_len=8192;
    ;;

  netbsd* | freebsd* | openbsd* | darwin* | dragonfly*)
    # This has been around since 386BSD, at least.  Likely further.
    if test -x /sbin/sysctl; then
      lt_cv_sys_max_cmd_len=`/sbin/sysctl -n kern.argmax`
    elif test -x /usr/sbin/sysctl; then
      lt_cv_sys_max_cmd_len=`/usr/sbin/sysctl -n kern.argmax`
    else
      lt_cv_sys_max_cmd_len=65536	# usable default for all BSDs
    fi
    # And add a safety zone
    lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
    lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
    ;;

  interix*)
    # We know the value 262144 and hardcode it with a safety zone (like BSD)
    lt_cv_sys_max_cmd_len=196608
    ;;

  osf*)
    # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure
    # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not
    # nice to cause kernel panics so lets avoid the loop below.
    # First set a reasonable default.
    lt_cv_sys_max_cmd_len=16384
    #
    if test -x /sbin/sysconfig; then
      case `/sbin/sysconfig -q proc exec_disable_arg_limit` in
        *1*) lt_cv_sys_max_cmd_len=-1 ;;
      esac
    fi
    ;;
  sco3.2v5*)
    lt_cv_sys_max_cmd_len=102400
    ;;
  sysv5* | sco5v6* | sysv4.2uw2*)
    kargmax=`grep ARG_MAX /etc/conf/cf.d/stune 2>/dev/null`
    if test -n "$kargmax"; then
      lt_cv_sys_max_cmd_len=`echo $kargmax | sed 's/.*[ 	]//'`
    else
      lt_cv_sys_max_cmd_len=32768
    fi
    ;;
  *)
    lt_cv_sys_max_cmd_len=`(getconf ARG_MAX) 2> /dev/null`
    if test -n "$lt_cv_sys_max_cmd_len"; then
      lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
      lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
    else
      SHELL=${SHELL-${CONFIG_SHELL-/bin/sh}}
      while (test "X"`$SHELL $0 --fallback-echo "X$teststring" 2>/dev/null` \
	       = "XX$teststring") >/dev/null 2>&1 &&
	      new_result=`expr "X$teststring" : ".*" 2>&1` &&
	      lt_cv_sys_max_cmd_len=$new_result &&
	      test $i != 17 # 1/2 MB should be enough
      do
        i=`expr $i + 1`
        teststring=$teststring$teststring
      done
      teststring=
      # Add a significant safety factor because C++ compilers can tack on massive
      # amounts of additional arguments before passing them to the linker.
      # It appears as though 1/2 is a usable value.
      lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 2`
    fi
    ;;
  esac

fi

if test -n $lt_cv_sys_max_cmd_len ; then
  echo "$ac_t""$lt_cv_sys_max_cmd_len" 1>&6
else
  echo "$ac_t""none" 1>&6
fi





# Check for command to grab the raw symbol name followed by C symbol from nm.
echo $ac_n "checking command to parse $NM output from $compiler object""... $ac_c" 1>&6
echo "configure:108876: checking command to parse $NM output from $compiler object" >&5
if eval "test \"`echo '$''{'lt_cv_sys_global_symbol_pipe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
# These are sane defaults that work on at least a few old systems.
# [They come from Ultrix.  What could be older than Ultrix?!! ;)]

# Character class describing NM global symbol codes.
symcode='[BCDEGRST]'

# Regexp to match symbols that can be accessed directly from C.
sympat='\([_A-Za-z][_A-Za-z0-9]*\)'

# Transform an extracted symbol line into a proper C declaration
lt_cv_sys_global_symbol_to_cdecl="sed -n -e 's/^. .* \(.*\)$/extern int \1;/p'"

# Transform an extracted symbol line into symbol name and symbol address
lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"

# Define system-specific variables.
case $host_os in
aix*)
  symcode='[BCDT]'
  ;;
cygwin* | mingw* | pw32*)
  symcode='[ABCDGISTW]'
  ;;
hpux*) # Its linker distinguishes data from code symbols
  if test "$host_cpu" = ia64; then
    symcode='[ABCDEGRST]'
  fi
  lt_cv_sys_global_symbol_to_cdecl="sed -n -e 's/^T .* \(.*\)$/extern int \1();/p' -e 's/^$symcode* .* \(.*\)$/extern char \1;/p'"
  lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"
  ;;
linux* | k*bsd*-gnu)
  if test "$host_cpu" = ia64; then
    symcode='[ABCDGIRSTW]'
    lt_cv_sys_global_symbol_to_cdecl="sed -n -e 's/^T .* \(.*\)$/extern int \1();/p' -e 's/^$symcode* .* \(.*\)$/extern char \1;/p'"
    lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"
  fi
  ;;
irix* | nonstopux*)
  symcode='[BCDEGRST]'
  ;;
osf*)
  symcode='[BCDEGQRST]'
  ;;
solaris*)
  symcode='[BDRT]'
  ;;
sco3.2v5*)
  symcode='[DT]'
  ;;
sysv4.2uw2*)
  symcode='[DT]'
  ;;
sysv5* | sco5v6* | unixware* | OpenUNIX*)
  symcode='[ABDT]'
  ;;
sysv4)
  symcode='[DFNSTU]'
  ;;
esac

# Handle CRLF in mingw tool chain
opt_cr=
case $build_os in
mingw*)
  opt_cr=`echo 'x\{0,1\}' | tr x '\015'` # option cr in regexp
  ;;
esac

# If we're using GNU nm, then use its standard symbol codes.
case `$NM -V 2>&1` in
*GNU* | *'with BFD'*)
  symcode='[ABCDGIRSTW]' ;;
esac

# Try without a prefix undercore, then with it.
for ac_symprfx in "" "_"; do

  # Transform symcode, sympat, and symprfx into a raw symbol and a C symbol.
  symxfrm="\\1 $ac_symprfx\\2 \\2"

  # Write the raw and C identifiers.
  lt_cv_sys_global_symbol_pipe="sed -n -e 's/^.*[ 	]\($symcode$symcode*\)[ 	][ 	]*$ac_symprfx$sympat$opt_cr$/$symxfrm/p'"

  # Check to see that the pipe works correctly.
  pipe_works=no

  rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#ifdef __cplusplus
extern "C" {
#endif
char nm_test_var;
void nm_test_func(){}
#ifdef __cplusplus
}
#endif
int main(){nm_test_var='a';nm_test_func();return(0);}
EOF

  if { (eval echo configure:108980: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    # Now try to grab the symbols.
    nlist=conftest.nm
    if { (eval echo configure:108983: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
      # Try sorting and uniquifying the output.
      if sort "$nlist" | uniq > "$nlist"T; then
	mv -f "$nlist"T "$nlist"
      else
	rm -f "$nlist"T
      fi

      # Make sure that we snagged all the symbols we need.
      if grep ' nm_test_var$' "$nlist" >/dev/null; then
	if grep ' nm_test_func$' "$nlist" >/dev/null; then
	  cat <<EOF > conftest.$ac_ext
#ifdef __cplusplus
extern "C" {
#endif

EOF
	  # Now generate the symbol file.
	  eval "$lt_cv_sys_global_symbol_to_cdecl"' < "$nlist" | grep -v main >> conftest.$ac_ext'

	  cat <<EOF >> conftest.$ac_ext
#if defined (__STDC__) && __STDC__
# define lt_ptr_t void *
#else
# define lt_ptr_t char *
# define const
#endif

/* The mapping between symbol names and symbols. */
const struct {
  const char *name;
  lt_ptr_t address;
}
lt_preloaded_symbols[] =
{
EOF
	  $SED "s/^$symcode$symcode* \(.*\) \(.*\)$/  {\"\2\", (lt_ptr_t) \&\2},/" < "$nlist" | grep -v main >> conftest.$ac_ext
	  cat <<\EOF >> conftest.$ac_ext
  {0, (lt_ptr_t) 0}
};

#ifdef __cplusplus
}
#endif
EOF
	  # Now try linking the two files.
	  mv conftest.$ac_objext conftstm.$ac_objext
	  lt_save_LIBS="$LIBS"
	  lt_save_CFLAGS="$CFLAGS"
	  LIBS="conftstm.$ac_objext"
	  CFLAGS="$CFLAGS$lt_prog_compiler_no_builtin_flag"
	  if { (eval echo configure:109034: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
	    pipe_works=yes
	  fi
	  LIBS="$lt_save_LIBS"
	  CFLAGS="$lt_save_CFLAGS"
	else
	  echo "cannot find nm_test_func in $nlist" >&5
	fi
      else
	echo "cannot find nm_test_var in $nlist" >&5
      fi
    else
      echo "cannot run $lt_cv_sys_global_symbol_pipe" >&5
    fi
  else
    echo "$progname: failed program was:" >&5
    cat conftest.$ac_ext >&5
  fi
  rm -rf conftest* conftst*

  # Do not use the global_symbol_pipe unless it works.
  if test "$pipe_works" = yes; then
    break
  else
    lt_cv_sys_global_symbol_pipe=
  fi
done

fi

if test -z "$lt_cv_sys_global_symbol_pipe"; then
  lt_cv_sys_global_symbol_to_cdecl=
fi
if test -z "$lt_cv_sys_global_symbol_pipe$lt_cv_sys_global_symbol_to_cdecl"; then
  echo "$ac_t""failed" 1>&6
else
  echo "$ac_t""ok" 1>&6
fi

echo $ac_n "checking for objdir""... $ac_c" 1>&6
echo "configure:109074: checking for objdir" >&5
if eval "test \"`echo '$''{'lt_cv_objdir'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f .libs 2>/dev/null
mkdir .libs 2>/dev/null
if test -d .libs; then
  lt_cv_objdir=.libs
else
  # MS-DOS does not allow filenames that begin with a dot.
  lt_cv_objdir=_libs
fi
rmdir .libs 2>/dev/null
fi

echo "$ac_t""$lt_cv_objdir" 1>&6
objdir=$lt_cv_objdir





case $host_os in
aix3*)
  # AIX sometimes has problems with the GCC collect2 program.  For some
  # reason, if we set the COLLECT_NAMES environment variable, the problems
  # vanish in a puff of smoke.
  if test "X${COLLECT_NAMES+set}" != Xset; then
    COLLECT_NAMES=
    export COLLECT_NAMES
  fi
  ;;
esac

# Sed substitution that helps us do robust quoting.  It backslashifies
# metacharacters that are still active within double-quoted strings.
Xsed='sed -e 1s/^X//'
sed_quote_subst='s/\([\\"\\`$\\\\]\)/\\\1/g'

# Same as above, but do not quote variable references.
double_quote_subst='s/\([\\"\\`\\\\]\)/\\\1/g'

# Sed substitution to delay expansion of an escaped shell variable in a
# double_quote_subst'ed string.
delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'

# Sed substitution to avoid accidental globbing in evaled expressions
no_glob_subst='s/\*/\\\*/g'

# Constants:
rm="rm -f"

# Global variables:
default_ofile=libtool
can_build_shared=yes

# All known linkers require a `.a' archive for static linking (except MSVC,
# which needs '.lib').
libext=a
ltmain="$ac_aux_dir/ltmain.sh"
ofile="$default_ofile"
with_gnu_ld="$lt_cv_prog_gnu_ld"

# Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
set dummy ${ac_tool_prefix}ar; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109140: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AR"; then
  ac_cv_prog_AR="$AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AR="${ac_tool_prefix}ar"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AR="$ac_cv_prog_AR"
if test -n "$AR"; then
  echo "$ac_t""$AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_AR"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "ar", so it can be a program name with args.
set dummy ar; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109172: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AR"; then
  ac_cv_prog_AR="$AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AR="ar"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_AR" && ac_cv_prog_AR="false"
fi
fi
AR="$ac_cv_prog_AR"
if test -n "$AR"; then
  echo "$ac_t""$AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  AR="false"
fi
fi

# Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
set dummy ${ac_tool_prefix}ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109207: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_RANLIB"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109239: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  RANLIB=":"
fi
fi

# Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
set dummy ${ac_tool_prefix}strip; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109274: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_STRIP"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "strip", so it can be a program name with args.
set dummy strip; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109306: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="strip"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_STRIP" && ac_cv_prog_STRIP=":"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  STRIP=":"
fi
fi


old_CC="$CC"
old_CFLAGS="$CFLAGS"

# Set sane defaults for various variables
test -z "$AR" && AR=ar
test -z "$AR_FLAGS" && AR_FLAGS=cru
test -z "$AS" && AS=as
test -z "$CC" && CC=cc
test -z "$LTCC" && LTCC=$CC
test -z "$LTCFLAGS" && LTCFLAGS=$CFLAGS
test -z "$DLLTOOL" && DLLTOOL=dlltool
test -z "$LD" && LD=ld
test -z "$LN_S" && LN_S="ln -s"
test -z "$MAGIC_CMD" && MAGIC_CMD=file
test -z "$NM" && NM=nm
test -z "$SED" && SED=sed
test -z "$OBJDUMP" && OBJDUMP=objdump
test -z "$RANLIB" && RANLIB=:
test -z "$STRIP" && STRIP=:
test -z "$ac_objext" && ac_objext=o

# Determine commands to create old-style static archives.
old_archive_cmds='$AR $AR_FLAGS $oldlib$oldobjs'
old_postinstall_cmds='chmod 644 $oldlib'
old_postuninstall_cmds=

if test -n "$RANLIB"; then
  case $host_os in
  openbsd*)
    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB -t \$oldlib"
    ;;
  *)
    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB \$oldlib"
    ;;
  esac
  old_archive_cmds="$old_archive_cmds~\$RANLIB \$oldlib"
fi

for cc_temp in $compiler""; do
  case $cc_temp in
    compile | *[\\/]compile | ccache | *[\\/]ccache ) ;;
    distcc | *[\\/]distcc | purify | *[\\/]purify ) ;;
    \-*) ;;
    *) break;;
  esac
done
cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`


# Only perform the check for file, if the check method requires it
case $deplibs_check_method in
file_magic*)
  if test "$file_magic_cmd" = '$MAGIC_CMD'; then
    echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
echo "configure:109393: checking for ${ac_tool_prefix}file" >&5
if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case $MAGIC_CMD in
[\\/*] |  ?:[\\/]*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a path.
  ;;
*)
  lt_save_MAGIC_CMD="$MAGIC_CMD"
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  ac_dummy="/usr/bin$PATH_SEPARATOR$PATH"
  for ac_dir in $ac_dummy; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/${ac_tool_prefix}file; then
      lt_cv_path_MAGIC_CMD="$ac_dir/${ac_tool_prefix}file"
      if test -n "$file_magic_test_file"; then
	case $deplibs_check_method in
	"file_magic "*)
	  file_magic_regex=`expr "$deplibs_check_method" : "file_magic \(.*\)"`
	  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
	  if eval $file_magic_cmd \$file_magic_test_file 2> /dev/null |
	    $EGREP "$file_magic_regex" > /dev/null; then
	    :
	  else
	    cat <<EOF 1>&2

*** Warning: the command libtool uses to detect shared libraries,
*** $file_magic_cmd, produces output that libtool cannot recognize.
*** The result is that libtool may fail to recognize shared libraries
*** as such.  This will affect the creation of libtool libraries that
*** depend on shared libraries, but programs linked with such libtool
*** libraries will work regardless of this problem.  Nevertheless, you
*** may want to report the problem to your system manager and/or to
*** bug-libtool@gnu.org

EOF
	  fi ;;
	esac
      fi
      break
    fi
  done
  IFS="$lt_save_ifs"
  MAGIC_CMD="$lt_save_MAGIC_CMD"
  ;;
esac
fi

MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
if test -n "$MAGIC_CMD"; then
  echo "$ac_t""$MAGIC_CMD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$lt_cv_path_MAGIC_CMD"; then
  if test -n "$ac_tool_prefix"; then
    echo $ac_n "checking for file""... $ac_c" 1>&6
echo "configure:109453: checking for file" >&5
if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case $MAGIC_CMD in
[\\/*] |  ?:[\\/]*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a path.
  ;;
*)
  lt_save_MAGIC_CMD="$MAGIC_CMD"
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  ac_dummy="/usr/bin$PATH_SEPARATOR$PATH"
  for ac_dir in $ac_dummy; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/file; then
      lt_cv_path_MAGIC_CMD="$ac_dir/file"
      if test -n "$file_magic_test_file"; then
	case $deplibs_check_method in
	"file_magic "*)
	  file_magic_regex=`expr "$deplibs_check_method" : "file_magic \(.*\)"`
	  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
	  if eval $file_magic_cmd \$file_magic_test_file 2> /dev/null |
	    $EGREP "$file_magic_regex" > /dev/null; then
	    :
	  else
	    cat <<EOF 1>&2

*** Warning: the command libtool uses to detect shared libraries,
*** $file_magic_cmd, produces output that libtool cannot recognize.
*** The result is that libtool may fail to recognize shared libraries
*** as such.  This will affect the creation of libtool libraries that
*** depend on shared libraries, but programs linked with such libtool
*** libraries will work regardless of this problem.  Nevertheless, you
*** may want to report the problem to your system manager and/or to
*** bug-libtool@gnu.org

EOF
	  fi ;;
	esac
      fi
      break
    fi
  done
  IFS="$lt_save_ifs"
  MAGIC_CMD="$lt_save_MAGIC_CMD"
  ;;
esac
fi

MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
if test -n "$MAGIC_CMD"; then
  echo "$ac_t""$MAGIC_CMD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    MAGIC_CMD=:
  fi
fi

  fi
  ;;
esac


  case $host_os in
    rhapsody* | darwin*)
    # Extract the first word of "${ac_tool_prefix}dsymutil", so it can be a program name with args.
set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109525: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_DSYMUTIL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$DSYMUTIL"; then
  ac_cv_prog_DSYMUTIL="$DSYMUTIL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_DSYMUTIL="${ac_tool_prefix}dsymutil"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
DSYMUTIL="$ac_cv_prog_DSYMUTIL"
if test -n "$DSYMUTIL"; then
  echo "$ac_t""$DSYMUTIL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_DSYMUTIL"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "dsymutil", so it can be a program name with args.
set dummy dsymutil; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109557: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_DSYMUTIL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$DSYMUTIL"; then
  ac_cv_prog_DSYMUTIL="$DSYMUTIL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_DSYMUTIL="dsymutil"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_DSYMUTIL" && ac_cv_prog_DSYMUTIL=":"
fi
fi
DSYMUTIL="$ac_cv_prog_DSYMUTIL"
if test -n "$DSYMUTIL"; then
  echo "$ac_t""$DSYMUTIL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  DSYMUTIL=":"
fi
fi

    # Extract the first word of "${ac_tool_prefix}nmedit", so it can be a program name with args.
set dummy ${ac_tool_prefix}nmedit; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109592: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_NMEDIT'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$NMEDIT"; then
  ac_cv_prog_NMEDIT="$NMEDIT" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_NMEDIT="${ac_tool_prefix}nmedit"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
NMEDIT="$ac_cv_prog_NMEDIT"
if test -n "$NMEDIT"; then
  echo "$ac_t""$NMEDIT" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_NMEDIT"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "nmedit", so it can be a program name with args.
set dummy nmedit; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:109624: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_NMEDIT'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$NMEDIT"; then
  ac_cv_prog_NMEDIT="$NMEDIT" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_NMEDIT="nmedit"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_NMEDIT" && ac_cv_prog_NMEDIT=":"
fi
fi
NMEDIT="$ac_cv_prog_NMEDIT"
if test -n "$NMEDIT"; then
  echo "$ac_t""$NMEDIT" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  NMEDIT=":"
fi
fi


    echo $ac_n "checking for -single_module linker flag""... $ac_c" 1>&6
echo "configure:109658: checking for -single_module linker flag" >&5
if eval "test \"`echo '$''{'lt_cv_apple_cc_single_mod'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_apple_cc_single_mod=no
      if test -z "${LT_MULTI_MODULE}"; then
   # By default we will add the -single_module flag. You can override
   # by either setting the environment variable LT_MULTI_MODULE
   # non-empty at configure time, or by adding -multi_module to the
   # link flags.
   echo "int foo(void){return 1;}" > conftest.c
   $LTCC $LTCFLAGS $LDFLAGS -o libconftest.dylib \
     -dynamiclib ${wl}-single_module conftest.c
   if test -f libconftest.dylib; then
     lt_cv_apple_cc_single_mod=yes
     rm -rf libconftest.dylib*
   fi
   rm conftest.c
      fi
fi

echo "$ac_t""$lt_cv_apple_cc_single_mod" 1>&6
    echo $ac_n "checking for -exported_symbols_list linker flag""... $ac_c" 1>&6
echo "configure:109681: checking for -exported_symbols_list linker flag" >&5
if eval "test \"`echo '$''{'lt_cv_ld_exported_symbols_list'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_ld_exported_symbols_list=no
      save_LDFLAGS=$LDFLAGS
      echo "_main" > conftest.sym
      LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"
      
cat > conftest.$ac_ext <<EOF
#line 109691 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { (eval echo configure:109696: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
 lt_cv_ld_exported_symbols_list=yes
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
lt_cv_ld_exported_symbols_list=no
  rm -rf conftest*
fi
rm -f conftest*
   LDFLAGS="$save_LDFLAGS"
    
fi

echo "$ac_t""$lt_cv_ld_exported_symbols_list" 1>&6
    case $host_os in
    rhapsody* | darwin1.[0123])
      _lt_dar_allow_undefined='${wl}-undefined ${wl}suppress' ;;
    darwin1.*)
     _lt_dar_allow_undefined='${wl}-flat_namespace ${wl}-undefined ${wl}suppress' ;;
    darwin*)
      # if running on 10.5 or later, the deployment target defaults
      # to the OS version, if on x86, and 10.4, the deployment
      # target defaults to 10.4. Don't you love it?
      case ${MACOSX_DEPLOYMENT_TARGET-10.0},$host in
   10.0,*86*-darwin8*|10.0,*-darwin[91]*)
     _lt_dar_allow_undefined='${wl}-undefined ${wl}dynamic_lookup' ;;
   10.[012]*)
     _lt_dar_allow_undefined='${wl}-flat_namespace ${wl}-undefined ${wl}suppress' ;;
   10.*)
     _lt_dar_allow_undefined='${wl}-undefined ${wl}dynamic_lookup' ;;
      esac
    ;;
  esac
    if test "$lt_cv_apple_cc_single_mod" = "yes"; then
      _lt_dar_single_mod='$single_module'
    fi
    if test "$lt_cv_ld_exported_symbols_list" = "yes"; then
      _lt_dar_export_syms=' ${wl}-exported_symbols_list,$output_objdir/${libname}-symbols.expsym'
    else
      _lt_dar_export_syms="~$NMEDIT -s \$output_objdir/\${libname}-symbols.expsym \${lib}"
    fi
    if test "$DSYMUTIL" != ":"; then
      _lt_dsymutil="~$DSYMUTIL \$lib || :"
    else
      _lt_dsymutil=
    fi
    ;;
  esac


enable_dlopen=no
enable_win32_dll=no

# Check whether --enable-libtool-lock or --disable-libtool-lock was given.
if test "${enable_libtool_lock+set}" = set; then
  enableval="$enable_libtool_lock"
  :
fi

test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes

# Check whether --with-pic or --without-pic was given.
if test "${with_pic+set}" = set; then
  withval="$with_pic"
  pic_mode="$withval"
else
  pic_mode=default
fi

test -z "$pic_mode" && pic_mode=default

# Use C for the default configuration in the libtool script
tagname=
lt_save_CC="$CC"

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


# Source file extension for C test sources.
ac_ext=c

# Object file extension for compiled C test sources.
objext=o
objext=$objext

# Code to be used in simple compile tests
lt_simple_compile_test_code="int some_variable = 0;"

# Code to be used in simple link tests
lt_simple_link_test_code='int main(){return(0);}'


# If no C compiler was specified, use CC.
LTCC=${LTCC-"$CC"}

# If no C compiler flags were specified, use CFLAGS.
LTCFLAGS=${LTCFLAGS-"$CFLAGS"}

# Allow CC to be a program name with arguments.
compiler=$CC


# save warnings/boilerplate of simple test code
ac_outfile=conftest.$ac_objext
echo "$lt_simple_compile_test_code" >conftest.$ac_ext
eval "$ac_compile" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_compiler_boilerplate=`cat conftest.err`
$rm conftest*

ac_outfile=conftest.$ac_objext
echo "$lt_simple_link_test_code" >conftest.$ac_ext
eval "$ac_link" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_linker_boilerplate=`cat conftest.err`
$rm -r conftest*


## CAVEAT EMPTOR:
## There is no encapsulation within the following macros, do not change
## the running order or otherwise move them around unless you know exactly
## what you are doing...

lt_prog_compiler_no_builtin_flag=

if test "$GCC" = yes; then
  lt_prog_compiler_no_builtin_flag=' -fno-builtin'

  
echo $ac_n "checking if $compiler supports -fno-rtti -fno-exceptions""... $ac_c" 1>&6
echo "configure:109830: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
if eval "test \"`echo '$''{'lt_cv_prog_compiler_rtti_exceptions'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_prog_compiler_rtti_exceptions=no
  ac_outfile=conftest.$ac_objext
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext
   lt_compiler_flag="-fno-rtti -fno-exceptions"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   # The option is referenced via a variable to avoid confusing sed.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:109847: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>conftest.err)
   ac_status=$?
   cat conftest.err >&5
   echo "configure:109851: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s "$ac_outfile"; then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings other than the usual output.
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
     $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_rtti_exceptions=yes
     fi
   fi
   $rm conftest*

fi

echo "$ac_t""$lt_cv_prog_compiler_rtti_exceptions" 1>&6

if test x"$lt_cv_prog_compiler_rtti_exceptions" = xyes; then
    lt_prog_compiler_no_builtin_flag="$lt_prog_compiler_no_builtin_flag -fno-rtti -fno-exceptions"
else
    :
fi

fi

lt_prog_compiler_wl=
lt_prog_compiler_pic=
lt_prog_compiler_static=

echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
echo "configure:109880: checking for $compiler option to produce PIC" >&5
 
  if test "$GCC" = yes; then
    lt_prog_compiler_wl='-Wl,'
    lt_prog_compiler_static='-static'

    case $host_os in
      aix*)
      # All AIX code is PIC.
      if test "$host_cpu" = ia64; then
	# AIX 5 now supports IA64 processor
	lt_prog_compiler_static='-Bstatic'
      fi
      ;;

    amigaos*)
      # FIXME: we need at least 68020 code to build shared libraries, but
      # adding the `-m68020' flag to GCC prevents building anything better,
      # like `-m68040'.
      lt_prog_compiler_pic='-m68020 -resident32 -malways-restore-a4'
      ;;

    beos* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
      # PIC is the default for these OSes.
      ;;

    mingw* | cygwin* | pw32* | os2*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
      # Although the cygwin gcc ignores -fPIC, still need this for old-style
      # (--disable-auto-import) libraries
	  lt_prog_compiler_pic='-DDLL_EXPORT'
      ;;

    darwin* | rhapsody*)
      # PIC is the default on this platform
      # Common symbols not allowed in MH_DYLIB files
      lt_prog_compiler_pic='-fno-common'
      ;;

    interix[3-9]*)
      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
      # Instead, we relocate shared libraries at runtime.
      ;;

    msdosdjgpp*)
      # Just because we use GCC doesn't mean we suddenly get shared libraries
      # on systems that don't support them.
      lt_prog_compiler_can_build_shared=no
      enable_shared=no
      ;;

    sysv4*MP*)
      if test -d /usr/nec; then
	lt_prog_compiler_pic=-Kconform_pic
      fi
      ;;

    hpux*)
      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
      # not for PA HP-UX.
      case $host_cpu in
      hppa*64*|ia64*)
	# +Z the default
	;;
      *)
	lt_prog_compiler_pic='-fPIC'
	;;
      esac
      ;;

    *)
      lt_prog_compiler_pic='-fPIC'
      ;;
    esac
  else
    # PORTME Check for flag to pass linker flags through the system compiler.
    case $host_os in
    aix*)
      lt_prog_compiler_wl='-Wl,'
      if test "$host_cpu" = ia64; then
	# AIX 5 now supports IA64 processor
	lt_prog_compiler_static='-Bstatic'
      else
	lt_prog_compiler_static='-bnso -bI:/lib/syscalls.exp'
      fi
      ;;
      darwin*)
        # PIC is the default on this platform
        # Common symbols not allowed in MH_DYLIB files
       case $cc_basename in
         xlc*)
         lt_prog_compiler_pic='-qnocommon'
         lt_prog_compiler_wl='-Wl,'
         ;;
       esac
       ;;

    mingw* | cygwin* | pw32* | os2*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
	  lt_prog_compiler_pic='-DDLL_EXPORT'
      ;;

    hpux9* | hpux10* | hpux11*)
      lt_prog_compiler_wl='-Wl,'
      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
      # not for PA HP-UX.
      case $host_cpu in
      hppa*64*|ia64*)
	# +Z the default
	;;
      *)
	lt_prog_compiler_pic='+Z'
	;;
      esac
      # Is there a better lt_prog_compiler_static that works with the bundled CC?
      lt_prog_compiler_static='${wl}-a ${wl}archive'
      ;;

    irix5* | irix6* | nonstopux*)
      lt_prog_compiler_wl='-Wl,'
      # PIC (with -KPIC) is the default.
      lt_prog_compiler_static='-non_shared'
      ;;

    newsos6)
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    linux* | k*bsd*-gnu)
      case $cc_basename in
      # old Intel for x86_64 which still supported -KPIC.
      ecc*)
        lt_prog_compiler_wl='-Wl,'
        lt_prog_compiler_pic='-KPIC'
        lt_prog_compiler_static='-static'
        ;;
      # icc used to be incompatible with GCC.
      # ICC 10 doesn't accept -KPIC any more.
      icc*)
        lt_prog_compiler_wl='-Wl,'
        lt_prog_compiler_pic='-fPIC'
        lt_prog_compiler_static='-static'
        ;;
      pgcc* | pgf77* | pgf90* | pgf95*)
        # Portland Group compilers (*not* the Pentium gcc compiler,
	# which looks to be a dead project)
	lt_prog_compiler_wl='-Wl,'
	lt_prog_compiler_pic='-fpic'
	lt_prog_compiler_static='-Bstatic'
        ;;
      ccc*)
        lt_prog_compiler_wl='-Wl,'
        # All Alpha code is PIC.
        lt_prog_compiler_static='-non_shared'
        ;;
      *)
        case `$CC -V 2>&1 | sed 5q` in
	*Sun\ C*)
	  # Sun C 5.9
	  lt_prog_compiler_pic='-KPIC'
	  lt_prog_compiler_static='-Bstatic'
	  lt_prog_compiler_wl='-Wl,'
	  ;;
	*Sun\ F*)
	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
	  lt_prog_compiler_pic='-KPIC'
	  lt_prog_compiler_static='-Bstatic'
	  lt_prog_compiler_wl=''
	  ;;
	esac
	;;
      esac
      ;;

    osf3* | osf4* | osf5*)
      lt_prog_compiler_wl='-Wl,'
      # All OSF/1 code is PIC.
      lt_prog_compiler_static='-non_shared'
      ;;

    rdos*)
      lt_prog_compiler_static='-non_shared'
      ;;

    solaris*)
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      case $cc_basename in
      f77* | f90* | f95*)
	lt_prog_compiler_wl='-Qoption ld ';;
      *)
	lt_prog_compiler_wl='-Wl,';;
      esac
      ;;

    sunos4*)
      lt_prog_compiler_wl='-Qoption ld '
      lt_prog_compiler_pic='-PIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    sysv4 | sysv4.2uw2* | sysv4.3*)
      lt_prog_compiler_wl='-Wl,'
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    sysv4*MP*)
      if test -d /usr/nec ;then
	lt_prog_compiler_pic='-Kconform_pic'
	lt_prog_compiler_static='-Bstatic'
      fi
      ;;

    sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
      lt_prog_compiler_wl='-Wl,'
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    unicos*)
      lt_prog_compiler_wl='-Wl,'
      lt_prog_compiler_can_build_shared=no
      ;;

    uts4*)
      lt_prog_compiler_pic='-pic'
      lt_prog_compiler_static='-Bstatic'
      ;;

    *)
      lt_prog_compiler_can_build_shared=no
      ;;
    esac
  fi

echo "$ac_t""$lt_prog_compiler_pic" 1>&6

#
# Check to make sure the PIC flag actually works.
#
if test -n "$lt_prog_compiler_pic"; then
  
echo $ac_n "checking if $compiler PIC flag $lt_prog_compiler_pic works""... $ac_c" 1>&6
echo "configure:110127: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
if eval "test \"`echo '$''{'lt_cv_prog_compiler_pic_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_prog_compiler_pic_works=no
  ac_outfile=conftest.$ac_objext
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext
   lt_compiler_flag="$lt_prog_compiler_pic -DPIC"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   # The option is referenced via a variable to avoid confusing sed.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:110144: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>conftest.err)
   ac_status=$?
   cat conftest.err >&5
   echo "configure:110148: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s "$ac_outfile"; then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings other than the usual output.
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
     $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_pic_works=yes
     fi
   fi
   $rm conftest*

fi

echo "$ac_t""$lt_cv_prog_compiler_pic_works" 1>&6

if test x"$lt_cv_prog_compiler_pic_works" = xyes; then
    case $lt_prog_compiler_pic in
     "" | " "*) ;;
     *) lt_prog_compiler_pic=" $lt_prog_compiler_pic" ;;
     esac
else
    lt_prog_compiler_pic=
     lt_prog_compiler_can_build_shared=no
fi

fi
case $host_os in
  # For platforms which do not support PIC, -DPIC is meaningless:
  *djgpp*)
    lt_prog_compiler_pic=
    ;;
  *)
    lt_prog_compiler_pic="$lt_prog_compiler_pic -DPIC"
    ;;
esac

#
# Check to make sure the static flag actually works.
#
wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
echo $ac_n "checking if $compiler static flag $lt_tmp_static_flag works""... $ac_c" 1>&6
echo "configure:110190: checking if $compiler static flag $lt_tmp_static_flag works" >&5
if eval "test \"`echo '$''{'lt_cv_prog_compiler_static_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_prog_compiler_static_works=no
   save_LDFLAGS="$LDFLAGS"
   LDFLAGS="$LDFLAGS $lt_tmp_static_flag"
   echo "$lt_simple_link_test_code" > conftest.$ac_ext
   if (eval $ac_link 2>conftest.err) && test -s conftest$ac_exeext; then
     # The linker can only warn and ignore the option if not recognized
     # So say no if there are warnings
     if test -s conftest.err; then
       # Append any errors to the config.log.
       cat conftest.err 1>&5
       $echo "X$_lt_linker_boilerplate" | $Xsed -e '/^$/d' > conftest.exp
       $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
       if diff conftest.exp conftest.er2 >/dev/null; then
         lt_cv_prog_compiler_static_works=yes
       fi
     else
       lt_cv_prog_compiler_static_works=yes
     fi
   fi
   $rm -r conftest*
   LDFLAGS="$save_LDFLAGS"

fi

echo "$ac_t""$lt_cv_prog_compiler_static_works" 1>&6

if test x"$lt_cv_prog_compiler_static_works" = xyes; then
    :
else
    lt_prog_compiler_static=
fi


echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
echo "configure:110228: checking if $compiler supports -c -o file.$ac_objext" >&5
if eval "test \"`echo '$''{'lt_cv_prog_compiler_c_o'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_prog_compiler_c_o=no
   $rm -r conftest 2>/dev/null
   mkdir conftest
   cd conftest
   mkdir out
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext

   lt_compiler_flag="-o out/conftest2.$ac_objext"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:110248: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>out/conftest.err)
   ac_status=$?
   cat out/conftest.err >&5
   echo "configure:110252: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s out/conftest2.$ac_objext
   then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
     $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_c_o=yes
     fi
   fi
   chmod u+w . 2>&5
   $rm conftest*
   # SGI C++ compiler will create directory out/ii_files/ for
   # template instantiation
   test -d out/ii_files && $rm out/ii_files/* && rmdir out/ii_files
   $rm out/* && rmdir out
   cd ..
   rmdir conftest
   $rm conftest*

fi

echo "$ac_t""$lt_cv_prog_compiler_c_o" 1>&6


hard_links="nottested"
if test "$lt_cv_prog_compiler_c_o" = no && test "$need_locks" != no; then
  # do not overwrite the value of need_locks provided by the user
  echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
echo "configure:110282: checking if we can lock with hard links" >&5
  hard_links=yes
  $rm conftest*
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  touch conftest.a
  ln conftest.a conftest.b 2>&5 || hard_links=no
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  echo "$ac_t""$hard_links" 1>&6
  if test "$hard_links" = no; then
    echo "configure: warning: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" 1>&2
    need_locks=warn
  fi
else
  need_locks=no
fi

echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
echo "configure:110299: checking whether the $compiler linker ($LD) supports shared libraries" >&5

  runpath_var=
  allow_undefined_flag=
  enable_shared_with_static_runtimes=no
  archive_cmds=
  archive_expsym_cmds=
  old_archive_From_new_cmds=
  old_archive_from_expsyms_cmds=
  export_dynamic_flag_spec=
  whole_archive_flag_spec=
  thread_safe_flag_spec=
  hardcode_libdir_flag_spec=
  hardcode_libdir_flag_spec_ld=
  hardcode_libdir_separator=
  hardcode_direct=no
  hardcode_minus_L=no
  hardcode_shlibpath_var=unsupported
  link_all_deplibs=unknown
  hardcode_automatic=no
  module_cmds=
  module_expsym_cmds=
  always_export_symbols=no
  export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
  # include_expsyms should be a list of space-separated symbols to be *always*
  # included in the symbol list
  include_expsyms=
  # exclude_expsyms can be an extended regexp of symbols to exclude
  # it will be wrapped by ` (' and `)$', so one must not match beginning or
  # end of line.  Example: `a|bc|.*d.*' will exclude the symbols `a' and `bc',
  # as well as any symbol that contains `d'.
  exclude_expsyms='_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*'
  # Although _GLOBAL_OFFSET_TABLE_ is a valid symbol C name, most a.out
  # platforms (ab)use it in PIC code, but their linkers get confused if
  # the symbol is explicitly referenced.  Since portable code cannot
  # rely on this symbol name, it's probably fine to never include it in
  # preloaded symbol tables.
  # Exclude shared library initialization/finalization symbols.
  extract_expsyms_cmds=
  # Just being paranoid about ensuring that cc_basename is set.
  for cc_temp in $compiler""; do
  case $cc_temp in
    compile | *[\\/]compile | ccache | *[\\/]ccache ) ;;
    distcc | *[\\/]distcc | purify | *[\\/]purify ) ;;
    \-*) ;;
    *) break;;
  esac
done
cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`

  case $host_os in
  cygwin* | mingw* | pw32*)
    # FIXME: the MSVC++ port hasn't been tested in a loooong time
    # When not using gcc, we currently assume that we are using
    # Microsoft Visual C++.
    if test "$GCC" != yes; then
      with_gnu_ld=no
    fi
    ;;
  interix*)
    # we just hope/assume this is gcc and not c89 (= MSVC++)
    with_gnu_ld=yes
    ;;
  openbsd*)
    with_gnu_ld=no
    ;;
  esac

  ld_shlibs=yes
  if test "$with_gnu_ld" = yes; then
    # If archive_cmds runs LD, not CC, wlarc should be empty
    wlarc='${wl}'

    # Set some defaults for GNU ld with shared library support. These
    # are reset later if shared libraries are not supported. Putting them
    # here allows them to be overridden if necessary.
    runpath_var=LD_RUN_PATH
    hardcode_libdir_flag_spec='${wl}--rpath ${wl}$libdir'
    export_dynamic_flag_spec='${wl}--export-dynamic'
    # ancient GNU ld didn't support --whole-archive et. al.
    if $LD --help 2>&1 | grep 'no-whole-archive' > /dev/null; then
	whole_archive_flag_spec="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
      else
  	whole_archive_flag_spec=
    fi
    supports_anon_versioning=no
    case `$LD -v 2>/dev/null` in
      *\ [01].* | *\ 2.[0-9].* | *\ 2.10.*) ;; # catch versions < 2.11
      *\ 2.11.93.0.2\ *) supports_anon_versioning=yes ;; # RH7.3 ...
      *\ 2.11.92.0.12\ *) supports_anon_versioning=yes ;; # Mandrake 8.2 ...
      *\ 2.11.*) ;; # other 2.11 versions
      *) supports_anon_versioning=yes ;;
    esac

    # See if GNU ld supports shared libraries.
    case $host_os in
    aix[3-9]*)
      # On AIX/PPC, the GNU linker is very broken
      if test "$host_cpu" != ia64; then
	ld_shlibs=no
	cat <<EOF 1>&2

*** Warning: the GNU linker, at least up to release 2.9.1, is reported
*** to be unable to reliably create shared libraries on AIX.
*** Therefore, libtool is disabling shared libraries support.  If you
*** really care for shared libraries, you may want to modify your PATH
*** so that a non-GNU linker is found, and then restart.

EOF
      fi
      ;;

    amigaos*)
      archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$echo "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$echo "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$echo "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_minus_L=yes

      # Samuel A. Falvo II <kc5tja@dolphin.openprojects.net> reports
      # that the semantics of dynamic libraries on AmigaOS, at least up
      # to version 4, is to share data among multiple programs linked
      # with the same dynamic library.  Since this doesn't match the
      # behavior of shared libraries on other platforms, we can't use
      # them.
      ld_shlibs=no
      ;;

    beos*)
      if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	allow_undefined_flag=unsupported
	# Joseph Beckenbach <jrb3@best.com> says some releases of gcc
	# support --undefined.  This deserves some investigation.  FIXME
	archive_cmds='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
      else
	ld_shlibs=no
      fi
      ;;

    cygwin* | mingw* | pw32*)
      # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, ) is actually meaningless,
      # as there is no search path for DLLs.
      hardcode_libdir_flag_spec='-L$libdir'
      allow_undefined_flag=unsupported
      always_export_symbols=no
      enable_shared_with_static_runtimes=yes
      export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1 DATA/'\'' -e '\''/^[AITW][ ]/s/.*[ ]//'\'' | sort | uniq > $export_symbols'

      if $LD --help 2>&1 | grep 'auto-import' > /dev/null; then
        archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
	# If the export-symbols file already is a .def file (1st line
	# is EXPORTS), use it as is; otherwise, prepend...
	archive_expsym_cmds='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
	  cp $export_symbols $output_objdir/$soname.def;
	else
	  echo EXPORTS > $output_objdir/$soname.def;
	  cat $export_symbols >> $output_objdir/$soname.def;
	fi~
	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
      else
	ld_shlibs=no
      fi
      ;;

    interix[3-9]*)
      hardcode_direct=no
      hardcode_shlibpath_var=no
      hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
      export_dynamic_flag_spec='${wl}-E'
      # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
      # Instead, shared libraries are loaded at an image base (0x10000000 by
      # default) and relocated if they conflict, which is a slow very memory
      # consuming and fragmenting process.  To avoid this, we pick a random,
      # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
      # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
      archive_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
      archive_expsym_cmds='sed "s,^,_," $export_symbols >$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
      ;;

    gnu* | linux* | k*bsd*-gnu)
      if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	tmp_addflag=
	case $cc_basename,$host_cpu in
	pgcc*)				# Portland Group C compiler
	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
	  tmp_addflag=' $pic_flag'
	  ;;
	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
	  tmp_addflag=' $pic_flag -Mnomain' ;;
	ecc*,ia64* | icc*,ia64*)		# Intel C compiler on ia64
	  tmp_addflag=' -i_dynamic' ;;
	efc*,ia64* | ifort*,ia64*)	# Intel Fortran compiler on ia64
	  tmp_addflag=' -i_dynamic -nofor_main' ;;
	ifc* | ifort*)			# Intel Fortran compiler
	  tmp_addflag=' -nofor_main' ;;
	esac
	case `$CC -V 2>&1 | sed 5q` in
	*Sun\ C*)			# Sun C 5.9
	  whole_archive_flag_spec='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
	  tmp_sharedflag='-G' ;;
	*Sun\ F*)			# Sun Fortran 8.3
	  tmp_sharedflag='-G' ;;
	*)
	  tmp_sharedflag='-shared' ;;
	esac
	archive_cmds='$CC '"$tmp_sharedflag""$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'

	if test $supports_anon_versioning = yes; then
	  archive_expsym_cmds='$echo "{ global:" > $output_objdir/$libname.ver~
  cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $output_objdir/$libname.ver~
  $echo "local: *; };" >> $output_objdir/$libname.ver~
	  $CC '"$tmp_sharedflag""$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-version-script ${wl}$output_objdir/$libname.ver -o $lib'
	fi
      else
	ld_shlibs=no
      fi
      ;;

    netbsd*)
      if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
	archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
	wlarc=
      else
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
      fi
      ;;

    solaris*)
      if $LD -v 2>&1 | grep 'BFD 2\.8' > /dev/null; then
	ld_shlibs=no
	cat <<EOF 1>&2

*** Warning: The releases 2.8.* of the GNU linker cannot reliably
*** create shared libraries on Solaris systems.  Therefore, libtool
*** is disabling shared libraries support.  We urge you to upgrade GNU
*** binutils to release 2.9.1 or newer.  Another option is to modify
*** your PATH or compiler configuration so that the native linker is
*** used, and then restart.

EOF
      elif $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
      else
	ld_shlibs=no
      fi
      ;;

    sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX*)
      case `$LD -v 2>&1` in
        *\ [01].* | *\ 2.[0-9].* | *\ 2.1[0-5].*)
	ld_shlibs=no
	cat <<_LT_EOF 1>&2

*** Warning: Releases of the GNU linker prior to 2.16.91.0.3 can not
*** reliably create shared libraries on SCO systems.  Therefore, libtool
*** is disabling shared libraries support.  We urge you to upgrade GNU
*** binutils to release 2.16.91.0.3 or newer.  Another option is to modify
*** your PATH or compiler configuration so that the native linker is
*** used, and then restart.

_LT_EOF
	;;
	*)
	  if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	    hardcode_libdir_flag_spec='`test -z "$SCOABSPATH" && echo ${wl}-rpath,$libdir`'
	    archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib'
	    archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname,-retain-symbols-file,$export_symbols -o $lib'
	  else
	    ld_shlibs=no
	  fi
	;;
      esac
      ;;

    sunos4*)
      archive_cmds='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
      wlarc=
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    *)
      if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
      else
	ld_shlibs=no
      fi
      ;;
    esac

    if test "$ld_shlibs" = no; then
      runpath_var=
      hardcode_libdir_flag_spec=
      export_dynamic_flag_spec=
      whole_archive_flag_spec=
    fi
  else
    # PORTME fill in a description of your system's linker (not GNU ld)
    case $host_os in
    aix3*)
      allow_undefined_flag=unsupported
      always_export_symbols=yes
      archive_expsym_cmds='$LD -o $output_objdir/$soname $libobjs $deplibs $linker_flags -bE:$export_symbols -T512 -H512 -bM:SRE~$AR $AR_FLAGS $lib $output_objdir/$soname'
      # Note: this linker hardcodes the directories in LIBPATH if there
      # are no directories specified by -L.
      hardcode_minus_L=yes
      if test "$GCC" = yes && test -z "$lt_prog_compiler_static"; then
	# Neither direct hardcoding nor static linking is supported with a
	# broken collect2.
	hardcode_direct=unsupported
      fi
      ;;

    aix[4-9]*)
      if test "$host_cpu" = ia64; then
	# On IA64, the linker does run time linking by default, so we don't
	# have to do anything special.
	aix_use_runtimelinking=no
	exp_sym_flag='-Bexport'
	no_entry_flag=""
      else
	# If we're using GNU nm, then we don't want the "-C" option.
	# -C means demangle to AIX nm, but means don't demangle with GNU nm
	if $NM -V 2>&1 | grep 'GNU' > /dev/null; then
	  export_symbols_cmds='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
	else
	  export_symbols_cmds='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
	fi
	aix_use_runtimelinking=no

	# Test if we are trying to use run time linking or normal
	# AIX style linking. If -brtl is somewhere in LDFLAGS, we
	# need to do runtime linking.
	case $host_os in aix4.[23]|aix4.[23].*|aix[5-9]*)
	  for ld_flag in $LDFLAGS; do
  	  if (test $ld_flag = "-brtl" || test $ld_flag = "-Wl,-brtl"); then
  	    aix_use_runtimelinking=yes
  	    break
  	  fi
	  done
	  ;;
	esac

	exp_sym_flag='-bexport'
	no_entry_flag='-bnoentry'
      fi

      # When large executables or shared objects are built, AIX ld can
      # have problems creating the table of contents.  If linking a library
      # or program results in "error TOC overflow" add -mminimal-toc to
      # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
      # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.

      archive_cmds=''
      hardcode_direct=yes
      hardcode_libdir_separator=':'
      link_all_deplibs=yes

      if test "$GCC" = yes; then
	case $host_os in aix4.[012]|aix4.[012].*)
	# We only want to do this on AIX 4.2 and lower, the check
	# below for broken collect2 doesn't work under 4.3+
	  collect2name=`${CC} -print-prog-name=collect2`
	  if test -f "$collect2name" && \
  	   strings "$collect2name" | grep resolve_lib_name >/dev/null
	  then
  	  # We have reworked collect2
  	  :
	  else
  	  # We have old collect2
  	  hardcode_direct=unsupported
  	  # It fails to find uninstalled libraries when the uninstalled
  	  # path is not listed in the libpath.  Setting hardcode_minus_L
  	  # to unsupported forces relinking
  	  hardcode_minus_L=yes
  	  hardcode_libdir_flag_spec='-L$libdir'
  	  hardcode_libdir_separator=
	  fi
	  ;;
	esac
	shared_flag='-shared'
	if test "$aix_use_runtimelinking" = yes; then
	  shared_flag="$shared_flag "'${wl}-G'
	fi
      else
	# not using gcc
	if test "$host_cpu" = ia64; then
  	# VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
  	# chokes on -Wl,-G. The following line is correct:
	  shared_flag='-G'
	else
	  if test "$aix_use_runtimelinking" = yes; then
	    shared_flag='${wl}-G'
	  else
	    shared_flag='${wl}-bM:SRE'
	  fi
	fi
      fi

      # It seems that -bexpall does not export symbols beginning with
      # underscore (_), so it is better to generate a list of symbols to export.
      always_export_symbols=yes
      if test "$aix_use_runtimelinking" = yes; then
	# Warning - without using the other runtime loading flags (-brtl),
	# -berok will link without error, but may produce a broken library.
	allow_undefined_flag='-berok'
       # Determine the default libpath from the value encoded in an empty executable.
       
cat > conftest.$ac_ext <<EOF
#line 110710 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { (eval echo configure:110715: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
 
lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

       hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
	archive_expsym_cmds="\$CC"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then echo "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
       else
	if test "$host_cpu" = ia64; then
	  hardcode_libdir_flag_spec='${wl}-R $libdir:/usr/lib:/lib'
	  allow_undefined_flag="-z nodefs"
	  archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
	else
	 # Determine the default libpath from the value encoded in an empty executable.
	 
cat > conftest.$ac_ext <<EOF
#line 110748 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { (eval echo configure:110753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
 
lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

	 hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
	  # Warning - without using the other run time loading flags,
	  # -berok will link without error, but may produce a broken library.
	  no_undefined_flag=' ${wl}-bernotok'
	  allow_undefined_flag=' ${wl}-berok'
	  # Exported symbols can be pulled into shared objects from archives
	  whole_archive_flag_spec='$convenience'
	  archive_cmds_need_lc=yes
	  # This is similar to how AIX traditionally builds its shared libraries.
	  archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
	fi
      fi
      ;;

    amigaos*)
      archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$echo "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$echo "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$echo "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_minus_L=yes
      # see comment about different semantics on the GNU ld section
      ld_shlibs=no
      ;;

    bsdi[45]*)
      export_dynamic_flag_spec=-rdynamic
      ;;

    cygwin* | mingw* | pw32*)
      # When not using gcc, we currently assume that we are using
      # Microsoft Visual C++.
      # hardcode_libdir_flag_spec is actually meaningless, as there is
      # no search path for DLLs.
      hardcode_libdir_flag_spec=' '
      allow_undefined_flag=unsupported
      # Tell ltmain to make .lib files, not .a files.
      libext=lib
      # Tell ltmain to make .dll files, not .so files.
      shrext_cmds=".dll"
      # FIXME: Setting linknames here is a bad hack.
      archive_cmds='$CC -o $lib $libobjs $compiler_flags `echo "$deplibs" | $SED -e '\''s/ -lc$//'\''` -link -dll~linknames='
      # The linker will automatically build a .lib file if we build a DLL.
      old_archive_From_new_cmds='true'
      # FIXME: Should let the user specify the lib program.
      old_archive_cmds='lib -OUT:$oldlib$oldobjs$old_deplibs'
      fix_srcfile_path='`cygpath -w "$srcfile"`'
      enable_shared_with_static_runtimes=yes
      ;;

    darwin* | rhapsody*)
      case $host_os in
        rhapsody* | darwin1.[012])
         allow_undefined_flag='${wl}-undefined ${wl}suppress'
         ;;
       *) # Darwin 1.3 on
         if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
           allow_undefined_flag='${wl}-flat_namespace ${wl}-undefined ${wl}suppress'
         else
           case ${MACOSX_DEPLOYMENT_TARGET} in
             10.[012])
               allow_undefined_flag='${wl}-flat_namespace ${wl}-undefined ${wl}suppress'
               ;;
             10.*)
               allow_undefined_flag='${wl}-undefined ${wl}dynamic_lookup'
               ;;
           esac
         fi
         ;;
      esac
      archive_cmds_need_lc=no
      hardcode_direct=no
      hardcode_automatic=yes
      hardcode_shlibpath_var=unsupported
      whole_archive_flag_spec=''
      link_all_deplibs=yes
    if test "$GCC" = yes ; then
    	output_verbose_link_cmd='echo'
        archive_cmds="\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring $_lt_dar_single_mod${_lt_dsymutil}"
        module_cmds="\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dsymutil}"
        archive_expsym_cmds="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring ${_lt_dar_single_mod}${_lt_dar_export_syms}${_lt_dsymutil}"
        module_expsym_cmds="sed -e 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dar_export_syms}${_lt_dsymutil}"
    else
      case $cc_basename in
        xlc*)
         output_verbose_link_cmd='echo'
         archive_cmds='$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $xlcverstring'
         module_cmds='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
         archive_expsym_cmds='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $xlcverstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          module_expsym_cmds='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          ;;
       *)
         ld_shlibs=no
          ;;
      esac
    fi
      ;;

    dgux*)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_shlibpath_var=no
      ;;

    freebsd1*)
      ld_shlibs=no
      ;;

    # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
    # support.  Future versions do this automatically, but an explicit c++rt0.o
    # does not break anything, and helps significantly (at the cost of a little
    # extra space).
    freebsd2.2*)
      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    # Unfortunately, older versions of FreeBSD 2 do not have this feature.
    freebsd2*)
      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
      hardcode_direct=yes
      hardcode_minus_L=yes
      hardcode_shlibpath_var=no
      ;;

    # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
    freebsd* | dragonfly*)
      archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    hpux9*)
      if test "$GCC" = yes; then
	archive_cmds='$rm $output_objdir/$soname~$CC -shared -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $libobjs $deplibs $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      else
	archive_cmds='$rm $output_objdir/$soname~$LD -b +b $install_libdir -o $output_objdir/$soname $libobjs $deplibs $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      fi
      hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
      hardcode_libdir_separator=:
      hardcode_direct=yes

      # hardcode_minus_L: Not really in the search PATH,
      # but as the default location of the library.
      hardcode_minus_L=yes
      export_dynamic_flag_spec='${wl}-E'
      ;;

    hpux10*)
      if test "$GCC" = yes -a "$with_gnu_ld" = no; then
	archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
      fi
      if test "$with_gnu_ld" = no; then
	hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
	hardcode_libdir_separator=:

	hardcode_direct=yes
	export_dynamic_flag_spec='${wl}-E'

	# hardcode_minus_L: Not really in the search PATH,
	# but as the default location of the library.
	hardcode_minus_L=yes
      fi
      ;;

    hpux11*)
      if test "$GCC" = yes -a "$with_gnu_ld" = no; then
	case $host_cpu in
	hppa*64*)
	  archive_cmds='$CC -shared ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	ia64*)
	  archive_cmds='$CC -shared ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	*)
	  archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	esac
      else
	case $host_cpu in
	hppa*64*)
	  archive_cmds='$CC -b ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	ia64*)
	  archive_cmds='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	*)
	  archive_cmds='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	esac
      fi
      if test "$with_gnu_ld" = no; then
	hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
	hardcode_libdir_separator=:

	case $host_cpu in
	hppa*64*|ia64*)
	  hardcode_libdir_flag_spec_ld='+b $libdir'
	  hardcode_direct=no
	  hardcode_shlibpath_var=no
	  ;;
	*)
	  hardcode_direct=yes
	  export_dynamic_flag_spec='${wl}-E'

	  # hardcode_minus_L: Not really in the search PATH,
	  # but as the default location of the library.
	  hardcode_minus_L=yes
	  ;;
	esac
      fi
      ;;

    irix5* | irix6* | nonstopux*)
      if test "$GCC" = yes; then
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
      else
	archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
	hardcode_libdir_flag_spec_ld='-rpath $libdir'
      fi
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      hardcode_libdir_separator=:
      link_all_deplibs=yes
      ;;

    netbsd*)
      if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
	archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
      else
	archive_cmds='$LD -shared -o $lib $libobjs $deplibs $linker_flags'      # ELF
      fi
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    newsos6)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_direct=yes
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      hardcode_libdir_separator=:
      hardcode_shlibpath_var=no
      ;;

    openbsd*)
      if test -f /usr/libexec/ld.so; then
	hardcode_direct=yes
	hardcode_shlibpath_var=no
	if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
	  archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
	  archive_expsym_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-retain-symbols-file,$export_symbols'
	  hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
	  export_dynamic_flag_spec='${wl}-E'
	else
	  case $host_os in
	   openbsd[01].* | openbsd2.[0-7] | openbsd2.[0-7].*)
	     archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
	     hardcode_libdir_flag_spec='-R$libdir'
	     ;;
	   *)
	     archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
	     hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
	     ;;
	  esac
        fi
      else
	ld_shlibs=no
      fi
      ;;

    os2*)
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_minus_L=yes
      allow_undefined_flag=unsupported
      archive_cmds='$echo "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$echo "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~$echo DATA >> $output_objdir/$libname.def~$echo " SINGLE NONSHARED" >> $output_objdir/$libname.def~$echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
      old_archive_From_new_cmds='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'
      ;;

    osf3*)
      if test "$GCC" = yes; then
	allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\*'
	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
      else
	allow_undefined_flag=' -expect_unresolved \*'
	archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
      fi
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      hardcode_libdir_separator=:
      ;;

    osf4* | osf5*)	# as osf3* with the addition of -msym flag
      if test "$GCC" = yes; then
	allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\*'
	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
	hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      else
	allow_undefined_flag=' -expect_unresolved \*'
	archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -msym -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
	archive_expsym_cmds='for i in `cat $export_symbols`; do printf "%s %s\\n" -exported_symbol "\$i" >> $lib.exp; done; echo "-hidden">> $lib.exp~
	$LD -shared${allow_undefined_flag} -input $lib.exp $linker_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib~$rm $lib.exp'

	# Both c and cxx compiler support -rpath directly
	hardcode_libdir_flag_spec='-rpath $libdir'
      fi
      hardcode_libdir_separator=:
      ;;

    solaris*)
      no_undefined_flag=' -z text'
      if test "$GCC" = yes; then
	wlarc='${wl}'
	archive_cmds='$CC -shared ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
	  $CC -shared ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags~$rm $lib.exp'
      else
	wlarc=''
	archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
	archive_expsym_cmds='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
  	$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
      fi
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_shlibpath_var=no
      case $host_os in
      solaris2.[0-5] | solaris2.[0-5].*) ;;
      *)
	# The compiler driver will combine and reorder linker options,
	# but understands `-z linker_flag'.  GCC discards it without `$wl',
	# but is careful enough not to reorder.
 	# Supported since Solaris 2.6 (maybe 2.5.1?)
	if test "$GCC" = yes; then
	  whole_archive_flag_spec='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'
	else
	  whole_archive_flag_spec='-z allextract$convenience -z defaultextract'
	fi
	;;
      esac
      link_all_deplibs=yes
      ;;

    sunos4*)
      if test "x$host_vendor" = xsequent; then
	# Use $CC to link under sequent, because it throws in some extra .o
	# files that make .init and .fini sections work.
	archive_cmds='$CC -G ${wl}-h $soname -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linker_flags'
      fi
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_direct=yes
      hardcode_minus_L=yes
      hardcode_shlibpath_var=no
      ;;

    sysv4)
      case $host_vendor in
	sni)
	  archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
	  hardcode_direct=yes # is this really true???
	;;
	siemens)
	  ## LD is ld it makes a PLAMLIB
	  ## CC just makes a GrossModule.
	  archive_cmds='$LD -G -o $lib $libobjs $deplibs $linker_flags'
	  reload_cmds='$CC -r -o $output$reload_objs'
	  hardcode_direct=no
        ;;
	motorola)
	  archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
	  hardcode_direct=no #Motorola manual says yes, but my tests say they lie
	;;
      esac
      runpath_var='LD_RUN_PATH'
      hardcode_shlibpath_var=no
      ;;

    sysv4.3*)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_shlibpath_var=no
      export_dynamic_flag_spec='-Bexport'
      ;;

    sysv4*MP*)
      if test -d /usr/nec; then
	archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
	hardcode_shlibpath_var=no
	runpath_var=LD_RUN_PATH
	hardcode_runpath_var=yes
	ld_shlibs=yes
      fi
      ;;

    sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7* | sco3.2v5.0.[024]*)
      no_undefined_flag='${wl}-z,text'
      archive_cmds_need_lc=no
      hardcode_shlibpath_var=no
      runpath_var='LD_RUN_PATH'

      if test "$GCC" = yes; then
	archive_cmds='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
      fi
      ;;

    sysv5* | sco3.2v5* | sco5v6*)
      # Note: We can NOT use -z defs as we might desire, because we do not
      # link with -lc, and that would cause any symbols used from libc to
      # always be unresolved, which means just about no library would
      # ever link correctly.  If we're not using GNU ld we use -z text
      # though, which does catch some bad symbols but isn't as heavy-handed
      # as -z defs.
      no_undefined_flag='${wl}-z,text'
      allow_undefined_flag='${wl}-z,nodefs'
      archive_cmds_need_lc=no
      hardcode_shlibpath_var=no
      hardcode_libdir_flag_spec='`test -z "$SCOABSPATH" && echo ${wl}-R,$libdir`'
      hardcode_libdir_separator=':'
      link_all_deplibs=yes
      export_dynamic_flag_spec='${wl}-Bexport'
      runpath_var='LD_RUN_PATH'

      if test "$GCC" = yes; then
	archive_cmds='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
      fi
      ;;

    uts4*)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_shlibpath_var=no
      ;;

    *)
      ld_shlibs=no
      ;;
    esac
  fi

echo "$ac_t""$ld_shlibs" 1>&6
test "$ld_shlibs" = no && can_build_shared=no

#
# Do we need to explicitly link libc?
#
case "x$archive_cmds_need_lc" in
x|xyes)
  # Assume -lc should be added
  archive_cmds_need_lc=yes

  if test "$enable_shared" = yes && test "$GCC" = yes; then
    case $archive_cmds in
    *'~'*)
      # FIXME: we may have to deal with multi-command sequences.
      ;;
    '$CC '*)
      # Test whether the compiler implicitly links with -lc since on some
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
      echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
echo "configure:111243: checking whether -lc should be explicitly linked in" >&5
      $rm conftest*
      echo "$lt_simple_compile_test_code" > conftest.$ac_ext

      if { (eval echo configure:111247: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
        deplibs=
        wl=$lt_prog_compiler_wl
	pic_flag=$lt_prog_compiler_pic
        compiler_flags=-v
        linker_flags=-v
        verstring=
        output_objdir=.
        libname=conftest
        lt_save_allow_undefined_flag=$allow_undefined_flag
        allow_undefined_flag=
        if { (eval echo configure:111261: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
        then
	  archive_cmds_need_lc=no
        else
	  archive_cmds_need_lc=yes
        fi
        allow_undefined_flag=$lt_save_allow_undefined_flag
      else
        cat conftest.err 1>&5
      fi
      $rm conftest*
      echo "$ac_t""$archive_cmds_need_lc" 1>&6
      ;;
    esac
  fi
  ;;
esac

echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
echo "configure:111280: checking dynamic linker characteristics" >&5
library_names_spec=
libname_spec='lib$name'
soname_spec=
shrext_cmds=".so"
postinstall_cmds=
postuninstall_cmds=
finish_cmds=
finish_eval=
shlibpath_var=
shlibpath_overrides_runpath=unknown
version_type=none
dynamic_linker="$host_os ld.so"
sys_lib_dlsearch_path_spec="/lib /usr/lib"

if test "$GCC" = yes; then
  case $host_os in
    darwin*) lt_awk_arg="/^libraries:/,/LR/" ;;
    *) lt_awk_arg="/^libraries:/" ;;
  esac
  lt_search_path_spec=`$CC -print-search-dirs | awk $lt_awk_arg | $SED -e "s/^libraries://" -e "s,=/,/,g"`
  if echo "$lt_search_path_spec" | grep ';' >/dev/null ; then
    # if the path contains ";" then we assume it to be the separator
    # otherwise default to the standard path separator (i.e. ":") - it is
    # assumed that no part of a normal pathname contains ";" but that should
    # okay in the real world where ";" in dirpaths is itself problematic.
    lt_search_path_spec=`echo "$lt_search_path_spec" | $SED -e 's/;/ /g'`
  else
    lt_search_path_spec=`echo "$lt_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
  fi
  # Ok, now we have the path, separated by spaces, we can step through it
  # and add multilib dir if necessary.
  lt_tmp_lt_search_path_spec=
  lt_multi_os_dir=`$CC $CPPFLAGS $CFLAGS $LDFLAGS -print-multi-os-directory 2>/dev/null`
  for lt_sys_path in $lt_search_path_spec; do
    if test -d "$lt_sys_path/$lt_multi_os_dir"; then
      lt_tmp_lt_search_path_spec="$lt_tmp_lt_search_path_spec $lt_sys_path/$lt_multi_os_dir"
    else
      test -d "$lt_sys_path" && \
	lt_tmp_lt_search_path_spec="$lt_tmp_lt_search_path_spec $lt_sys_path"
    fi
  done
  lt_search_path_spec=`echo $lt_tmp_lt_search_path_spec | awk '
BEGIN {RS=" "; FS="/|\n";} {
  lt_foo="";
  lt_count=0;
  for (lt_i = NF; lt_i > 0; lt_i--) {
    if ($lt_i != "" && $lt_i != ".") {
      if ($lt_i == "..") {
        lt_count++;
      } else {
        if (lt_count == 0) {
          lt_foo="/" $lt_i lt_foo;
        } else {
          lt_count--;
        }
      }
    }
  }
  if (lt_foo != "") { lt_freq[lt_foo]++; }
  if (lt_freq[lt_foo] == 1) { print lt_foo; }
}'`
  sys_lib_search_path_spec=`echo $lt_search_path_spec`
else
  sys_lib_search_path_spec="/lib /usr/lib /usr/local/lib"
fi
need_lib_prefix=unknown
hardcode_into_libs=no

# when you set need_version to no, make sure it does not cause -set_version
# flags to be left without arguments
need_version=unknown

case $host_os in
aix3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'
  shlibpath_var=LIBPATH

  # AIX 3 has no versioning support, so we append a major version to the name.
  soname_spec='${libname}${release}${shared_ext}$major'
  ;;

aix[4-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  hardcode_into_libs=yes
  if test "$host_cpu" = ia64; then
    # AIX 5 supports IA64
    library_names_spec='${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext}$versuffix $libname${shared_ext}'
    shlibpath_var=LD_LIBRARY_PATH
  else
    # With GCC up to 2.95.x, collect2 would create an import file
    # for dependence libraries.  The import file would start with
    # the line `#! .'.  This would cause the generated library to
    # depend on `.', always an invalid library.  This was fixed in
    # development snapshots of GCC prior to 3.0.
    case $host_os in
      aix4 | aix4.[01] | aix4.[01].*)
      if { echo '#if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 97)'
	   echo ' yes '
	   echo '#endif'; } | ${CC} -E - | grep yes > /dev/null; then
	:
      else
	can_build_shared=no
      fi
      ;;
    esac
    # AIX (on Power*) has no versioning support, so currently we can not hardcode correct
    # soname into executable. Probably we can add versioning support to
    # collect2, so additional links can be useful in future.
    if test "$aix_use_runtimelinking" = yes; then
      # If using run time linking (on AIX 4.2 or later) use lib<name>.so
      # instead of lib<name>.a to let people know that these are not
      # typical AIX shared libraries.
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    else
      # We preserve .a as extension for shared libraries through AIX4.2
      # and later when we are not doing run time linking.
      library_names_spec='${libname}${release}.a $libname.a'
      soname_spec='${libname}${release}${shared_ext}$major'
    fi
    shlibpath_var=LIBPATH
  fi
  ;;

amigaos*)
  library_names_spec='$libname.ixlibrary $libname.a'
  # Create ${libname}_ixlibrary.a entries in /sys/libs.
  finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$echo "X$lib" | $Xsed -e '\''s%^.*/\([^/]*\)\.ixlibrary$%\1%'\''`; test $rm /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
  ;;

beos*)
  library_names_spec='${libname}${shared_ext}'
  dynamic_linker="$host_os ld.so"
  shlibpath_var=LIBRARY_PATH
  ;;

bsdi[45]*)
  version_type=linux
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
  sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
  # the default ld.so.conf also contains /usr/contrib/lib and
  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
  # libtool to hard-code these into programs
  ;;

cygwin* | mingw* | pw32*)
  version_type=windows
  shrext_cmds=".dll"
  need_version=no
  need_lib_prefix=no

  case $GCC,$host_os in
  yes,cygwin* | yes,mingw* | yes,pw32*)
    library_names_spec='$libname.dll.a'
    # DLL is installed to $(libdir)/../bin by postinstall_cmds
    postinstall_cmds='base_file=`basename \${file}`~
      dlpath=`$SHELL 2>&1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
      dldir=$destdir/`dirname \$dlpath`~
      test -d \$dldir || mkdir -p \$dldir~
      $install_prog $dir/$dlname \$dldir/$dlname~
      chmod a+x \$dldir/$dlname'
    postuninstall_cmds='dldll=`$SHELL 2>&1 -c '\''. $file; echo \$dlname'\''`~
      dlpath=$dir/\$dldll~
       $rm \$dlpath'
    shlibpath_overrides_runpath=yes

    case $host_os in
    cygwin*)
      # Cygwin DLLs use 'cyg' prefix rather than 'lib'
      soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec="/usr/lib /lib/w32api /lib /usr/local/lib"
      ;;
    mingw*)
      # MinGW DLLs use traditional 'lib' prefix
      soname_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec=`$CC -print-search-dirs | grep "^libraries:" | $SED -e "s/^libraries://" -e "s,=/,/,g"`
      if echo "$sys_lib_search_path_spec" | grep ';[c-zC-Z]:/' >/dev/null; then
        # It is most probably a Windows format PATH printed by
        # mingw gcc, but we are running on Cygwin. Gcc prints its search
        # path with ; separators, and with drive letters. We can handle the
        # drive letters (cygwin fileutils understands them), so leave them,
        # especially as we might pass files found there to a mingw objdump,
        # which wouldn't understand a cygwinified path. Ahh.
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED -e 's/;/ /g'`
      else
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
      fi
      ;;
    pw32*)
      # pw32 DLLs use 'pw' prefix rather than 'lib'
      library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      ;;
    esac
    ;;

  *)
    library_names_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext} $libname.lib'
    ;;
  esac
  dynamic_linker='Win32 ld.exe'
  # FIXME: first we should search . and the directory the executable is in
  shlibpath_var=PATH
  ;;

darwin* | rhapsody*)
  dynamic_linker="$host_os dyld"
  version_type=darwin
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${versuffix}$shared_ext ${libname}${release}${major}$shared_ext ${libname}$shared_ext'
  soname_spec='${libname}${release}${major}$shared_ext'
  shlibpath_overrides_runpath=yes
  shlibpath_var=DYLD_LIBRARY_PATH
  shrext_cmds='`test .$module = .yes && echo .so || echo .dylib`'
  
  sys_lib_search_path_spec="$sys_lib_search_path_spec /usr/local/lib" 
  sys_lib_dlsearch_path_spec='/usr/local/lib /lib /usr/lib'
  ;;

dgux*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

freebsd1*)
  dynamic_linker=no
  ;;

freebsd* | dragonfly*)
  # DragonFly does not have aout.  When/if they implement a new
  # versioning mechanism, adjust this.
  if test -x /usr/bin/objformat; then
    objformat=`/usr/bin/objformat`
  else
    case $host_os in
    freebsd[123]*) objformat=aout ;;
    *) objformat=elf ;;
    esac
  fi
  version_type=freebsd-$objformat
  case $version_type in
    freebsd-elf*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
      need_version=no
      need_lib_prefix=no
      ;;
    freebsd-*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
      need_version=yes
      ;;
  esac
  shlibpath_var=LD_LIBRARY_PATH
  case $host_os in
  freebsd2*)
    shlibpath_overrides_runpath=yes
    ;;
  freebsd3.[01]* | freebsdelf3.[01]*)
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
    shlibpath_overrides_runpath=no
    hardcode_into_libs=yes
    ;;
  *) # from 4.6 on, and DragonFly
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  esac
  ;;

gnu*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  ;;

hpux9* | hpux10* | hpux11*)
  # Give a soname corresponding to the major version so that dld.sl refuses to
  # link against other versions.
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  case $host_cpu in
  ia64*)
    shrext_cmds='.so'
    hardcode_into_libs=yes
    dynamic_linker="$host_os dld.so"
    shlibpath_var=LD_LIBRARY_PATH
    shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    if test "X$HPUX_IA64_MODE" = X32; then
      sys_lib_search_path_spec="/usr/lib/hpux32 /usr/local/lib/hpux32 /usr/local/lib"
    else
      sys_lib_search_path_spec="/usr/lib/hpux64 /usr/local/lib/hpux64"
    fi
    sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
    ;;
   hppa*64*)
     shrext_cmds='.sl'
     hardcode_into_libs=yes
     dynamic_linker="$host_os dld.sl"
     shlibpath_var=LD_LIBRARY_PATH # How should we handle SHLIB_PATH
     shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
     soname_spec='${libname}${release}${shared_ext}$major'
     sys_lib_search_path_spec="/usr/lib/pa20_64 /usr/ccs/lib/pa20_64"
     sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
     ;;
   *)
    shrext_cmds='.sl'
    dynamic_linker="$host_os dld.sl"
    shlibpath_var=SHLIB_PATH
    shlibpath_overrides_runpath=no # +s is required to enable SHLIB_PATH
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    ;;
  esac
  # HP-UX runs *really* slowly unless shared libraries are mode 555.
  postinstall_cmds='chmod 555 $lib'
  ;;

interix[3-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  hardcode_into_libs=yes
  ;;

irix5* | irix6* | nonstopux*)
  case $host_os in
    nonstopux*) version_type=nonstopux ;;
    *)
	if test "$lt_cv_prog_gnu_ld" = yes; then
		version_type=linux
	else
		version_type=irix
	fi ;;
  esac
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext} $libname${shared_ext}'
  case $host_os in
  irix5* | nonstopux*)
    libsuff= shlibsuff=
    ;;
  *)
    case $LD in # libtool.m4 will add one of these switches to LD
    *-32|*"-32 "|*-melf32bsmip|*"-melf32bsmip ")
      libsuff= shlibsuff= libmagic=32-bit;;
    *-n32|*"-n32 "|*-melf32bmipn32|*"-melf32bmipn32 ")
      libsuff=32 shlibsuff=N32 libmagic=N32;;
    *-64|*"-64 "|*-melf64bmip|*"-melf64bmip ")
      libsuff=64 shlibsuff=64 libmagic=64-bit;;
    *) libsuff= shlibsuff= libmagic=never-match;;
    esac
    ;;
  esac
  shlibpath_var=LD_LIBRARY${shlibsuff}_PATH
  shlibpath_overrides_runpath=no
  sys_lib_search_path_spec="/usr/lib${libsuff} /lib${libsuff} /usr/local/lib${libsuff}"
  sys_lib_dlsearch_path_spec="/usr/lib${libsuff} /lib${libsuff}"
  hardcode_into_libs=yes
  ;;

# No shared lib support for Linux oldld, aout, or coff.
linux*oldld* | linux*aout* | linux*coff*)
  dynamic_linker=no
  ;;

# This must be Linux ELF.
linux* | k*bsd*-gnu)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -n $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  # This implies no fast_install, which is unacceptable.
  # Some rework will be needed to allow for fast_install
  # before this can be enabled.
  hardcode_into_libs=yes

  # Append ld.so.conf contents to the search path
  if test -f /etc/ld.so.conf; then
    lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \$2)); skip = 1; } { if (!skip) print \$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[ 	]*hwcap[ 	]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;/^$/d' | tr '\n' ' '`
    sys_lib_dlsearch_path_spec="/lib /usr/lib $lt_ld_extra"
  fi

  # We used to test for /lib/ld.so.1 and disable shared libraries on
  # powerpc, because MkLinux only supported shared libraries with the
  # GNU dynamic linker.  Since this was broken with cross compilers,
  # most powerpc-linux boxes support dynamic linking these days and
  # people can always --disable-shared, the test was removed, and we
  # assume the GNU/Linux dynamic linker is in use.
  dynamic_linker='GNU/Linux ld.so'
  ;;

netbsd*)
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
    finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
    dynamic_linker='NetBSD (a.out) ld.so'
  else
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    dynamic_linker='NetBSD ld.elf_so'
  fi
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  ;;

newsos6)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

nto-qnx*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

openbsd*)
  version_type=sunos
  sys_lib_dlsearch_path_spec="/usr/lib"
  need_lib_prefix=no
  # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
  case $host_os in
    openbsd3.3 | openbsd3.3.*) need_version=yes ;;
    *)                         need_version=no  ;;
  esac
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    case $host_os in
      openbsd2.[89] | openbsd2.[89].*)
	shlibpath_overrides_runpath=no
	;;
      *)
	shlibpath_overrides_runpath=yes
	;;
      esac
  else
    shlibpath_overrides_runpath=yes
  fi
  ;;

os2*)
  libname_spec='$name'
  shrext_cmds=".dll"
  need_lib_prefix=no
  library_names_spec='$libname${shared_ext} $libname.a'
  dynamic_linker='OS/2 ld.exe'
  shlibpath_var=LIBPATH
  ;;

osf3* | osf4* | osf5*)
  version_type=osf
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib"
  sys_lib_dlsearch_path_spec="$sys_lib_search_path_spec"
  ;;

rdos*)
  dynamic_linker=no
  ;;

solaris*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  # ldd complains unless libraries are executable
  postinstall_cmds='chmod +x $lib'
  ;;

sunos4*)
  version_type=sunos
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/usr/etc" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  if test "$with_gnu_ld" = yes; then
    need_lib_prefix=no
  fi
  need_version=yes
  ;;

sysv4 | sysv4.3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  case $host_vendor in
    sni)
      shlibpath_overrides_runpath=no
      need_lib_prefix=no
      export_dynamic_flag_spec='${wl}-Blargedynsym'
      runpath_var=LD_RUN_PATH
      ;;
    siemens)
      need_lib_prefix=no
      ;;
    motorola)
      need_lib_prefix=no
      need_version=no
      shlibpath_overrides_runpath=no
      sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
      ;;
  esac
  ;;

sysv4*MP*)
  if test -d /usr/nec ;then
    version_type=linux
    library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'
    soname_spec='$libname${shared_ext}.$major'
    shlibpath_var=LD_LIBRARY_PATH
  fi
  ;;

sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
  version_type=freebsd-elf
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  if test "$with_gnu_ld" = yes; then
    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
    shlibpath_overrides_runpath=no
  else
    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
    shlibpath_overrides_runpath=yes
    case $host_os in
      sco3.2v5*)
        sys_lib_search_path_spec="$sys_lib_search_path_spec /lib"
	;;
    esac
  fi
  sys_lib_dlsearch_path_spec='/usr/lib'
  ;;

uts4*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*)
  dynamic_linker=no
  ;;
esac
echo "$ac_t""$dynamic_linker" 1>&6
test "$dynamic_linker" = no && can_build_shared=no

if eval "test \"`echo '$''{'lt_cv_sys_lib_search_path_spec'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
fi

sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
if eval "test \"`echo '$''{'lt_cv_sys_lib_dlsearch_path_spec'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
fi

sys_lib_dlsearch_path_spec="$lt_cv_sys_lib_dlsearch_path_spec"

variables_saved_for_relink="PATH $shlibpath_var $runpath_var"
if test "$GCC" = yes; then
  variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
fi

echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
echo "configure:111905: checking how to hardcode library paths into programs" >&5
hardcode_action=
if test -n "$hardcode_libdir_flag_spec" || \
   test -n "$runpath_var" || \
   test "X$hardcode_automatic" = "Xyes" ; then

  # We can hardcode non-existant directories.
  if test "$hardcode_direct" != no &&
     # If the only mechanism to avoid hardcoding is shlibpath_var, we
     # have to relink, otherwise we might link with an installed library
     # when we should be linking with a yet-to-be-installed one
     ## test "$_LT_AC_TAGVAR(hardcode_shlibpath_var, )" != no &&
     test "$hardcode_minus_L" != no; then
    # Linking always hardcodes the temporary library directory.
    hardcode_action=relink
  else
    # We can link without hardcoding, and we can hardcode nonexisting dirs.
    hardcode_action=immediate
  fi
else
  # We cannot hardcode anything, or else we can only hardcode existing
  # directories.
  hardcode_action=unsupported
fi
echo "$ac_t""$hardcode_action" 1>&6

if test "$hardcode_action" = relink; then
  # Fast installation is not supported
  enable_fast_install=no
elif test "$shlibpath_overrides_runpath" = yes ||
     test "$enable_shared" = no; then
  # Fast installation is not necessary
  enable_fast_install=needless
fi

striplib=
old_striplib=
echo $ac_n "checking whether stripping libraries is possible""... $ac_c" 1>&6
echo "configure:111943: checking whether stripping libraries is possible" >&5
if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
  test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
  test -z "$striplib" && striplib="$STRIP --strip-unneeded"
  echo "$ac_t""yes" 1>&6
else
# FIXME - insert some real tests, host_os isn't really good enough
  case $host_os in
   darwin*)
       if test -n "$STRIP" ; then
         striplib="$STRIP -x"
         old_striplib="$STRIP -S"
         echo "$ac_t""yes" 1>&6
       else
  echo "$ac_t""no" 1>&6
fi
       ;;
   *)
  echo "$ac_t""no" 1>&6
    ;;
  esac
fi

if test "x$enable_dlopen" != xyes; then
  enable_dlopen=unknown
  enable_dlopen_self=unknown
  enable_dlopen_self_static=unknown
else
  lt_cv_dlopen=no
  lt_cv_dlopen_libs=

  case $host_os in
  beos*)
    lt_cv_dlopen="load_add_on"
    lt_cv_dlopen_libs=
    lt_cv_dlopen_self=yes
    ;;

  mingw* | pw32*)
    lt_cv_dlopen="LoadLibrary"
    lt_cv_dlopen_libs=
   ;;

  cygwin*)
    lt_cv_dlopen="dlopen"
    lt_cv_dlopen_libs=
   ;;

  darwin*)
  # if libdl is installed we need to link against it
    echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:111994: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 112002 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:112013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
else
  echo "$ac_t""no" 1>&6

    lt_cv_dlopen="dyld"
    lt_cv_dlopen_libs=
    lt_cv_dlopen_self=yes
    
fi

   ;;

  *)
    echo $ac_n "checking for shl_load""... $ac_c" 1>&6
echo "configure:112042: checking for shl_load" >&5
if eval "test \"`echo '$''{'ac_cv_func_shl_load'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 112047 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shl_load(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shl_load();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shl_load) || defined (__stub___shl_load)
choke me
#else
shl_load();
#endif

; return 0; }
EOF
if { (eval echo configure:112070: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_shl_load=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_shl_load=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'shl_load`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="shl_load"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
echo "configure:112088: checking for shl_load in -ldld" >&5
ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldld  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 112096 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shl_load();

int main() {
shl_load()
; return 0; }
EOF
if { (eval echo configure:112107: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dlopen""... $ac_c" 1>&6
echo "configure:112126: checking for dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 112131 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dlopen) || defined (__stub___dlopen)
choke me
#else
dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:112154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dlopen"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:112172: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 112180 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:112191: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dlopen in -lsvld""... $ac_c" 1>&6
echo "configure:112210: checking for dlopen in -lsvld" >&5
ac_lib_var=`echo svld'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsvld  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 112218 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:112229: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dld_link in -ldld""... $ac_c" 1>&6
echo "configure:112248: checking for dld_link in -ldld" >&5
ac_lib_var=`echo dld'_'dld_link | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldld  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 112256 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dld_link();

int main() {
dld_link()
; return 0; }
EOF
if { (eval echo configure:112267: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
else
  echo "$ac_t""no" 1>&6
fi

	      
fi

	    
fi

	  
fi

	
fi

      
fi

    ;;
  esac

  if test "x$lt_cv_dlopen" != xno; then
    enable_dlopen=yes
  else
    enable_dlopen=no
  fi

  case $lt_cv_dlopen in
  dlopen)
    save_CPPFLAGS="$CPPFLAGS"
    test "x$ac_cv_header_dlfcn_h" = xyes && CPPFLAGS="$CPPFLAGS -DHAVE_DLFCN_H"

    save_LDFLAGS="$LDFLAGS"
    wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $export_dynamic_flag_spec\"

    save_LIBS="$LIBS"
    LIBS="$lt_cv_dlopen_libs $LIBS"

    echo $ac_n "checking whether a program can dlopen itself""... $ac_c" 1>&6
echo "configure:112323: checking whether a program can dlopen itself" >&5
if eval "test \"`echo '$''{'lt_cv_dlopen_self'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  	  if test "$cross_compiling" = yes; then :
  lt_cv_dlopen_self=cross
else
  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 112333 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }
  else
    puts (dlerror ());

    exit (status);
}
EOF
  if { (eval echo configure:112396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) >&5 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
      x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
      x$lt_dlunknown|x*) lt_cv_dlopen_self=no ;;
    esac
  else :
    # compilation failed
    lt_cv_dlopen_self=no
  fi
fi
rm -fr conftest*

    
fi

echo "$ac_t""$lt_cv_dlopen_self" 1>&6

    if test "x$lt_cv_dlopen_self" = xyes; then
      wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
      echo $ac_n "checking whether a statically linked program can dlopen itself""... $ac_c" 1>&6
echo "configure:112419: checking whether a statically linked program can dlopen itself" >&5
if eval "test \"`echo '$''{'lt_cv_dlopen_self_static'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  	  if test "$cross_compiling" = yes; then :
  lt_cv_dlopen_self_static=cross
else
  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 112429 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }
  else
    puts (dlerror ());

    exit (status);
}
EOF
  if { (eval echo configure:112492: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) >&5 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
      x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
      x$lt_dlunknown|x*) lt_cv_dlopen_self_static=no ;;
    esac
  else :
    # compilation failed
    lt_cv_dlopen_self_static=no
  fi
fi
rm -fr conftest*

      
fi

echo "$ac_t""$lt_cv_dlopen_self_static" 1>&6
    fi

    CPPFLAGS="$save_CPPFLAGS"
    LDFLAGS="$save_LDFLAGS"
    LIBS="$save_LIBS"
    ;;
  esac

  case $lt_cv_dlopen_self in
  yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
  *) enable_dlopen_self=unknown ;;
  esac

  case $lt_cv_dlopen_self_static in
  yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
  *) enable_dlopen_self_static=unknown ;;
  esac
fi


# Report which library types will actually be built
echo $ac_n "checking if libtool supports shared libraries""... $ac_c" 1>&6
echo "configure:112533: checking if libtool supports shared libraries" >&5
echo "$ac_t""$can_build_shared" 1>&6

echo $ac_n "checking whether to build shared libraries""... $ac_c" 1>&6
echo "configure:112537: checking whether to build shared libraries" >&5
test "$can_build_shared" = "no" && enable_shared=no

# On AIX, shared libraries and static libraries use the same namespace, and
# are all built from PIC.
case $host_os in
aix3*)
  test "$enable_shared" = yes && enable_static=no
  if test -n "$RANLIB"; then
    archive_cmds="$archive_cmds~\$RANLIB \$lib"
    postinstall_cmds='$RANLIB $lib'
  fi
  ;;

aix[4-9]*)
  if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
    test "$enable_shared" = yes && enable_static=no
  fi
    ;;
esac
echo "$ac_t""$enable_shared" 1>&6

echo $ac_n "checking whether to build static libraries""... $ac_c" 1>&6
echo "configure:112560: checking whether to build static libraries" >&5
# Make sure either enable_shared or enable_static is yes.
test "$enable_shared" = yes || enable_static=yes
echo "$ac_t""$enable_static" 1>&6

# The else clause should only fire when bootstrapping the
# libtool distribution, otherwise you forgot to ship ltmain.sh
# with your package, and you will get complaints that there are
# no rules to generate ltmain.sh.
if test -f "$ltmain"; then
  # See if we are running on zsh, and set the options which allow our commands through
  # without removal of \ escapes.
  if test -n "${ZSH_VERSION+set}" ; then
    setopt NO_GLOB_SUBST
  fi
  # Now quote all the things that may contain metacharacters while being
  # careful not to overquote the AC_SUBSTed values.  We take copies of the
  # variables and quote the copies for generation of the libtool script.
  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
    SED SHELL STRIP \
    libname_spec library_names_spec soname_spec extract_expsyms_cmds \
    old_striplib striplib file_magic_cmd finish_cmds finish_eval \
    deplibs_check_method reload_flag reload_cmds need_locks \
    lt_cv_sys_global_symbol_pipe lt_cv_sys_global_symbol_to_cdecl \
    lt_cv_sys_global_symbol_to_c_name_address \
    sys_lib_search_path_spec sys_lib_dlsearch_path_spec \
    old_postinstall_cmds old_postuninstall_cmds \
    compiler \
    CC \
    LD \
    lt_prog_compiler_wl \
    lt_prog_compiler_pic \
    lt_prog_compiler_static \
    lt_prog_compiler_no_builtin_flag \
    export_dynamic_flag_spec \
    thread_safe_flag_spec \
    whole_archive_flag_spec \
    enable_shared_with_static_runtimes \
    old_archive_cmds \
    old_archive_from_new_cmds \
    predep_objects \
    postdep_objects \
    predeps \
    postdeps \
    compiler_lib_search_path \
    compiler_lib_search_dirs \
    archive_cmds \
    archive_expsym_cmds \
    postinstall_cmds \
    postuninstall_cmds \
    old_archive_from_expsyms_cmds \
    allow_undefined_flag \
    no_undefined_flag \
    export_symbols_cmds \
    hardcode_libdir_flag_spec \
    hardcode_libdir_flag_spec_ld \
    hardcode_libdir_separator \
    hardcode_automatic \
    module_cmds \
    module_expsym_cmds \
    lt_cv_prog_compiler_c_o \
    fix_srcfile_path \
    exclude_expsyms \
    include_expsyms; do

    case $var in
    old_archive_cmds | \
    old_archive_from_new_cmds | \
    archive_cmds | \
    archive_expsym_cmds | \
    module_cmds | \
    module_expsym_cmds | \
    old_archive_from_expsyms_cmds | \
    export_symbols_cmds | \
    extract_expsyms_cmds | reload_cmds | finish_cmds | \
    postinstall_cmds | postuninstall_cmds | \
    old_postinstall_cmds | old_postuninstall_cmds | \
    sys_lib_search_path_spec | sys_lib_dlsearch_path_spec)
      # Double-quote double-evaled strings.
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$double_quote_subst\" -e \"\$sed_quote_subst\" -e \"\$delay_variable_subst\"\`\\\""
      ;;
    *)
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$sed_quote_subst\"\`\\\""
      ;;
    esac
  done

  case $lt_echo in
  *'\$0 --fallback-echo"')
    lt_echo=`$echo "X$lt_echo" | $Xsed -e 's/\\\\\\\$0 --fallback-echo"$/$0 --fallback-echo"/'`
    ;;
  esac

cfgfile="${ofile}T"
  trap "$rm \"$cfgfile\"; exit 1" 1 2 15
  $rm -f "$cfgfile"
  echo "$ac_t""
creating $ofile" 1>&6

  cat <<__EOF__ >> "$cfgfile"
#! $SHELL

# `$echo "$cfgfile" | sed 's%^.*/%%'` - Provide generalized library-building support services.
# Generated automatically by $PROGRAM (GNU $PACKAGE $VERSION$TIMESTAMP)
# NOTE: Changes made to this file will be lost: look at ltmain.sh.
#
# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008
# Free Software Foundation, Inc.
#
# This file is part of GNU Libtool:
# Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
#
# As a special exception to the GNU General Public License, if you
# distribute this file as part of a program that contains a
# configuration script generated by Autoconf, you may include it under
# the same distribution terms that you use for the rest of that program.

# A sed program that does not truncate output.
SED=$lt_SED

# Sed that helps us avoid accidentally triggering echo(1) options like -n.
Xsed="$SED -e 1s/^X//"

# The HP-UX ksh and POSIX shell print the target directory to stdout
# if CDPATH is set.
(unset CDPATH) >/dev/null 2>&1 && unset CDPATH

# The names of the tagged configurations supported by this script.
available_tags=

# ### BEGIN LIBTOOL CONFIG

# Libtool was configured on host `(hostname || uname -n) 2>/dev/null | sed 1q`:

# Shell to use when invoking shell scripts.
SHELL=$lt_SHELL

# Whether or not to build shared libraries.
build_libtool_libs=$enable_shared

# Whether or not to build static libraries.
build_old_libs=$enable_static

# Whether or not to add -lc for building shared libraries.
build_libtool_need_lc=$archive_cmds_need_lc

# Whether or not to disallow shared libs when runtime libs are static
allow_libtool_libs_with_static_runtimes=$enable_shared_with_static_runtimes

# Whether or not to optimize for fast installation.
fast_install=$enable_fast_install

# The host system.
host_alias=$host_alias
host=$host
host_os=$host_os

# The build system.
build_alias=$build_alias
build=$build
build_os=$build_os

# An echo program that does not interpret backslashes.
echo=$lt_echo

# The archiver.
AR=$lt_AR
AR_FLAGS=$lt_AR_FLAGS

# A C compiler.
LTCC=$lt_LTCC

# LTCC compiler flags.
LTCFLAGS=$lt_LTCFLAGS

# A language-specific compiler.
CC=$lt_compiler

# Is the compiler the GNU C compiler?
with_gcc=$GCC

# An ERE matcher.
EGREP=$lt_EGREP

# The linker used to build libraries.
LD=$lt_LD

# Whether we need hard or soft links.
LN_S=$lt_LN_S

# A BSD-compatible nm program.
NM=$lt_NM

# A symbol stripping program
STRIP=$lt_STRIP

# Used to examine libraries when file_magic_cmd begins "file"
MAGIC_CMD=$MAGIC_CMD

# Used on cygwin: DLL creation program.
DLLTOOL="$DLLTOOL"

# Used on cygwin: object dumper.
OBJDUMP="$OBJDUMP"

# Used on cygwin: assembler.
AS="$AS"

# The name of the directory that contains temporary libtool files.
objdir=$objdir

# How to create reloadable object files.
reload_flag=$lt_reload_flag
reload_cmds=$lt_reload_cmds

# How to pass a linker flag through the compiler.
wl=$lt_lt_prog_compiler_wl

# Object file suffix (normally "o").
objext="$ac_objext"

# Old archive suffix (normally "a").
libext="$libext"

# Shared library suffix (normally ".so").
shrext_cmds='$shrext_cmds'

# Executable file suffix (normally "").
exeext="$exeext"

# Additional compiler flags for building library objects.
pic_flag=$lt_lt_prog_compiler_pic
pic_mode=$pic_mode

# What is the maximum length of a command?
max_cmd_len=$lt_cv_sys_max_cmd_len

# Does compiler simultaneously support -c and -o options?
compiler_c_o=$lt_lt_cv_prog_compiler_c_o

# Must we lock files when doing compilation?
need_locks=$lt_need_locks

# Do we need the lib prefix for modules?
need_lib_prefix=$need_lib_prefix

# Do we need a version for libraries?
need_version=$need_version

# Whether dlopen is supported.
dlopen_support=$enable_dlopen

# Whether dlopen of programs is supported.
dlopen_self=$enable_dlopen_self

# Whether dlopen of statically linked programs is supported.
dlopen_self_static=$enable_dlopen_self_static

# Compiler flag to prevent dynamic linking.
link_static_flag=$lt_lt_prog_compiler_static

# Compiler flag to turn off builtin functions.
no_builtin_flag=$lt_lt_prog_compiler_no_builtin_flag

# Compiler flag to allow reflexive dlopens.
export_dynamic_flag_spec=$lt_export_dynamic_flag_spec

# Compiler flag to generate shared objects directly from archives.
whole_archive_flag_spec=$lt_whole_archive_flag_spec

# Compiler flag to generate thread-safe objects.
thread_safe_flag_spec=$lt_thread_safe_flag_spec

# Library versioning type.
version_type=$version_type

# Format of library name prefix.
libname_spec=$lt_libname_spec

# List of archive names.  First name is the real one, the rest are links.
# The last name is the one that the linker finds with -lNAME.
library_names_spec=$lt_library_names_spec

# The coded name of the library, if different from the real name.
soname_spec=$lt_soname_spec

# Commands used to build and install an old-style archive.
RANLIB=$lt_RANLIB
old_archive_cmds=$lt_old_archive_cmds
old_postinstall_cmds=$lt_old_postinstall_cmds
old_postuninstall_cmds=$lt_old_postuninstall_cmds

# Create an old-style archive from a shared archive.
old_archive_from_new_cmds=$lt_old_archive_from_new_cmds

# Create a temporary old-style archive to link instead of a shared archive.
old_archive_from_expsyms_cmds=$lt_old_archive_from_expsyms_cmds

# Commands used to build and install a shared archive.
archive_cmds=$lt_archive_cmds
archive_expsym_cmds=$lt_archive_expsym_cmds
postinstall_cmds=$lt_postinstall_cmds
postuninstall_cmds=$lt_postuninstall_cmds

# Commands used to build a loadable module (assumed same as above if empty)
module_cmds=$lt_module_cmds
module_expsym_cmds=$lt_module_expsym_cmds

# Commands to strip libraries.
old_striplib=$lt_old_striplib
striplib=$lt_striplib

# Dependencies to place before the objects being linked to create a
# shared library.
predep_objects=$lt_predep_objects

# Dependencies to place after the objects being linked to create a
# shared library.
postdep_objects=$lt_postdep_objects

# Dependencies to place before the objects being linked to create a
# shared library.
predeps=$lt_predeps

# Dependencies to place after the objects being linked to create a
# shared library.
postdeps=$lt_postdeps

# The directories searched by this compiler when creating a shared
# library
compiler_lib_search_dirs=$lt_compiler_lib_search_dirs

# The library search path used internally by the compiler when linking
# a shared library.
compiler_lib_search_path=$lt_compiler_lib_search_path

# Method to check whether dependent libraries are shared objects.
deplibs_check_method=$lt_deplibs_check_method

# Command to use when deplibs_check_method == file_magic.
file_magic_cmd=$lt_file_magic_cmd

# Flag that allows shared libraries with undefined symbols to be built.
allow_undefined_flag=$lt_allow_undefined_flag

# Flag that forces no undefined symbols.
no_undefined_flag=$lt_no_undefined_flag

# Commands used to finish a libtool library installation in a directory.
finish_cmds=$lt_finish_cmds

# Same as above, but a single script fragment to be evaled but not shown.
finish_eval=$lt_finish_eval

# Take the output of nm and produce a listing of raw symbols and C names.
global_symbol_pipe=$lt_lt_cv_sys_global_symbol_pipe

# Transform the output of nm in a proper C declaration
global_symbol_to_cdecl=$lt_lt_cv_sys_global_symbol_to_cdecl

# Transform the output of nm in a C name address pair
global_symbol_to_c_name_address=$lt_lt_cv_sys_global_symbol_to_c_name_address

# This is the shared library runtime path variable.
runpath_var=$runpath_var

# This is the shared library path variable.
shlibpath_var=$shlibpath_var

# Is shlibpath searched before the hard-coded library search path?
shlibpath_overrides_runpath=$shlibpath_overrides_runpath

# How to hardcode a shared library path into an executable.
hardcode_action=$hardcode_action

# Whether we should hardcode library paths into libraries.
hardcode_into_libs=$hardcode_into_libs

# Flag to hardcode \$libdir into a binary during linking.
# This must work even if \$libdir does not exist.
hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec

# If ld is used when linking, flag to hardcode \$libdir into
# a binary during linking. This must work even if \$libdir does
# not exist.
hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld

# Whether we need a single -rpath flag with a separated argument.
hardcode_libdir_separator=$lt_hardcode_libdir_separator

# Set to yes if using DIR/libNAME${shared_ext} during linking hardcodes DIR into the
# resulting binary.
hardcode_direct=$hardcode_direct

# Set to yes if using the -LDIR flag during linking hardcodes DIR into the
# resulting binary.
hardcode_minus_L=$hardcode_minus_L

# Set to yes if using SHLIBPATH_VAR=DIR during linking hardcodes DIR into
# the resulting binary.
hardcode_shlibpath_var=$hardcode_shlibpath_var

# Set to yes if building a shared library automatically hardcodes DIR into the library
# and all subsequent libraries and executables linked against it.
hardcode_automatic=$hardcode_automatic

# Variables whose values should be saved in libtool wrapper scripts and
# restored at relink time.
variables_saved_for_relink="$variables_saved_for_relink"

# Whether libtool must link a program against all its dependency libraries.
link_all_deplibs=$link_all_deplibs

# Compile-time system search path for libraries
sys_lib_search_path_spec=$lt_sys_lib_search_path_spec

# Run-time system search path for libraries
sys_lib_dlsearch_path_spec=$lt_sys_lib_dlsearch_path_spec

# Fix the shell variable \$srcfile for the compiler.
fix_srcfile_path=$lt_fix_srcfile_path

# Set to yes if exported symbols are required.
always_export_symbols=$always_export_symbols

# The commands to list exported symbols.
export_symbols_cmds=$lt_export_symbols_cmds

# The commands to extract the exported symbol list from a shared archive.
extract_expsyms_cmds=$lt_extract_expsyms_cmds

# Symbols that should not be listed in the preloaded symbols.
exclude_expsyms=$lt_exclude_expsyms

# Symbols that must always be exported.
include_expsyms=$lt_include_expsyms

# ### END LIBTOOL CONFIG

__EOF__


  case $host_os in
  aix3*)
    cat <<\EOF >> "$cfgfile"

# AIX sometimes has problems with the GCC collect2 program.  For some
# reason, if we set the COLLECT_NAMES environment variable, the problems
# vanish in a puff of smoke.
if test "X${COLLECT_NAMES+set}" != Xset; then
  COLLECT_NAMES=
  export COLLECT_NAMES
fi
EOF
    ;;
  esac

  # We use sed instead of cat because bash on DJGPP gets confused if
  # if finds mixed CR/LF and LF-only lines.  Since sed operates in
  # text mode, it properly converts lines to CR/LF.  This bash problem
  # is reportedly fixed, but why not run on old versions too?
  sed '$q' "$ltmain" >> "$cfgfile" || (rm -f "$cfgfile"; exit 1)

  mv -f "$cfgfile" "$ofile" || \
    (rm -f "$ofile" && cp "$cfgfile" "$ofile" && rm -f "$cfgfile")
  chmod +x "$ofile"

else
  # If there is no Makefile yet, we rely on a make rule to execute
  # `config.status --recheck' to rerun these tests and create the
  # libtool script then.
  ltmain_in=`echo $ltmain | sed -e 's/\.sh$/.in/'`
  if test -f "$ltmain_in"; then
    test -f Makefile && make "$ltmain"
  fi
fi


ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

CC="$lt_save_CC"

# Check whether --with-tags or --without-tags was given.
if test "${with_tags+set}" = set; then
  withval="$with_tags"
  tagnames="$withval"
fi


if test -f "$ltmain" && test -n "$tagnames"; then
  if test ! -f "${ofile}"; then
    echo "configure: warning: output file \`$ofile' does not exist" 1>&2
  fi

  if test -z "$LTCC"; then
    eval "`$SHELL ${ofile} --config | grep '^LTCC='`"
    if test -z "$LTCC"; then
      echo "configure: warning: output file \`$ofile' does not look like a libtool script" 1>&2
    else
      echo "configure: warning: using \`LTCC=$LTCC', extracted from \`$ofile'" 1>&2
    fi
  fi
  if test -z "$LTCFLAGS"; then
    eval "`$SHELL ${ofile} --config | grep '^LTCFLAGS='`"
  fi

  # Extract list of available tagged configurations in $ofile.
  # Note that this assumes the entire list is on one line.
  available_tags=`grep "^available_tags=" "${ofile}" | $SED -e 's/available_tags=\(.*$\)/\1/' -e 's/\"//g'`

  lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
  for tagname in $tagnames; do
    IFS="$lt_save_ifs"
    # Check whether tagname contains only valid characters
    case `$echo "X$tagname" | $Xsed -e 's:[-_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890,/]::g'` in
    "") ;;
    *)  { echo "configure: error: invalid tag name: $tagname" 1>&2; exit 1; }
	;;
    esac

    if grep "^# ### BEGIN LIBTOOL TAG CONFIG: $tagname$" < "${ofile}" > /dev/null
    then
      { echo "configure: error: tag name \"$tagname\" already exists" 1>&2; exit 1; }
    fi

    # Update the list of available tags.
    if test -n "$tagname"; then
      echo appending configuration tag \"$tagname\" to $ofile

      case $tagname in
      CXX)
	if test -n "$CXX" && ( test "X$CXX" != "Xno" &&
	    ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
	    (test "X$CXX" != "Xg++"))) ; then
	  
ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross




archive_cmds_need_lc_CXX=no
allow_undefined_flag_CXX=
always_export_symbols_CXX=no
archive_expsym_cmds_CXX=
export_dynamic_flag_spec_CXX=
hardcode_direct_CXX=no
hardcode_libdir_flag_spec_CXX=
hardcode_libdir_flag_spec_ld_CXX=
hardcode_libdir_separator_CXX=
hardcode_minus_L_CXX=no
hardcode_shlibpath_var_CXX=unsupported
hardcode_automatic_CXX=no
module_cmds_CXX=
module_expsym_cmds_CXX=
link_all_deplibs_CXX=unknown
old_archive_cmds_CXX=$old_archive_cmds
no_undefined_flag_CXX=
whole_archive_flag_spec_CXX=
enable_shared_with_static_runtimes_CXX=no

# Dependencies to place before and after the object being linked:
predep_objects_CXX=
postdep_objects_CXX=
predeps_CXX=
postdeps_CXX=
compiler_lib_search_path_CXX=
compiler_lib_search_dirs_CXX=

# Source file extension for C++ test sources.
ac_ext=cpp

# Object file extension for compiled C++ test sources.
objext=o
objext_CXX=$objext

# Code to be used in simple compile tests
lt_simple_compile_test_code="int some_variable = 0;"

# Code to be used in simple link tests
lt_simple_link_test_code='int main(int, char *[]) { return(0); }'

# ltmain only uses $CC for tagged configurations so make sure $CC is set.

# If no C compiler was specified, use CC.
LTCC=${LTCC-"$CC"}

# If no C compiler flags were specified, use CFLAGS.
LTCFLAGS=${LTCFLAGS-"$CFLAGS"}

# Allow CC to be a program name with arguments.
compiler=$CC


# save warnings/boilerplate of simple test code
ac_outfile=conftest.$ac_objext
echo "$lt_simple_compile_test_code" >conftest.$ac_ext
eval "$ac_compile" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_compiler_boilerplate=`cat conftest.err`
$rm conftest*

ac_outfile=conftest.$ac_objext
echo "$lt_simple_link_test_code" >conftest.$ac_ext
eval "$ac_link" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_linker_boilerplate=`cat conftest.err`
$rm -r conftest*


# Allow CC to be a program name with arguments.
lt_save_CC=$CC
lt_save_LD=$LD
lt_save_GCC=$GCC
GCC=$GXX
lt_save_with_gnu_ld=$with_gnu_ld
lt_save_path_LD=$lt_cv_path_LD
if test -n "${lt_cv_prog_gnu_ldcxx+set}"; then
  lt_cv_prog_gnu_ld=$lt_cv_prog_gnu_ldcxx
else
  unset lt_cv_prog_gnu_ld
fi
if test -n "${lt_cv_path_LDCXX+set}"; then
  lt_cv_path_LD=$lt_cv_path_LDCXX
else
  unset lt_cv_path_LD
fi
test -z "${LDCXX+set}" || LD=$LDCXX
CC=${CXX-"c++"}
compiler=$CC
compiler_CXX=$CC
for cc_temp in $compiler""; do
  case $cc_temp in
    compile | *[\\/]compile | ccache | *[\\/]ccache ) ;;
    distcc | *[\\/]distcc | purify | *[\\/]purify ) ;;
    \-*) ;;
    *) break;;
  esac
done
cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`


# We don't want -fno-exception wen compiling C++ code, so set the
# no_builtin_flag separately
if test "$GXX" = yes; then
  lt_prog_compiler_no_builtin_flag_CXX=' -fno-builtin'
else
  lt_prog_compiler_no_builtin_flag_CXX=
fi

if test "$GXX" = yes; then
  # Set up default GNU C++ configuration

  # Check whether --with-gnu-ld or --without-gnu-ld was given.
if test "${with_gnu_ld+set}" = set; then
  withval="$with_gnu_ld"
  test "$withval" = no || with_gnu_ld=yes
else
  with_gnu_ld=no
fi

ac_prog=ld
if test "$GCC" = yes; then
  # Check if gcc -print-prog-name=ld gives a path.
  echo $ac_n "checking for ld used by $CC""... $ac_c" 1>&6
echo "configure:113246: checking for ld used by $CC" >&5
  case $host in
  *-*-mingw*)
    # gcc leaves a trailing carriage return which upsets mingw
    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\015'` ;;
  *)
    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;
  esac
  case $ac_prog in
    # Accept absolute paths.
    [\\/]* | ?:[\\/]*)
      re_direlt='/[^/][^/]*/\.\./'
      # Canonicalize the pathname of ld
      ac_prog=`echo $ac_prog| $SED 's%\\\\%/%g'`
      while echo $ac_prog | grep "$re_direlt" > /dev/null 2>&1; do
	ac_prog=`echo $ac_prog| $SED "s%$re_direlt%/%"`
      done
      test -z "$LD" && LD="$ac_prog"
      ;;
  "")
    # If it fails, then pretend we aren't using GCC.
    ac_prog=ld
    ;;
  *)
    # If it is relative, then search for the first ld in PATH.
    with_gnu_ld=unknown
    ;;
  esac
elif test "$with_gnu_ld" = yes; then
  echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
echo "configure:113276: checking for GNU ld" >&5
else
  echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
echo "configure:113279: checking for non-GNU ld" >&5
fi
if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -z "$LD"; then
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for ac_dir in $PATH; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f "$ac_dir/$ac_prog" || test -f "$ac_dir/$ac_prog$ac_exeext"; then
      lt_cv_path_LD="$ac_dir/$ac_prog"
      # Check to see if the program is GNU ld.  I'd rather use --version,
      # but apparently some variants of GNU ld only accept -v.
      # Break only if it was the GNU/non-GNU ld that we prefer.
      case `"$lt_cv_path_LD" -v 2>&1 </dev/null` in
      *GNU* | *'with BFD'*)
	test "$with_gnu_ld" != no && break
	;;
      *)
	test "$with_gnu_ld" != yes && break
	;;
      esac
    fi
  done
  IFS="$lt_save_ifs"
else
  lt_cv_path_LD="$LD" # Let the user override the test with a path.
fi
fi

LD="$lt_cv_path_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
echo "configure:113318: checking if the linker ($LD) is GNU ld" >&5
if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # I'd rather use --version here, but apparently some GNU lds only accept -v.
case `$LD -v 2>&1 </dev/null` in
*GNU* | *'with BFD'*)
  lt_cv_prog_gnu_ld=yes
  ;;
*)
  lt_cv_prog_gnu_ld=no
  ;;
esac
fi

echo "$ac_t""$lt_cv_prog_gnu_ld" 1>&6
with_gnu_ld=$lt_cv_prog_gnu_ld



  # Check if GNU C++ uses GNU ld as the underlying linker, since the
  # archiving commands below assume that GNU ld is being used.
  if test "$with_gnu_ld" = yes; then
    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
    archive_expsym_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'

    hardcode_libdir_flag_spec_CXX='${wl}--rpath ${wl}$libdir'
    export_dynamic_flag_spec_CXX='${wl}--export-dynamic'

    # If archive_cmds runs LD, not CC, wlarc should be empty
    # XXX I think wlarc can be eliminated in ltcf-cxx, but I need to
    #     investigate it a little bit more. (MM)
    wlarc='${wl}'

    # ancient GNU ld didn't support --whole-archive et. al.
    if eval "`$CC -print-prog-name=ld` --help 2>&1" | \
	grep 'no-whole-archive' > /dev/null; then
      whole_archive_flag_spec_CXX="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
    else
      whole_archive_flag_spec_CXX=
    fi
  else
    with_gnu_ld=no
    wlarc=

    # A generic and very simple default shared library creation
    # command for GNU C++ for the case where it uses the native
    # linker, instead of GNU ld.  If possible, this setting should
    # overridden to take advantage of the native linker features on
    # the platform it is being used on.
    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
  fi

  # Commands to make compiler produce verbose output that lists
  # what "hidden" libraries, object files and flags are used when
  # linking a shared library.
  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "\-L"'

else
  GXX=no
  with_gnu_ld=no
  wlarc=
fi

# PORTME: fill in a description of your system's C++ link characteristics
echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
echo "configure:113384: checking whether the $compiler linker ($LD) supports shared libraries" >&5
ld_shlibs_CXX=yes
case $host_os in
  aix3*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  aix[4-9]*)
    if test "$host_cpu" = ia64; then
      # On IA64, the linker does run time linking by default, so we don't
      # have to do anything special.
      aix_use_runtimelinking=no
      exp_sym_flag='-Bexport'
      no_entry_flag=""
    else
      aix_use_runtimelinking=no

      # Test if we are trying to use run time linking or normal
      # AIX style linking. If -brtl is somewhere in LDFLAGS, we
      # need to do runtime linking.
      case $host_os in aix4.[23]|aix4.[23].*|aix[5-9]*)
	for ld_flag in $LDFLAGS; do
	  case $ld_flag in
	  *-brtl*)
	    aix_use_runtimelinking=yes
	    break
	    ;;
	  esac
	done
	;;
      esac

      exp_sym_flag='-bexport'
      no_entry_flag='-bnoentry'
    fi

    # When large executables or shared objects are built, AIX ld can
    # have problems creating the table of contents.  If linking a library
    # or program results in "error TOC overflow" add -mminimal-toc to
    # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
    # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.

    archive_cmds_CXX=''
    hardcode_direct_CXX=yes
    hardcode_libdir_separator_CXX=':'
    link_all_deplibs_CXX=yes

    if test "$GXX" = yes; then
      case $host_os in aix4.[012]|aix4.[012].*)
      # We only want to do this on AIX 4.2 and lower, the check
      # below for broken collect2 doesn't work under 4.3+
	collect2name=`${CC} -print-prog-name=collect2`
	if test -f "$collect2name" && \
	   strings "$collect2name" | grep resolve_lib_name >/dev/null
	then
	  # We have reworked collect2
	  :
	else
	  # We have old collect2
	  hardcode_direct_CXX=unsupported
	  # It fails to find uninstalled libraries when the uninstalled
	  # path is not listed in the libpath.  Setting hardcode_minus_L
	  # to unsupported forces relinking
	  hardcode_minus_L_CXX=yes
	  hardcode_libdir_flag_spec_CXX='-L$libdir'
	  hardcode_libdir_separator_CXX=
	fi
	;;
      esac
      shared_flag='-shared'
      if test "$aix_use_runtimelinking" = yes; then
	shared_flag="$shared_flag "'${wl}-G'
      fi
    else
      # not using gcc
      if test "$host_cpu" = ia64; then
	# VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
	# chokes on -Wl,-G. The following line is correct:
	shared_flag='-G'
      else
	if test "$aix_use_runtimelinking" = yes; then
	  shared_flag='${wl}-G'
	else
	  shared_flag='${wl}-bM:SRE'
	fi
      fi
    fi

    # It seems that -bexpall does not export symbols beginning with
    # underscore (_), so it is better to generate a list of symbols to export.
    always_export_symbols_CXX=yes
    if test "$aix_use_runtimelinking" = yes; then
      # Warning - without using the other runtime loading flags (-brtl),
      # -berok will link without error, but may produce a broken library.
      allow_undefined_flag_CXX='-berok'
      # Determine the default libpath from the value encoded in an empty executable.
      
cat > conftest.$ac_ext <<EOF
#line 113482 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { (eval echo configure:113487: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
 
lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

      hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"

      archive_expsym_cmds_CXX="\$CC"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then echo "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
     else
      if test "$host_cpu" = ia64; then
	hardcode_libdir_flag_spec_CXX='${wl}-R $libdir:/usr/lib:/lib'
	allow_undefined_flag_CXX="-z nodefs"
	archive_expsym_cmds_CXX="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
      else
	# Determine the default libpath from the value encoded in an empty executable.
	
cat > conftest.$ac_ext <<EOF
#line 113521 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { (eval echo configure:113526: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
 
lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

	hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"
	# Warning - without using the other run time loading flags,
	# -berok will link without error, but may produce a broken library.
	no_undefined_flag_CXX=' ${wl}-bernotok'
	allow_undefined_flag_CXX=' ${wl}-berok'
	# Exported symbols can be pulled into shared objects from archives
	whole_archive_flag_spec_CXX='$convenience'
	archive_cmds_need_lc_CXX=yes
	# This is similar to how AIX traditionally builds its shared libraries.
	archive_expsym_cmds_CXX="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
      fi
    fi
    ;;

  beos*)
    if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
      allow_undefined_flag_CXX=unsupported
      # Joseph Beckenbach <jrb3@best.com> says some releases of gcc
      # support --undefined.  This deserves some investigation.  FIXME
      archive_cmds_CXX='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
    else
      ld_shlibs_CXX=no
    fi
    ;;

  chorus*)
    case $cc_basename in
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;

  cygwin* | mingw* | pw32*)
    # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, CXX) is actually meaningless,
    # as there is no search path for DLLs.
    hardcode_libdir_flag_spec_CXX='-L$libdir'
    allow_undefined_flag_CXX=unsupported
    always_export_symbols_CXX=no
    enable_shared_with_static_runtimes_CXX=yes

    if $LD --help 2>&1 | grep 'auto-import' > /dev/null; then
      archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
      # If the export-symbols file already is a .def file (1st line
      # is EXPORTS), use it as is; otherwise, prepend...
      archive_expsym_cmds_CXX='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
	cp $export_symbols $output_objdir/$soname.def;
      else
	echo EXPORTS > $output_objdir/$soname.def;
	cat $export_symbols >> $output_objdir/$soname.def;
      fi~
      $CC -shared -nostdlib $output_objdir/$soname.def $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
    else
      ld_shlibs_CXX=no
    fi
  ;;
      darwin* | rhapsody*)
      archive_cmds_need_lc_CXX=no
      hardcode_direct_CXX=no
      hardcode_automatic_CXX=yes
      hardcode_shlibpath_var_CXX=unsupported
      whole_archive_flag_spec_CXX=''
      link_all_deplibs_CXX=yes
      allow_undefined_flag_CXX="$_lt_dar_allow_undefined"
      if test "$GXX" = yes ; then
      output_verbose_link_cmd='echo'
      archive_cmds_CXX="\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring $_lt_dar_single_mod${_lt_dsymutil}"
      module_cmds_CXX="\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dsymutil}"
      archive_expsym_cmds_CXX="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring ${_lt_dar_single_mod}${_lt_dar_export_syms}${_lt_dsymutil}"
      module_expsym_cmds_CXX="sed -e 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dar_export_syms}${_lt_dsymutil}"
      if test "$lt_cv_apple_cc_single_mod" != "yes"; then
        archive_cmds_CXX="\$CC -r -keep_private_externs -nostdlib -o \${lib}-master.o \$libobjs~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \${lib}-master.o \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring${_lt_dsymutil}"
        archive_expsym_cmds_CXX="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -r -keep_private_externs -nostdlib -o \${lib}-master.o \$libobjs~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \${lib}-master.o \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring${_lt_dar_export_syms}${_lt_dsymutil}"
      fi
      else
      case $cc_basename in
        xlc*)
         output_verbose_link_cmd='echo'
          archive_cmds_CXX='$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $xlcverstring'
          module_cmds_CXX='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
          archive_expsym_cmds_CXX='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $xlcverstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          module_expsym_cmds_CXX='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          ;;
       *)
         ld_shlibs_CXX=no
          ;;
      esac
      fi
        ;;

  dgux*)
    case $cc_basename in
      ec++*)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      ghcx*)
	# Green Hills C++ Compiler
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  freebsd[12]*)
    # C++ shared libraries reported to be fairly broken before switch to ELF
    ld_shlibs_CXX=no
    ;;
  freebsd-elf*)
    archive_cmds_need_lc_CXX=no
    ;;
  freebsd* | dragonfly*)
    # FreeBSD 3 and later use GNU C++ and GNU ld with standard ELF
    # conventions
    ld_shlibs_CXX=yes
    ;;
  gnu*)
    ;;
  hpux9*)
    hardcode_libdir_flag_spec_CXX='${wl}+b ${wl}$libdir'
    hardcode_libdir_separator_CXX=:
    export_dynamic_flag_spec_CXX='${wl}-E'
    hardcode_direct_CXX=yes
    hardcode_minus_L_CXX=yes # Not in the search PATH,
				# but as the default
				# location of the library.

    case $cc_basename in
    CC*)
      # FIXME: insert proper C++ library support
      ld_shlibs_CXX=no
      ;;
    aCC*)
      archive_cmds_CXX='$rm $output_objdir/$soname~$CC -b ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      # Commands to make compiler produce verbose output that lists
      # what "hidden" libraries, object files and flags are used when
      # linking a shared library.
      #
      # There doesn't appear to be a way to prevent this compiler from
      # explicitly linking system object files so we need to strip them
      # from the output so that they don't get included in the library
      # dependencies.
      output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | grep "[-]L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
      ;;
    *)
      if test "$GXX" = yes; then
        archive_cmds_CXX='$rm $output_objdir/$soname~$CC -shared -nostdlib -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      else
        # FIXME: insert proper C++ library support
        ld_shlibs_CXX=no
      fi
      ;;
    esac
    ;;
  hpux10*|hpux11*)
    if test $with_gnu_ld = no; then
      hardcode_libdir_flag_spec_CXX='${wl}+b ${wl}$libdir'
      hardcode_libdir_separator_CXX=:

      case $host_cpu in
      hppa*64*|ia64*) ;;
      *)
	export_dynamic_flag_spec_CXX='${wl}-E'
        ;;
      esac
    fi
    case $host_cpu in
    hppa*64*|ia64*)
      hardcode_direct_CXX=no
      hardcode_shlibpath_var_CXX=no
      ;;
    *)
      hardcode_direct_CXX=yes
      hardcode_minus_L_CXX=yes # Not in the search PATH,
					      # but as the default
					      # location of the library.
      ;;
    esac

    case $cc_basename in
      CC*)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      aCC*)
	case $host_cpu in
	hppa*64*)
	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  ;;
	ia64*)
	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  ;;
	*)
	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  ;;
	esac
	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | grep "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	if test "$GXX" = yes; then
	  if test $with_gnu_ld = no; then
	    case $host_cpu in
	    hppa*64*)
	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	      ;;
	    ia64*)
	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	      ;;
	    *)
	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	      ;;
	    esac
	  fi
	else
	  # FIXME: insert proper C++ library support
	  ld_shlibs_CXX=no
	fi
	;;
    esac
    ;;
  interix[3-9]*)
    hardcode_direct_CXX=no
    hardcode_shlibpath_var_CXX=no
    hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
    export_dynamic_flag_spec_CXX='${wl}-E'
    # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
    # Instead, shared libraries are loaded at an image base (0x10000000 by
    # default) and relocated if they conflict, which is a slow very memory
    # consuming and fragmenting process.  To avoid this, we pick a random,
    # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
    # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
    archive_cmds_CXX='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
    archive_expsym_cmds_CXX='sed "s,^,_," $export_symbols >$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
    ;;
  irix5* | irix6*)
    case $cc_basename in
      CC*)
	# SGI C++
	archive_cmds_CXX='$CC -shared -all -multigot $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'

	# Archives containing C++ object files must be created using
	# "CC -ar", where "CC" is the IRIX C++ compiler.  This is
	# necessary to make sure instantiated templates are included
	# in the archive.
	old_archive_cmds_CXX='$CC -ar -WR,-u -o $oldlib $oldobjs'
	;;
      *)
	if test "$GXX" = yes; then
	  if test "$with_gnu_ld" = no; then
	    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
	  else
	    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` -o $lib'
	  fi
	fi
	link_all_deplibs_CXX=yes
	;;
    esac
    hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
    hardcode_libdir_separator_CXX=:
    ;;
  linux* | k*bsd*-gnu)
    case $cc_basename in
      KCC*)
	# Kuck and Associates, Inc. (KAI) C++ Compiler

	# KCC will only create a shared library if the output file
	# ends with ".so" (or ".sl" for HP-UX), so rename the library
	# to its proper name (with version) after linking.
	archive_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'
	archive_expsym_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib ${wl}-retain-symbols-file,$export_symbols; mv \$templib $lib'
	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1 | grep "ld"`; rm -f libconftest$shared_ext; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'

	hardcode_libdir_flag_spec_CXX='${wl}--rpath,$libdir'
	export_dynamic_flag_spec_CXX='${wl}--export-dynamic'

	# Archives containing C++ object files must be created using
	# "CC -Bstatic", where "CC" is the KAI C++ compiler.
	old_archive_cmds_CXX='$CC -Bstatic -o $oldlib $oldobjs'
	;;
      icpc*)
	# Intel C++
	with_gnu_ld=yes
	# version 8.0 and above of icpc choke on multiply defined symbols
	# if we add $predep_objects and $postdep_objects, however 7.1 and
	# earlier do not add the objects themselves.
	case `$CC -V 2>&1` in
	*"Version 7."*)
  	  archive_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
  	  archive_expsym_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
	  ;;
	*)  # Version 8.0 or newer
	  tmp_idyn=
	  case $host_cpu in
	    ia64*) tmp_idyn=' -i_dynamic';;
	  esac
  	  archive_cmds_CXX='$CC -shared'"$tmp_idyn"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	  archive_expsym_cmds_CXX='$CC -shared'"$tmp_idyn"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
	  ;;
	esac
	archive_cmds_need_lc_CXX=no
	hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
	export_dynamic_flag_spec_CXX='${wl}--export-dynamic'
	whole_archive_flag_spec_CXX='${wl}--whole-archive$convenience ${wl}--no-whole-archive'
	;;
      pgCC* | pgcpp*)
        # Portland Group C++ compiler
	archive_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname -o $lib'
  	archive_expsym_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname ${wl}-retain-symbols-file ${wl}$export_symbols -o $lib'

	hardcode_libdir_flag_spec_CXX='${wl}--rpath ${wl}$libdir'
	export_dynamic_flag_spec_CXX='${wl}--export-dynamic'
	whole_archive_flag_spec_CXX='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
        ;;
      cxx*)
	# Compaq C++
	archive_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname  -o $lib ${wl}-retain-symbols-file $wl$export_symbols'

	runpath_var=LD_RUN_PATH
	hardcode_libdir_flag_spec_CXX='-rpath $libdir'
	hardcode_libdir_separator_CXX=:

	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "ld"`; templist=`echo $templist | $SED "s/\(^.*ld.*\)\( .*ld .*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	case `$CC -V 2>&1 | sed 5q` in
	*Sun\ C*)
	  # Sun C++ 5.9
	  no_undefined_flag_CXX=' -zdefs'
	  archive_cmds_CXX='$CC -G${allow_undefined_flag} -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  archive_expsym_cmds_CXX='$CC -G${allow_undefined_flag} -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file ${wl}$export_symbols'
	  hardcode_libdir_flag_spec_CXX='-R$libdir'
	  whole_archive_flag_spec_CXX='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'

	  # Not sure whether something based on
	  # $CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1
	  # would be better.
	  output_verbose_link_cmd='echo'

	  # Archives containing C++ object files must be created using
	  # "CC -xar", where "CC" is the Sun C++ compiler.  This is
	  # necessary to make sure instantiated templates are included
	  # in the archive.
	  old_archive_cmds_CXX='$CC -xar -o $oldlib $oldobjs'
	  ;;
	esac
	;;
    esac
    ;;
  lynxos*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  m88k*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  mvs*)
    case $cc_basename in
      cxx*)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  netbsd*)
    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
      archive_cmds_CXX='$LD -Bshareable  -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags'
      wlarc=
      hardcode_libdir_flag_spec_CXX='-R$libdir'
      hardcode_direct_CXX=yes
      hardcode_shlibpath_var_CXX=no
    fi
    # Workaround some broken pre-1.5 toolchains
    output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep conftest.$objext | $SED -e "s:-lgcc -lc -lgcc::"'
    ;;
  openbsd2*)
    # C++ shared libraries are fairly broken
    ld_shlibs_CXX=no
    ;;
  openbsd*)
    if test -f /usr/libexec/ld.so; then
      hardcode_direct_CXX=yes
      hardcode_shlibpath_var_CXX=no
      archive_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
      hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
      if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
	archive_expsym_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file,$export_symbols -o $lib'
	export_dynamic_flag_spec_CXX='${wl}-E'
	whole_archive_flag_spec_CXX="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
      fi
      output_verbose_link_cmd='echo'
    else
      ld_shlibs_CXX=no
    fi
    ;;
  osf3*)
    case $cc_basename in
      KCC*)
	# Kuck and Associates, Inc. (KAI) C++ Compiler

	# KCC will only create a shared library if the output file
	# ends with ".so" (or ".sl" for HP-UX), so rename the library
	# to its proper name (with version) after linking.
	archive_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'

	hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
	hardcode_libdir_separator_CXX=:

	# Archives containing C++ object files must be created using
	# "CC -Bstatic", where "CC" is the KAI C++ compiler.
	old_archive_cmds_CXX='$CC -Bstatic -o $oldlib $oldobjs'

	;;
      RCC*)
	# Rational C++ 2.4.1
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      cxx*)
	allow_undefined_flag_CXX=' ${wl}-expect_unresolved ${wl}\*'
	archive_cmds_CXX='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $soname `test -n "$verstring" && echo ${wl}-set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'

	hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
	hardcode_libdir_separator_CXX=:

	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "ld" | grep -v "ld:"`; templist=`echo $templist | $SED "s/\(^.*ld.*\)\( .*ld.*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	if test "$GXX" = yes && test "$with_gnu_ld" = no; then
	  allow_undefined_flag_CXX=' ${wl}-expect_unresolved ${wl}\*'
	  archive_cmds_CXX='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'

	  hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
	  hardcode_libdir_separator_CXX=:

	  # Commands to make compiler produce verbose output that lists
	  # what "hidden" libraries, object files and flags are used when
	  # linking a shared library.
	  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "\-L"'

	else
	  # FIXME: insert proper C++ library support
	  ld_shlibs_CXX=no
	fi
	;;
    esac
    ;;
  osf4* | osf5*)
    case $cc_basename in
      KCC*)
	# Kuck and Associates, Inc. (KAI) C++ Compiler

	# KCC will only create a shared library if the output file
	# ends with ".so" (or ".sl" for HP-UX), so rename the library
	# to its proper name (with version) after linking.
	archive_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'

	hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
	hardcode_libdir_separator_CXX=:

	# Archives containing C++ object files must be created using
	# the KAI C++ compiler.
	old_archive_cmds_CXX='$CC -o $oldlib $oldobjs'
	;;
      RCC*)
	# Rational C++ 2.4.1
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      cxx*)
	allow_undefined_flag_CXX=' -expect_unresolved \*'
	archive_cmds_CXX='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
	archive_expsym_cmds_CXX='for i in `cat $export_symbols`; do printf "%s %s\\n" -exported_symbol "\$i" >> $lib.exp; done~
	  echo "-hidden">> $lib.exp~
	  $CC -shared$allow_undefined_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname -Wl,-input -Wl,$lib.exp  `test -n "$verstring" && echo -set_version	$verstring` -update_registry ${output_objdir}/so_locations -o $lib~
	  $rm $lib.exp'

	hardcode_libdir_flag_spec_CXX='-rpath $libdir'
	hardcode_libdir_separator_CXX=:

	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "ld" | grep -v "ld:"`; templist=`echo $templist | $SED "s/\(^.*ld.*\)\( .*ld.*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	if test "$GXX" = yes && test "$with_gnu_ld" = no; then
	  allow_undefined_flag_CXX=' ${wl}-expect_unresolved ${wl}\*'
	 archive_cmds_CXX='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'

	  hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
	  hardcode_libdir_separator_CXX=:

	  # Commands to make compiler produce verbose output that lists
	  # what "hidden" libraries, object files and flags are used when
	  # linking a shared library.
	  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "\-L"'

	else
	  # FIXME: insert proper C++ library support
	  ld_shlibs_CXX=no
	fi
	;;
    esac
    ;;
  psos*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  sunos4*)
    case $cc_basename in
      CC*)
	# Sun C++ 4.x
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      lcc*)
	# Lucid
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  solaris*)
    case $cc_basename in
      CC*)
	# Sun C++ 4.2, 5.x and Centerline C++
        archive_cmds_need_lc_CXX=yes
	no_undefined_flag_CXX=' -zdefs'
	archive_cmds_CXX='$CC -G${allow_undefined_flag}  -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	archive_expsym_cmds_CXX='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
	$CC -G${allow_undefined_flag}  ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'

	hardcode_libdir_flag_spec_CXX='-R$libdir'
	hardcode_shlibpath_var_CXX=no
	case $host_os in
	  solaris2.[0-5] | solaris2.[0-5].*) ;;
	  *)
	    # The compiler driver will combine and reorder linker options,
	    # but understands `-z linker_flag'.
	    # Supported since Solaris 2.6 (maybe 2.5.1?)
	    whole_archive_flag_spec_CXX='-z allextract$convenience -z defaultextract'
	    ;;
	esac
	link_all_deplibs_CXX=yes

	output_verbose_link_cmd='echo'

	# Archives containing C++ object files must be created using
	# "CC -xar", where "CC" is the Sun C++ compiler.  This is
	# necessary to make sure instantiated templates are included
	# in the archive.
	old_archive_cmds_CXX='$CC -xar -o $oldlib $oldobjs'
	;;
      gcx*)
	# Green Hills C++ Compiler
	archive_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'

	# The C++ compiler must be used to create the archive.
	old_archive_cmds_CXX='$CC $LDFLAGS -archive -o $oldlib $oldobjs'
	;;
      *)
	# GNU C++ compiler with Solaris linker
	if test "$GXX" = yes && test "$with_gnu_ld" = no; then
	  no_undefined_flag_CXX=' ${wl}-z ${wl}defs'
	  if $CC --version | grep -v '^2\.7' > /dev/null; then
	    archive_cmds_CXX='$CC -shared -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
	    archive_expsym_cmds_CXX='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
		$CC -shared -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'

	    # Commands to make compiler produce verbose output that lists
	    # what "hidden" libraries, object files and flags are used when
	    # linking a shared library.
	    output_verbose_link_cmd="$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep \"\-L\""
	  else
	    # g++ 2.7 appears to require `-G' NOT `-shared' on this
	    # platform.
	    archive_cmds_CXX='$CC -G -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
	    archive_expsym_cmds_CXX='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
		$CC -G -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'

	    # Commands to make compiler produce verbose output that lists
	    # what "hidden" libraries, object files and flags are used when
	    # linking a shared library.
	    output_verbose_link_cmd="$CC -G $CFLAGS -v conftest.$objext 2>&1 | grep \"\-L\""
	  fi

	  hardcode_libdir_flag_spec_CXX='${wl}-R $wl$libdir'
	  case $host_os in
	  solaris2.[0-5] | solaris2.[0-5].*) ;;
	  *)
	    whole_archive_flag_spec_CXX='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'
	    ;;
	  esac
	fi
	;;
    esac
    ;;
  sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7* | sco3.2v5.0.[024]*)
    no_undefined_flag_CXX='${wl}-z,text'
    archive_cmds_need_lc_CXX=no
    hardcode_shlibpath_var_CXX=no
    runpath_var='LD_RUN_PATH'

    case $cc_basename in
      CC*)
	archive_cmds_CXX='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
      *)
	archive_cmds_CXX='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
    esac
    ;;
  sysv5* | sco3.2v5* | sco5v6*)
    # Note: We can NOT use -z defs as we might desire, because we do not
    # link with -lc, and that would cause any symbols used from libc to
    # always be unresolved, which means just about no library would
    # ever link correctly.  If we're not using GNU ld we use -z text
    # though, which does catch some bad symbols but isn't as heavy-handed
    # as -z defs.
    # For security reasons, it is highly recommended that you always
    # use absolute paths for naming shared libraries, and exclude the
    # DT_RUNPATH tag from executables and libraries.  But doing so
    # requires that you compile everything twice, which is a pain.
    # So that behaviour is only enabled if SCOABSPATH is set to a
    # non-empty value in the environment.  Most likely only useful for
    # creating official distributions of packages.
    # This is a hack until libtool officially supports absolute path
    # names for shared libraries.
    no_undefined_flag_CXX='${wl}-z,text'
    allow_undefined_flag_CXX='${wl}-z,nodefs'
    archive_cmds_need_lc_CXX=no
    hardcode_shlibpath_var_CXX=no
    hardcode_libdir_flag_spec_CXX='`test -z "$SCOABSPATH" && echo ${wl}-R,$libdir`'
    hardcode_libdir_separator_CXX=':'
    link_all_deplibs_CXX=yes
    export_dynamic_flag_spec_CXX='${wl}-Bexport'
    runpath_var='LD_RUN_PATH'

    case $cc_basename in
      CC*)
	archive_cmds_CXX='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
      *)
	archive_cmds_CXX='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
    esac
    ;;
  tandem*)
    case $cc_basename in
      NCC*)
	# NonStop-UX NCC 3.20
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  vxworks*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  *)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
esac
echo "$ac_t""$ld_shlibs_CXX" 1>&6
test "$ld_shlibs_CXX" = no && can_build_shared=no

GCC_CXX="$GXX"
LD_CXX="$LD"

## CAVEAT EMPTOR:
## There is no encapsulation within the following macros, do not change
## the running order or otherwise move them around unless you know exactly
## what you are doing...
cat > conftest.$ac_ext <<EOF
class Foo
{
public:
  Foo (void) { a = 0; }
private:
  int a;
};
EOF

if { (eval echo configure:114293: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  # Parse the compiler output and extract the necessary
  # objects, libraries and library flags.

  # Sentinel used to keep track of whether or not we are before
  # the conftest object file.
  pre_test_object_deps_done=no

  # The `*' in the case matches for architectures that use `case' in
  # $output_verbose_cmd can trigger glob expansion during the loop
  # eval without this substitution.
  output_verbose_link_cmd=`$echo "X$output_verbose_link_cmd" | $Xsed -e "$no_glob_subst"`

  for p in `eval $output_verbose_link_cmd`; do
    case $p in

    -L* | -R* | -l*)
       # Some compilers place space between "-{L,R}" and the path.
       # Remove the space.
       if test $p = "-L" \
	  || test $p = "-R"; then
	 prev=$p
	 continue
       else
	 prev=
       fi

       if test "$pre_test_object_deps_done" = no; then
	 case $p in
	 -L* | -R*)
	   # Internal compiler library paths should come after those
	   # provided the user.  The postdeps already come after the
	   # user supplied libs so there is no need to process them.
	   if test -z "$compiler_lib_search_path_CXX"; then
	     compiler_lib_search_path_CXX="${prev}${p}"
	   else
	     compiler_lib_search_path_CXX="${compiler_lib_search_path_CXX} ${prev}${p}"
	   fi
	   ;;
	 # The "-l" case would never come before the object being
	 # linked, so don't bother handling this case.
	 esac
       else
	 if test -z "$postdeps_CXX"; then
	   postdeps_CXX="${prev}${p}"
	 else
	   postdeps_CXX="${postdeps_CXX} ${prev}${p}"
	 fi
       fi
       ;;

    *.$objext)
       # This assumes that the test object file only shows up
       # once in the compiler output.
       if test "$p" = "conftest.$objext"; then
	 pre_test_object_deps_done=yes
	 continue
       fi

       if test "$pre_test_object_deps_done" = no; then
	 if test -z "$predep_objects_CXX"; then
	   predep_objects_CXX="$p"
	 else
	   predep_objects_CXX="$predep_objects_CXX $p"
	 fi
       else
	 if test -z "$postdep_objects_CXX"; then
	   postdep_objects_CXX="$p"
	 else
	   postdep_objects_CXX="$postdep_objects_CXX $p"
	 fi
       fi
       ;;

    *) ;; # Ignore the rest.

    esac
  done

  # Clean up.
  rm -f a.out a.exe
else
  echo "libtool.m4: error: problem compiling CXX test program"
fi

$rm -f confest.$objext

compiler_lib_search_dirs_CXX=
if test -n "$compiler_lib_search_path_CXX"; then
  compiler_lib_search_dirs_CXX=`echo " ${compiler_lib_search_path_CXX}" | ${SED} -e 's! -L! !g' -e 's!^ !!'`
fi

# PORTME: override above test on systems where it is broken
case $host_os in
interix[3-9]*)
  # Interix 3.5 installs completely hosed .la files for C++, so rather than
  # hack all around it, let's just trust "g++" to DTRT.
  predep_objects_CXX=
  postdep_objects_CXX=
  postdeps_CXX=
  ;;

linux*)
  case `$CC -V 2>&1 | sed 5q` in
  *Sun\ C*)
    # Sun C++ 5.9
    #
    # The more standards-conforming stlport4 library is
    # incompatible with the Cstd library. Avoid specifying
    # it if it's in CXXFLAGS. Ignore libCrun as
    # -library=stlport4 depends on it.
    case " $CXX $CXXFLAGS " in
    *" -library=stlport4 "*)
      solaris_use_stlport4=yes
      ;;
    esac
    if test "$solaris_use_stlport4" != yes; then
      postdeps_CXX='-library=Cstd -library=Crun'
    fi
    ;;
  esac
  ;;

solaris*)
  case $cc_basename in
  CC*)
    # The more standards-conforming stlport4 library is
    # incompatible with the Cstd library. Avoid specifying
    # it if it's in CXXFLAGS. Ignore libCrun as
    # -library=stlport4 depends on it.
    case " $CXX $CXXFLAGS " in
    *" -library=stlport4 "*)
      solaris_use_stlport4=yes
      ;;
    esac

    # Adding this requires a known-good setup of shared libraries for
    # Sun compiler versions before 5.6, else PIC objects from an old
    # archive will be linked into the output, leading to subtle bugs.
    if test "$solaris_use_stlport4" != yes; then
      postdeps_CXX='-library=Cstd -library=Crun'
    fi
    ;;
  esac
  ;;
esac

case " $postdeps_CXX " in
*" -lc "*) archive_cmds_need_lc_CXX=no ;;
esac

lt_prog_compiler_wl_CXX=
lt_prog_compiler_pic_CXX=
lt_prog_compiler_static_CXX=

echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
echo "configure:114449: checking for $compiler option to produce PIC" >&5
 
  # C++ specific cases for pic, static, wl, etc.
  if test "$GXX" = yes; then
    lt_prog_compiler_wl_CXX='-Wl,'
    lt_prog_compiler_static_CXX='-static'

    case $host_os in
    aix*)
      # All AIX code is PIC.
      if test "$host_cpu" = ia64; then
	# AIX 5 now supports IA64 processor
	lt_prog_compiler_static_CXX='-Bstatic'
      fi
      ;;
    amigaos*)
      # FIXME: we need at least 68020 code to build shared libraries, but
      # adding the `-m68020' flag to GCC prevents building anything better,
      # like `-m68040'.
      lt_prog_compiler_pic_CXX='-m68020 -resident32 -malways-restore-a4'
      ;;
    beos* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
      # PIC is the default for these OSes.
      ;;
    mingw* | cygwin* | os2* | pw32*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
      # Although the cygwin gcc ignores -fPIC, still need this for old-style
      # (--disable-auto-import) libraries
	  lt_prog_compiler_pic_CXX='-DDLL_EXPORT'
      ;;
    darwin* | rhapsody*)
      # PIC is the default on this platform
      # Common symbols not allowed in MH_DYLIB files
      lt_prog_compiler_pic_CXX='-fno-common'
      ;;
    *djgpp*)
      # DJGPP does not support shared libraries at all
      lt_prog_compiler_pic_CXX=
      ;;
    interix[3-9]*)
      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
      # Instead, we relocate shared libraries at runtime.
      ;;
    sysv4*MP*)
      if test -d /usr/nec; then
	lt_prog_compiler_pic_CXX=-Kconform_pic
      fi
      ;;
    hpux*)
      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
      # not for PA HP-UX.
      case $host_cpu in
      hppa*64*|ia64*)
	;;
      *)
	lt_prog_compiler_pic_CXX='-fPIC'
	;;
      esac
      ;;
    *)
      lt_prog_compiler_pic_CXX='-fPIC'
      ;;
    esac
  else
    case $host_os in
      aix[4-9]*)
	# All AIX code is PIC.
	if test "$host_cpu" = ia64; then
	  # AIX 5 now supports IA64 processor
	  lt_prog_compiler_static_CXX='-Bstatic'
	else
	  lt_prog_compiler_static_CXX='-bnso -bI:/lib/syscalls.exp'
	fi
	;;
      chorus*)
	case $cc_basename in
	cxch68*)
	  # Green Hills C++ Compiler
	  # _LT_AC_TAGVAR(lt_prog_compiler_static, CXX)="--no_auto_instantiation -u __main -u __premain -u _abort -r $COOL_DIR/lib/libOrb.a $MVME_DIR/lib/CC/libC.a $MVME_DIR/lib/classix/libcx.s.a"
	  ;;
	esac
	;;
       darwin*)
         # PIC is the default on this platform
         # Common symbols not allowed in MH_DYLIB files
         case $cc_basename in
           xlc*)
           lt_prog_compiler_pic_CXX='-qnocommon'
           lt_prog_compiler_wl_CXX='-Wl,'
           ;;
         esac
       ;;
      dgux*)
	case $cc_basename in
	  ec++*)
	    lt_prog_compiler_pic_CXX='-KPIC'
	    ;;
	  ghcx*)
	    # Green Hills C++ Compiler
	    lt_prog_compiler_pic_CXX='-pic'
	    ;;
	  *)
	    ;;
	esac
	;;
      freebsd* | dragonfly*)
	# FreeBSD uses GNU C++
	;;
      hpux9* | hpux10* | hpux11*)
	case $cc_basename in
	  CC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_static_CXX='${wl}-a ${wl}archive'
	    if test "$host_cpu" != ia64; then
	      lt_prog_compiler_pic_CXX='+Z'
	    fi
	    ;;
	  aCC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_static_CXX='${wl}-a ${wl}archive'
	    case $host_cpu in
	    hppa*64*|ia64*)
	      # +Z the default
	      ;;
	    *)
	      lt_prog_compiler_pic_CXX='+Z'
	      ;;
	    esac
	    ;;
	  *)
	    ;;
	esac
	;;
      interix*)
	# This is c89, which is MS Visual C++ (no shared libs)
	# Anyone wants to do a port?
	;;
      irix5* | irix6* | nonstopux*)
	case $cc_basename in
	  CC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_static_CXX='-non_shared'
	    # CC pic flag -KPIC is the default.
	    ;;
	  *)
	    ;;
	esac
	;;
      linux* | k*bsd*-gnu)
	case $cc_basename in
	  KCC*)
	    # KAI C++ Compiler
	    lt_prog_compiler_wl_CXX='--backend -Wl,'
	    lt_prog_compiler_pic_CXX='-fPIC'
	    ;;
      ecpc*)
        # old Intel C++ for x86_64 which still supported -KPIC.
        lt_prog_compiler_wl_CXX='-Wl,'
        lt_prog_compiler_pic_CXX='-KPIC'
        lt_prog_compiler_static_CXX='-static'
        ;;
      icpc*)
        # Intel C++, used to be incompatible with GCC.
        lt_prog_compiler_wl_CXX='-Wl,'
        lt_prog_compiler_pic_CXX='-fPIC'
        lt_prog_compiler_static_CXX='-static'
        ;;
	  pgCC* | pgcpp*)
	    # Portland Group C++ compiler.
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_pic_CXX='-fpic'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    ;;
	  cxx*)
	    # Compaq C++
	    # Make sure the PIC flag is empty.  It appears that all Alpha
	    # Linux and Compaq Tru64 Unix objects are PIC.
	    lt_prog_compiler_pic_CXX=
	    lt_prog_compiler_static_CXX='-non_shared'
	    ;;
	  *)
	    case `$CC -V 2>&1 | sed 5q` in
	    *Sun\ C*)
	      # Sun C++ 5.9
	      lt_prog_compiler_pic_CXX='-KPIC'
	      lt_prog_compiler_static_CXX='-Bstatic'
	      lt_prog_compiler_wl_CXX='-Qoption ld '
	      ;;
	    esac
	    ;;
	esac
	;;
      lynxos*)
	;;
      m88k*)
	;;
      mvs*)
	case $cc_basename in
	  cxx*)
	    lt_prog_compiler_pic_CXX='-W c,exportall'
	    ;;
	  *)
	    ;;
	esac
	;;
      netbsd*)
	;;
      osf3* | osf4* | osf5*)
	case $cc_basename in
	  KCC*)
	    lt_prog_compiler_wl_CXX='--backend -Wl,'
	    ;;
	  RCC*)
	    # Rational C++ 2.4.1
	    lt_prog_compiler_pic_CXX='-pic'
	    ;;
	  cxx*)
	    # Digital/Compaq C++
	    lt_prog_compiler_wl_CXX='-Wl,'
	    # Make sure the PIC flag is empty.  It appears that all Alpha
	    # Linux and Compaq Tru64 Unix objects are PIC.
	    lt_prog_compiler_pic_CXX=
	    lt_prog_compiler_static_CXX='-non_shared'
	    ;;
	  *)
	    ;;
	esac
	;;
      psos*)
	;;
      solaris*)
	case $cc_basename in
	  CC*)
	    # Sun C++ 4.2, 5.x and Centerline C++
	    lt_prog_compiler_pic_CXX='-KPIC'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    lt_prog_compiler_wl_CXX='-Qoption ld '
	    ;;
	  gcx*)
	    # Green Hills C++ Compiler
	    lt_prog_compiler_pic_CXX='-PIC'
	    ;;
	  *)
	    ;;
	esac
	;;
      sunos4*)
	case $cc_basename in
	  CC*)
	    # Sun C++ 4.x
	    lt_prog_compiler_pic_CXX='-pic'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    ;;
	  lcc*)
	    # Lucid
	    lt_prog_compiler_pic_CXX='-pic'
	    ;;
	  *)
	    ;;
	esac
	;;
      tandem*)
	case $cc_basename in
	  NCC*)
	    # NonStop-UX NCC 3.20
	    lt_prog_compiler_pic_CXX='-KPIC'
	    ;;
	  *)
	    ;;
	esac
	;;
      sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
	case $cc_basename in
	  CC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_pic_CXX='-KPIC'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    ;;
	esac
	;;
      vxworks*)
	;;
      *)
	lt_prog_compiler_can_build_shared_CXX=no
	;;
    esac
  fi

echo "$ac_t""$lt_prog_compiler_pic_CXX" 1>&6

#
# Check to make sure the PIC flag actually works.
#
if test -n "$lt_prog_compiler_pic_CXX"; then
  
echo $ac_n "checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works""... $ac_c" 1>&6
echo "configure:114746: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
if eval "test \"`echo '$''{'lt_cv_prog_compiler_pic_works_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_prog_compiler_pic_works_CXX=no
  ac_outfile=conftest.$ac_objext
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext
   lt_compiler_flag="$lt_prog_compiler_pic_CXX -DPIC"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   # The option is referenced via a variable to avoid confusing sed.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:114763: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>conftest.err)
   ac_status=$?
   cat conftest.err >&5
   echo "configure:114767: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s "$ac_outfile"; then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings other than the usual output.
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
     $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_pic_works_CXX=yes
     fi
   fi
   $rm conftest*

fi

echo "$ac_t""$lt_cv_prog_compiler_pic_works_CXX" 1>&6

if test x"$lt_cv_prog_compiler_pic_works_CXX" = xyes; then
    case $lt_prog_compiler_pic_CXX in
     "" | " "*) ;;
     *) lt_prog_compiler_pic_CXX=" $lt_prog_compiler_pic_CXX" ;;
     esac
else
    lt_prog_compiler_pic_CXX=
     lt_prog_compiler_can_build_shared_CXX=no
fi

fi
case $host_os in
  # For platforms which do not support PIC, -DPIC is meaningless:
  *djgpp*)
    lt_prog_compiler_pic_CXX=
    ;;
  *)
    lt_prog_compiler_pic_CXX="$lt_prog_compiler_pic_CXX -DPIC"
    ;;
esac

#
# Check to make sure the static flag actually works.
#
wl=$lt_prog_compiler_wl_CXX eval lt_tmp_static_flag=\"$lt_prog_compiler_static_CXX\"
echo $ac_n "checking if $compiler static flag $lt_tmp_static_flag works""... $ac_c" 1>&6
echo "configure:114809: checking if $compiler static flag $lt_tmp_static_flag works" >&5
if eval "test \"`echo '$''{'lt_cv_prog_compiler_static_works_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_prog_compiler_static_works_CXX=no
   save_LDFLAGS="$LDFLAGS"
   LDFLAGS="$LDFLAGS $lt_tmp_static_flag"
   echo "$lt_simple_link_test_code" > conftest.$ac_ext
   if (eval $ac_link 2>conftest.err) && test -s conftest$ac_exeext; then
     # The linker can only warn and ignore the option if not recognized
     # So say no if there are warnings
     if test -s conftest.err; then
       # Append any errors to the config.log.
       cat conftest.err 1>&5
       $echo "X$_lt_linker_boilerplate" | $Xsed -e '/^$/d' > conftest.exp
       $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
       if diff conftest.exp conftest.er2 >/dev/null; then
         lt_cv_prog_compiler_static_works_CXX=yes
       fi
     else
       lt_cv_prog_compiler_static_works_CXX=yes
     fi
   fi
   $rm -r conftest*
   LDFLAGS="$save_LDFLAGS"

fi

echo "$ac_t""$lt_cv_prog_compiler_static_works_CXX" 1>&6

if test x"$lt_cv_prog_compiler_static_works_CXX" = xyes; then
    :
else
    lt_prog_compiler_static_CXX=
fi


echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
echo "configure:114847: checking if $compiler supports -c -o file.$ac_objext" >&5
if eval "test \"`echo '$''{'lt_cv_prog_compiler_c_o_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_prog_compiler_c_o_CXX=no
   $rm -r conftest 2>/dev/null
   mkdir conftest
   cd conftest
   mkdir out
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext

   lt_compiler_flag="-o out/conftest2.$ac_objext"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:114867: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>out/conftest.err)
   ac_status=$?
   cat out/conftest.err >&5
   echo "configure:114871: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s out/conftest2.$ac_objext
   then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
     $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_c_o_CXX=yes
     fi
   fi
   chmod u+w . 2>&5
   $rm conftest*
   # SGI C++ compiler will create directory out/ii_files/ for
   # template instantiation
   test -d out/ii_files && $rm out/ii_files/* && rmdir out/ii_files
   $rm out/* && rmdir out
   cd ..
   rmdir conftest
   $rm conftest*

fi

echo "$ac_t""$lt_cv_prog_compiler_c_o_CXX" 1>&6


hard_links="nottested"
if test "$lt_cv_prog_compiler_c_o_CXX" = no && test "$need_locks" != no; then
  # do not overwrite the value of need_locks provided by the user
  echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
echo "configure:114901: checking if we can lock with hard links" >&5
  hard_links=yes
  $rm conftest*
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  touch conftest.a
  ln conftest.a conftest.b 2>&5 || hard_links=no
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  echo "$ac_t""$hard_links" 1>&6
  if test "$hard_links" = no; then
    echo "configure: warning: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" 1>&2
    need_locks=warn
  fi
else
  need_locks=no
fi

echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
echo "configure:114918: checking whether the $compiler linker ($LD) supports shared libraries" >&5

  export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
  case $host_os in
  aix[4-9]*)
    # If we're using GNU nm, then we don't want the "-C" option.
    # -C means demangle to AIX nm, but means don't demangle with GNU nm
    if $NM -V 2>&1 | grep 'GNU' > /dev/null; then
      export_symbols_cmds_CXX='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
    else
      export_symbols_cmds_CXX='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
    fi
    ;;
  pw32*)
    export_symbols_cmds_CXX="$ltdll_cmds"
  ;;
  cygwin* | mingw*)
    export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1 DATA/;/^.*[ ]__nm__/s/^.*[ ]__nm__\([^ ]*\)[ ][^ ]*/\1 DATA/;/^I[ ]/d;/^[AITW][ ]/s/.*[ ]//'\'' | sort | uniq > $export_symbols'
  ;;
  *)
    export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
  ;;
  esac
  exclude_expsyms_CXX='_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*'

echo "$ac_t""$ld_shlibs_CXX" 1>&6
test "$ld_shlibs_CXX" = no && can_build_shared=no

#
# Do we need to explicitly link libc?
#
case "x$archive_cmds_need_lc_CXX" in
x|xyes)
  # Assume -lc should be added
  archive_cmds_need_lc_CXX=yes

  if test "$enable_shared" = yes && test "$GCC" = yes; then
    case $archive_cmds_CXX in
    *'~'*)
      # FIXME: we may have to deal with multi-command sequences.
      ;;
    '$CC '*)
      # Test whether the compiler implicitly links with -lc since on some
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
      echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
echo "configure:114964: checking whether -lc should be explicitly linked in" >&5
      $rm conftest*
      echo "$lt_simple_compile_test_code" > conftest.$ac_ext

      if { (eval echo configure:114968: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
        deplibs=
        wl=$lt_prog_compiler_wl_CXX
	pic_flag=$lt_prog_compiler_pic_CXX
        compiler_flags=-v
        linker_flags=-v
        verstring=
        output_objdir=.
        libname=conftest
        lt_save_allow_undefined_flag=$allow_undefined_flag_CXX
        allow_undefined_flag_CXX=
        if { (eval echo configure:114982: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
        then
	  archive_cmds_need_lc_CXX=no
        else
	  archive_cmds_need_lc_CXX=yes
        fi
        allow_undefined_flag_CXX=$lt_save_allow_undefined_flag
      else
        cat conftest.err 1>&5
      fi
      $rm conftest*
      echo "$ac_t""$archive_cmds_need_lc_CXX" 1>&6
      ;;
    esac
  fi
  ;;
esac

echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
echo "configure:115001: checking dynamic linker characteristics" >&5
library_names_spec=
libname_spec='lib$name'
soname_spec=
shrext_cmds=".so"
postinstall_cmds=
postuninstall_cmds=
finish_cmds=
finish_eval=
shlibpath_var=
shlibpath_overrides_runpath=unknown
version_type=none
dynamic_linker="$host_os ld.so"
sys_lib_dlsearch_path_spec="/lib /usr/lib"

need_lib_prefix=unknown
hardcode_into_libs=no

# when you set need_version to no, make sure it does not cause -set_version
# flags to be left without arguments
need_version=unknown

case $host_os in
aix3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'
  shlibpath_var=LIBPATH

  # AIX 3 has no versioning support, so we append a major version to the name.
  soname_spec='${libname}${release}${shared_ext}$major'
  ;;

aix[4-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  hardcode_into_libs=yes
  if test "$host_cpu" = ia64; then
    # AIX 5 supports IA64
    library_names_spec='${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext}$versuffix $libname${shared_ext}'
    shlibpath_var=LD_LIBRARY_PATH
  else
    # With GCC up to 2.95.x, collect2 would create an import file
    # for dependence libraries.  The import file would start with
    # the line `#! .'.  This would cause the generated library to
    # depend on `.', always an invalid library.  This was fixed in
    # development snapshots of GCC prior to 3.0.
    case $host_os in
      aix4 | aix4.[01] | aix4.[01].*)
      if { echo '#if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 97)'
	   echo ' yes '
	   echo '#endif'; } | ${CC} -E - | grep yes > /dev/null; then
	:
      else
	can_build_shared=no
      fi
      ;;
    esac
    # AIX (on Power*) has no versioning support, so currently we can not hardcode correct
    # soname into executable. Probably we can add versioning support to
    # collect2, so additional links can be useful in future.
    if test "$aix_use_runtimelinking" = yes; then
      # If using run time linking (on AIX 4.2 or later) use lib<name>.so
      # instead of lib<name>.a to let people know that these are not
      # typical AIX shared libraries.
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    else
      # We preserve .a as extension for shared libraries through AIX4.2
      # and later when we are not doing run time linking.
      library_names_spec='${libname}${release}.a $libname.a'
      soname_spec='${libname}${release}${shared_ext}$major'
    fi
    shlibpath_var=LIBPATH
  fi
  ;;

amigaos*)
  library_names_spec='$libname.ixlibrary $libname.a'
  # Create ${libname}_ixlibrary.a entries in /sys/libs.
  finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$echo "X$lib" | $Xsed -e '\''s%^.*/\([^/]*\)\.ixlibrary$%\1%'\''`; test $rm /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
  ;;

beos*)
  library_names_spec='${libname}${shared_ext}'
  dynamic_linker="$host_os ld.so"
  shlibpath_var=LIBRARY_PATH
  ;;

bsdi[45]*)
  version_type=linux
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
  sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
  # the default ld.so.conf also contains /usr/contrib/lib and
  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
  # libtool to hard-code these into programs
  ;;

cygwin* | mingw* | pw32*)
  version_type=windows
  shrext_cmds=".dll"
  need_version=no
  need_lib_prefix=no

  case $GCC,$host_os in
  yes,cygwin* | yes,mingw* | yes,pw32*)
    library_names_spec='$libname.dll.a'
    # DLL is installed to $(libdir)/../bin by postinstall_cmds
    postinstall_cmds='base_file=`basename \${file}`~
      dlpath=`$SHELL 2>&1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
      dldir=$destdir/`dirname \$dlpath`~
      test -d \$dldir || mkdir -p \$dldir~
      $install_prog $dir/$dlname \$dldir/$dlname~
      chmod a+x \$dldir/$dlname'
    postuninstall_cmds='dldll=`$SHELL 2>&1 -c '\''. $file; echo \$dlname'\''`~
      dlpath=$dir/\$dldll~
       $rm \$dlpath'
    shlibpath_overrides_runpath=yes

    case $host_os in
    cygwin*)
      # Cygwin DLLs use 'cyg' prefix rather than 'lib'
      soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec="/usr/lib /lib/w32api /lib /usr/local/lib"
      ;;
    mingw*)
      # MinGW DLLs use traditional 'lib' prefix
      soname_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec=`$CC -print-search-dirs | grep "^libraries:" | $SED -e "s/^libraries://" -e "s,=/,/,g"`
      if echo "$sys_lib_search_path_spec" | grep ';[c-zC-Z]:/' >/dev/null; then
        # It is most probably a Windows format PATH printed by
        # mingw gcc, but we are running on Cygwin. Gcc prints its search
        # path with ; separators, and with drive letters. We can handle the
        # drive letters (cygwin fileutils understands them), so leave them,
        # especially as we might pass files found there to a mingw objdump,
        # which wouldn't understand a cygwinified path. Ahh.
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED -e 's/;/ /g'`
      else
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
      fi
      ;;
    pw32*)
      # pw32 DLLs use 'pw' prefix rather than 'lib'
      library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      ;;
    esac
    ;;

  *)
    library_names_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext} $libname.lib'
    ;;
  esac
  dynamic_linker='Win32 ld.exe'
  # FIXME: first we should search . and the directory the executable is in
  shlibpath_var=PATH
  ;;

darwin* | rhapsody*)
  dynamic_linker="$host_os dyld"
  version_type=darwin
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${versuffix}$shared_ext ${libname}${release}${major}$shared_ext ${libname}$shared_ext'
  soname_spec='${libname}${release}${major}$shared_ext'
  shlibpath_overrides_runpath=yes
  shlibpath_var=DYLD_LIBRARY_PATH
  shrext_cmds='`test .$module = .yes && echo .so || echo .dylib`'
   
  sys_lib_dlsearch_path_spec='/usr/local/lib /lib /usr/lib'
  ;;

dgux*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

freebsd1*)
  dynamic_linker=no
  ;;

freebsd* | dragonfly*)
  # DragonFly does not have aout.  When/if they implement a new
  # versioning mechanism, adjust this.
  if test -x /usr/bin/objformat; then
    objformat=`/usr/bin/objformat`
  else
    case $host_os in
    freebsd[123]*) objformat=aout ;;
    *) objformat=elf ;;
    esac
  fi
  version_type=freebsd-$objformat
  case $version_type in
    freebsd-elf*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
      need_version=no
      need_lib_prefix=no
      ;;
    freebsd-*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
      need_version=yes
      ;;
  esac
  shlibpath_var=LD_LIBRARY_PATH
  case $host_os in
  freebsd2*)
    shlibpath_overrides_runpath=yes
    ;;
  freebsd3.[01]* | freebsdelf3.[01]*)
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
    shlibpath_overrides_runpath=no
    hardcode_into_libs=yes
    ;;
  *) # from 4.6 on, and DragonFly
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  esac
  ;;

gnu*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  ;;

hpux9* | hpux10* | hpux11*)
  # Give a soname corresponding to the major version so that dld.sl refuses to
  # link against other versions.
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  case $host_cpu in
  ia64*)
    shrext_cmds='.so'
    hardcode_into_libs=yes
    dynamic_linker="$host_os dld.so"
    shlibpath_var=LD_LIBRARY_PATH
    shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    if test "X$HPUX_IA64_MODE" = X32; then
      sys_lib_search_path_spec="/usr/lib/hpux32 /usr/local/lib/hpux32 /usr/local/lib"
    else
      sys_lib_search_path_spec="/usr/lib/hpux64 /usr/local/lib/hpux64"
    fi
    sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
    ;;
   hppa*64*)
     shrext_cmds='.sl'
     hardcode_into_libs=yes
     dynamic_linker="$host_os dld.sl"
     shlibpath_var=LD_LIBRARY_PATH # How should we handle SHLIB_PATH
     shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
     soname_spec='${libname}${release}${shared_ext}$major'
     sys_lib_search_path_spec="/usr/lib/pa20_64 /usr/ccs/lib/pa20_64"
     sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
     ;;
   *)
    shrext_cmds='.sl'
    dynamic_linker="$host_os dld.sl"
    shlibpath_var=SHLIB_PATH
    shlibpath_overrides_runpath=no # +s is required to enable SHLIB_PATH
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    ;;
  esac
  # HP-UX runs *really* slowly unless shared libraries are mode 555.
  postinstall_cmds='chmod 555 $lib'
  ;;

interix[3-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  hardcode_into_libs=yes
  ;;

irix5* | irix6* | nonstopux*)
  case $host_os in
    nonstopux*) version_type=nonstopux ;;
    *)
	if test "$lt_cv_prog_gnu_ld" = yes; then
		version_type=linux
	else
		version_type=irix
	fi ;;
  esac
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext} $libname${shared_ext}'
  case $host_os in
  irix5* | nonstopux*)
    libsuff= shlibsuff=
    ;;
  *)
    case $LD in # libtool.m4 will add one of these switches to LD
    *-32|*"-32 "|*-melf32bsmip|*"-melf32bsmip ")
      libsuff= shlibsuff= libmagic=32-bit;;
    *-n32|*"-n32 "|*-melf32bmipn32|*"-melf32bmipn32 ")
      libsuff=32 shlibsuff=N32 libmagic=N32;;
    *-64|*"-64 "|*-melf64bmip|*"-melf64bmip ")
      libsuff=64 shlibsuff=64 libmagic=64-bit;;
    *) libsuff= shlibsuff= libmagic=never-match;;
    esac
    ;;
  esac
  shlibpath_var=LD_LIBRARY${shlibsuff}_PATH
  shlibpath_overrides_runpath=no
  sys_lib_search_path_spec="/usr/lib${libsuff} /lib${libsuff} /usr/local/lib${libsuff}"
  sys_lib_dlsearch_path_spec="/usr/lib${libsuff} /lib${libsuff}"
  hardcode_into_libs=yes
  ;;

# No shared lib support for Linux oldld, aout, or coff.
linux*oldld* | linux*aout* | linux*coff*)
  dynamic_linker=no
  ;;

# This must be Linux ELF.
linux* | k*bsd*-gnu)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -n $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  # This implies no fast_install, which is unacceptable.
  # Some rework will be needed to allow for fast_install
  # before this can be enabled.
  hardcode_into_libs=yes

  # Append ld.so.conf contents to the search path
  if test -f /etc/ld.so.conf; then
    lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \$2)); skip = 1; } { if (!skip) print \$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[ 	]*hwcap[ 	]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;/^$/d' | tr '\n' ' '`
    sys_lib_dlsearch_path_spec="/lib /usr/lib $lt_ld_extra"
  fi

  # We used to test for /lib/ld.so.1 and disable shared libraries on
  # powerpc, because MkLinux only supported shared libraries with the
  # GNU dynamic linker.  Since this was broken with cross compilers,
  # most powerpc-linux boxes support dynamic linking these days and
  # people can always --disable-shared, the test was removed, and we
  # assume the GNU/Linux dynamic linker is in use.
  dynamic_linker='GNU/Linux ld.so'
  ;;

netbsd*)
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
    finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
    dynamic_linker='NetBSD (a.out) ld.so'
  else
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    dynamic_linker='NetBSD ld.elf_so'
  fi
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  ;;

newsos6)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

nto-qnx*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

openbsd*)
  version_type=sunos
  sys_lib_dlsearch_path_spec="/usr/lib"
  need_lib_prefix=no
  # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
  case $host_os in
    openbsd3.3 | openbsd3.3.*) need_version=yes ;;
    *)                         need_version=no  ;;
  esac
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    case $host_os in
      openbsd2.[89] | openbsd2.[89].*)
	shlibpath_overrides_runpath=no
	;;
      *)
	shlibpath_overrides_runpath=yes
	;;
      esac
  else
    shlibpath_overrides_runpath=yes
  fi
  ;;

os2*)
  libname_spec='$name'
  shrext_cmds=".dll"
  need_lib_prefix=no
  library_names_spec='$libname${shared_ext} $libname.a'
  dynamic_linker='OS/2 ld.exe'
  shlibpath_var=LIBPATH
  ;;

osf3* | osf4* | osf5*)
  version_type=osf
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib"
  sys_lib_dlsearch_path_spec="$sys_lib_search_path_spec"
  ;;

rdos*)
  dynamic_linker=no
  ;;

solaris*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  # ldd complains unless libraries are executable
  postinstall_cmds='chmod +x $lib'
  ;;

sunos4*)
  version_type=sunos
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/usr/etc" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  if test "$with_gnu_ld" = yes; then
    need_lib_prefix=no
  fi
  need_version=yes
  ;;

sysv4 | sysv4.3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  case $host_vendor in
    sni)
      shlibpath_overrides_runpath=no
      need_lib_prefix=no
      export_dynamic_flag_spec='${wl}-Blargedynsym'
      runpath_var=LD_RUN_PATH
      ;;
    siemens)
      need_lib_prefix=no
      ;;
    motorola)
      need_lib_prefix=no
      need_version=no
      shlibpath_overrides_runpath=no
      sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
      ;;
  esac
  ;;

sysv4*MP*)
  if test -d /usr/nec ;then
    version_type=linux
    library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'
    soname_spec='$libname${shared_ext}.$major'
    shlibpath_var=LD_LIBRARY_PATH
  fi
  ;;

sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
  version_type=freebsd-elf
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  if test "$with_gnu_ld" = yes; then
    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
    shlibpath_overrides_runpath=no
  else
    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
    shlibpath_overrides_runpath=yes
    case $host_os in
      sco3.2v5*)
        sys_lib_search_path_spec="$sys_lib_search_path_spec /lib"
	;;
    esac
  fi
  sys_lib_dlsearch_path_spec='/usr/lib'
  ;;

uts4*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*)
  dynamic_linker=no
  ;;
esac
echo "$ac_t""$dynamic_linker" 1>&6
test "$dynamic_linker" = no && can_build_shared=no

if eval "test \"`echo '$''{'lt_cv_sys_lib_search_path_spec'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
fi

sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
if eval "test \"`echo '$''{'lt_cv_sys_lib_dlsearch_path_spec'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
fi

sys_lib_dlsearch_path_spec="$lt_cv_sys_lib_dlsearch_path_spec"

variables_saved_for_relink="PATH $shlibpath_var $runpath_var"
if test "$GCC" = yes; then
  variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
fi

echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
echo "configure:115574: checking how to hardcode library paths into programs" >&5
hardcode_action_CXX=
if test -n "$hardcode_libdir_flag_spec_CXX" || \
   test -n "$runpath_var_CXX" || \
   test "X$hardcode_automatic_CXX" = "Xyes" ; then

  # We can hardcode non-existant directories.
  if test "$hardcode_direct_CXX" != no &&
     # If the only mechanism to avoid hardcoding is shlibpath_var, we
     # have to relink, otherwise we might link with an installed library
     # when we should be linking with a yet-to-be-installed one
     ## test "$_LT_AC_TAGVAR(hardcode_shlibpath_var, CXX)" != no &&
     test "$hardcode_minus_L_CXX" != no; then
    # Linking always hardcodes the temporary library directory.
    hardcode_action_CXX=relink
  else
    # We can link without hardcoding, and we can hardcode nonexisting dirs.
    hardcode_action_CXX=immediate
  fi
else
  # We cannot hardcode anything, or else we can only hardcode existing
  # directories.
  hardcode_action_CXX=unsupported
fi
echo "$ac_t""$hardcode_action_CXX" 1>&6

if test "$hardcode_action_CXX" = relink; then
  # Fast installation is not supported
  enable_fast_install=no
elif test "$shlibpath_overrides_runpath" = yes ||
     test "$enable_shared" = no; then
  # Fast installation is not necessary
  enable_fast_install=needless
fi


# The else clause should only fire when bootstrapping the
# libtool distribution, otherwise you forgot to ship ltmain.sh
# with your package, and you will get complaints that there are
# no rules to generate ltmain.sh.
if test -f "$ltmain"; then
  # See if we are running on zsh, and set the options which allow our commands through
  # without removal of \ escapes.
  if test -n "${ZSH_VERSION+set}" ; then
    setopt NO_GLOB_SUBST
  fi
  # Now quote all the things that may contain metacharacters while being
  # careful not to overquote the AC_SUBSTed values.  We take copies of the
  # variables and quote the copies for generation of the libtool script.
  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
    SED SHELL STRIP \
    libname_spec library_names_spec soname_spec extract_expsyms_cmds \
    old_striplib striplib file_magic_cmd finish_cmds finish_eval \
    deplibs_check_method reload_flag reload_cmds need_locks \
    lt_cv_sys_global_symbol_pipe lt_cv_sys_global_symbol_to_cdecl \
    lt_cv_sys_global_symbol_to_c_name_address \
    sys_lib_search_path_spec sys_lib_dlsearch_path_spec \
    old_postinstall_cmds old_postuninstall_cmds \
    compiler_CXX \
    CC_CXX \
    LD_CXX \
    lt_prog_compiler_wl_CXX \
    lt_prog_compiler_pic_CXX \
    lt_prog_compiler_static_CXX \
    lt_prog_compiler_no_builtin_flag_CXX \
    export_dynamic_flag_spec_CXX \
    thread_safe_flag_spec_CXX \
    whole_archive_flag_spec_CXX \
    enable_shared_with_static_runtimes_CXX \
    old_archive_cmds_CXX \
    old_archive_from_new_cmds_CXX \
    predep_objects_CXX \
    postdep_objects_CXX \
    predeps_CXX \
    postdeps_CXX \
    compiler_lib_search_path_CXX \
    compiler_lib_search_dirs_CXX \
    archive_cmds_CXX \
    archive_expsym_cmds_CXX \
    postinstall_cmds_CXX \
    postuninstall_cmds_CXX \
    old_archive_from_expsyms_cmds_CXX \
    allow_undefined_flag_CXX \
    no_undefined_flag_CXX \
    export_symbols_cmds_CXX \
    hardcode_libdir_flag_spec_CXX \
    hardcode_libdir_flag_spec_ld_CXX \
    hardcode_libdir_separator_CXX \
    hardcode_automatic_CXX \
    module_cmds_CXX \
    module_expsym_cmds_CXX \
    lt_cv_prog_compiler_c_o_CXX \
    fix_srcfile_path_CXX \
    exclude_expsyms_CXX \
    include_expsyms_CXX; do

    case $var in
    old_archive_cmds_CXX | \
    old_archive_from_new_cmds_CXX | \
    archive_cmds_CXX | \
    archive_expsym_cmds_CXX | \
    module_cmds_CXX | \
    module_expsym_cmds_CXX | \
    old_archive_from_expsyms_cmds_CXX | \
    export_symbols_cmds_CXX | \
    extract_expsyms_cmds | reload_cmds | finish_cmds | \
    postinstall_cmds | postuninstall_cmds | \
    old_postinstall_cmds | old_postuninstall_cmds | \
    sys_lib_search_path_spec | sys_lib_dlsearch_path_spec)
      # Double-quote double-evaled strings.
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$double_quote_subst\" -e \"\$sed_quote_subst\" -e \"\$delay_variable_subst\"\`\\\""
      ;;
    *)
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$sed_quote_subst\"\`\\\""
      ;;
    esac
  done

  case $lt_echo in
  *'\$0 --fallback-echo"')
    lt_echo=`$echo "X$lt_echo" | $Xsed -e 's/\\\\\\\$0 --fallback-echo"$/$0 --fallback-echo"/'`
    ;;
  esac

cfgfile="$ofile"

  cat <<__EOF__ >> "$cfgfile"
# ### BEGIN LIBTOOL TAG CONFIG: $tagname

# Libtool was configured on host `(hostname || uname -n) 2>/dev/null | sed 1q`:

# Shell to use when invoking shell scripts.
SHELL=$lt_SHELL

# Whether or not to build shared libraries.
build_libtool_libs=$enable_shared

# Whether or not to build static libraries.
build_old_libs=$enable_static

# Whether or not to add -lc for building shared libraries.
build_libtool_need_lc=$archive_cmds_need_lc_CXX

# Whether or not to disallow shared libs when runtime libs are static
allow_libtool_libs_with_static_runtimes=$enable_shared_with_static_runtimes_CXX

# Whether or not to optimize for fast installation.
fast_install=$enable_fast_install

# The host system.
host_alias=$host_alias
host=$host
host_os=$host_os

# The build system.
build_alias=$build_alias
build=$build
build_os=$build_os

# An echo program that does not interpret backslashes.
echo=$lt_echo

# The archiver.
AR=$lt_AR
AR_FLAGS=$lt_AR_FLAGS

# A C compiler.
LTCC=$lt_LTCC

# LTCC compiler flags.
LTCFLAGS=$lt_LTCFLAGS

# A language-specific compiler.
CC=$lt_compiler_CXX

# Is the compiler the GNU C compiler?
with_gcc=$GCC_CXX

# An ERE matcher.
EGREP=$lt_EGREP

# The linker used to build libraries.
LD=$lt_LD_CXX

# Whether we need hard or soft links.
LN_S=$lt_LN_S

# A BSD-compatible nm program.
NM=$lt_NM

# A symbol stripping program
STRIP=$lt_STRIP

# Used to examine libraries when file_magic_cmd begins "file"
MAGIC_CMD=$MAGIC_CMD

# Used on cygwin: DLL creation program.
DLLTOOL="$DLLTOOL"

# Used on cygwin: object dumper.
OBJDUMP="$OBJDUMP"

# Used on cygwin: assembler.
AS="$AS"

# The name of the directory that contains temporary libtool files.
objdir=$objdir

# How to create reloadable object files.
reload_flag=$lt_reload_flag
reload_cmds=$lt_reload_cmds

# How to pass a linker flag through the compiler.
wl=$lt_lt_prog_compiler_wl_CXX

# Object file suffix (normally "o").
objext="$ac_objext"

# Old archive suffix (normally "a").
libext="$libext"

# Shared library suffix (normally ".so").
shrext_cmds='$shrext_cmds'

# Executable file suffix (normally "").
exeext="$exeext"

# Additional compiler flags for building library objects.
pic_flag=$lt_lt_prog_compiler_pic_CXX
pic_mode=$pic_mode

# What is the maximum length of a command?
max_cmd_len=$lt_cv_sys_max_cmd_len

# Does compiler simultaneously support -c and -o options?
compiler_c_o=$lt_lt_cv_prog_compiler_c_o_CXX

# Must we lock files when doing compilation?
need_locks=$lt_need_locks

# Do we need the lib prefix for modules?
need_lib_prefix=$need_lib_prefix

# Do we need a version for libraries?
need_version=$need_version

# Whether dlopen is supported.
dlopen_support=$enable_dlopen

# Whether dlopen of programs is supported.
dlopen_self=$enable_dlopen_self

# Whether dlopen of statically linked programs is supported.
dlopen_self_static=$enable_dlopen_self_static

# Compiler flag to prevent dynamic linking.
link_static_flag=$lt_lt_prog_compiler_static_CXX

# Compiler flag to turn off builtin functions.
no_builtin_flag=$lt_lt_prog_compiler_no_builtin_flag_CXX

# Compiler flag to allow reflexive dlopens.
export_dynamic_flag_spec=$lt_export_dynamic_flag_spec_CXX

# Compiler flag to generate shared objects directly from archives.
whole_archive_flag_spec=$lt_whole_archive_flag_spec_CXX

# Compiler flag to generate thread-safe objects.
thread_safe_flag_spec=$lt_thread_safe_flag_spec_CXX

# Library versioning type.
version_type=$version_type

# Format of library name prefix.
libname_spec=$lt_libname_spec

# List of archive names.  First name is the real one, the rest are links.
# The last name is the one that the linker finds with -lNAME.
library_names_spec=$lt_library_names_spec

# The coded name of the library, if different from the real name.
soname_spec=$lt_soname_spec

# Commands used to build and install an old-style archive.
RANLIB=$lt_RANLIB
old_archive_cmds=$lt_old_archive_cmds_CXX
old_postinstall_cmds=$lt_old_postinstall_cmds
old_postuninstall_cmds=$lt_old_postuninstall_cmds

# Create an old-style archive from a shared archive.
old_archive_from_new_cmds=$lt_old_archive_from_new_cmds_CXX

# Create a temporary old-style archive to link instead of a shared archive.
old_archive_from_expsyms_cmds=$lt_old_archive_from_expsyms_cmds_CXX

# Commands used to build and install a shared archive.
archive_cmds=$lt_archive_cmds_CXX
archive_expsym_cmds=$lt_archive_expsym_cmds_CXX
postinstall_cmds=$lt_postinstall_cmds
postuninstall_cmds=$lt_postuninstall_cmds

# Commands used to build a loadable module (assumed same as above if empty)
module_cmds=$lt_module_cmds_CXX
module_expsym_cmds=$lt_module_expsym_cmds_CXX

# Commands to strip libraries.
old_striplib=$lt_old_striplib
striplib=$lt_striplib

# Dependencies to place before the objects being linked to create a
# shared library.
predep_objects=$lt_predep_objects_CXX

# Dependencies to place after the objects being linked to create a
# shared library.
postdep_objects=$lt_postdep_objects_CXX

# Dependencies to place before the objects being linked to create a
# shared library.
predeps=$lt_predeps_CXX

# Dependencies to place after the objects being linked to create a
# shared library.
postdeps=$lt_postdeps_CXX

# The directories searched by this compiler when creating a shared
# library
compiler_lib_search_dirs=$lt_compiler_lib_search_dirs_CXX

# The library search path used internally by the compiler when linking
# a shared library.
compiler_lib_search_path=$lt_compiler_lib_search_path_CXX

# Method to check whether dependent libraries are shared objects.
deplibs_check_method=$lt_deplibs_check_method

# Command to use when deplibs_check_method == file_magic.
file_magic_cmd=$lt_file_magic_cmd

# Flag that allows shared libraries with undefined symbols to be built.
allow_undefined_flag=$lt_allow_undefined_flag_CXX

# Flag that forces no undefined symbols.
no_undefined_flag=$lt_no_undefined_flag_CXX

# Commands used to finish a libtool library installation in a directory.
finish_cmds=$lt_finish_cmds

# Same as above, but a single script fragment to be evaled but not shown.
finish_eval=$lt_finish_eval

# Take the output of nm and produce a listing of raw symbols and C names.
global_symbol_pipe=$lt_lt_cv_sys_global_symbol_pipe

# Transform the output of nm in a proper C declaration
global_symbol_to_cdecl=$lt_lt_cv_sys_global_symbol_to_cdecl

# Transform the output of nm in a C name address pair
global_symbol_to_c_name_address=$lt_lt_cv_sys_global_symbol_to_c_name_address

# This is the shared library runtime path variable.
runpath_var=$runpath_var

# This is the shared library path variable.
shlibpath_var=$shlibpath_var

# Is shlibpath searched before the hard-coded library search path?
shlibpath_overrides_runpath=$shlibpath_overrides_runpath

# How to hardcode a shared library path into an executable.
hardcode_action=$hardcode_action_CXX

# Whether we should hardcode library paths into libraries.
hardcode_into_libs=$hardcode_into_libs

# Flag to hardcode \$libdir into a binary during linking.
# This must work even if \$libdir does not exist.
hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec_CXX

# If ld is used when linking, flag to hardcode \$libdir into
# a binary during linking. This must work even if \$libdir does
# not exist.
hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld_CXX

# Whether we need a single -rpath flag with a separated argument.
hardcode_libdir_separator=$lt_hardcode_libdir_separator_CXX

# Set to yes if using DIR/libNAME${shared_ext} during linking hardcodes DIR into the
# resulting binary.
hardcode_direct=$hardcode_direct_CXX

# Set to yes if using the -LDIR flag during linking hardcodes DIR into the
# resulting binary.
hardcode_minus_L=$hardcode_minus_L_CXX

# Set to yes if using SHLIBPATH_VAR=DIR during linking hardcodes DIR into
# the resulting binary.
hardcode_shlibpath_var=$hardcode_shlibpath_var_CXX

# Set to yes if building a shared library automatically hardcodes DIR into the library
# and all subsequent libraries and executables linked against it.
hardcode_automatic=$hardcode_automatic_CXX

# Variables whose values should be saved in libtool wrapper scripts and
# restored at relink time.
variables_saved_for_relink="$variables_saved_for_relink"

# Whether libtool must link a program against all its dependency libraries.
link_all_deplibs=$link_all_deplibs_CXX

# Compile-time system search path for libraries
sys_lib_search_path_spec=$lt_sys_lib_search_path_spec

# Run-time system search path for libraries
sys_lib_dlsearch_path_spec=$lt_sys_lib_dlsearch_path_spec

# Fix the shell variable \$srcfile for the compiler.
fix_srcfile_path=$lt_fix_srcfile_path

# Set to yes if exported symbols are required.
always_export_symbols=$always_export_symbols_CXX

# The commands to list exported symbols.
export_symbols_cmds=$lt_export_symbols_cmds_CXX

# The commands to extract the exported symbol list from a shared archive.
extract_expsyms_cmds=$lt_extract_expsyms_cmds

# Symbols that should not be listed in the preloaded symbols.
exclude_expsyms=$lt_exclude_expsyms_CXX

# Symbols that must always be exported.
include_expsyms=$lt_include_expsyms_CXX

# ### END LIBTOOL TAG CONFIG: $tagname

__EOF__


else
  # If there is no Makefile yet, we rely on a make rule to execute
  # `config.status --recheck' to rerun these tests and create the
  # libtool script then.
  ltmain_in=`echo $ltmain | sed -e 's/\.sh$/.in/'`
  if test -f "$ltmain_in"; then
    test -f Makefile && make "$ltmain"
  fi
fi


ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

CC=$lt_save_CC
LDCXX=$LD
LD=$lt_save_LD
GCC=$lt_save_GCC
with_gnu_ldcxx=$with_gnu_ld
with_gnu_ld=$lt_save_with_gnu_ld
lt_cv_path_LDCXX=$lt_cv_path_LD
lt_cv_path_LD=$lt_save_path_LD
lt_cv_prog_gnu_ldcxx=$lt_cv_prog_gnu_ld
lt_cv_prog_gnu_ld=$lt_save_with_gnu_ld

	else
	  tagname=""
	fi
	;;

      *)
	{ echo "configure: error: Unsupported tag name: $tagname" 1>&2; exit 1; }
	;;
      esac

      # Append the new tag name to the list of available tags.
      if test -n "$tagname" ; then
      available_tags="$available_tags $tagname"
    fi
    fi
  done
  IFS="$lt_save_ifs"

  # Now substitute the updated list of available tags.
  if eval "sed -e 's/^available_tags=.*\$/available_tags=\"$available_tags\"/' \"$ofile\" > \"${ofile}T\""; then
    mv "${ofile}T" "$ofile"
    chmod +x "$ofile"
  else
    rm -f "${ofile}T"
    { echo "configure: error: unable to update list of available tagged configurations." 1>&2; exit 1; }
  fi
fi



# This can be used to rebuild libtool when needed
LIBTOOL_DEPS="$ac_aux_dir/ltmain.sh"

# Always use our own libtool.
LIBTOOL='$(SHELL) $(top_builddir)/libtool'

# Prevent multiple expansion







  



if test "$enable_debug" != "yes"; then
  
  if test -z "$LIBTOOL"; then
    LIBTOOL='$(SHELL) $(top_builddir)/libtool --silent'
  else
    LIBTOOL="$LIBTOOL --silent"
  fi

fi


  if test -z "$LIBTOOL"; then
    LIBTOOL='$(SHELL) $(top_builddir)/libtool --preserve-dup-deps'
  else
    LIBTOOL="$LIBTOOL --preserve-dup-deps"
  fi


test -z "$PHP_COMPILE" && PHP_COMPILE='$(LIBTOOL) --mode=compile $(COMPILE) -c $<'
test -z "$CXX_PHP_COMPILE" && CXX_PHP_COMPILE='$(LIBTOOL) --mode=compile $(CXX_COMPILE) -c $<'
SHARED_LIBTOOL='$(LIBTOOL)'

CC=$old_CC


  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Generating files${T_ME}" 1>&6


CXXFLAGS_CLEAN=$CXXFLAGS
CFLAGS_CLEAN=$CFLAGS
CFLAGS="\$(CFLAGS_CLEAN) $standard_libtool_flag"
INLINE_CFLAGS="$INLINE_CFLAGS $standard_libtool_flag"
CXXFLAGS="$CXXFLAGS $standard_libtool_flag"

if test "$PHP_PHAR" != "no" && test "$PHP_CLI" != "no"; then
  pharcmd=pharcmd
  pharcmd_install=install-pharcmd
else
  pharcmd=
  pharcmd_install=
fi;

all_targets="$lcov_target \$(OVERALL_TARGET) \$(PHP_MODULES) \$(PHP_ZEND_EX) \$(PHP_CLI_TARGET) $pharcmd"
install_targets="$install_modules install-build install-headers install-programs $install_pear $pharcmd_install"

case $PHP_SAPI in
  cli)
    install_targets="$PHP_INSTALL_CLI_TARGET $install_targets"
    ;;
  *)
    install_targets="install-sapi $PHP_INSTALL_CLI_TARGET $install_targets"
    ;;
esac


  PHP_VAR_SUBST="$PHP_VAR_SUBST all_targets"


  PHP_VAR_SUBST="$PHP_VAR_SUBST install_targets"



  
    for header_file in Zend/ TSRM/ include/ main/ main/streams/; do
      
  
  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"
    
        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
      
  fi

    done 
  



  
  case TSRM in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "TSRM"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/TSRM/"; ac_bdir="TSRM/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in TSRM.c tsrm_strtok_r.c tsrm_virtual_cwd.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  
  case main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/main/"; ac_bdir="main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in main.c snprintf.c spprintf.c php_sprintf.c \
       safe_mode.c fopen_wrappers.c alloca.c  php_scandir.c \
       php_ini.c SAPI.c rfc1867.c php_content_types.c strlcpy.c \
       strlcat.c mergesort.c reentrancy.c php_variables.c php_ticks.c \
       network.c php_open_temporary_file.c php_logos.c \
       output.c getopt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  
  case main/streams in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "main/streams"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/main/streams/"; ac_bdir="main/streams/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in streams.c cast.c memory.c filter.c \
       plain_wrapper.c userspace.c transports.c xp_socket.c mmap.c \
       glob_wrapper.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  
  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



case $host_alias in
  *netware*)
    
  
    BUILD_DIR="$BUILD_DIR win32"
  

    
  
    BUILD_DIR="$BUILD_DIR netware"
  

    ;;
  *)
    
  
  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions_cli.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    ;;
esac


  
  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in \
    zend_language_parser.c zend_language_scanner.c \
    zend_ini_parser.c zend_ini_scanner.c \
    zend_alloc.c zend_compile.c zend_constants.c zend_dynamic_array.c \
    zend_execute_API.c zend_highlight.c zend_llist.c \
    zend_opcode.c zend_operators.c zend_ptr_stack.c zend_stack.c \
    zend_variables.c zend.c zend_API.c zend_extensions.c zend_hash.c \
    zend_list.c zend_indent.c zend_builtin_functions.c zend_sprintf.c \
    zend_ini.c zend_qsort.c zend_multibyte.c zend_ts_hash.c zend_stream.c \
    zend_iterators.c zend_interfaces.c zend_exceptions.c zend_strtod.c zend_gc.c \
    zend_closures.c zend_float.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



if test -r "$abs_srcdir/Zend/zend_objects.c"; then
  
  
  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zend_objects.c zend_object_handlers.c zend_objects_API.c zend_default_classes.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


fi

if test -n "$GCC" && test "$ZEND_INLINE_OPTIMIZATION" != "yes"; then
  flag=-O0
else
  flag=
fi


  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zend_execute.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  
    BUILD_DIR="$BUILD_DIR main main/streams"
  


  
    BUILD_DIR="$BUILD_DIR sapi/$PHP_SAPI sapi/cli"
  


  
    BUILD_DIR="$BUILD_DIR TSRM"
  


  
    BUILD_DIR="$BUILD_DIR Zend"
  



  src=$abs_srcdir/scripts/Makefile.frag
  ac_srcdir=$abs_srcdir/scripts
  ac_builddir=scripts
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  src=$abs_srcdir/Makefile.frag
  ac_srcdir=$abs_srcdir/Zend
  ac_builddir=Zend
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  src=$abs_srcdir/Zend/Makefile.frag
  ac_srcdir=$abs_srcdir/Zend
  ac_builddir=Zend
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments



  $php_shtool mkdir -p $BUILD_DIR


  cat >Makefile <<EOF
srcdir = $abs_srcdir
builddir = $abs_builddir
top_srcdir = $abs_srcdir
top_builddir = $abs_builddir
EOF
  for i in $PHP_VAR_SUBST; do
    eval echo "$i = \$$i" >> Makefile
  done

  cat $abs_srcdir/Makefile.global Makefile.fragments Makefile.objects >> Makefile


cat >> confdefs.h <<\EOF
#define HAVE_BUILD_DEFS_H 1
EOF


$php_shtool mkdir -p pear/scripts
$php_shtool mkdir -p scripts
$php_shtool mkdir -p scripts/man1

ALL_OUTPUT_FILES="php5.spec main/build-defs.h \
scripts/phpize scripts/man1/phpize.1 \
scripts/php-config scripts/man1/php-config.1 \
$PHP_OUTPUT_FILES"


  for arg in $ac_configure_args; do
    case $arg in
      --with-*)
        arg_name="`echo $arg | $SED -e 's/--with-/with-/g' -e 's/=.*//g'`"
        ;;
      --without-*)
        arg_name="`echo $arg | $SED -e 's/--without-/with-/g' -e 's/=.*//g'`"
        ;;
      --enable-*)
        arg_name="`echo $arg | $SED -e 's/--enable-/enable-/g' -e 's/=.*//g'`"
        ;;
      --disable-*)
        arg_name="`echo $arg | $SED -e 's/--disable-/enable-/g' -e 's/=.*//g'`"
        ;;
      *)
        continue
        ;;
    esac
    case $arg_name in
      # Allow --disable-all / --enable-all
      enable-all);;

      # Allow certain libtool options
      enable-libtool-lock | with-pic | with-tags | enable-shared | enable-static | enable-fast-install | with-gnu-ld);;

      # Allow certain TSRM options
      with-tsrm-pth | with-tsrm-st | with-tsrm-pthreads);;

      # Allow certain Zend options
      with-zend-vm | enable-maintainer-zts | enable-inline-optimization);;

      # All the rest must be set using the PHP_ARG_* macros
      # PHP_ARG_* macros set php_enable_<arg_name> or php_with_<arg_name>
      *)
        # Options that exist before PHP 6
        if test "$PHP_MAJOR_VERSION" -lt "6"; then
          case $arg_name in
            enable-zend-multibyte) continue;;
          esac 
        fi

        is_arg_set=php_`echo $arg_name | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ-' 'abcdefghijklmnopqrstuvwxyz_'`
        if eval test "x\$$is_arg_set" = "x"; then
          PHP_UNKNOWN_CONFIGURE_OPTIONS="$PHP_UNKNOWN_CONFIGURE_OPTIONS
$arg"
        fi
        ;;
    esac
  done


trap '' 1 2 15
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.13"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir

trap 'rm -fr `echo "$ALL_OUTPUT_FILES main/php_config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@SHELL@%$SHELL%g
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@FFLAGS@%$FFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@EGREP@%$EGREP%g
s%@SED@%$SED%g
s%@CONFIGURE_COMMAND@%$CONFIGURE_COMMAND%g
s%@CONFIGURE_OPTIONS@%$CONFIGURE_OPTIONS%g
s%@host@%$host%g
s%@host_alias@%$host_alias%g
s%@host_cpu@%$host_cpu%g
s%@host_vendor@%$host_vendor%g
s%@host_os@%$host_os%g
s%@target@%$target%g
s%@target_alias@%$target_alias%g
s%@target_cpu@%$target_cpu%g
s%@target_vendor@%$target_vendor%g
s%@target_os@%$target_os%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@LN_S@%$LN_S%g
s%@AWK@%$AWK%g
s%@YACC@%$YACC%g
s%@RE2C@%$RE2C%g
s%@SHLIB_SUFFIX_NAME@%$SHLIB_SUFFIX_NAME%g
s%@SHLIB_DL_SUFFIX_NAME@%$SHLIB_DL_SUFFIX_NAME%g
s%@php_fpm_user@%$php_fpm_user%g
s%@php_fpm_group@%$php_fpm_group%g
s%@php_fpm_sysconfdir@%$php_fpm_sysconfdir%g
s%@php_fpm_localstatedir@%$php_fpm_localstatedir%g
s%@php_fpm_prefix@%$php_fpm_prefix%g
s%@PROG_SENDMAIL@%$PROG_SENDMAIL%g
s%@LIBOBJS@%$LIBOBJS%g
s%@ALLOCA@%$ALLOCA%g
s%@LTP@%$LTP%g
s%@LTP_GENHTML@%$LTP_GENHTML%g
s%@KRB5_CONFIG@%$KRB5_CONFIG%g
s%@PKG_CONFIG@%$PKG_CONFIG%g
s%@OPENSSL_INCDIR_OPT@%$OPENSSL_INCDIR_OPT%g
s%@ICU_CONFIG@%$ICU_CONFIG%g
s%@CXX@%$CXX%g
s%@CXXCPP@%$CXXCPP%g
s%@MYSQL_MODULE_TYPE@%$MYSQL_MODULE_TYPE%g
s%@MYSQL_LIBS@%$MYSQL_LIBS%g
s%@MYSQL_INCLUDE@%$MYSQL_INCLUDE%g
s%@OCI8_SHARED_LIBADD@%$OCI8_SHARED_LIBADD%g
s%@OCI8_DIR@%$OCI8_DIR%g
s%@OCI8_ORACLE_VERSION@%$OCI8_ORACLE_VERSION%g
s%@ODBC_INCLUDE@%$ODBC_INCLUDE%g
s%@ODBC_LIBS@%$ODBC_LIBS%g
s%@ODBC_LFLAGS@%$ODBC_LFLAGS%g
s%@ODBC_TYPE@%$ODBC_TYPE%g
s%@PDO_MYSQL_MODULE_TYPE@%$PDO_MYSQL_MODULE_TYPE%g
s%@PDO_OCI_SHARED_LIBADD@%$PDO_OCI_SHARED_LIBADD%g
s%@PDO_OCI_DIR@%$PDO_OCI_DIR%g
s%@PDO_OCI_VERSION@%$PDO_OCI_VERSION%g
s%@SNMP_CONFIG@%$SNMP_CONFIG%g
s%@LEMON@%$LEMON%g
s%@RANLIB@%$RANLIB%g
s%@INLINE_CFLAGS@%$INLINE_CFLAGS%g
s%@INCLUDE_PATH@%$INCLUDE_PATH%g
s%@EXPANDED_PEAR_INSTALLDIR@%$EXPANDED_PEAR_INSTALLDIR%g
s%@EXPANDED_EXTENSION_DIR@%$EXPANDED_EXTENSION_DIR%g
s%@EXPANDED_BINDIR@%$EXPANDED_BINDIR%g
s%@EXPANDED_SBINDIR@%$EXPANDED_SBINDIR%g
s%@EXPANDED_MANDIR@%$EXPANDED_MANDIR%g
s%@EXPANDED_LIBDIR@%$EXPANDED_LIBDIR%g
s%@EXPANDED_DATADIR@%$EXPANDED_DATADIR%g
s%@EXPANDED_SYSCONFDIR@%$EXPANDED_SYSCONFDIR%g
s%@EXPANDED_LOCALSTATEDIR@%$EXPANDED_LOCALSTATEDIR%g
s%@EXPANDED_PHP_CONFIG_FILE_PATH@%$EXPANDED_PHP_CONFIG_FILE_PATH%g
s%@EXPANDED_PHP_CONFIG_FILE_SCAN_DIR@%$EXPANDED_PHP_CONFIG_FILE_SCAN_DIR%g
s%@PHP_INSTALLED_SAPIS@%$PHP_INSTALLED_SAPIS%g
s%@abs_builddir@%$abs_builddir%g
s%@abs_srcdir@%$abs_srcdir%g
s%@php_abs_top_builddir@%$php_abs_top_builddir%g
s%@php_abs_top_srcdir@%$php_abs_top_srcdir%g
s%@program_prefix@%$program_prefix%g
s%@program_suffix@%$program_suffix%g
s%@DEBUG_CFLAGS@%$DEBUG_CFLAGS%g
s%@EXTENSION_DIR@%$EXTENSION_DIR%g
s%@EXTRA_LDFLAGS@%$EXTRA_LDFLAGS%g
s%@EXTRA_LDFLAGS_PROGRAM@%$EXTRA_LDFLAGS_PROGRAM%g
s%@EXTRA_LIBS@%$EXTRA_LIBS%g
s%@ZEND_EXTRA_LIBS@%$ZEND_EXTRA_LIBS%g
s%@INCLUDES@%$INCLUDES%g
s%@EXTRA_INCLUDES@%$EXTRA_INCLUDES%g
s%@INSTALL_IT@%$INSTALL_IT%g
s%@NATIVE_RPATHS@%$NATIVE_RPATHS%g
s%@PEAR_INSTALLDIR@%$PEAR_INSTALLDIR%g
s%@PHP_LDFLAGS@%$PHP_LDFLAGS%g
s%@PHP_LIBS@%$PHP_LIBS%g
s%@PHP_VERSION@%$PHP_VERSION%g
s%@PHP_VERSION_ID@%$PHP_VERSION_ID%g
s%@build@%$build%g
s%@build_alias@%$build_alias%g
s%@build_cpu@%$build_cpu%g
s%@build_vendor@%$build_vendor%g
s%@build_os@%$build_os%g
s%@OBJEXT@%$OBJEXT%g
s%@EXEEXT@%$EXEEXT%g
s%@ECHO@%$ECHO%g
s%@AR@%$AR%g
s%@STRIP@%$STRIP%g
s%@DSYMUTIL@%$DSYMUTIL%g
s%@NMEDIT@%$NMEDIT%g
s%@LIBTOOL@%$LIBTOOL%g

CEOF
EOF

cat >> $CONFIG_STATUS <<\EOF

# Split the substitutions into bite-sized pieces for seds with
# small command number limits, like on Digital OSF/1 and HP-UX.
ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
ac_file=1 # Number of current file.
ac_beg=1 # First line for current file.
ac_end=$ac_max_sed_cmds # Line after last line for current file.
ac_more_lines=:
ac_sed_cmds=""
while $ac_more_lines; do
  if test $ac_beg -gt 1; then
    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
  else
    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
  fi
  if test ! -s conftest.s$ac_file; then
    ac_more_lines=false
    rm -f conftest.s$ac_file
  else
    if test -z "$ac_sed_cmds"; then
      ac_sed_cmds="sed -f conftest.s$ac_file"
    else
      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
    fi
    ac_file=`expr $ac_file + 1`
    ac_beg=$ac_end
    ac_end=`expr $ac_end + $ac_max_sed_cmds`
  fi
done
if test -z "$ac_sed_cmds"; then
  ac_sed_cmds=cat
fi
EOF

cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$ALL_OUTPUT_FILES"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac


  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
fi; done
rm -f conftest.s*

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

if test "${CONFIG_HEADERS+set}" != set; then
EOF
cat >> $CONFIG_STATUS <<EOF
  CONFIG_HEADERS="main/php_config.h"
EOF
cat >> $CONFIG_STATUS <<\EOF
fi
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  cat $ac_file_inputs > conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done

EOF
cat >> $CONFIG_STATUS <<EOF


if test "\$CONFIG_FILES" = "$ALL_OUTPUT_FILES" || test "\$CONFIG_FILES" = " $ALL_OUTPUT_FILES" || test -z "\$CONFIG_FILES"; then
  REDO_ALL=yes
fi

################################################################
# Create configuration headers
#

test -d TSRM || $php_shtool mkdir TSRM
echo '#include <../main/php_config.h>' > TSRM/tsrm_config.h

test -d Zend || $php_shtool mkdir Zend

cat >Zend/zend_config.h <<FEO
#include <../main/php_config.h>
#if defined(APACHE) && defined(PHP_API_VERSION)
#undef HAVE_DLFCN_H
#endif
FEO

# run this only when generating all the files?
if test -n "\$REDO_ALL"; then
  # Hacking while airborne considered harmful.
  #
  echo "creating main/internal_functions.c"
  extensions="$EXT_STATIC"
  sh $srcdir/build/genif.sh $srcdir/main/internal_functions.c.in $srcdir "$EXTRA_MODULE_PTRS" $AWK \$extensions > main/internal_functions.c

  echo "creating main/internal_functions_cli.c"
  cli_extensions="$EXT_CLI_STATIC"
  sh $srcdir/build/genif.sh $srcdir/main/internal_functions.c.in $srcdir "$EXTRA_MODULE_PTRS" $AWK \$cli_extensions > main/internal_functions_cli.c

  if test "$UNAME" = "FreeBSD" && test "$PHP_SAPI" = "apache2filter" && test "$TSRM_PTH" != "pth-config" ; then
    echo "+--------------------------------------------------------------------+"
    echo "|                        *** WARNING ***                             |"
    echo "|                                                                    |"
    echo "| In order to build PHP as a Apache2 module on FreeBSD, you have to  |"
    echo "| add  --with-tsrm-pth to your ./configure line. Therefore you need  |"
    echo "| to install gnu-pth from /usr/ports/devel/pth.                      |"
  fi

  if test -n "$PHP_APXS_BROKEN"; then
    echo "+--------------------------------------------------------------------+"
    echo "| WARNING: Your $APXS script is most likely broken."
    echo "|                                                                    |"
    echo "| Please go read http://www.php.net/faq.build#faq.build.apxs         |"
    echo "| and make the changes described there and try again.                |"
  fi

  if test -n "$DEBUG_LOG"; then
    rm -f config.cache
cat <<X
+--------------------------------------------------------------------+
|                       *** ATTENTION ***                            |
|                                                                    |
| Something is likely to be messed up here, because the configure    |
| script was not able to detect a simple feature on your platform.   |
| This is often caused by incorrect configuration parameters. Please |
| see the file debug.log for error messages.                         |
|                                                                    |
| If you are unable to fix this, send the file debug.log to the      |
| php-install@lists.php.net mailing list and include appropiate      |
| information about your setup.                                      |
X
  fi

  if test "$PHP_SAPI" = "apache2handler" || test "$PHP_SAPI" = "apache2filter"; then
    if test "$APACHE_VERSION" -ge 2004001; then
      if test -z "$APACHE_THREADED_MPM"; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| You have built PHP for Apache's current non-threaded MPM.          |
| If you change Apache to use a threaded MPM you must reconfigure    |
| PHP with --enable-maintainer-zts                                   |
X
      fi
    fi
  fi

  # Warn about linking Apache with libpthread if oci8 extension is enabled on linux.
  if test "$PHP_OCI8" != "no"; then
    if test "$PHP_SAPI" = "apache"; then
      if test `uname` = "Linux"; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| Please check that your Apache (httpd) is linked with libpthread.   |
| If not, you have to recompile Apache with pthread. For more        |
| details, see this page: http://www.php.net/manual/ref.oci8.php     |
X
      fi
    fi

    if test "$PHP_SIGCHILD" != "yes"; then
      if test "$PHP_OCI8_INSTANT_CLIENT" = "no"; then
cat <<X
+--------------------------------------------------------------------+
| Notice:                                                            |
| If you encounter <defunc> processes when using a local Oracle      |
| database, set the value BEQUEATH_DETACH=YES in Oracle Net's        |
| sqlnet.ora file on the PHP host, or set the environment variable   |
| BEQUEATH_DETACH to YES before starting Apache.  If the problem     |
| still occurs, then recompile PHP and specify --enable-sigchild     |
| when configuring.                                                  |
X
      fi
    fi
  fi

cat <<X
+--------------------------------------------------------------------+
| License:                                                           |
| This software is subject to the PHP License, available in this     |
| distribution in the file LICENSE.  By continuing this installation |
| process, you are bound by the terms of this license agreement.     |
| If you do not agree with the terms of this license, you must abort |
| the installation process at this point.                            |
+--------------------------------------------------------------------+

Thank you for using PHP.

X

  # Output unknown configure options
  if test "$PHP_UNKNOWN_CONFIGURE_OPTIONS"; then
    echo "Notice: Following unknown configure options were used:
$PHP_UNKNOWN_CONFIGURE_OPTIONS

Check '$0 --help' for available options
"
  fi

fi

EOF
cat >> $CONFIG_STATUS <<\EOF

exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1


